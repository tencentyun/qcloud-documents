## 简介

您可以通过对象存储控制台，把一个存储桶设置为托管静态网站，并且通过访问存储桶的访问域名来访问静态网站。关于静态网站的相关说明，请参见 [托管静态网站](https://cloud.tencent.com/document/product/436/32670)。

>!
>- 使用存储桶托管静态网站，您首先需要把存储桶的访问权限设置为**公有读私有写**。
>- 开启静态网站配置后，您需要使用静态网站域名访问 COS 源站才能生效，如果使用 COS 默认域名访问则无静态网站效果。
>

## 前提条件

已创建存储桶，详情请参见 [创建存储桶](https://cloud.tencent.com/document/product/436/13309) 文档。

## 操作步骤

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5)，单击左侧【存储桶列表】菜单栏，单击需要用来托管静态网站的存储桶，进入存储桶详情界面。
2. 单击左侧的【权限管理】>【存储桶访问权限】，在公共权限一栏中，选择**公有读私有写**并保存。
![](https://main.qcloudimg.com/raw/d970ff47e4b463275d10fd9334238e8c.jpg)
3. 单击左侧的【基础配置】，向下找到**静态网站**配置项，单击【编辑】，把【当前状态】的开启按钮打开，然后依次填写静态网站的配置项。
![](https://main.qcloudimg.com/raw/b000c8cdfd757221b16b0ef3a7cbe378.png)
配置说明如下：
 - **强制 HTTPS（可选）**：当您开启强制 HTTPS 后，在用户访问您的静态网站时，静态网站的访问节点会强制使用 HTTPS 协议方式打开。
 >! 如果您通过自定义域名访问静态网站，同时静态网站开启了强制 HTTPS，请确认您已给该自定义域名正确配置相关证书，如果证书异常，则会跳转至默认域名进行访问。
 >
 - **忽略 html 扩展名（可选）**：访问路径为 index 时，会自动匹配 index.html 对象进行返回。
 - **索引文档（必选）**：索引文档即静态网站的首页，是当用户对网站的根目录或任何子目录发出请求时返回的网页，通常此页面被命名为 index.html。
 >! 如果存储桶中创建了文件夹，则需要在每个文件夹层级上都添加索引文档。
 >
 - **错误文档（可选）**：错误文档指访问静态网站出错后返回的页面。该配置项方便您自行定义错误文档。当静态网站无法响应用户的请求时，将返回指定的自定义错误页面。例如您配置了命名为  error.html 的错误文档，当用户访问遇到 HTTP 错误时，页面将返回 error.html 页面，为其提供帮助指引。当您未配置错误文档时，此时用户访问遇到 HTTP 错误，页面将返回默认的错误信息。
 >! 错误文档配置可支持存储桶根目录或子目录下的文件，请使用浏览器可识别的`.html`或`.htm`等格式的文件。若使用了浏览器不可识别的文件，例如`.zip`文件，大部分浏览器将显示错误无法访问或拒绝访问请求。
 >
 - **错误文档响应码**：如有设置错误文档则展示该项。可配置返回错误文档时的 HTTP 响应码为原始错误码或者200。
 - **重定向规则（可选）**：利用重定向规则，您可以根据特定的文件路径、请求中的前缀或者响应代码来按条件重定向请求。
例如，您在存储桶中删除或重命名某个文件。您可以添加一个重定向规则，将访问该文件的请求重定向至其他文件。
    - 错误码：目前重定向规则仅支持对`4xx`错误码（例如 404）进行重定向配置。您可以选择性地自定义错误页面，若用户触发了对应的 HTTP 错误，您可以在该错误页面中为您的用户提供其他指引。
    - 前缀匹配：您可以使用前缀匹配规则对存储桶内的文件或文件夹进行重定向设置。具体示例请参见 [重定向规则示例](https://cloud.tencent.com/document/product/436/32670#.E9.87.8D.E5.AE.9A.E5.90.91.E8.A7.84.E5.88.99)。
4. 设置完成后，单击【保存】即可。


## 新旧版本控制台差异

当前新旧版本控制台的存储桶域名有所差别，以广州地域为例，新版本控制台的存储桶地域简称为 ap-guangzhou，旧版本存储桶则是 cosgz。有关域名详情请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224)。

由于存储桶域名存在差异，您在使用静态网站功能时，新旧版本的静态网站访问节点同样存在差异，以成都地域的存储桶为例：
- 如果您使用的是 V5 控制台，则您的静态网站访问节点格式为：`https://<BucketName-APPID>.cos-website.ap-chengdu.myqcloud.com`
- 如果您使用的是 V4 控制台，则您的静态网站访问节点格式为：`https://<BucketName>.cos-website.coscd.myqcloud.com`

如果您在旧版控制台上设置过静态网站功能，后面升级到新版控制台后，您可以在新版控制台上进行查看，如下图所示，您可以在**历史版本静态网站**栏，单击【点此加载】即可。
<img src="https://main.qcloudimg.com/raw/dd6065f9cf4e8ffb1a2aec3be512794b.png" width="40%">
单击加载后，可以看到历史静态网站配置，如下图所示：
<img src="https://main.qcloudimg.com/raw/397c78be413c534f2857fdb2764177aa.png" width="100%">
需要注意的是，历史静态网站配置仅支持查看，无法进行编辑。如需体验新版控制台更加丰富和稳定的功能，我们**推荐**您在新版本控制台上重新配置您的静态网站域名。重新配置前，您需要注意以下事项：
1. 修改旧版本静态网站配置前，请务必检查您是否有业务依赖于旧版本静态网站，如果有则需要进行修改。
2. 将旧版本静态网站配置切换至新版本静态网站配置，您只需要记录旧版本静态网站配置，并删除旧版本静态网站配置，然后再新建一个新版本静态网站配置即可。
3. 如果您有业务依赖于历史版本静态网站域名，则需要在步骤2执行后，修改您业务所使用的静态网站域名为新版本的静态网站域名。

>! 除了域名差异外，新旧版本控制台所调用的 API 也存在差异，我们推荐您使用新版本控制台以及使用新版本 API、工具、SDK，因为这能够让您体验更加丰富和稳定的功能。COS 新版本控制台所调用的操作对象或存储桶的 API 是 XML API，旧版本控制台上调用的则是 JSON API，有关新旧两个版本 API 的差异，请参见 [API 常见问题](https://cloud.tencent.com/document/product/436/30746)。
>
