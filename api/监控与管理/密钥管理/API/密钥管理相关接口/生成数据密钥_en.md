## 1. API Description

This API (GenerateDataKey) is used to generate a key used to encrypt local data.

For more information on KMS API request domain name, see [region and domain name](https://cloud.tencent.com/document/product/573/8922).
> Whenever (including during internal trial) any public network downstream traffic is generated from the use of a public network domain name, a fee is charged. It is strongly recommended that users whose services are on the Tencent Cloud use **private network** domain names, because no fee is charged for the traffic consumed in the private network.

- Some of the input parameters are optional. Default value is used for those not specified.
- All the output parameters are returned to the user when the request is successful; otherwise, at least code, message, and requestId are returned.


## 2. Input Parameters

The following request parameter list only provides API request parameters. Other parameters can be found in [Common Request Parameters](https://cloud.tencent.com/document/product/573/8913).

| Parameter Name | Required | Type | Description |
|---------|---------|---------|---------|
| keyId | Yes | String | Global unique identifier of CMK generated by calling CreateKey. |
| keySpec | No | String | Specify the encryption algorithm used to generate Datakey and Datakey size, such as AES_128 or AES_256. |
| numberOfBytes | No | Int | The length of the generated DataKey. If both NumberOfBytes and KeySpec are specified, refer to the NumberOfBytes. |
| encryptionContext | No | JSON string | JSON string in key/value pair format. If this parameter is specified, the same parameter is provided when Decrypt API is called |


## 3. Output Parameters

| Parameter Name | Type | Description |
|---------|---------|---------|
| code | Int | 0: Successful, others: Error. Specific error codes can be found in the table below. |
| message | String | Error message. |
| requestId | String | Request ID generated by server. When an internal error occurs on the server, users can submit this ID to the backend to locate the problem. |
| keyId | String | Global unique identifier of CMK. |
| plaintext | String | Generated DataKey plaintext. Ciphertext is encoded with Base64. Users need to decode the ciphertext with Base64 to get plaintext. The API GenerateDataKey of KMS SDK has encapsulated Base64 encoding operation which is not required if SDK is used. |
| ciphertextBlob | String | Encrypted The ciphertext after the DataKey is encrypted. |

## 4. Example

Input:

<pre>
https://kms-bj.api.tencentyun.com/v2/index.php?Action=GenerateDataKey
&keyId=kms-345sdfk
&keySpec=AES_256
&<<a href="https://cloud.tencent.com/doc/api/229/6976">Common request parameters</a>>
</pre>

Output:

```
{
"code" : 0,
"message" : "",
"requestId":"14534664555",
"keyId":"kms-345sdfk",
"plaintext":"string",
"ciphertextBlob":"string"
}
```







