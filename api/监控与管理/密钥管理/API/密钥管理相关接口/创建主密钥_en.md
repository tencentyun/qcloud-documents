## 1. API Description

This API (CreateKey) is used to create a custom master key (CMK) used to manage data keys. The CMK can be further used to call other APIs for creation of data keys, encryption and decryption.

A maximum of 1,000 CMKs can be created by each user in each region.

If you want to create more CMKs, submit an ticket for application.

For more information on KMS API request domain name, see [region and domain name](https://cloud.tencent.com/document/product/573/8922).

> Whenever (including during internal trial) any public network downstream traffic is generated from the use of a public network domain name, a fee is charged. It is strongly recommended that users whose services are on the Tencent Cloud use **private network** domain names, because no fee is charged for the traffic consumed in the private network.

- Some of the input parameters are optional. Default value is used for those not specified.
- All the output parameters are returned to the user when the request is successful; otherwise, at least code, message, and requestId are returned.


## 2. Input Parameters

The following request parameter list only provides API request parameters. Other parameters can be found in [Common Request Parameters](https://cloud.tencent.com/document/product/573/8913).

| Parameter Name | Required | Type | Description |
|---------|---------|---------|---------|
| description | No | String | Key description. |
| alias | No | String | An alias that makes the key more identifiable and understandable. It contains 0-32 characters, and can be left empty. |
| keyUsage | No | String | Specified usage of key. Currently, default value is 'ENCRYPT/DECRYPT', that is, the key is used for encryption and decryption. |


## 3. Output Parameters

| Parameter Name | Type | Description |
|---------|---------|---------|
| code | Int | 0: Successful, others: Error. Specific error codes can be found in the table below. |
| message | String | Error message. |
| requestId | String | Request ID generated by server. When an internal error occurs on the server, users can submit this ID to the backend to locate the problem. |
| keyMetadata | Struct | Key information. |

keyMetadata is defined as follows:

| Parameter Name | Type | Description |
|---------|---------|---------|
| keyId | String | Global unique identifier of key. |
| alias | String | An alias that makes the key more identifiable and understandable. |
| createTime | Uint32 | Creation time of key (Timestamp). |
| description | String | Key description. |
| keyState | String | Key status. |
| keyUsage | String | Key usage. |



<table class="t">
<tbody><tr>
<th> <b>Error Code</b>
</th><th> <b>Module Error Code</b>
</th><th> <b>Error Message</b>
</th><th> <b>Description</b>
</th></tr>
<tr>
<td> 4490
</td><td> 10470
</td><td> string of KeyUsage must be ENCRYPT/DECRYPT
</td><td> KeyUsage parameter error. Currently the value can only be ENCRYPT or DECRYPT.
</td></tr>
<tr>
<td> 4500
</td><td> 10480
</td><td> alias is already existed in your account, please input another unique one
</td><td> The alias already exists. Specify another one.
</td></tr>

<tr>
<td> 4510
</td><td> 10610
</td><td> number of CMK in your account has reached the limit
</td><td> The number of CMKs exceeds the limit (200 for each account). When the maximum number is reached, no CMK can be created.
</td></tr>
<tr>
<td> 4520
</td><td> 10620
</td><td> keySpec value error
</td><td> keySpec error.
</td></tr>
</tbody></table>

Note: The error codes listed above are specific to this API. Other error codes not listed here can be found in [Common Error Codes](https://cloud.tencent.com/document/product/573/8919).


## 4. Example

Input:

<pre>
 https://kms-sh.api.tencentyun.com/v2/index.php?Action=CreateKey
 &alias=kms-test-1
 &description=this key is for kms test, and don't delete it
 &keyUsage=ENCRYPT/DECRYPT
 &<<a href="https://cloud.tencent.com/doc/api/229/6976">Common request parameters</a>>
</pre>

Output:

```
{
"code" : 0,
"message" : "",
"requestId":"14534664555",
"keyMetadata": {
"keyId": "kms-94kalsdf",
"alias":"kms-test-1",
"createTime":1483945424,
"description": "this key is for kms test, and don't delete it",
"keyState": "Enabled",
"keyUsage": "ENCRYPT/DECRYPT"
}
```







