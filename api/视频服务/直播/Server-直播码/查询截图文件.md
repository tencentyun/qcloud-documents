# 查询截图文件
## 1.接口描述
**接口：Live_Queue_Get**

**含义：** 用于以消息队列的形式查询直播中的频道新产生的截图文件。

所谓的消息队列形式，是指每产生一个新的截图图片，图片的id和所对应的直播码会以消息的形式塞入一个消息队列中，您可以定时地调用该API，每次调用都可以把最新产生的截图消息取走。。

该API原计划用于取走各种类型的消息，随着通知机制渐渐被客户接受，这种方式并没有太多的拓展出去，目前使用该服务主要用于为截图这种高频事件服务。

**说明：**截图服务非全开放服务，仅为大客户提供接口支持，未开通相关服务前此API调用无效。

## 2.输入参数

| 参数名 | 参数含义 | 类型 | 备注 | 是否必需 |
|---------|---------|---------|---------|---------|
| Param.n.bid   | 消息队列id  | int  | 100：为截图的专属队列id | Y |
| Param.n.count | 一次获取的消息数量 | int   |1~100，默认为1 | N |

## 3.输出结果
| 参数名 | 参数含义 | 类型 | 备注            |
|---------|---------|---------|------------------|
| ret      | 返回码 |   int  |  0:成功；其他值:失败|
| message | 错误信息 |   string  |  错误信息|
| output | 消息内容 |   array  |  详情见下|

其中output的主要内容为：

| 字段名 | 含义 | 类型 | 备注                 |
|---------|---------|---------|------------------|
| count | 数量    |   int      |    |
| data    | 截图URL列表 |   array  | 详情见下  |

其中data部分的主要内容为：

| 字段名 | 含义 | 类型 | 备注                 |
|---------|---------|---------|------------------|
| stream_id | 直播码    |   string      |            |
| pic_url   | 截图URL|   string  |   完整的url为: http://(cos_bucketname)-(cos_appid).file.myqcloud.com/文件名|
| create_time | 截图时间 |   int  |  由于I帧位置原因，并不能精确到秒  |

## 4.示例

| 组成部分 |   示例内容           |
|-------------|------------------|
|接口URL| http://fcgi.video.qcloud.com/common_access?|
|cmd       | 1234 |
|interface       | Live_Queue_Get |
|Param.n.bid | 100 |
|Param.n.count | 10 |
|t |1471850187 |
|sign | b17971b51ba0fe5916ddcd96692e9fb3 |

```
URL = http://fcgi.video.qcloud.com/common_access?
			cmd=1234&interface=Live_Queue_Get
			&Param.n.bid=100
			&Param.n.count=10
			&t=1471850187&sign=b17971b51ba0fe5916ddcd96692e9fb3
```
			
			






