>!
- 增值税发票识别接口全面升级，算法更强、性能更优，支持子账号调用。欢迎立即体验 [新版增值税发票识别](https://cloud.tencent.com/document/product/866/36210)。
- 新老版本的接口计费模式相同，且共享计费阶梯和资源包，您可以在【文字识别控制台】>【[用量统计](https://console.cloud.tencent.com/ocr/stats)】中查看调用情况。
- 老版本接口我们仍继续维护，但不支持新客户开通调用，建议您使用 [新版增值税发票识别](https://cloud.tencent.com/document/product/866/36210)，体验更优服务。
## 接口描述
接口请求域名：`https://recognition.image.myqcloud.com/ocr/invoice`
本接口（invoice）用于识别增值税发票，根据用户上传的图像，返回识别出的发票代码、开票日期等字段。
>?本接口支持 HTTPS 协议，如果您现在使用的是 HTTP 协议，为了保障您的数据安全，请切换至 HTTPS。

## 请求头 header

| 参数名称           | 值                                      | 描述                                       |
| -------------- | -------------------------------------- | ---------------------------------------- |
| host           | recognition.image.myqcloud.com         | 腾讯云智能文字识别服务器域名。                           |
| content-length | 包体总长度                                  | 每次上传的图片大小限制为4MB 以内，不支持 .gif 类型的动图。          |
| authorization  | 鉴权签名                                   | 多次有效签名,用于鉴权，具体生成方式详见 [鉴权签名](https://cloud.tencent.com/document/product/866/17734)。 |


## 输入参数

| 参数名称         | 必选   | 类型     | 描述                                       |
| ------------ | ---- | ------ | ---------------------------------------- |
| appid        | 是    | String | 接入项目的唯一标识，可在 [账号信息](https://console.cloud.tencent.com/developer) 或 [云 API 密钥](https://console.cloud.tencent.com/cam/capi) 中查看。 |
| image        | 否    | String | 图片文件或图片 base64（图片小于4M）。                                |
| url        | 否    | String | 图片文件链接 URL。图片 URL 和 image 同时赋值时，则以 URL 指定的图像作为输入（图片小于4M）。  |


## 输出参数

| 字段         | 类型          | 说明        |
| ---------- | ----------- | ---------- |
| code       | Int         | 返回错误码。      |
| message    | String      | 返回错误消息。     |
| data.angle  |  Float | 图片旋转角度(角度制)，范围[-180°，180°]，顺时针为正，逆时针为负。 |
| data.items | Array(item) | 识别出的所有字段信息。 |

items 说明：

| 字段         | 类型          | 说明                                       |
| ---------- | ----------- | ---------------------------------------- |
| item | String      | 识别出的字段名称（关键字）。                                    |
| itemcoord  | Object      | 字段在图像中的像素坐标，包括左上角坐标 x、y，以及宽 width、高 height。 |
| itemstring | String      | 识别出的字段名称对应的值，即字段 item 对应的字符串结果。                                    |
| itemconf      | Float | 置信度。                            |

## 示例
### 输入示例
```
{
"app_id":"123456",
"image":"SALDKHKAFLASD"
}
```

### 输出示例
```
{
"code": 0,
"message": "OK",
"data": {
 "recognize_warn_msg": [],
 "recognize_warn_code": [],
 "items": [
  {
  "item": "发票名称",
  "itemcoord": {
  "x": 715,
  "y": 446,
  "width": 471,
  "height": 45
  },
  "itemconf": 0.982685148715973,
  "itemstring": "上海增值税普通发票"
  },
  {
  "item": "发票代码",
  "itemcoord": {
  "x": 0,
  "y": 0,
  "width": 0,
  "height": 0
  },
  "itemconf": 0.9998999834060668,
  "itemstring": "143001720660"
  }
 ],
 "class": [],
 "angle": 0
 }
}
```


## 错误码

| 错误码   | 含义       |
| ----- | -------- |
| 400  | 请求不合法，包体格式错误         |
| 401  | 权限验证失败               |
| 403  | 鉴权信息不合法，禁止访问         |
| 404  | 请求失败                 |
| 411  | 请求没有指定 ContentLength |
| 413  | 请求包体太大               |
| 424  | 请求的方法没有找到            |
| 500  | 服务内部错误               |
| 502  | 网关错误，计算后台服务不可用       |
| 503  | 服务不可用                |
| 504  | 后端服务超时或处理失败       |
| -1102 | 图片解码失败   |
| -1300 | 图片为空     |
| -1301 | 参数为空     |
| -1304 | 参数过长     |
| -1308 | URL 图片下载失败     |
| -1320 | AppId 无效     |
| -1400 | 无效的图片格式     |
| -1403 | 图片下载失败     |
| -1408 | 图片超出下载限制     |
| -1505 | 图像请求 URL 的格式错误     |
| -1506 | 图像下载超时     |
| -1507 | 无法连接图像下载服务器     |
| -10001 | 过载保护     |
| -10002 | license 无效     |
| -10003 | 频率限制     |
| -10004 | 无效的服务名称     |
| -10005 | license 中未授权该服务     |
| -5208 | 内部错误     |
| -9003 | OCR 识别失败 |
| -1400 | 模板不匹配     |


