## 选择最优的表类型和分片方式
### 表类型选择
- 数据量大或读写压力大的表，应该选用分片表；
- 数据量不大的表，如果读多写少，应该使用广播表；如果写也不算少，但需要和分片表频繁多行join的，也可以考虑使用广播表；
- 不需要和分片表进行join的中小表，写也比较多，应该选用noshard表；

### 分片字段选择：
- 分片字段必须包含在所有唯一约束内；
- 分片字段应优先选择不同值超过分片数2倍的长度较小的整数字段或char/varchar字符字段；
- 分片字段应优先选择只含有字母和数字的字段；
- 分片字段应优先选择经常出现在where、on条件中的字段；

### 分片函数选择：
- 通常使用hash列散函数作为分片函数，这种情况下负载均衡较为优良，也适合于绝大多数场景；
- range/list分区在部分场景有其优势，也可以考虑合理应用。

## 合理规划二级分区字段和类型
### 二级分区字段选择：
- 分片字段应优先选择经常出现在where、on条件中的字段；
- 分片字段应优先选择长度较小的字段；

### 二级分区函数选择：
- 二级分区函数不能使用hash；【非分片表的partition分区完全兼容MySQL】
- 二级分区range方式常用于时间字段，用于日志相关记录表，将冷热数据隔离，避免大量历史数据影响仅涉及最近数据的事务；
- 二级分区list方式常用于不同值较少的类型字段，在合适的where条件下如此分区可以避免扫描无关类型的数据；

## 创建适当的索引
### 创建利用率高的索引，删除利用率不高的索引，注意联合索引的顺序
- 如果查询条件包含索引的左侧定值，则通常索引可以被用来快速完成数据行的定位。不过以下几种情况基本无法利用充分利用索引，应该规避此类辅助索引的创建：
 1. 表行数只有几行；
 1. Cardinality低，即不同值非常少的列，如类型字段不应该创建索引；

### 删除冗余索引
- 冗余索引有害无利，建议删除。

## 表存储引擎、字符集等的选择
- 如无特殊需求，统一使用INNODB存储引擎；
- 库表字符集建议使用UTF8MB4，应用不设置字符集或设置为UTF8MB4。

## ER模型设计相关
- 对于基本不查询的大字段，可以将其单独放在一个另一个表中。

## 尽量使用业务逻辑作为主键而非自增键
- 尽量减少自增列和序列，避免分布式实现的自增列、序列增加网络交互次数，影响SQL响应时间，导致自增或序列成为整个系统资源。

## DDL优化
- 如果要对一个表进行多个DDL，尽量将其合并成一个DDL语句，然后在业务低峰期使用在线DDL功能完成。

## 定期整理表空间碎片
- 在业务低峰期，对delete和主键update比较多的表进行optimize操作，减小表空间大小，提高数据行的扫描效率。
