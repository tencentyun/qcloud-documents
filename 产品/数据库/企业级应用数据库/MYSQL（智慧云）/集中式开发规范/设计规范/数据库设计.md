## 库
- 【建议】TDSQL服务器默认存储引擎必须设置为 InnoDB
- 【建议】InnoDB 存储引擎，事物隔离级别使用 Read Committed
- 【建议】创建数据库时必须显式指定字符集，并且字符集只能是 utf8mb4
- 【建议】同一个数据库中所有表、字段必须使用相同的字符集，应保证应用程序连接、数据库、表、字段字符集一致
- 【建议】库的名称必须控制在 32 个字符以内
- 【建议】必须统一用英文小写字母命名数据库名,不得使用中文命名，不得使用符号（下划线除外）
- 【建议】不同应用放到不同 db 中
- 【建议】库的名称格式：业务系统名称_子系统名，同一模块使用的表名尽量使用统一前缀

## 表
- 【建议】表名 <= 32 个字符 ，只能使用字母小写、数字和_
- 【建议】表必须有主键，且主键值禁止被更新
- 【建议】建表必须显式指定存储引擎engine=innodb
- 【建议】必须有表级别comment
- 【不建议】活跃表中不建议使用 blob、text、varchar(>255) 等大字段
- 【建议】多个表中同一类型与含义字段类型与属性必须相同
- 【不建议】不使用外键做数据一致性保证，从业务上控制
- 【建议】对重要数据 userid、orderid 等业务关键特性字段，除了从应用层面控制数据唯一性，从数据库层面增加唯一性检查，最终保证数据完整性
- 【不建议】对于财务货币数据，不建议使用float和double浮点类型，这两种浮点类型无法确保精度，很容易产生误差。建议使用DECIMAL类型或者将对应金额转换成分或厘，使用整数类型（如int或者bigint）去存储。
- 【建议】备份表名字格式 原表名_年月日 例如： test_20210510
- 【建议】建表必须显式指定字符集default charset=utf8mb4
- 【建议】表包含创建时间字段 create_time和最后更新时间字段 update_time
- 【不建议】不建议使用 MySQL已有的关键字，MySQL关键字参考：https://dev.mysql.com/doc/refman/8.0/en/keywords.html

## 列
- 【建议】名称必须控制在 32 个字符 只能使用字母小写、数字和_
- 【建议】添加列级别 comment
- 【建议】必须添加字段 NOT NULL 属性，业务可以根据需要定义 DEFAULT 值
- 【不建议】不建议列级别自定义字符集与校对规则, 使用表级默认
- 【建议】业务中选择性很少的状态 status、类型 type 等字段推荐使用 tinytint 或者smallint
- 【不建议】不建议使用 enum，set，使用 tinyint 或 smallint 代替，因为增加新的枚举值属于ddl操作
- 【建议】多个数据表中都有相同属性字段时，其属性需保持一致，减少类型转换开销
- 【建议】仅仅当字符数量可能超过20000个的时候，才可以使用TEXT类型来存放字符类 数据，因为所有TDSQL 数据库都会使用UTF8MB4字符集。所有使用TEXT 类型的字段必须和原表进行分拆，与原表主键单独组成另外一个表进行存放
- 【不建议】不在数据库中存储图片
- 【建议】varchar 长度尽量小于 100，活跃表中不要使用varchar(>255) 等大字段
- 【建议】业务中 IPV4 地址字段推荐使用 int 类型，不推荐用 char(15)
- 【建议】尽量使用字段固有属性，不要用 varchar 代替 int 或 datetime

## 索引
- 【建议】名称规则 == 前缀 + 后缀
1.前缀
主键 pk_
唯一键 uniq_
普通索引 idx_
2.后缀
一律使用字段小写的名称
多个字段使用_连接
- 【建议】单个索引中每个索引记录的长度不能超过 64KB，索引列太长，可以使用 prefix 列创建 index
- 【建议】在建立索引时，多考虑建立联合索引，并把区分度最高的字段放在最前面。如列 userid 的区分度可由 select count(distinct userid)计算出来
- 【建议】建表或加索引时，保证表里互相不存在冗余索引。对于TDSQL来说，如果表里已经存在 key(a,b)，则 key(a)为冗余索引，需要删除
