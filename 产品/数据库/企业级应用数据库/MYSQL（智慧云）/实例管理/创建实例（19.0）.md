在赤兔管理台支持创建非分布式实例和分布式实例。两者区别如下：
- 非分布式实例：即主从架构的关系型数据库，完全兼容MySQL，其实例ID以set开头。
- 分布式实例：即主从架构的分布式数据库，高度兼容MySQL，其实例ID以group开头。


>!赤兔管理台创建的实例，不会显示在云数据库管理平台账户中，也不会进入计量计费数据中，如需显示在该位置，请至云数据库管理平台进行创建(仅适用tce3.10.0版本)。


>?默认新建实例有12小时的屏蔽期，将在实例详情入口顶端显示：「新实例，告警屏蔽期内」


## 创建非分布式实例
### 背景介绍
非分布式实例为主从架构的关系型数据库，完全兼容MySQL，其实例ID以字母set开头。
### 操作步骤
1. 在赤兔管理台主界面，点击左侧菜单【实例管理】，进入实例管理界面。
2.	点击【创建非分布式实例】，系统弹出【创建实例（非分布式）】对话框，默认进入【基础设置】子菜单。 
3.	在【基础设置】子菜单中，设置业务描述、数据库版本、实例机型、规格信息和cpu架构。
4.	点击【下一步】，进入【容灾设置】子菜单。


- 	TCE3100版容灾设置:
 - 【容灾模式】: 设置实例容灾模式。
 - 【同步异步模式】：设置实例同步异步模式。
 - 	【主DB部署zone】：选择主DB部署所在区，默认为系统自动分配。
 - 	【备DB部署zone】：选择备DB部署所在区，默认为系统自动分配。
 - 	【DB部署所在IDC】：选择DB部署所在IDC，默认为none。
 - 	【主节点所在IDC】：选择主节点部署所在IDC。
 - 	【备节点所在IDC】：选择备节点部署所在IDC。
 - 	【资源独享标识】：设置实例是否进行资源独享。
 - 	【IDC效验】：默认开启。
 - 	【服务器分配】：手工指定一组服务器IP，一行一IP (选填)。
 - 	【LVSGroup名】：lvs_report上报的lvsgroup命名（选填）。
 - 	【实例禁止删除】：设置实例禁止删除，开启后实例不可删除，可在实例管理页关闭实例禁止删除。
 - 	【VIP的类型】：设置实例vip类型，默认不选。
 - 	【是否开启vip6】：设置是否开启VIP6，默认不开启。

>!LVSGroup名以（分布式）云数据库 部署于TCE时，本功能不可用。

- 独立部署版容灾设置：
 - 	【容灾模式】: 设置实例容灾模式。
 - 	【同步异步模式】：设置实例同步异步模式。
 - 	【主DB部署zone】：选择主DB部署所在区，默认为系统自动分配。
 - 	【备DB部署zone】：选择备DB部署所在区，默认为系统自动分配。
 - 	【DB部署所在IDC】：选择DB部署所在IDC，默认为none。
 - 	【主节点所在IDC】：选择主节点部署所在IDC。
 - 	【备节点所在IDC】：选择备节点部署所在IDC。
 - 	【资源独享标识】：设置实例是否进行资源独享。
 - 	【IDC效验】：默认开启。
 - 	【服务器分配】：手工指定一组服务器IP，一行一IP (选填)。
 - 	【LVSGroup名】：lvs_report上报的lvsgroup命名（选填）。
 - 	【网管组】：选择网管组，默认系统自动分配。
 - 	【接入配置】：:设置实例接入配置类型。

 
5.	在【容灾设置】子菜单中填写相关实例信息。 
>!设置实例的高可用性能时，设置要求如下：
 - 【容灾模式】：需与物理设备上架的设备组匹配，即不能超越集群的整体规划。
 - 【同步异步模式】：如果选择【强同步】+【退化】设置，将默认为超过15s延迟自动退化为异步同步。
 
6.	点击【下一步】，进入【初始化设置】子菜单，设置实例基本参数信息。
>!【Innodb_page_size】：建议设置推荐值，虽然该值越小，理论上查询性能越好，但应用层建表字段过多时会不成功，只能删除实例后重建。

7.	完成相关设置项后，点击【开始创建】，进入【创建非分布式实例任务流程】页面(页面默认为“进度视图”，可选择“JSON视图”），可查看非分布式实例创建进度和结果。
>?实例创建流程包括初始化流程，如果初始化失败，可以在【实例管理】>【操作】栏，点击所属实例【初始化】，手动进行初始化即可。

## 创建分布式实例
分布式实例为主从架构的分布式数据库，高度兼容MySQL，其实例ID以group开头。
### 操作步骤
1.	在赤兔管理台主界面，点击左侧菜单【实例管理】，进入实例管理界面。
2.	点击【创建分布式实例】，系统弹出【创建实例（分布式）】对话框，默认进入【实例-基础设置】子菜单。


- TCE3100版实例-基础设置:
 - 【业务描述】：设置实例描述信息。
 - 【资源独享标识】：设置实例是否进行资源独享。
 - 【数据分片数】：并非该实例实际分配Set数，而是上限值。分片数建议根据业务最大规模设置。通过云数据库管理平台申请的实例，默认集群分片为64。
 - 【数据库版本】：建议优先选择MySQL 5.7.17或以上版本，因其较好支持分布式事务和分布式Join等高级特性。
 - 【分布式事务】：建议开启。
 - 【VIP的类型】：设置实例vip类型，默认不选。
 - 【实例禁止删除】：设置实例禁止删除，开启后实例不可删除，可在实例管理页关闭实例禁止删除。
 - 【是否开启vip6】：设置是否开启VIP6，默认不开启。
- 	独立部署版实例-基础设置：
 - 【业务描述】：设置实例描述信息。
 - 【资源独享标识】：设置实例是否进行资源独享。
 - 【数据库版本】：建议优先选择MySQL 5.7.17或以上版本，因其较好支持分布式事务和分布式Join等高级特性。
 - 【网管组】：选择网管组，默认系统自动分配。
 - 【接入配置】:设置实例接入配置类型。
 - 【分布式事务】：选择是否开启分布式事务。
 - 【使用MC】:默认不开启mc功能。
 - 【子set数】：设置实例set数量。
 - 【数据分片数】：并非该实例实际分配Set数，而是上限值。分片数建议根据业务最大规模设置。通过云数据库管理平台申请的实例，默认集群分片为64。


3.	在【实例-基础设置】子菜单中填写相关实例信息。
4.	点击【下一步】，进入【子SET-基础设置】子菜单，设置子Set的机型、规格和cpu架构信息。
5.	点击【下一步】，进入【子SET-容灾设置】子菜单
6.	在【容灾设置】子菜单中填写相关实例信息。设置子Set的容灾模式、同步异步模式、主备部署zone、DB部署所在IDC、主节点所在IDC、备节点所在IDC、IDC校验、服务器分配设置（可以为每个set 指定ip）、服务器IP（选填）等信息。
>!设置实例的高可用性能时，设置要求如下：
【容灾模式】：需与物理设备上架的设备组匹配，即不能超越集群的整体规划。
【同步异步模式】：如果选择【强同步】+【退化】设置，将默认为超过15s延迟自动退化为异步同步。
7.	点击【下一步】，进入【子SET-初始化设置】子菜单，设置实例基本参数信息。
>!【Innodb_page_size】：建议设置推荐值，虽然该值越小，理论上查询性能越好，但应用层建表字段过多时会不成功，只能删除实例后重建。
8.	完成相关设置项后，点击【开始创建】，进入【创建分布式实例任务流程】页面，可查看分布式实例创建进度和结果。 
>?实例创建流程包括初始化流程，如果初始化失败，可以在【实例管理】>【操作】栏，点击所属实例【初始化】，手动进行初始化即可。 

## 新增SET（水平扩容）
### 背景介绍
新增SET，即增加分片数量 ，仅对分布式实例。
### 操作步骤
1.	打开赤兔首页，点击左侧菜单【实例管理】，进入实例管理页。
2.	点击【实例ID】中的超链接，然后选择【Set管理】，进入Set管理页面。
3.	选择【添加Set+】，系统弹出【添加set到分布式实例】对话框。

实例设置：
- 指定扩容目标set的机型、规格。
- 指定源set切分：扩容分片可以选择扩容的原set名称，以及要迁移的分片范围。默认会选择分片数最多的set，迁移二分之一的分片数迁移到新set。
容灾设置：
- 容灾模式：指定扩容目标set容灾模式。
- 同步异步模式：指定扩容目标set同步模式。
- 主DB部署Zone：指定扩容目标sett主DB部署Zone。
- 备DB部署Zone：指定扩容目标set备DB部署Zone。
- DB部署所在IDC：指定扩容目标set所在IDC。
- 主节点所在IDC：选择主节点部署所在IDC。
- 备节点所在IDC：选择备节点部署所在IDC。
- 资源独享标识：选“无”为公有云，选“独享标识”为指定资源独享。
- 服务器分配:选填。
- IDC效验：默认开启，仅适用于独立部署版。
- 是否开启IPV6：默认不开启，仅适用于TCE3100版。
- 切换路由时间：
 - 手工切换：新实例数据同步好数据好，手工触发切换路由
 - 自动切换：新实例数据同步好数据好，自动触发切换路由
其他设置：
 - 指定扩容目标set的proxy是否保持同版本、db是否保持同版本、proxy和db推包速度。
 

4.	按照页面提示填写相关信息，点击“创建”进入任务流程页面，等待任务结束。
5.	如果选择手工切换，则在数据同步好之后，要点击路由切换按钮，完成路由切换。


## 从云数据库管理平台创建实例
>?本产品以独立部署的TDSQL版本时，本功能不可用。

云数据库管理平台创建的实例，也会显示在赤兔管理平台中。创建方法参见《云数据库管理平台（租户端）》，本文不再赘述。
