- 图片敏感内容审核是付费服务。具体费用可查看 [计费说明](https://cloud.tencent.com/document/product/460/6970#.E5.9B.BE.E7.89.87.E8.AF.86.E5.88.AB.E8.B4.B9.E7.94.A8)。开发者可通过控制台开通该服务
- 开通后，该存储桶内的图片会在上传时进行敏感内容审核，一次调用服务可审核全部敏感类型
- 您还可以开启自动封禁服务，授权万象优图将相应审核分值内的敏感图片进行封禁

>**注意**
>敏感内容审核服务需要对审核图片拥有访问权限，暂不支持私有读写的存储桶开通该服务。

## 控制台设置
登录 [万象优图](https://console.cloud.tencent.com/ci) 控制台，在【Bucket 管理】页面选择需要操作的存储桶，单击导航功能栏的【敏感内容审核】，即可更改该服务的开通状态和相关设置，如下图：
![](https://main.qcloudimg.com/raw/de667ab14639465668186935ba19056c.png)
用户可开启或关闭敏感内容审核服务、选择自动封禁的图片类型和封禁阈值、设置回调类型和相应阈值。
>**注意**
>在开启敏感内容审核服务但未开启自动封禁服务时，用户上传的图片都会进行敏感内容审核，但万象优图只会对图片添加相应分类标签（如疑似暴恐、确认色情等），不会对图片执行任何操作（封禁、删除等）。

## 自动封禁
敏感内容审核服务提供自动封禁功能，用户可在控制台开启自动封禁功能，并选择自动封禁的敏感图片种类、设置封禁阈值，如下图：
![](https://main.qcloudimg.com/raw/fd104c244669b3957d232b37749e9c98.png)
上图设置保存后万象优图会对该存储桶之后所有上传的图片进行敏感内容审核，并且会将涉黄、涉暴恐类型图片中审核分值在 90 分以上的部分进行封禁。

## 回调设置
开发者也可开启回调功能，通过设置回调阈值将相应敏感类型某个分数段的图片信息返回至相应 URL。具体设置如下图：
![](https://main.qcloudimg.com/raw/b26022caaabbc638a0cba24b1fcccb38.png)
使用回调功能，开发者需要勾选接收回调的图片类型、该类型回调的分值范围并提供接收回调参数的 URL（如上图中开发者将接收到涉黄、涉赌涉枪类型 审核分值在 80-90 分之间的图片信息，如 URL、审核分值等）。

### 回调阈值设置
1、回调阈值为一个分值区间；
2、设置后，万象优图将会把图片分值在阈值内的图片返回给您；
3、对于腾讯云封禁的图片，如果勾选了回调，此类图片也会返回给您，但是无法进行下载；
4、回调 URL 需以 http 开头且默认返回 200 正确码方可以进行使用，请在保存设置前进行检查；
5、回调 URL 预计 30 分钟后生效；
6、回调 URL 设置生效后，当发现上传的图片分值在阈值内，万象优图会默认回调该 URL ，向其发送一个标准的 HTTP POST 通知消息。HTTP 包为 json 数组，数组的每个元素信息如下表：

| **参数名称**| **类型**| **描述**               |
| ------------ | ---------- | ------------------------ |
| code         | int        | 服务器错误码，0 为成功              |
| message      | string     | 服务器返回信息，如果发生错误该字段将描述错误内容 |
| data         | object     | 服务端返回的应答数据，详见下表          |

data 字段的具体内容：

| **参数名称**   | **类型** |      **描述**                        |
| ---------------- | ---------- | ---------------------------------------- |
| url              | String     | 检测图片的url                                 |
| trace_id         | String     | 服务器端唯一标识，用于定位问题                |
| forbidden_status | Int        | 封禁状态，0 表示正常，1 表示图片已被封禁（只有存储在万象优图的图片才会被封禁） |
| result           | int        | 供参考的识别结果，0 正常，1 确认敏感，2 疑似敏感                |
| porn_info        | Object     | 图片色情识别结果，详见下文                            |
| illegal_info     | Object     | 图片违法识别结果，详见下文                            |
| politics_info    | Object     | 图片涉及政治人物识别结果，详见下文                        |

porn_info 数据集参数描述：

| **参数名称** | **类型** | **描述**                     |
| ------------ | ---------- | ---------------------------------- |
| hit_flag     | int        | 色情识别服务审核结果，0 否，1 为是，2 为疑似             |
| score        | int        | 色情识别服务返回的审核分数，分值范围 0--100，分数越高倾向越明显 |
| label        | string     | 色情识别服务返回的标签，以分号分隔                  |

illegal_info 数据集参数描述：

| **参数名称** | **类型** | **描述**                         |
| ------------ | ---------- | ------------------------------------ |
| hit_flag     | int        | 涉赌涉枪审核服务结果，0 为否，1 为是，2 为疑似              |
| score        | int        | 涉赌涉枪审核服务返回的审核分数，分值范围 0--100，分数越高倾向越明显 |
| label        | string     | 涉赌涉枪审核服务返回的标签，以分号分隔                  |

politics_info 数据集参数描述：
 
|**参数名称**| **类型** | **描述**                       |
| ------------ | ---------- | ------------------------------------ |
| hit_flag     | int        | 政治人物识别服务审核结果，0为否，1为是，2为疑似            |
| score        | int        | 政治任务识别服务返回的审核分数，分值范围0--100，分数越高倾向越明显 |
| label        | string     | 政治人物识别服务返回的人脸名称，以分号分隔                |

返回示例
```
{
    "code": 0,						
    "message": "SUCCESS",					
    "data": {						
        "url": "http://pornfile-1251000004.picsh.myqcloud.com/hot/1238309vvu5bmhzq1hmzw5.jpg.thumb.jpg",
        "trace_id": "ef159c737b92db43d81bed5c4cda0536",		
        "forbidden_status": 0,					
        "result": 0,
        "porn_info": {
            "hit_flag": 0,
            "score": 0,
            "label": ""
        },
        "illegal_info": {
            "hit_flag": 0,
            "score": 0,
            "label": ""
        },
        "politics_info": {
            "hit_flag": 0,
            "face_name": ""
        },
    }
}
```

在保存相关设置后，【敏感内容审核】的相关功能页面会显示相应的审核配置，如下图所示
![](https://main.qcloudimg.com/raw/d85d061141061da19ec5f17dd6d34521.png)





