集群是 ES 提供托管 Elasticsearch 服务的基本单元，也是用户使用和管理 Elasticsearch 服务的主要对象。本文为您介绍通过腾讯云官网控制台，快速创建 Elasticsearch 集群。

## 前提条件

已创建腾讯云账号，创建账号可参考 [注册腾讯云](https://cloud.tencent.com/document/product/378/17985)。

## 操作步骤

### 登录控制台

登录 [ES 控制台](https://console.cloud.tencent.com/es)，单击【新建】进入创建购买页。

### 创建集群

#### 一、选择配置信息

- 计费类型：付费类型支持【包年包月】和【按量计费】。  
- 地域：目前腾讯云 ES 已在广州、上海、北京、成都、香港、硅谷、多伦多、上海金融、深圳金融、新加坡、孟买、首尔和法兰克福共计13个地域上线，其中上海金融和深圳金融需要通过 [工单](https://console.cloud.tencent.com/workorder/category) 申请。
- 部署方式：单可用区、多可用区，单可用区是 ES 集群部署在一个可用区内；多可用区是可以部署在同一个地域的两个可用区。多可用区的部署方式可以提高集群的容灾能力，保障线上业务的稳定性。多可用区功能，当前是灰度阶段，已暂停内测申请，功能将于近期全量上线，敬请留意官网通知。
- 网络：选择当前地域下的 VPC，同一个地域的同一个 VPC，在不同可用区之间是互通的，多可用区部署模式下，也是选择同一个 VPC。
- 可用区及子网：ES 部署在 VPC 内，为保证在内网能顺利访问 ES 集群，创建 ES 集群时，建议选择已有云上业务的区域位置所在的 VPC。只有在同一个 VPC 下，才能访问 ES 集群。

> ! ES 集群创建完成后，不支持修改调整 VPC。
> 
> **特殊网络问题说明**
 - 跨 VPC 访问：如果需要通过同一个地域内位于其他 VPC 的 CVM 访问 ES 集群，可以考虑 [对等连接](https://cloud.tencent.com/document/product/553/18827) 方案，将同一地域两个不同的 VPC 进行打通。
 - 基础网络访问： 如果您的业务都部署在基础网络内，且没有使用过 VPC，可以通过基础网络和 VPC 网络互通的方案，将位于基础网络的 CVM 绑定到 ES 集群所在 VPC，从而实现基础网络到 ES 集群的互通（具体可参见 [基础网络互通](https://cloud.tencent.com/document/product/215/20083)）。
  基础网络互通功能仅支持`10.[0~47].0.0/16`网段内的私有网络，如果您需要从基础网络访问 ES 集群，请在创建 ES 集群时选择有`10.[0~47].0.0/16`网段的 VPC 。
	
- 集群名：自定义集群名称，不作为全局唯一标示，可以设置为业务相关描述。
- 版本：Elasticsearch 版本，支持5.6.4和6.4.3版本。
- 高级特性：Elasticsearch 官方商业特性（原 X-Pack 插件），包括数据权限管理、SQL JDBC、告警和机器学习等能力；不同版本包含的功能完整度不同，其中白金版包含所有高级特性，基础版包含一部分高级特性，开源版只有开源部分的功能，不包括高级功能，具体版本包含的功能差异，详见 [高级特性（X-Pack）](https://cloud.tencent.com/document/product/845/34926)。
- 节点机型：集群中每个节点机型的规格，不同规格包含不同的 CPU 核数和内存，ES 支持的节点规格类型以及选择建议可参见 [节点类型存储配置建议](https://cloud.tencent.com/document/product/845/19551) 。
- 节点存储类型：支持高性能云盘和 SSD 云盘。
- 单节点存储：每个节点配置的磁盘容量，整个集群的存储量 = 单个节点存储 * 节点个数。
- 配置专用主节点：当集群具有一定规模时，可以 [配置专用主节点](https://cloud.tencent.com/document/product/845/32086)，进一步保障集群稳定性。
- 专用主节点机型：专用主节点机型不要求同数据节点机型一致。
- 专用主节点个数：可选3个或5个，奇数个能保证高可用并预防脑裂风险。
- 用户名：Kibana 页面访问，及白金版 Elasticsearch 集群访问用户名，默认为 elastic，不能修改。基础版和开源版，Elasticsearch 没有开启安全用户验证功能，通过 API 访问集群时无需用户名密码，只用于 Kibana 页面登录，而白金版开启了用户权限验证，在通过 API 访问集群时需要相应的用户名密码。
- 密码：上一项用户名对应的密码，请按照规则设置，并妥善保存，如果密码忘记，可在详情页重置。
- 自动续费：可选项，包年包月的集群有使用期限，到期后会影响服务使用，建议包年包月购买的集群设置为自动续费。
![创建集群](https://main.qcloudimg.com/raw/95aee6deee0b2f9881729de033975fb0.png)
#### 二、确认及购买

单击【下一步：确认配置信息】，确认配置。

![确认配置](https://main.qcloudimg.com/raw/31ecba8075e0e97aa31922f0f2393651.png)

- 包年包月时单击【立即购买】，进入订单页，单击【确认购买】并支付。支付成功后返回 [ES 控制台](https://console.cloud.tencent.com/es) ，在集群列表页可以查看到创建的集群。
- 按量计费时单击【开通】直接创建集群，不需要确认订单支付，在使用过程中，会按小时进行计费及扣费。

#### 三、包年包月确认订单及支付

![订单确认页](https://main.qcloudimg.com/raw/31c25b8ff772c2de4d7c382e320cc28a.png)

#### 四、创建完成

预付费集群支付完成，后付费集群开通成功后，就可以跳转到 [控制台](https://console.cloud.tencent.com/es) 查看刚刚创建的集群，集群将在几分钟内创建完成。

## 集群开发应用及管理

### 集群访问

ES 提供了多种类型的客户端访问集群，快速开始，具体请参见 ES [访问方式概述](https://cloud.tencent.com/document/product/845/19539)。

### 集群监控

腾讯云 ES，提供了丰富的监控指标，可以帮助在集群使用过程中查看集群的状态。 具体请参见 [查看监控](https://cloud.tencent.com/document/product/845/16995)。

基础版和白金版的 Kibana 页面也有监控项，在左侧菜单的【monitor】页。

### 集群调整配置

随着业务数据量和访问量的增加，可以弹性地调整集群配置，具体请参见 [调整配置](https://cloud.tencent.com/document/product/845/32096)。


