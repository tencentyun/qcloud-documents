## 功能说明
集群脚本功能支持批量选择节点运行指定脚本，以便高效进行批量运维操作。一个集群同一时间只能运行一个集群脚本，如果有正在运行的集群脚本，则无法再提交执行新的集群脚本。例如，安装第三方软件和修改集群运行环境。 

>!
>- 执行脚本文件当前仅支持选择访问对象存储 COS 跨地域文件。
>- 选择执行节点仅支持当前集群中的节点，不支持跨集群节点。
>- 可根据业务需要设置自定义参数。
>- 弹性 MapReduce 控制台不会对执行脚本做任何校验，执行自定义脚本操作属于高危操作，请谨慎使用。

## 前提条件
- 仅运行中的状态集群可使用集群脚本功能。
- 执行脚本必须为对象存储 COS 标准存储格式，且只支持 shell 脚本文件。
- 使用集群脚本功能需先授权 EMR 访问 COS 权限。

## 操作步骤
1. 登录 [EMR 控制台](https://console.cloud.tencent.com/emr) 在集群列表中单击对应的集群 ID，进入实例信息后，选择**脚本管理 > 集群脚本 > 设置任务**。
![](https://qcloudimg.tencent-cloud.cn/raw/6c12f737610116a39ea33d105c9e91f9.png)       
2. 设置任务时，需要设置任务名称、选择执行脚本文件、选择执行节点、自定义参数。设置任务配置完成后，单击**立即执行**，即在任务列表中生成任务。
![](https://main.qcloudimg.com/raw/280a336c09e65ad5ff255422a990822f.png)
3. 在任务列表中生成的任务，根据执行情况任务状态有全部成功、全部失败、部分失败等，可单击**详情**查看。
![](https://main.qcloudimg.com/raw/d5bfe9eed0664ea862ec2961b818ef19.png)
![](https://main.qcloudimg.com/raw/8c48a30925c5c716785cd4a66006530c.png)
4. 集群脚本可能在部分节点上运行成功，部分节点上运行失败。可批量复制失败的节点再次运行。
