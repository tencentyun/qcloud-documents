- 本地自建 HDFS 文件迁移到 EMR 集群需要有专线打通网络，可以联系开发人员协助解决。

- 在 CVM 上的自建 HDFS 文件迁移到 EMR 集群：

    - CVM 的所属网络和 EMR 集群的所属网络在同一 VPC 下，则可以自由传送文件。
    - CVM 的所属网络和 EMR 集群的所属网络在不同 VPC 下，需要使用对等连接将网络打通，步骤如下：

        网段 1：广州的 VPC1 中的子网 A 192.168.1.0/24。

        网段 2：北京的 VPC2 中的子网 B 10.0.1.0/24。

        1. 登录腾讯云控制台，单击导航条“私有网络”。

            ![私有网络](https://mc.qcloudimg.com/static/img/19ed52a681611fc1ea76d3149db51b9c/6-3-2-1.png)

        2. 在私有网络控制台中选择“对等连接”选项卡，在列表上方选择地域（图中 1）：广州，选择私有网络（图中 2）VPC1, 然后单击“新建”。

            ![新建](https://mc.qcloudimg.com/static/img/7f805d799da907e4516ae80c9964779c/6-3-2-2.png)

        3. 进入建立对等连接界面。在图 1 处输入对等连接的名称，比如PeerConn。图 2 处是填写本地端地域和本端网络，比如广州和 VPC1。图 3 处填写对端网络所属账户，如果广州和北京两个网络在同一账户下，选择“我的账户”，如果不再同一账户则要选择，其他账户。这里需要说明，如果本端网络和对端网络都在同一地域，比如广州，则通信是免费的，也不需要选择图 5 处的带宽上限，如果不在同一地域，就要进行收费，同时带宽上限可选。在图 4 处填写对端地域和对端网络，比如北京和 VPC2。

            ![账户](https://mc.qcloudimg.com/static/img/048240b0fab28d71e0dde73892658b45/6-3-2-3.png)

        4. 同账户内私有网络进行连接，新建后对等连接立即生效；与其他账户私有网络创建对等连接，需要对端接受此对等连接后生效。查看 [详细文档](https://cloud.tencent.com/document/product/215/5000)。

        5. 为对等连接配置本端和对端路由表

            - 登录腾讯云控制台，单击“私有网络”，在私有网络控制台选择“子网”选项卡。

            ![账户](https://mc.qcloudimg.com/static/img/1f8371adb83fd1e0532d820b981c7d4e/6-3-2-4.png)

            - 单击本端指定子网（比如广州的子网 VPC1）的关联路由表（上图红框处），进入路由表详情页面。
            - 单击编辑路由策略。目的端中填入对端 CIDR（比如北京的 VPC2 的 CIDR 是 10.0.1.0/24），下一跳类型选择“对等连接”，下一跳选择已建立的对等连接（PeerConn）

            ![账户](https://mc.qcloudimg.com/static/img/b613e5d130ef32f27b9dc9da5bbfde8d/6-3-2-5.png)

            - 上面步骤是配置广州 VPC1 到北京 VPC2 的路由表，还需要配置北京 VPC2 到广州 VPC1 的配置，配置过程同上。
            - 路由表配置完成后，不同私有网络的网段之间即可进行通信
