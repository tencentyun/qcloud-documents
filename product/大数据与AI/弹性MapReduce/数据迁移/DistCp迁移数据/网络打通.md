## 本地自建 HDFS 文件迁移到 EMR
本地自建 HDFS 文件迁移到 EMR 集群需要有专线打通网络，可以联系开发人员协助解决。

## CVM 上的自建 HDFS 文件迁移到 EMR
- CVM 的所属网络和 EMR 集群的所属网络在同一 VPC 下，则可以自由传送文件。
- CVM 的所属网络和 EMR 集群的所属网络在不同 VPC 下，需要使用对等连接将网络打通。

### 使用对等连接
网段1：广州的 VPC1 中的子网 A 192.168.1.0/24。
网段2：北京的 VPC2 中的子网 B 10.0.1.0/24。

1. 登录腾讯云控制台，在导航条选择【产品】>【网络】>【私有网络】。
2. 在私有网络控制台中选择【对等连接】页，在列表上方选择地域广州，选择私有网络 VPC1，然后单击【新建】。
 ![新建](https://mc.qcloudimg.com/static/img/7f805d799da907e4516ae80c9964779c/6-3-2-2.png)
3. 进入建立对等连接页。
 - 在图1处输入对等连接的名称，例如：PeerConn。
 - 图2处是填写本地端地域和本端网络，例如：广州和 VPC1。
 - 图3处填写对端网络所属账户，如果广州和北京两个网络在同一账户下，选择【我的账户】，如果不再同一账户则要选择，其他账户。这里需要说明，如果本端网络和对端网络都在同一地域，例如广州，则通信是免费的，也不需要选择图 5 处的带宽上限，如果不在同一地域，就要进行收费，同时带宽上限可选。
 - 在图4处填写对端地域和对端网络，例如：北京和 VPC2。
 ![账户](https://mc.qcloudimg.com/static/img/048240b0fab28d71e0dde73892658b45/6-3-2-3.png)
4. 同账户内私有网络进行连接，新建后对等连接立即生效；与其他账户私有网络创建对等连接，需要对端接受此对等连接后生效。参见 [详细文档](https://cloud.tencent.com/document/product/215/20082)。
5. 为对等连接配置本端和对端路由表。
 1. 在私有网络控制台选择【子网】页。
![账户](https://mc.qcloudimg.com/static/img/1f8371adb83fd1e0532d820b981c7d4e/6-3-2-4.png)
 2. 单击本端指定子网（例如广州的子网 VPC1）的关联路由表（上图红框处），进入路由表详情页。
 3. 单击编辑路由策略。目的端中填入对端 CIDR（例如北京的 VPC2 的 CIDR 是10.0.1.0/24），下一跳类型选择【对等连接】，下一跳选择已建立的对等连接（PeerConn）。
  ![账户](https://mc.qcloudimg.com/static/img/b613e5d130ef32f27b9dc9da5bbfde8d/6-3-2-5.png)
 4. 以上步骤是配置广州 VPC1 到北京 VPC2 的路由表，还需要配置北京 VPC2 到广州 VPC1 的配置，配置过程同上。
 5.  路由表配置完成后，不同私有网络的网段之间即可进行通信。
