Signature is essentially an encrypted string. The original text of encrypted string is made of multiple parameters based on a certain rule, and a signature is generated by encrypting the string with an encryption algorithm. Tencent Cloud authentication system then verifies the signature. If the signature is valid, users are allowed to access Artificial Audio Intelligence. If the signature is invalid, an error message of Authorization is returned. Detailed information on the process of signature generation is included in the document and a signature example is provided.

### Obtaining Required Information for Signature

Users are required to obtain the following information when generating a signature: Tencent Cloud application ID (APPID), Tencent Cloud project ID (ProjectId), security credentials SecretId and SecretKey. APPID, SecretId and SecretKey can be obtained on Tencent Cloud console, as shown below:
![1](//mc.qcloudimg.com/static/img/0727c55969eabe8d2b0aba7b0e0e796c/image.png)

## Generating Signature String

### Sorting Parameters

First, sort all the request parameters in the URL in an ascending lexicographical order by their names, just like sorting words in a dictionary in ascending alphabetical order or numerical order. That is to say, sort the parameters by their first letters, then by their second letters if their first letters are the same, and so on.

### Generating Request String

This step is used to generate request string.

Format the sorted request parameters in the previous step as "parameter name" = "parameter value", and then join the formatted parameters together using "&". "Parameter value" is the original value instead of the URL encoded value.

### Constructing Original Signature String

This step is used to generate the original signature string.
The original signature string is composed of the following parameters:
1. Request method: The POST and GET methods are supported. In this case, a POST request is used. Please note that the methods must be in uppercase.
2. Request CVM: Artificial Audio Intelligence is ``aai.qcloud.com``.
3. Request path: For example, the request path for Speech Recognition is /asr/v1/appid.
4. Request string: The request string generated in the previous step.

Construction rule of original signature string:

Request Method (uppercase) + Request CVM + Request Path + ? + Request String

The resulting string is:
```
POSTaai.qcloud.com/asr/v1/appid?request string 
```

### Generating Signature String

This step is used to generate a signature string.
Encrypt the original signature string obtained in the previous using HMAC-SHA1 with SecretKey as the algorithm key, and then encode the encrypted message with Base64 to obtain the final signature string.

## Signature Example

Take a speech recognition subservice as an example. The description and sample value of each field for the URL request parameter of this service are shown as follows. Note: The parameter name, parameter value, and APPID are only examples. Users need to generate signature according to the URL request structure of specific service and subservice.

| Parameter Name | Type | Value |
| --- | --- | --- |
| param_a | uint| 0 |
| param_b | uint| 1 |
| param_c | uint | 2 |
| param_d | uint | 3 |

For example, if < appid > = 1252077802, then the original signature is constructed as follows:
```
POSTaai.qcloud.com/asr/v1/1252077802?param_a=0&param_b=1&param_c=2
```
Encrypt the original signature:
```
Base64Encode(HmacSha1(original signature, SecretKey)) 
```
Obtain the final signature string.
