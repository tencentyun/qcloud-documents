

数据库提供了很多数学操作符，具体见下表格。其中位操作符只能应用到整数类型，其他操作符可以应用到所有的数字类型。

| 操作符 | 描述                 | 示例    | 结果 |
| -------- | --------------------------- | ---------- | ------ |
| +        | 加法                        | 2 + 3      | 5      |
| -        | 减法                        | 2 - 3      | -1     |
| *        | 乘法                        | 2 * 3      | 6      |
| /        | 除法                        | 4 / 2      | 2      |
| %        | 取模                        | 5 % 4      | 1      |
| ^        | 指数                        | 2.0 ^ 3.0  | 8      |
| \|/      | 平方根                      | \|/ 25.0   | 5      |
| \|\|/    | 立方根                      | \|\|/ 27.0 | 3      |
| !        | 阶乘                        | 5 !        | 120    |
| !!       | 阶乘（前置操作）| !! 5       | 120    |
| @        | 绝对值                      | @ -5.0     | 5      |
| &        | 位与                        | 91 & 15    | 11     |
| \|       | 位或                        | 32 \| 3    | 35     |
| #        | 位异或                      | 17 # 5     | 20     |
| ~        | 位取反                      | ~1         | -2     |
| <<       | 位左移                      | 1 << 4     | 16     |
| >>       | 位右移                      | 8 >> 2     | 2      |

 

数据库也提供了数学函数，见下表格。 

| 函数                      | 返回值类型               | 功能描述                                                     | 示例              | 结果              |
| ------------------------- | ------------------------ | ------------------------------------------------------------ | ----------------- | ----------------- |
| abs(x)                    | 和参数 x 类型一样          | 绝对值                                                       | abs(-17.4)        | 17.4              |
| cbrt(x)                   | 和参数 x 类型一样          | 立方根                                                       | cbrt(27.0)        | 3                 |
| ceil(x)                   | 和参数 x 类型一样          | 不小于 x 的最小整数                                            | ceil(-42.8)       | -42               |
| ceiling(x)                | 和参数 x 类型一样          | ceil 的别名函数                                               | ceiling(-95.3)    | -95               |
| degrees(x)                | 和参数 x 类型一样          | 弧度转为度                                                   | degrees(0.5)      | 28.6478897565412  |
| exp(x)                    | 和参数 x 类型一样          | 以 e 为底的指数函数                                            | exp(1.0)          | 2.71828182845905  |
| floor(x)                  | 和参数 x 类型一样          | 不大于 x 的最大整数                                            | floor(-42.8)      | -43               |
| ln(x)                     | 和参数 x 类型一样          | 以常数 e 为底数的对数 | ln(2.0)           | 0.693147180559945 |
| log(x)                    | 和参数 x 类型一样          | 以10为底的对数                                               | log(100.0)        | 2                 |
| log(b numeric, x numeric) | numeric                  | 以b为底的x对数                                               | log(2.0, 64.0)    | 6.0000000000      |
| mod(y, x)                 | (same as argument types) | y%x                                                          | mod(9,4)          | 1                 |
| pi()                      | dp                       | "π" 常量                                                     | pi()              | 3.14159265358979  |
| power(a dp, b dp)         | dp                       | a 的 b 次方                                                     | power(9.0, 3.0)   | 729               |
| radians(dp)               | 输入类型一致             | 度数转为弧度                                                 | radians(45.0)     | 0.785398163397448 |
| random()                  | dp                       | 在范围0.0 <= x < 1.0中的随机值                              | random()          |             -      |
| round(dp or numeric)      | 输入类型一致             | 四舍五入                                                     | round(42.4)       | 42                |
| round(v numeric, s int)   | numeric                  | 保留 s 位小数，四舍五入                                        | round(42.4382, 2) | 42.44             |
| setseed(dp)               | void            | 设置随机函数 random() 的种子        | setseed(0.54823)  |    -               |
| sign(dp or numeric)       | (-1, 0, +1)              | 获取符号位                                                   | sign(-8.4)        | -1                |
| sqrt(dp or numeric)       | 输入类型一致             | 平方根                                                       | sqrt(2.0)         | 1.4142135623731   |
| trunc(dp or numeric)      | 输入类型一致             | 把小数位清零                                                 | trunc(42.8)       | 42                |
| trunc(v numeric, s int)   | numeric                  | 保留小数位数为 s，多余的位数清零                              | trunc(42.4382, 2) | 42.43             |

数据库也支持三角函数，见下表格。

| 函数        | 描述                   |
| ----------- | ---------------------- |
| acos(x)     |反余弦函数         |
| asin(x)     | 反正弦函数       |
| atan(x)     |反正切函数       |
| atan2(y, x) | 以 y/x 作为参数的反正切函数|
| cos(x)      | 余弦函数        |
| cot(x)      | 余切函数           |
| sin(x)      | 正弦函数           |
| tan(x)      | 正切函数              |

