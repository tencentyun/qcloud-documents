## 操作场景
云数据仓库套件 Sparkling 支持多样化的数据接入方式：

- 腾讯云数据库（TencentDB）数据接入：可以将云数据库中的数据接入到 Sparkling 中。
- 腾讯云对象存储（COS）数据接入：可以通过生成账户密钥，建立存储桶（bucket）进行数据接入。

同时，支持 RDBMS 增量同步及定时数据接入功能，可以通过时间戳增量追加方式实现增量同步，通过自定义调度周期实现定时数据接入功能。

## 操作步骤

### RDBMS 数据接入
进入 [集群管理](https://sparkling.cloud.tencent.com) 页面，在左侧导航单击【数据】进入数据接入页面，按以下操作步骤完成 RDBMS 数据接入：
![](https://main.qcloudimg.com/raw/a0c3027c3d8c98f5adedc52484706605.png)
##### 1. 数据源配置
选择【RDBMS】数据类型，支持【新建数据源】和【接入已有数据源】两种数据源接入方式。

新建数据源方式：
   a. 接入方式选择【新建数据源】。
	 b. 选择数据库所在的地域，对于跨地域数据库访问其稳定性和速率将会受到地域制约。
	 c. 填写云数据库 TencentDB 实例 ID（可在 [云数据库控制台](https://console.cloud.tencent.com/cdb) 获取数据库实例 ID）及 APPID（实例购买者可在 [账号信息](https://console.cloud.tencent.com/developer) 中查看 APPID）。
   d. 填写要接入的数据表所在的【用户名】、【密码】、【数据库名】、【表名】。
   e. 单击【测试连通性】确认是否可以连接到要接入数据表所在的数据库。
   f. 待显示 “数据连通正常” 后，单击【下一步】完成数据源配置操作，同时可以选择【保存数据源】选项将该数据源保存为已有数据源，待下次接入该数据源时可采用 “接入已有数据源” 方式。
	 ![](https://main.qcloudimg.com/raw/c8b18a8995bfab43ea7287aace363124.png)

接入已有数据源方式：
   a. 接入方式选择【接入已有数据源】。
	 b. 选择历史保存的已有数据源。
	 c. 输入表名后，单击【下一步】完成数据源配置操作。
	![](https://main.qcloudimg.com/raw/4627be4973b5fe641663b8112430034b.png) 

##### 2. 数据预览
在【数据预览】页可以预览数据表中的字段信息，默认抽取五行数据进行预览，预览无误后单击【下一步】。
![](https://main.qcloudimg.com/raw/f3a57238d729a45b66a0aa0edb6cc70a.png)

##### 3. 目标配置
支持【新建表】和【导入已有目标表】两种方式。

新建表方式：
a. 选择【新建表】并填写【标题】和【描述】。
b. 字段定义及分区部分可以设置字段名、描述及字段顺序，支持字段裁剪（可通过删除字段实现仅导入部分字段功能）。其中第一列“pt”列为默认分区字段，不支持删除操作，默认以该时间戳作为分区值。
c. 选择格式类型，支持【ORCFILE】和【PARQUET】两种格式。
d. 确认无误后，单击【下一步】完成新建表方式目标配置操作。
![](https://main.qcloudimg.com/raw/8cd11b46738c216db0c94e8d9a217931.png)

导入已有目标表方式：
a. 选择【导入已有目标表】后选择目标表名。
b. 设置目标分区。选择【依据例行任务导入动态分区】将会根据您的例行任务配置信息写入对应的分区文件；选择【自定义分区】请按照分区字段明确分区命名。
c. 单击【字段映射】进行字段匹配。若【下一步】处于置灰状态，说明字段映射未成功，请确认目标表与待导入数据源表字段可以匹配。
d. 确认无误后，单击【下一步】完成导入已有目标表方式目标配置操作。
![](https://main.qcloudimg.com/raw/c3fbfbcb7a841bea1d780ab92642f61a.png)

##### 4. 抽取任务配置
支持【单次】和【例行】两种调度方式。

单次方式：
a. 调度周期选择【单次】。
b. 数据加载方式可选择【时间戳增量追加】或【整表全量导入】。选择【时间戳增量追加】后需增加过滤条件，该方式只导入符合该过滤条件所包含的时间范围的数据，具体可参看语法说明；选择【整表全量导入】后可选择【写入前清理已有数据(Insert Overwrite)】或【写入前保留已有数据(Insert)】。
c. 确认无误后，单击【下一步】完成单次抽取任务配置操作。
![](https://main.qcloudimg.com/raw/70176e8d1330f4a4b4aa50ec31af7cc7.png)

例行方式：
a. 调度周期选择【例行】。
b. 设置间隔周期，支持每天、每周、每月、每小时，例如选择：每天0时0分，即每日0点0分自动开始执行任务。
c. 设置例行时长，即任务持续时间，支持一周、一个月、三个月、一年、永久。
d. 数据加载方式可选择【时间戳增量追加】或【整表全量导入】。选择【时间戳增量追加】后需增加过滤条件，该方式只导入符合该过滤条件所包含的时间范围的数据，具体可参看语法说明；选择【整表全量导入】后可选择【写入前清理已有数据(Insert Overwrite)】或【写入前保留已有数据(Insert)】。
e. 确认无误后，单击【下一步】完成例行抽取任务配置操作。
![](https://main.qcloudimg.com/raw/6d204cbb228f7ceca7b99a29416cb1f6.png)

##### 5. 预览
在【预览】页可以查看当前设置的数据源信息、数据预览信息、目标表信息及任务调度信息，确认无误后单击【完成】即可完成 RDBMS 数据接入任务设置。

### COS 数据接入
1. 进入 [集群管理](https://sparkling.cloud.tencent.com) 页面，在左侧导航单击【数据】进入数据接入页面。
2. 配置数据源。![](https://main.qcloudimg.com/raw/b414e8d5ef7f33d6f896605d11846c12.png)
   - 数据类型：选择【COS】数据类型。
   - 地域：选择 COS 存储桶所在地域。
   - 授权方式：选择用户密钥授权。
   - SecretID/SecretKey：填写您已生成的密钥，可在账户信息中查看。
   - 存储桶：填写您在 COS 中已生成的存储桶名称和您的 APPID。单击【浏览存储桶】可以查看当前存储桶下的数据。
	 >?存储桶名称需要按<目标存储桶名称-APPID>格式填写，例如：sparkling-12334513，桶名和 APPID 可在账户信息中查看。
	 >
  - 预览数据：单击【预览数据】可以预览接入的数据。
  - 基本信息：填写接入的表信息。
  - 存储信息：选择格式类型，支持【ORCFILE】和【PARQUET】两种格式。
3. 确认信息无误后，单击【下一步】进行数据预览、目标配置及预览操作（详见 RDBMS 数据接入）。





