在添加 SQLSERVER 数据库前，请先将商业智能分析 BI 的 IP 地址添加至数据库安全组，详见 [数据库连接方式概览](https://cloud.tencent.com/document/product/590/19294)。
1. 登录 [商业智能分析 BI 控制台](https://console.cloud.tencent.com/bi)，在添加数据源首页单击 **SQLSERVER 数据库**，进入新建页面。新建的页面如下：
![](https://main.qcloudimg.com/raw/679923fd113caa5a0892a4d0aeff7e83.png)
2. 填写相应的 SQLSERVER 数据库连接信息，至少把必填项都填写完毕。
<table>
<thead>
<tr>
<th>配置项</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>选择数据源</td>
<td>是</td>
<td>默认是在首页选择的数据库类型。用户也可以在下拉列表里选择其它的数据库类型，此处选中的是 SQLSERVER。</td>
</tr>
<tr>
<td>仅对有写权限的用户可见</td>
<td>否</td>
<td>如果 user1 对数据源只有读权限，对依赖此数据源的数据集有读或者读写权限，勾选此项，用 user1 登录，进入创建数据集模块，打开数据源会提示“仅对有写权限的用户可见”，打开依赖此数据源的数据集，数据源信息是收起的且不可展开。</td>
</tr>
<tr>
<td>驱动</td>
<td>是</td>
<td>用户可手动填写或选择需要的驱动类型。</td>
</tr>
<tr>
<td>URL</td>
<td>是</td>
<td>设定数据源 URL。在 URL 的项目中会直接将所填项目展示给用户，用户只需要修改正确的服务器地址就可以直接使用数据源。</td>
</tr>
<tr>
<td>服务器登录</td>
<td>是</td>
<td>包含两种方式：用户名和密码、无身份验证。当数据库设定了访问权限后，用户需要使用用户名和密码来访问当前数据库。</td>
</tr>
<tr>
<td>用户名</td>
<td>是</td>
<td>连接数据库所需要的用户名。</td>
</tr>
<tr>
<td>密码</td>
<td>否</td>
<td>连接数据库所需要的密码。</td>
</tr>
<tr>
<td>数据库</td>
<td>否</td>
<td>控制数据源下展示的数据库。当输入一个默认数据库，数据源下就只展示这一个，如果此处不做指定，那将显示所有的数据库。</td>
</tr>
<tr>
<td>表结构模式</td>
<td>否</td>
<td>控制数据源下展示的表结构模式。当选择一个表结构模式，数据源下就只展示指定的这一个，如果此处不做指定，那将显示所有的表结构模式。</td>
</tr>
<tr>
<td>高级属性</td>
<td>否</td>
<td>将数据源的一些非必填项放入高级属性，鼠标点击时能够触发展开和收起，新建和保存后再打开都是收起状态。</td>
</tr>
<tr>
<td>添加属性</td>
<td>否</td>
<td>数据源开放提供配置数据库 configuration properties 的接口，单击添加属性图标会在高级属性内添加一行“名称”和“值”供用户进行自定义设置，可手工添加多个数据库属性。</td>
</tr>
<tr>
<td>名称</td>
<td>否</td>
<td>需要配置的数据库的属性名称。</td>
</tr>
<tr>
<td>值</td>
<td>否</td>
<td>需要设置的数据库属性的值。</td>
</tr>
<tr>
<td>开启连接池</td>
<td>否</td>
<td>配置开启数据源连接池的开关，单击勾选可以开启连接池的配置。</td>
</tr>
<tr>
<td>有效连接时间</td>
<td>否</td>
<td>数据源的有效连接时间，默认为2小时，当配置为2小时后，超过2小时的连接占用不会放入连接池中。</td>
</tr>
<tr>
<td>最大连接数</td>
<td>否</td>
<td>该数据源最多的连接个数，默认为30。</td>
</tr>
<tr>
<td>Fetchsize</td>
<td>否</td>
<td>控制了 JDBC 每次读取数据的行数，默认为100。JDBC 每次读取的数据是会缓存在内存中的，建议合理配置，保证内存的充足。</td>
</tr>
<tr>
<td>显示别名</td>
<td>否</td>
<td>勾选后在数据集端会获取数据库中列的 comment 作为别名，默认在新建时是勾选状态。</td>
</tr>
<tr>
<td>编码转换</td>
<td>否</td>
<td>数据库编码是数据库的编码。转换编码是转换成的编码。当编码不一致时可以设置这两项来转换编码。</td>
</tr>
</tbody></table>
3. 单击**测试连接**，提示“测试成功”，即该数据源成功连接到相应数据库。
4. 单击菜单栏**保存**，保存该数据源。创建数据集和制作报告模块都可以使用已保存的数据源。
