## 制作表

### 创建表

拖拽右侧面板-组件上的表组件<img src="https://main.qcloudimg.com/raw/e4efec4398adf7b660f2fda4451f28e9.png" style="margin:0;"> 到仪表盘编辑区。

### 表的状态

表格有两种状态：细节数据表格，汇总数据表格。
新建表格默认是汇总数据表格，在绑定模式下，单击绑定区域右上角的按钮<img src="https://main.qcloudimg.com/raw/4e84d2632c4951edd9bd6114eb959b7c.png" style="margin:0;"> 来切换汇总数据表格和细节数据表格。转换时会移除掉可能非法的字段，如绑定的聚合指标计算器，并试图去转换度量字段的汇总函数。

### 绑定数据源

选中表格组件将鼠标移动至组件的工具栏处，单击绑定数据按钮<img src="https://main.qcloudimg.com/raw/fc985ab05adc70b00c1abaff4dfe0578.png" style="margin:0;"> ，打开表格组件的绑定界面。用户可通过鼠标拖拽来实现对表格组件的数据绑定，表格组件能够绑定多个数据段。在绑定界面中，维度目录下的数据段显示为浅灰色，而度量目录下的数据段显示为深灰色。
在查询树中支持 Shift 键连续选中，以及 Ctrl 键不连续多选，我们有以下三种方式来绑定数据段：

- 拖拽数据段到绑定窗口实现绑定，如图所示：
![](https://main.qcloudimg.com/raw/129e6e627f9fc8d0b0337628e5bb9a2a.png)
也可以拖拽数据段到绑定窗口替换绑定。
-  拖拽数据段到表格区域实现绑定，如图所示：
![](https://main.qcloudimg.com/raw/6b4c221012edaaeaeeb86724f9a1a33f.png)
也可以拖拽数据段到表格区域替换绑定，还可以拖拽数据段在表格区域插入绑定。
替换原有数据段的样式：
![](https://main.qcloudimg.com/raw/d33243feec9d16e5467871c9ad84e473.png)
插入原有数据段显示的样式：
![](https://main.qcloudimg.com/raw/1ae8487532d9670e2afa8d33b57af6ce.png)
- 双击查询树列表的数据段，实现绑定。

### 移除数据段

本产品支持四种方式来移除数据段。

1. 在已绑定的数据段的下拉列表中选择删除。
![](https://main.qcloudimg.com/raw/09ce674dbb6ad01deeade559bc704ce0.png)
2. 直接通过鼠标拖拽来实现数据段的移除，把数据段拖拽至查询树中。
![](https://main.qcloudimg.com/raw/0a6a04d75d6f71a9adf2a1d1e5feca32.png)
3. 通过绑定窗口的快捷清除按钮来移除所有数据段。
![](https://main.qcloudimg.com/raw/39df8b74eb98c71bc1e858beb0d7127f.png)
4. 拖拽绿色小三角到查询树中实现移除。如图所示：
![](https://main.qcloudimg.com/raw/9ac7ec13822d1fe6653fb3ca5c83f6ad.png) 

### 已绑数据段的可用操作

汇总表和非汇总表存在不同的操作，当汇总按钮高亮时，当前表处于汇总状态，见下图。非汇总表是指对绑定的数据不进行汇总统计，而汇总表格会把已绑定的数据进行汇总统计。
![](https://main.qcloudimg.com/raw/fea4e170993ca6f9a8b0cd276a2cb5f9.png)
表格绑定的维度数据段和度量数据段的可用操作存在差异。
![](https://main.qcloudimg.com/raw/3665bd30206ae3c785346278ca33d06c.png)
汇总表格的维度数据段的可用操作见下表。

| 维度数据段的下拉选项 | 说明                                                         |
| -------------------- | ------------------------------------------------------------ |
| 排序                 | 可对该数据段中的数据进行排序，其中高级排序的详细介绍见 [排序](https://cloud.tencent.com/document/product/590/19758#.E6.8E.92.E5.BA.8F) |
| 别名                 | 用户可给当前绑定的维度数据段设置别名                         |
| 移除                 | 移除当前数据段                                               |
| 合计                 | 可对每列进行合计（空、前置、后置）                           |

汇总表格的度量数据段的可用操作见下表。

| 度量数据段的下拉选项             | 说明                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| 环比（企业版功能）               | 用户可对当前的度量数据段进行环比计算，详细介绍见 [同比/环比计算](https://cloud.tencent.com/document/product/590/19758#.E5.90.8C.E6.AF.94.2F.E7.8E.AF.E6.AF.94.E8.AE.A1.E7.AE.97) |
| 同比（企业版功能）               | 用户可对当前的度量数据段进行同比计算，详细介绍见 [同比/环比计算](https://cloud.tencent.com/document/product/590/19758#.E5.90.8C.E6.AF.94.2F.E7.8E.AF.E6.AF.94.E8.AE.A1.E7.AE.97) |
| 添加动态计算器（企业版功能）     | 用户可对当前数据段中的数据进行动态计算，详细介绍见 [动态计算](https://cloud.tencent.com/document/product/590/19758#.E5.8A.A8.E6.80.81.E8.AE.A1.E7.AE.97.EF.BC.88.E4.BC.81.E4.B8.9A.E7.89.88.E5.8A.9F.E8.83.BD.EF.BC.89) |
| 预定义的动态计算器（企业版功能） | 系统中已定义好的动态计算器                                   |
| 别名                             | 用户可给当前绑定的数据段设置别名                             |
| 移除                             | 移除当前数据段                                               |

### 别名

对所绑定的度量数据段和维度数据段设置别名。

## 设置表格

通过表的设置面板可以对表的组件名称、可见性、选项及过滤器等进行设置。
打开方法：选中表格组件，单击右侧面板的设置。
![](https://main.qcloudimg.com/raw/3591e82caf2ef0ee60d6f446a30eee99.png)
【组件名称】表格组件的名称。名称是各组件的标识，故不同的组件，名称不能相同。
【可见性】当用户设置为不可见时，表格组件在仪表盘编辑区中以半透明的状态显示，表格组件的所有操作不受影响，在预览以及用户门户中此表格组件不可见，并且在导出文件中不显示组件。当用户设置为可见时，在仪表盘编辑区，预览以及用户门户中此表格组件都可见，并且在导出文件中显示。
【选项】包括显示行号、宽自适应和分页。
显示行号：勾选显示行号选项则会在表格组件的第一列中显示表格的行号。如下图：
![](https://main.qcloudimg.com/raw/f3a3ce8ffef8f143c3b06a8b4d7b2eb8.png)
宽自适应：勾选宽自适应：表格绑定的所有列将在表格组件的固定范围内按照平均列宽显示，不够显示的内容将被遮住；不勾选宽自适应：如果平均列宽 >= 90px 时，按照原来的显示，如果平均列宽小于90px时，表格将按照每列列宽90px显示，并显示横向的滚动条。默认为不勾选状态的。
例如，表格绑定6列时，勾选宽自适应，效果如下：
![](https://main.qcloudimg.com/raw/5c6338e78a5495c02dcd6d22293d4ba7.png)
不勾选宽自适应，效果如下：
![](https://main.qcloudimg.com/raw/609b7dbf38e6bec629767032553fb02b.png)
分页：选分页并选择分页行数后，表格组件下方会出现相应的分页区域展示当前页数的数据。用户可以通过输入页码显示当前页的数据，也可以通过单击上一页，下一页，第一页和最后一页进行翻页的操作，如下图所示：
![](https://main.qcloudimg.com/raw/45c05a689c76e5f39b62ee0a816c3156.png)
【过滤器】通过设置过滤条件时间组件数据的过滤。

## 设置表格标题

选中组件后在右侧面板的常规-标题中可设置标题的显示隐藏状态以及修改表格组件的标题。默认为所绑定查询的名称。
![](https://main.qcloudimg.com/raw/f84afd85b356b1244fe7dd9d65bf4a3b.png)

## 设置表格样式

在表格组件的常规-表格样式中，可以对表格的样式进行设置。
系统默认的表格的样式共有十大色系，即：魔影红、水晶紫、苹果绿、青海蓝、晴空蓝、鲜明橙、魔法灰、橄榄绿、海洋蓝和银河灰。每个色系下面各有十种不同的样式，下图是苹果绿色系下的样式：
![](https://main.qcloudimg.com/raw/f208c6b2fb42c2d2c363f2f4923aab64.png)
设置样式后的表格（此样式为默认样式），如下图所示：
![](https://main.qcloudimg.com/raw/f0a1798d466b1ab54f4e427c3a3a5ae3.png)
对于条状样式，只在最内层数据和汇总列上设置条状样式，如下图所示：
![](https://main.qcloudimg.com/raw/c6190c8adfbae218f748830422796203.png)

## 设置表格格式

在表格组件中存在区域的概念，用户可选择组件样式对表格整体进行格式的设定，用户还可选择局部样式来对组件的特定区域进行格式设定。表格组件中存在标题区域、列表头区域、每列的数据区域，用户可针对特定的区域进行格式设定。详细内容可参考 [设置格式](/document/product/590/19755)。

### 组件样式

选中组件后在右侧面板上展开组件样式，如下图所示：
![](https://main.qcloudimg.com/raw/88bdfbef074db2f9ff5b3f671ac38766.png)
字体】设置组件中数据的字体。
【颜色】为组件设置背景色及前景色。
【对齐】调整组件中数据的对齐方式。其中自动换行是调整单元格内容长度超过单元格长度时会换行显示。
【边框】为组件添加边框，以及设置添加边框的格式。
【透明度】可以设置背景色的显示程度。
【格式刷】可以快速将指定区域的格式延用到其他区域上。
【自动换行】在保持列宽一定的情况下显示出单元格中的所有文本。



### 局部样式

选中表的特定区域，单击右侧面板的常规，即可打开格式对话来对该区域进行格式的设定。
![](https://main.qcloudimg.com/raw/59564a2515e273c2f066676dec7606c2.png)

## 表格渲染（企业版功能）

只能对数值类型的数据进行表格渲染，此属性只适用于表和交叉表。表格渲染通过柱状图，图表数量等形式来更加形象的描述数据的大小。
其中预定义渲染包括柱状渲染、正负柱状渲染、形状渲染、正负形状渲染、图片渲染、斜线渲染、红绿灯渲染、涨跌渲染。
表格渲染在表中的作用区域为列（不包括列表头），在交叉表中表格渲染的作用区域为行表头、列表头以及数据区。
![](https://main.qcloudimg.com/raw/218125c82420af56bd32bd0ece456f05.png)
### 使用方法

1. 设置表格渲染
   选中表或交叉表的表格渲染的作用区域，单击右侧面板的常规-表格渲染。
![](https://main.qcloudimg.com/raw/133a0116dbe380f4a5a8710ea4f10c38.png)
2. 退出表格渲染
   在右侧面板常规中选择表格渲染，在表格渲染对话框中选择无渲染，则表格中相应的区域退出表格渲染模式。如下图：
	 ![](https://main.qcloudimg.com/raw/8a367d80c526dbd39863b9a2f3dd2a5e.png)

### 功能介绍

假设一数据源中的数据如下表：
![](https://main.qcloudimg.com/raw/8afba7a924fc7738828c43f955a66313.png)
#### 预定义渲染
预定义渲染支持以下渲染方式：柱状渲染、正负柱状渲染、形状渲染、正负形状渲染、图片渲染、斜线渲染、红绿灯渲染和涨跌渲染。

### 柱状渲染

在表格渲染对话框中选择柱状渲染，可设置最大值 ( 勾选自动时最大值为设置渲染列中所有数据的最大值，不勾选时需手动输入最大值）、显示值和分离标签，脚本处于灰色状态，不支持脚本的输入。
![](https://main.qcloudimg.com/raw/7ed2b056bbc694cc94e151fa4b015d4c.png)
当对该数据源进行上述操作后，效果如下图所示：
![](https://main.qcloudimg.com/raw/d9995152a0f90c30ba26d6d8858f6129.png)

### 正负柱状渲染

在表格渲染对话框中选择正负柱状渲染，可设置属性包括最大值（勾选自动时最大值为设置渲染列中所有数据的最大值，不勾选时需手动输入最大值）、显示值、分离标签、负数颜色、目标值、目标线样式和目标线颜色。脚本处于灰色状态，不支持脚本的输入，并且正负柱状渲染支持添加目标线的。
最大值是表中数据取绝对值后的最大值，例如最大值为100，则表中的正数数据大于100时，此数据当做100来处理，表中的负数数据小于-100时，此数据当做-100来处理；目标值是目标线在轴上所处位置的值；目标线样式和目标线颜色分别是对目标线的样式和颜色的设置；负数颜色则是表中的值为负数时画出的柱子的颜色。
![](https://main.qcloudimg.com/raw/e18ae15ca1a9cdc81ba3ce6bbc2ea678.png)
当对该数据源进行上述操作后，效果如下图所示：通过浅灰色柱形条的长度来描述正数数据的大小，红色柱形条的长度来描述负数数据的大小，黄色的细线是设置的目标值，效果如下：
![](https://main.qcloudimg.com/raw/8acc4f95f2a2a2761d9f47e710eb5d70.png)

### 形状渲染
形状渲染只支持正数，根据数值来决定形状的个数。倘若数据有小数，则五角星按比例进行显示，例如2.5，则显示两个半五角星。现只支持五角星作为形状。用户可通过在局部格式中设置背景色来改变五角星的颜色，通过计算单位来控制五角星的个数。倘若当前数据为2000，计算单位为200，则显示的五角星个数为当前数据除以计算单位所得的数据，应当显示10 个五角星。
![](https://main.qcloudimg.com/raw/e06285f25cd0b8eeb1aba8771dda5d1e.png)
当对该数据源进行上述操作后，效果如下图所示：
![](https://main.qcloudimg.com/raw/5dc836ccc0823c372eab4fb7abd6b68c.png)

### 正负形状渲染

正负形状渲染支持正数以及负数，根据数值来决定形状的个数。倘若数据有小数，则五角星按比例进行显示，例如2.5，则显示两个半五角星。现只支持五角星作为形状。通过在局部格式中设置背景色来改变五角星的颜色，设置负数颜色来设置负数五角星的颜色，以及计算单位。倘若当前数据为2000，计算单位为200，则显示的五角星个数为当前数据除以计算单位所得的数据，应当显示10个五角星。
![](https://main.qcloudimg.com/raw/4e7781972a2bc4e06e670b9b03ed6f73.png)
当对该数据源进行上述操作后，效果如下图所示：
![](https://main.qcloudimg.com/raw/b757a5549c346d5e5d411a415070f6d3.png)

### 图片渲染
倘若在查询中数据为图片的地址，在仪表盘中绑定该数据后，选择图片渲染，则当前表格中会显示出该图片。查询中的数据为各个图片的地址，如下图所示：
![](https://main.qcloudimg.com/raw/bb5fbc4cdba7dfe967f14a330b771bef.png)
分别在  name 列和 url 列使用图片渲染，如下图。其中当用户勾选缩放选项时，图表按照格子的比例进行显示，当不勾选缩放时，图片按照原始比例进行显示。
![](https://main.qcloudimg.com/raw/61c98f8efdeb0daa26a2b7b5c4ac2980.png)
进行图片渲染后如下图所示：
![](https://main.qcloudimg.com/raw/b352ecd6495dea15a3942521c0072448.png)

### 斜线渲染

该渲染方式在交叉表的表头中更有意义，用户选中交叉表的第一列第一行的交界区域，右键选择表格渲染，选定渲染格式为斜线渲染，如下图所示：
![](https://main.qcloudimg.com/raw/d92f0a4d3f04ceca895f9794f58d9673.png)
【表头内容（, 分割）】表头的内容通过英文格式的”,”来进行分割。
【始于左上点】当勾选时斜线的起始点为表格的左上点，不勾选时为右下点。
>!当内容含有中文时，用户需要设定表格中的字体类型，一般设为宋体。

单击【确定】，效果如下。
![](https://main.qcloudimg.com/raw/7782e622087592045d25f6fb17ad2e15.png)

### 红绿灯渲染
在表格渲染对话框中选择红绿灯渲染，支持显示值、起点值和终点值，大于终点值时显示红灯的勾选，并且支持红灯，黄灯，绿灯图片的自定义设置。脚本处于灰色状态，不支持脚本的输入。
勾选显示值表示设置渲染后会同时显示数据的数值，反之则只显示渲染，不显示数值；起点值和终点值将数据分为三段，一是小于起点值的数据，二是大于等于起点值小于等于终点值的数据，三是大于终点值的数据。
![](https://main.qcloudimg.com/raw/1ecb93dd4e856b4d690237cc23d14350.png)
例如， ID 为1 - 15的数据起点值为5，终点值为10，勾选显示值和大于终点值时显示红灯的选项，配置如下图所示：
![](https://main.qcloudimg.com/raw/accf27a5bb242de0afee078f8fd76a8b.png)
当对该数据源进行上述操作后，效果如下图所示：
![](https://main.qcloudimg.com/raw/0b4df49e7e5bb6ca272d8c88d0d91931.png)
用户还可以根据需要设置红绿灯渲染的图片。操作如下：
在表格渲染对话框的红绿灯渲染下选择红灯，黄灯或绿灯的图片，单击弹出图样编辑器，如下图所示：
![](https://main.qcloudimg.com/raw/b6f9b9b1f623665ddd8d280f764a413e.png)
在图片列表上，用户可根据需要选择图片。也可单击导入图片，将图片导入后，设置为红绿灯渲染的图片。

### 涨跌渲染

在表格渲染对话框中选择涨跌渲染，支持显示值、比较值的输入，并且支持上涨，下跌图片的自定义设置。脚本处于灰色状态，不支持脚本的输入。
勾选显示值表示设置渲染后数据的数值还会同时显示，若不勾选则只显示渲染，不显示数值；比较值表示上涨与下跌的参考标准。小于比较值的数据显示为下跌，大于等于比较值的数据显示为上涨。
例如， ID 为1 - 15的数据，设置比较值为5，勾选显示值选项，则配置如下图所示：
![](https://main.qcloudimg.com/raw/1bf365d11de8865a6e40236d6359e542.png)
当对该数据源进行上述操作后，效果如下图所示：即：小于5的值显示为下跌，大于等于5的值显示为上涨。
![](https://main.qcloudimg.com/raw/c07cc659ef5f1e85d89274a626a5e7dc.png)
用户也可以根据需要设置涨跌渲染的图片。操作同红绿灯渲染。

## 设置叠放层次

叠放层次分为到顶部和到底部。当存在组件的重叠现象时，使用此功能可以调整组件的显示顺序。
例如：下面的报告中，文本框被表格组件遮挡，需要通过叠放层次的设置，把文本框放在报告的最顶层。
![](https://main.qcloudimg.com/raw/e785b2c6ed06d174a562e331ee880331.png)
1. 选中需要设置层次的组件，例如文本组件。
2. 单击更多，选择【叠放层次】>【到顶部】。
![](https://main.qcloudimg.com/raw/2a0506c4a98ffb3249ad7400c62f06bd.png)
3. 文本组件出现在表格上层，如图所示。
![](https://main.qcloudimg.com/raw/f2ad23f3849911cd157b00ba6d39f6ae.png)

## 可视化分析
在仪表盘中各个组件根据各自特性，可以提供不同语义的数据展现。 腾讯云认为数据展现不是结束，而只是开始，看到问题，更需要解决问题。要满足用户的日常管理和决策，操作型商业智能的实时性要求就成为必然。为满足普通的用户对商业智能系统提供服务的实时性需求，不同特点的组件都提供了各自相符的数据分析的功能操作。本章将介绍如何实现这些常见的操作。

### 聚合计算
图表、表、交叉表、文本和仪表等组件绑定的度量列支持切换不同的聚合方式去展示数据。以表格为例，首次绑定一个度量列时，列的聚合方式默认为总和，可再次绑定4次，聚合方式默认依次为平均、计数、最小值、最大值，之后不能再绑定此列。
产品中提供了23种聚合方式，下面分别介绍。

#### 总和
总和，即将所有数据的值加起来的总值。
例如，给表格组件绑定2列，MARKET 和 SALES，SALES 的聚合方式为总和，如下图所示，Central 对应的所有 SALES 数据总和值为265045。
![](https://main.qcloudimg.com/raw/5f59f60613901f7f2dd39df7abda4db5.png)

#### 平均
平均，即将所有数据值加起来除以总数据数得到的值。
例如，给表格组件绑定2列，MARKET 和 SALES，SALES 的聚合方式为平均，如下图所示，Central 对应的所有 SALES 数据的平均值为192.206。
![](https://main.qcloudimg.com/raw/1e135affb8aead560fa0b25e610a5399.png)

#### 最大值
最大值，即所有数据值中最大的值。
例如，给表格组件绑定2列，MARKET 和 SALES，SALES 的聚合方式为最大值，如下图所示，Central 对应的所有 SALES 数据中的最大的值为716。
![](https://main.qcloudimg.com/raw/2e0a80947e43795c82d190a3443f4f6d.png)

#### 最小值
最小值，与最大值相反，即显示所有数据值中最小的那个值。
例如，给表格组件绑定2列，MARKET 和 SALES，SALES 的聚合方式为最小值，如下图所示，Central 对应的所有 SALES 数据中的最小的值为23。
![](https://main.qcloudimg.com/raw/431a7bb8722a59e979fce88facf45bb1.png)

#### 计数
计数，即所有数据行的总数量，包括数据值相同的数据。
例如，给表格组件绑定2列，“列名”和“值”，“列名”的聚合方式为计数，如下图所示，“a”对应的所有值的数据总行数计数为6。
![](https://main.qcloudimg.com/raw/06cf58212f313744c5a01efd523ead05.png)

#### 精确不同值计数
精确不同值计数，即所有数据行中数据值不同的数据的总行数，相同数据的只计算一次。
例如，给表格组件绑定2列，“列名”和“值”，“列名”的聚合方式为精确不同值计数，如下图所示，“a”对应的所有值中不同值的数据总行数计数为3，即列名为“a”值为“3”的数据共有三行，按照一行计算。
![](https://main.qcloudimg.com/raw/13b5ecf8310599b0b3fc2378030f5c4c.png)

#### 不同值计数
不同值计数，数据量较小时与精确不同值计数类似，即计算所有数据中不同数据值的行数。只有在大数据量的时候不同值计数才有可能与精确不同值结果有差别，即当数据量较大时，精确不同值数据仍旧是计算所有数据中不同值的数据数量，而不同值计数只会从部分数据中计算不同值的数据数量。
例如，给表格组件绑定2列，MARKET 和 SALES，SALES 的聚合方式为不同值计数，如下图所示，Central 对应的 SALES 数据的不同值计数结果为330，而精确不同值计数的值为322。
![](https://main.qcloudimg.com/raw/c9800e06a18c5630874a6bdba5883030.png)

#### 相关系数
用户可以在绑定界面中列的下拉菜单中选择度量-更多，打开聚合对话框，聚合方式选择相关系数，如下图所示，当选择相关系数后，”和“会变成可选状态，即要选择的相关的列，此选项为必选，加载组件当前绑定查询的所有数值类型的度量列，后面有与此类似的将不赘述。
![](https://main.qcloudimg.com/raw/49f256c42f25a10d0c878ccc3eaee22f.png)
例如，给表格组件绑定2列，MARKET 和 SALES，SALES 的聚合方式为相关系数，第二列“和”选择列“AREA_CODE”，结果如下图所示。
![](https://main.qcloudimg.com/raw/d671792847e987508dcd33c83f67fcb0.png)

#### 协方差
用户可以在绑定界面中列的下拉菜单中选择度量-更多，打开聚合对话框，聚合方式选择协方差，当选择协方差后，“和”会变成可选状态，即要选择的权重列，为必选项。
例如，给表格组件绑定2列，MARKET 和 SALES，SALES 的聚合方式为协方差，第二列“和”选择列“AREA_CODE”，结果如下图所示。
![](https://main.qcloudimg.com/raw/8ac0fcc3c45a20de297fd6c5a6029076.png)

#### 中位数
中位数，即所有数据中间的数据值。
例如，给表格组件绑定2列，“列名”和“值”，“列名”的聚合方式为中位数，结果如下图所示，当前数据总共6行，则中位数为第3行与第4行数据的平均值。
![](https://main.qcloudimg.com/raw/2a025ca25e33b9cec9b6021718ffeecc.png)

#### 模式

用户可修改聚合对话框中的聚合方式为模式，当选择模式时，“和”选项不可选。

#### 总体标准差

用户可修改聚合对话框中的聚合方式为总体标准差，当选择总体标准差时，“和”选项不可选。

#### 总体方差

用户可修改聚合对话框中的聚合方式为总体方差，当选择总体方差时，“和”选项不可选。

#### 乘积

用户可修改聚合对话框中的聚合方式为乘积，当选择乘积时，“和”选项不可选。

#### Pth 百分位

用户可修改聚合对话框中的聚合方式为 Pth 百分位，当选择 Pth 百分位时，聚合选项下方显示P输入框，此输入框仅支持输入数字，有效值为【0,100】。

#### 四分位数

用户可修改聚合对话框中的聚合方式为四分位数，当选择四分位时，聚合选项下方显示四分位数输入框，此输入框仅支持输入数字，有效值为【0,4】。

#### 范围

用户可修改聚合对话框中的聚合方式为范围，当选择范围时，“和”选项不可选。

#### 标准差

用户可修改聚合对话框中的聚合方式为标准差，当选择标准差时，“和”选项不可选。

#### 标准误差

用户可修改聚合对话框中的聚合方式为标准误差，当选择标准误差时，“和”选项不可选。

#### 平方和

用户可修改聚合对话框中的聚合方式为平方和，当选择平方和时，“和”选项不可选。

#### 权重和

用户可修改聚合对话框中的聚合方式为权重和，当选择权重和时，“和”选项变成可选，并且是必选的。

#### 方差

用户可修改聚合对话框中的聚合方式为方差，当选择方差时，“和”选项不可选。

#### 加权平均

用户可修改聚合对话框中的聚合方式为加权平均，当选择加权平均时，“和”选项变为可选，并且是必选的。

### 动态计算（企业版功能）

动态计算器是表、交叉表和图表组件特有的，用来计算格子之间的数值变化。例如求同比、环比、年度百分比和总计百分比等等。此类计算器只能保持在单个组件里，不能被其他组件重复使用。

动态计算器指每个格子的数值是动态计算出来的，也可以称为是格间计算。主要解决在表格中沿着特定的方向来动态计算出数值。其中有两个要素，即计算方向，和计算方法（或函数）。
计算方向就跟表的结构有关系。如果想做产品关于季度增量的环比计算，就需要把产品字段和季度字段作为分组，沿着季度字段来计算。我们把分组叫做分区（Partition）。沿着什么方向叫做基于的方向（Addressing）。
计算函数包括差值、百分比、差值百分比、汇总百分比、累积计算、移动计算和排名计算。每一种计算函数都有一些特殊的属性和参数。
界面上提供了一些内置的计算函数和计算方向，用户也可以根据需要自定义计算函数和计算方向。对于自定义的计算函数，还可以使用二次计算的属性，即当前动态计算可使用其他动态计算的结果再做第二次计算。

#### 添加动态计算器

1. 在绑定的度量数据段的下拉列表中选择“预定义的动态计算器”，在展开的子列表中选择想要添加的计算器：差值、百分比、差值百分比、汇总百分比、累积总计、移动计算和排名计算。添加完以后，还可以在数据段的下拉列表中进行编辑。
2. 在绑定的度量数据段的下拉列表中单击【添加动态计算器】，弹出添加动态计算器的对话框，在该对话框中有三个选项【计算】、【计算依据】以及【差值】。其中【计算依据】选项在不同的组件中含有的内容不同。
![](https://main.qcloudimg.com/raw/3e710474651694ffd9f0ab88057cc6d3.png)

#### 分组与方向
分组即把组件中的数据进行分组，方向决定动态计算的顺序。例如一表中的数据如下图所示：
![](https://main.qcloudimg.com/raw/c68c0e0a4f6fe92054f465da74e982f6.png)
把表按列进行分组，计算方向为纵向，计算函数为累积总计，结果如下表所示。按照蓝色框中的字段进行分组，红色框中的数据为计算方向。
![](https://main.qcloudimg.com/raw/68857b43f5c302577b4858674e311f54.png)
用户定义的计算方向包括表格横向、表格纵向、表格横向然后纵向、表格纵向然后横向、沿平面横向、沿平面纵向、沿平面先横向再纵向、沿平面先纵向再横向、格子和高级。
假设一交叉表中行表头绑定了年和季度字段，列表头绑定了产品类别“PRODUCT_TYPE”和产品“PRODUCT”字段，汇总行绑定销售额“SALES”字段，如下图所示，此表将在下文中多次使用。
![](https://main.qcloudimg.com/raw/a3b7b1f07b5e29835429a2bc4be3fa49.png)
- 表格横向
  在每个分组内沿水平方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格横向时，季度和年为 Partition，产品和产品类别为 Addressing。
![](https://main.qcloudimg.com/raw/466415a95344b311fc0fd5f9afcdae64.png)
分组情况如下图所示：
![](https://main.qcloudimg.com/raw/87f19390e54ba7f804bb71d138c95c14.png)
- 表格纵向
  在每个分组内沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格纵向时，产品和产品类别为 Partition，季度和年为 Addressing。
![](https://main.qcloudimg.com/raw/993ff7850ea58f8671dda1ed07d0ae47.png)
分组情况如下图所示：
![](https://main.qcloudimg.com/raw/cc4f9333578314d0fdafcebdb98977d4.png)
- 表格横向然后纵向
  在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格横向然后纵向时，所有字段既为 Partition 又为 Addressing。
![](https://main.qcloudimg.com/raw/223e786602cb0a829dfacf1e5449af0a.png)
所有字段作为分组，计算方式为表格横向进行计算然后到下一行，再沿表格横向继续进行计算。
![](https://main.qcloudimg.com/raw/48b3d70b217b947ebae697b9f0e804c8.png)
- 表格纵向然后横向
  在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格横向然后纵向时，所有字段既为 Partition 又为 Addressing。
![](https://main.qcloudimg.com/raw/223e786602cb0a829dfacf1e5449af0a.png)
所有字段作为分组，计算方式为表格纵向进行计算然后到下一列，再沿表格纵向继续进行计算。
![](https://main.qcloudimg.com/raw/fc9f8fe018582c9fc551ca11a1196014.png)
- 沿平面横向
  在每个平面内沿水平方向进行计算。注意平面是由绑定的倒数第二个维度字段确定的。
  如下图所示季度产品的销售情况，当 Addressing 选择沿平面横向时，季度、年和产品类别为 Partition，产品作为 Addressing。
![](https://main.qcloudimg.com/raw/ab39fd6cff899bfc7a84531aa00cf296.png)
分组情况如下图所示：
![](https://main.qcloudimg.com/raw/b1e6bef83e1225c961a05f5c114ab702.png)
- 沿平面纵向
  在每个分组内沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择沿平面纵向时，年、产品类别和产品为 Partition，季度作为 Addressing。
![](https://main.qcloudimg.com/raw/ac1e5e8af31b81730a525b8b300554c0.png)
分组情况如下图所示：
![](https://main.qcloudimg.com/raw/921ba88d77ede4840417f644c93c4712.png)
- 沿平面先横向再纵向
  在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择沿平面先横向再纵向时，年和产品类别作为 Partition，季度和产品作为 Addressing。
![](https://main.qcloudimg.com/raw/6e002896a134798205b7dad58b85b31c.png)
分组情况如下图所示，计算方式为平面横向进行计算然后到下一行，再沿平面横向继续进行计算。
![](https://main.qcloudimg.com/raw/c9ea07aabf66f1088d40e57d0f39a829.png)
- 沿平面先纵向再横向
  在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择沿平面先横向再纵向时，年和产品类别作为 Partition，季度和产品作为 Addressing。
![](https://main.qcloudimg.com/raw/a04f103e3784bdf749737fadb279fb9a.png)
分组情况如下图所示，计算方式为平面纵向进行计算然后到下一列，再沿平面纵向继续进行计算。
![](https://main.qcloudimg.com/raw/ed208c5d1587bf912d5f3f13cad37d7e.png)
- 格子
  基于每个格子进行计算，此时所有字段都是 Partition，当计算占总数的百分比时尤其有使用价值。
- 高级
  用户单击高级选项，则会弹出自定义桩对话框，如下图所示 :
![](https://main.qcloudimg.com/raw/65320aace32e73465b8c668f523fe190.png)
可用的列】可用的列中列出了当前组件中绑定的所有维度字段，包括图表的美化界面中绑定的维度字段。
【计算依据】用户可通过鼠标拖拽来设定计算依据那一个数据段进行分组计算。
例如：存在一个图表，如下图所示 。
![](https://main.qcloudimg.com/raw/4e8f7351bd36ee68437293c5a133480c.png)
用户需要分别计算 Small Market 和 Major Market 中每个 Market 的盈利占比情况。
用户需要在总和\_PROFIT 的下拉列表中选择添加动态计算器选项计算选择为汇总百分比，计算依据选择高级，汇总函数选择总和。
![](https://main.qcloudimg.com/raw/6486a577c45f1113ba75c8bbeaf739a6.png)
计算依据选择高级后，弹出自定义桩对话框，用户需要把 MARKET字段拖拽到计算依据列表中，即按照 MARKET 进行分组计算。
![](https://main.qcloudimg.com/raw/6da188bdfff673d7b66b82d40c342122.png)
单击确定按钮后，选中图表，右边面板-绘图中去掉勾选数值标签的隐藏，使显示标记值，结果如下图所示：
![](https://main.qcloudimg.com/raw/353a3c3ff7e46216ea1a77e4c77a7e87.png)
用户还可设定自定义桩的排序。如存在一交叉表，如下图所示 :
![](https://main.qcloudimg.com/raw/fd52b34180f8268a768498c73f5e6c50.png)
在“总和\_PROFIT”字段的下拉列表中选择添加动态计算器按钮。在弹出的动态计算对话框中，计算选择差值，计算依据选择高级，差值选择向前，如下图所示：
![](https://main.qcloudimg.com/raw/589b78c76bbc28e8532b99680748ae22.png)
计算依据选择高级后，弹出自定义桩对话框，用户需要把“季度”字段拖拽到计算依据列表中，即按照季度进行分组计算。
排序列选择 PROFIT，进行升序，聚合方式为总和。
![](https://main.qcloudimg.com/raw/0d8aaec2d33f49557f0bf2ba68a39949.png)
计算前后如下图所示 : 产品 Amaretto 的四个季度的盈利由少到多的排序为第3季度、第2季度、第4季度、第1季度。由于动态计算是基于“总和\_PROFIT" 进行升序计算，则动态计算的结果为第3季度为空，第2季度的值为1077.0-972.0=105.0，第4季度值为1352.0-1077.0=275.0，第1季度的值为1489.0-1352.0=137.0。
![](https://main.qcloudimg.com/raw/d461a25d97bc7c016183fc7b18d24519.png)

### 差值

差值：数据1减去数据2所得到的值。
百分比：数据1除以数据2的值的百分比形式。
差值百分比：数据1减去数据2得出的值再除以数据2。差值百分比可用于计算增长率等。

### 同比增长率
同比就是今年第 n 月与去年第 n 月比。例如存在一个交叉表，统计产品的每年各个季度的销售情况，如下图所示：
![](https://main.qcloudimg.com/raw/c1173d67dfe56e6cffd9d6582efcd3fc.png)
当用户需要计算每种产品的季度同比增长率时，需要为“总和\_SALES”字段添加动态计算器。计算函数为与前一个的差值百分比，计算的方向（Addressing）需要用户自己设定，计算同比增长率应当按照“年” 为 Addressing，如下图所示：
![](https://main.qcloudimg.com/raw/1499d539baa9034ffbeceab22013a0e6.png)
计算结果如下图所示：
![](https://main.qcloudimg.com/raw/40cce59fbdb7daecdbdbc8d8b5598c1c.png)

#### 年初至今增长率
年初至今增长率就是今年第 n 月与第 n-1 月的差值比第 n-1 月的值。例如存在一个交叉表，统计产品的各个月份的销售情况，如下图所示：
![](https://main.qcloudimg.com/raw/6f4a87029ed878cf18241a73d0ebf7ff.png)
当用户需要计算每种产品的月销售增长率时，需要为“总和\_SALES”字段添加动态计算器。计算函数为与前一个的差值百分比，计算的方向（Addressing）为表格纵向。
![](https://main.qcloudimg.com/raw/cbbdf1d5aa8f6df775437573e875640a.png)

#### 汇总百分比

汇总百分比：当前数据除以所有数据总和。

#### - 累计总计

累积总计：数据依次进行累计求和。

#### - 移动计算

移动计算：用户可灵活设定参与汇总计算的数据个数。

#### - 排名计算

排名计算：用户可以将数据进行排名。

#### - 定制计算
在打开的动态计算对话框中，计算中选择定制选项。
![](https://main.qcloudimg.com/raw/69c3563eaaa85a5f069e66ebcd7443ec.png)
选择定制后打开脚本输入对话框 , 如下图所示，在公用中会有动态计算器相关的函数：
![](https://main.qcloudimg.com/raw/95703860f42dd703d4f29ed9f42cf12f.png)
【名称】作为添加动态计算器脚本后数据段的名称。

当用户使用脚本进行动态计算，单击【确定】再次进入动态计算对话框，在此框中用户可通过计算依据选项来设定动态计算的方向。当用户需要再次编辑表达式时，单击【编辑】，则可对表达式进行再次编辑。如下图：
![](https://main.qcloudimg.com/raw/7ecd7fa73cac93d80977ffb74ed4b954.png)
【二次计算】即在当前的表达式中存在其他脚本动态计算数据段名称。如已经存在一个脚本动态计算数据段，名称为 movingAVG，当用户在当前的表达式中再次使用 movingAVG 数据段，则属于第二次脚本动态计算，如表达式为 `movingMin(col[‘movingAVG’],2,2,true,true); `时用户需要勾选二次计算选项。

本产品提供了15个动态计算函数，如下表所示。

| 动态计算函数                                                 | 说明                 | 举例                                |
| --------------------------------------- | ---------------------------- | ---------------------------------- |
| diff(Object expression, [int position])                      | 返回两个指定值的差值。                                       | diff(col[‘sales’], PREVIOUS) ;//计算 sales 字段的差值，当前值与前一个值的差值。//如果当前值或前一个值为空，返回空。 |
| percentDiff(Object expression, [int position])               | 返回两个指定值的差值百分比。                                 | percentDiff (col[‘sales’], PREVIOUS);//计算 sales 字段中当前值与前一个值的差值百分比。//如果当前值或前一个值为空或零，返回空。 |
| percent(Object expression, [int position])                   | 返回占指定值的百分比。                                       | percent (col[‘sales’], PREVIOUS);//计算 sales 字段中当前值与前一个值的百分比。//如果当前值或前一个值为空或零，返回空。 |
| percentSum(Object expression)                                | 当前值与总和的百分比。                                       | percentSum(col[‘sales’]);//当前值除以总的求和值              |
| percentMax(Object expression)                                | 当前值与最大值的百分比。                                     | percentMax(col[‘sales’]);//当前值除以总的最大值              |
| percentMin(Object expression)                                | 当前值与最小值的百分比。                                     | percentMin(col[‘sales’]);//当前值除以总的最小值              |
| percentAvg(Object expression)                                | 当前值与总平均值的百分比值。                                 | percentAvg(col[‘sales’]);//当前值除以总的平均值              |
| movingSum(Object expression,[ int prev, int next, boolean cincludedCurrent, boolean nappended]) | 移动计算求和，返回从前几个值到后几个值的和<br>//prev 前几个值<br>//next 后几个值<br>//cincluded 是否包括当前值<br>//nappended 如果没有足够值，是否取空。</br> | movingSum(col[‘sales’], 2, 2, true, true); //给 sales 字段，取当前值的前两个，后两个，加当前值，求和。没有足够值取空。 |
| movingAvg(Object expression, [int prev, int next, boolean cincluded, boolean nappended]) | 移动计算平均值，返回从前几个值到后几个值的平均值              | movingAvg(col[‘sales’], 2, 2, true, true);//给 sales 字段，取当前值的前两个，后两个，加当前值，取平均值。没有足够值取空。 |
| movingMax(Object expression, [int prev, int next, boolean cincluded,    boolean nappended]) | 移动计算最大值，返回从前几个值，到后几个值之间的最大值        | movingMax(col[‘sales’], 2, 2, true, true); //给 sales 字段，取当前值的前两个，后两个，加当前值，求最大值。没有足够值取空。 |
| movingMin(Object expression,[ int prev, int next, boolean cincluded, boolean nappended]) | 移动计算最小值。返回从前几个值，到后几个值之间的最小值    | movingMin(col[‘sales’], 2, 2, true, true); //给 sales 字段，取当前值的前两个，后两个，加当前值，求最小值。没有足够值取空。 |
| runningAvg(Object expression,[Object reset])           | 累积计算平均值，返回从第一个值，到当前值，累积求平均<br>//reset 是从哪个字段开始重新开始累积。 | runningAvg(col[‘sales’] col[‘city’]);//计算 sales 字段的累积平均值。遇到 city 字段的分组，重新累积。 |
| runningMin(Object expression,[Object reset])                 | 累积计算最小值，返回从第一个值，到当前值，累积求最小值     | runningMin(col[‘sales’] col[‘city’]);//计算 sales 字段的累积最小值。遇到 city 字段的分组，重新累积。 |
| runningMax(Object expression,[Object reset])                 | 累积计算最大值，返回从第一个值，到当前值，累积求最大值       | runningMax(col[‘sales’] col[‘city’]);//计算 sales 字段的累积最大值。遇到 city 字段的分组，重新累积。 |
| runningSum(Object expression,[Object reset])                 | 累积计算和，返回从第一个值，到当前值，累积求和             | runningSum(col[‘sales’] col[‘city’]);//计算 sales 字段的累积求和。遇到 city 字段的分组，重新累积。 |

当组件处于聚合状态时，在脚本中引用该字段时要在字段前边加上 Sum、 Avg 等汇总函数的缩写。

例如：一汇总表中绑定了 PROFIT 字段，并对该字段进行了求和汇总，如下图所示：
![](https://main.qcloudimg.com/raw/3bdce781997bd12dfbf31c1e6b147e9b.png)
当用户需要为该汇总表中的 PROFIT 字段添加动态计算，脚本内容为 `movingMax(sum(col['PROFIT']), 1, 1, true, true);` 即移动计算求最大值，如下图所示：
![](https://main.qcloudimg.com/raw/b8df6184d331238d50d938759edd961c.png)
计算结果如下图所示：
![](https://main.qcloudimg.com/raw/b49ac13180700debfded5ccc52bba0ac.png)

### 同比/环比计算
同比环比适用于表、交叉表和图表组件，通常用来分析本阶段和上一个阶段的增长率。
同比（Year-on-year）是本阶段的某个周期与上个阶段的相同周期比较，适用于观察某个指标在不同阶段的变化，例如本周本日与上周本日比较，本年同月与上年同月比较等；环比（Month-on-month）是某个阶段与上一个阶段等时长比较，例如上周和本周，上月和本月，上季度和本季度等等，用于表示数据的连续变化趋势。
产品中提供两种方式计算同环比：按日期维度计算、按非日期列计算。

#### 日期维度的同环比
支持的日期表达式：年(Year)、年季度(YearQuarter)、年月(YearMonth)、年周(YearWeek)和天(FullDay)。

通常来讲，绑定了日期维度列和度量之后，在绑定的度量列的下拉列表中选择同比或者环比，展开的子菜单会根据日期列代表的周期自动显示比较的内容。下面会逐一列举不同的日期列可以计算的内容。

##### 日期列天 (FullDay) 同比
绑定维度列天和度量列后，在绑定的度量列下面选择同比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/82420a1fdf7dcf20efc710336602eaed.png)
可以清晰的看到，按天 (FullDay) 计算同比时，可以计算本周同比增长率、本月同比增长率、本年同比增长率。同时，用户可以根据自己的需求选择定制不同的周期。关于定制，下面的定制章节就会讲到。

##### 日期列天 (FullDay) 环比
绑定维度列天和度量列后，在绑定的度量列下面选择环比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/fdedf657cefd6bceecea99246eac2ed7.png)
按照维度列天计算得到环比本月数据值和同比增长率，展示的结果如下：
![](https://main.qcloudimg.com/raw/ae6f7d386a9151f4d4173f221287c8bf.png)

##### 日期列年周 (YearWeek) 同环比
绑定维度列年周和度量列后，在绑定的度量列下面选择同比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/987304cd034e4a5ae5a2a957afbea82a.png)
继续添加度量列，可以计算年周的环比：
![](https://main.qcloudimg.com/raw/fac55ea7ea95e05fa0f1d5605cda935b.png)

##### 日期列年月 (YearMonth) 同环比
绑定维度列年月和度量列后，在绑定的度量列下面选择同比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/02b4f1d09c8d5d98e48b57d232b76b70.png)
继续添加度量列，可以设计算年月的环比。
![](https://main.qcloudimg.com/raw/4ae5323d78bfe63d8daf67791b20baad.png)

##### 日期列年季度 (YearQuarter) 同环比
绑定维度列年季度和度量列后，在绑定的度量列下面选择同比和环比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/bae773188809a2d4a7da024338082283.png)
![](https://main.qcloudimg.com/raw/f9b6dd2af611b87b0465cdef60bd5892.png)

##### 日期列年 (Year) 环比
绑定维度列年和度量列后，在绑定的度量列下面只能计算环比：
![](https://main.qcloudimg.com/raw/e154ec85a4d8ed7cbb0eab2539a752fe.png)

##### 定制
在同比环比的子菜单中可以选择定制，用户可以根据不同需要设置大于等于1的周期间隔。
以日期列天 (FullDay) 为例，同比定制的菜单栏如下图所示：
![](https://main.qcloudimg.com/raw/d54431b1572a764dff4d8f7f1e179802.png)
【同比】：定制的大周期可以选择周、月、年。
	   当选择周时，可以计算本周增长率、本周增长值、本周同日数据值和上周同日数据值。
【周期间隔】：默认值为1。可以设置大于0的任意整数。
以日期列天 (FullDay) 为例，环比的定制菜单栏如下图所示。
![](https://main.qcloudimg.com/raw/4765b0d7bc64ee8738a98da30e72f04f.png)
【环比】：可以选择增长率、增长值、本日数据值和上日数据值。
【周期间隔】：默认值为1。可以设置大于0的任意整数。

##### 应用举例

按日期列年月计算同比环比：
1. 增加一个日期维度列年月，增加一个度量列：总和 \_SALES。
2. 再增加一列：总和 \_SALES，在下拉菜单同比中选择，“本年同比增长率” 。
3. 依此类推，增加一列：总和 \_SALES，在下拉菜单中环比中选择环，“上月数据值”。
4. 再增加一列：总和 \_SALES，在同比子菜单中选择定制，在定制的菜单栏中选择“本年增长率”，设置周期间隔2年。
5. 再增加一列：总和 \_SALES，在环比子菜单中选择定制，在定制的菜单栏中选择“增长率”，设置周期间隔2月。计算结果如下图所示：
![](https://main.qcloudimg.com/raw/b9cf5dbfc1ae284fdbadbf39ee86e22c.png)

#### 非日期维度的同环比
用户可以根据需求，自定义计算的周期和计算的方向，计算的周期包括周、月、年等，计算的方向包括增长值、增长率、本阶段数据值、上阶段数据值和定制等。
当添加了非日期维度列和度量列时，在绑定的度量数据段的下拉列表中选择同比或者环比时，会弹出相应的配置菜单进行计算。

##### 环比
![](https://main.qcloudimg.com/raw/c2d424d307d433b6cd63a17c4e9a2070.png)
【日期列】：系统会自动检测到数据中的日期列，可以选择需要分析的日期列进行计算。可以按日、按周、按月、按季度和按年计算环比。
【环比】：可以选择比较的周期。
【周期间隔】：默认值为1，可以设置大于1的数值。
【时间基点参数】：设置计算日期 。
【时间基点偏移】：默认值为0，可是设置“负 - 零 - 正”，即可向前偏移也可向后。

##### 同比
![](https://main.qcloudimg.com/raw/f2e97d8646562e05d43ff8b0123c11c8.png)
【日期列】：计算同比的日期列，可以选择按日、按周、按月和按季度计算同比。
【同比】：同比周期 ，例如按日，同比的大周期有周、月、年；当选择的大周期为月时，可以计算增长率、增长值、本月同日月数据值和上月同日数据值。
【周期间隔】：默认值为1，可以设置大于1的数值。
【时间基点参数】：设置计算日期。
【时间基点偏移】：通过选项来控制是大周期还是小周期。时间基点偏移支持由“负 - 零 - 正”数，即可向前偏移也可向后。

##### 应用举例
非日期列设置时间基点参数计算环比：
1. 新建一个表，添加一个维度列 STATE 一个度量列：总和 \_SALES。
2. 在列总和 \_SALES 的子菜单中选择环比，在环比的设置菜单中，选择“按月”、“增长率”，在时间基点参数中设置 m1=2010-04-02，如下图所示：
![](https://main.qcloudimg.com/raw/206475f1acac26892c20539921d10579.png)
3. 在菜单中，用户可以设置周期间隔和时间基点偏移量，在这里我们设置默认值，计算结果如下图所示：
![](https://main.qcloudimg.com/raw/90c4878edca71c99d349098776dabb7d.png)
4. 用户可以根据实际需求，在定义时间基点参数的时候，任意设置周期间隔和时间基点偏移量，如下图所示，设置按日同比：
![](https://main.qcloudimg.com/raw/97e06c043de4541dba28300af836b8a0.png)

### 合并单元格
该功能在表、交叉表组件中才能使用，可实现相同数据的合并。用户可对相同组件的不同区域分别进行合并单元格处理，互不影响。 默认情况下相同数据是合并组的。

#### 合并单元格功能的实现步骤
1. 单击表、交叉表的绑定字段在下拉列表中可以看到合并组是默认选中的。我们可以切换合并组的状态。
![](https://main.qcloudimg.com/raw/4c9778a4d304fc2cbafccac863363b5b.png)
2. 合并组选定与否的数据展现形式。
![](https://main.qcloudimg.com/raw/fc38359f54b125c46b6353b119986a71.png)

### 合计与分组合计
表和交叉表才有此功能。分组合计是基于组来对表或交叉表进行合计统计的，而合计是基于整体来进行合计的，如对各个省份的分别合计是分组合计，而对各个省份的整体统计则是合计。
分组合计与合计适用于聚合表，对非聚合表没有此属性。而分组合计适用于至少含有两个维度的表和行或列含有两个维度的交叉表。

#### 分组合计的使用方法
1. 绑定至少两个维度数据段以及至少一个量度数据段，使表处于聚合状态。
2. 打开第一个数据段的下拉列表，选择分组合计，如下图所示。
![](https://main.qcloudimg.com/raw/c1af39297e0026adf78fa25f61aa1acb.png)
3. 则表或交叉表进行分组合计。

#### 合计的使用方法
1. 绑定一个维度数据段以及一个度量数据段，表处于聚合状态。
2. 在维度数据段的下拉列表中选择合计，并选择前置或后置。
3. 则表或交叉表进行合计统计。

#### 使用分组合计与合计
1. 新建一个表，对其绑定三个维度数据段和一个度量数据段，如下图所示。
![](https://main.qcloudimg.com/raw/5f4088329e42a76031486e1326b26f02.png)
2. 对第一个维度数据段设置合计后置，第二个维度数据段设置分组合计后置，如下图所示其中黄色区域显示的是合计结果，绿色显示的是分组合计结果。
![](https://main.qcloudimg.com/raw/291f3d1106504c683b6df4ba40bb559c.png)
>?分组合计与合计对使用了动态计算器的字段不进行汇总统计，见下图。
 ![](https://main.qcloudimg.com/raw/0448712da41902e4a09ca9be8b0b13d1.png)

### 钻取数据（企业版功能）
钻取包括上钻、下钻、以及穿透钻取，其中上钻、下钻功能适用于表、交叉表、图表，穿透钻取只适用于图表。图表钻取时会影响其它组件数据联动。
数据段之间存在包含关系，例如省包含市，国家包含省，钻取与绑定数据段的层次有关。

#### 层次的设置
数据段之间层次关系的确定是在查询中设置的，在查询的元数据的部分右键选择新建层次，输入层次名称，则在维度目录下生成层次文件夹。用户可通过鼠标的拖拽把数据段放到该层次中，注意在该层次文件夹下数据段的排放顺序决定了数据段间的级别关系，默认排列在上方的数据段的级别最高，依次往下类推。
层次的详细介绍见数据类型和字段类型。

#### 下钻
##### 绑定界面
下钻是自动添加比自己级别小一级的一个字段。假设在查询中存在年、季度、月份三个数据段，年包含季度，季度包含月份，绑定界面上绑定年数据段，则在年数据段前有个加号“+”，当用户单击加号时，在绑定窗口中会增加比当前数据段级别低一级数据段。
![](https://main.qcloudimg.com/raw/fb9deff9df6ca9461aa24f70d21a8f00.png)

##### 单元格
表、交叉表上支持单元格下钻，如下图所示：
![](https://main.qcloudimg.com/raw/eca12f60539e7a6094d2efe4763686d2.png)

##### 图表钻取联动

- 图表下钻
鼠标放在轴上数据位置，显示钻取图标，如下图所示。
不同图表类型，钻取图标的位置有所不同，例如组织结构图的钻取图标在标记上、地图的钻取图标通过右键触发。
![](https://main.qcloudimg.com/raw/caa9ba5bd1a29cb660d648e73939304e.png)
>?图表的轴和标记上若有钻取图标，都支持鼠标移上时显示，移出时消失。

- 图表下钻会带动联动
原始数据如下图：
![](https://main.qcloudimg.com/raw/e150b3033bf3e134a63d0c7ba79c1fcb.png)
单击图表轴上 Coffee 的下钻图标，钻取后数据显示如下图：
**矩形树图不支持钻取。**
![](https://main.qcloudimg.com/raw/399e0e092ac769dfaf466f7bffb2c886.png)


#### 上钻
##### 绑定界面
上钻是把在该层次中比自己级别小的字段都从绑定窗口中删除。假设在查询中存在年、季度、月份三个数据段，年包含季度，季度包含月份，绑定界面上绑定季度数据段，以及月份数据段，则在季度数据段前有个减号“-”，当用户单击减号时，在绑定窗口中会移除所有比当前数据段级别低的数据段。
![](https://main.qcloudimg.com/raw/3332acbf32d576c8312e3c8ef2516968.png)

##### 单元格
表、交叉表上支持单元格上钻，同理也支持单元格下钻。

##### 图表钻取联动
- 图表上钻
鼠标放在轴上数据位置，显示钻取图标，如下图所示：
不同图表类型，钻取图标的位置有所不同，例如组织结构图的钻取图标在标记上、地图的钻取图标通过右键触发。
![](https://main.qcloudimg.com/raw/cc06bce4953c8a4817faf0a3e77336d8.png)
- 图表上钻会带动联动
原始数据如下图：
![](https://main.qcloudimg.com/raw/c4902a7318cafe8d995586d233213eaa.png)
单击图表轴上 Amaretto 的上钻图标，上钻后数据显示如下图：
![](https://main.qcloudimg.com/raw/2be142cbb407bb2a695e1e7d657eaef5.png)

#### 穿透钻取
只适用于图表中，在图表中的显示具体数据按钮来进行数据的穿透钻取。选中图表的指定区域再单击此按钮显示详细数据，则详细数据中只显示指定区域的数据。如下图所示，选中图表 X 轴数据"Coffee"后单击详细数据，详细数据中“PRODUCT_TYPE”列只显示”Coffee“的数据。
![](https://main.qcloudimg.com/raw/f5758c837c416382b28fe5b1a3c22103.png)
不同的区域送出的维度信息不同，当图表中没有维度信息时，默认显示所有数据。

| 图表区域 | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| 标记     | 可以选择一个标记，或使用 Ctrl 键进行多选，在单击显示具体数据按钮后把该标记对应的维度信息作为筛选显示数据的条件。 |
| 轴       | 绑定了维度数据段的轴，可以选择一个坐标，或使用 Ctrl 键进行多选。在单击显示具体数据按钮后把该坐标对应的维度信息作为筛选显示数据的条件。 |
| 图例     | 绑定了维度数据段的图列，可以选择一个图例选项，或使用 Ctrl 多选。在单击显示具体数据按钮后把该图例选项对应的维度信息作为筛选显示数据的条件。 |
| 标记值   | 可以选择一个标记值，或使用 Ctrl 键进行多选，再单击显示具体数据按钮后把该标记对应的标记的维度信息作为筛选显示数据的条件。 |

### 笔刷（企业版功能）
笔刷功能适用于表、交叉表以及图表中，在其他组件中不支持此功能。当鼠标悬浮在组件区域时笔刷按钮显示在组件的右上方。

#### 笔刷功能
进入笔刷模式后，会把高亮区域的维度信息送出，来对其他组件的数据进行筛选。其中被影响的组件可以是表、交叉表、图表、文本、仪表。
对含有分组合计的表，在进入笔刷模式后，单击分组合计行则把该表的所有维度信息送出，而合计则不能使用笔刷功能（分组合计与合计的详细介绍在表中）。

#### 进入笔刷模式
用户可直接单击笔刷按钮进入笔刷模式
直接在表、交叉表的内部双击（标题区域不支持），在图表的标记、图例、以及坐标上双击进入笔刷模式。
**当组件没有维度信息时不能进入笔刷模式。**

#### 使用笔刷功能
如下图所示，单击表组件的笔刷按钮，进入笔刷模式，单击【Florida】，该行处于高亮状态，送出其维度信息即 TYPE 为 Regular 和 STATE 为 Florida，图表受到表的影响，相应的标记也进入高亮状态，图表的笔刷按钮并未进入选中状态，来表明图表是被影响的对象。
而针对其他组件，包括表、交叉表、文本、仪表并不以高亮的状态来显示，只是被筛选。
![](https://main.qcloudimg.com/raw/5ef7a7f47b254bcdc1ef28e1d5203404.png)

### 排序
排序可以分为无序、升序、降序、手动排序和高级排序。

#### 手动排序（企业版功能）
通过手动排序，用户可以手动的拖拽字段进行排序，更加的方便灵活。
![](https://main.qcloudimg.com/raw/04164cb8b49b92e4530b4069bcf16ed8.png)

#### 高级排序（企业版功能）
高级排序适用于聚合状态的表、交叉表以及处于聚合状态的图表。只有维度数据段才具有高级排序属性，度量类型的数据段不具有此属性。高级排序可实现对聚合的度量字段的排序。

##### 进入高级排序
打开组件的绑定界面，若是表或图表则使其处于聚合状态，打开维度数据段的下拉列表，单击更多排序下面的高级排序选项打开高级排序窗口。
![](https://main.qcloudimg.com/raw/36fa4dd2e2af22bfe1cdfdcb54ed1e02.png)

##### 高级排序原理说明
高级排序对话框如下图所示，默认状态根据字段设置的普通排序保持一致，例如原来设置的是升序，那么高级排序默认就是升序。当选择顺序升序或降序后，值和聚合列变成激活状态。
![](https://main.qcloudimg.com/raw/ce346ac5c2b703b3ca26c90794d5b58b.png)
【值】当用户选择无序时，默认按照查询中的顺序进行排序，当选择按照值进行升序或降序时，对查询中的数据做普通排序。
【聚合列】当用户选择按照聚合列进行升序或降序排列时，用户需要设定好聚合列的选项，按照聚合列的条件进行筛选数据，筛选出来的数据按照聚合列的值进行升序或降序排序。
【Top N】假设聚合列求和之后的数据为1000、1000、900、200、200、100，降序处理，选择 Top N 为4时，筛选出来的数据为1000、1000、900、200、200。即 Top N 是按照相同值计数来计算的，第四个是200，则所有的200会被筛选出来。
Top N 为空时，即按照聚合列进行排序，不再对数据进行筛选。
【Top N 以外的数据显示为 " 其它 "】 除去 Top N，所有剩余数据会显示为“其它”。

##### 使用高级排序
1. 新建一个表，假设绑定如下所示的数据段，表处于聚合状态。
![](https://main.qcloudimg.com/raw/40f9fd1cf0cbcef28b32529ebe75ac1b.png)
2. 在数据段 PRODUCT 的下拉列表中选择高级排序，在打开的高级排序对话框中选择升序，聚合列选择【SALES】，聚合函数选择”总和“，Top N 设置为2，勾选 Top N 以外的数据显示为“其它”。
![](https://main.qcloudimg.com/raw/54bc530020f6039a96bb0415873c5881.png)
3. 按照升序处理，排第2位的是2994，则所有剩余的列求和显示为“其他”，计算结果如下图所示。
![](https://main.qcloudimg.com/raw/d6f4a63154df76945b1ddb4e27fab62f.png)


##### 图表排序改进
增加了排序的快捷方式。
在 X 轴、Y 轴绑定字段后，打开维度轴的下拉列表，列表中增加了快捷排序方式：
![](https://main.qcloudimg.com/raw/e36d08ba752328372dd7c56979c0d9d9.png)
通过选择不同的快捷排序方式，可达到快速排序的目的，下面以上图为例进行介绍。
【升序（PRODUCT）】PRODUCT 列按照值“PRODUCT”进行升序排序，排序结果如下：
![](https://main.qcloudimg.com/raw/2cf199544393b676e1d756eacbff89a6.png)
【降序（PRODUCT）】PRODUCT 列按照值“PRODUCT”进行降序排序，排序结果如下：
![](https://main.qcloudimg.com/raw/d62b112cbd7a25893eaf3353f172e954.png)
【升序（总和\_BUDGET_COGS）】PRODUCT 列按照聚合列“总和\_BUDGET_COGS”进行升序排序，排序结果如下：
![](https://main.qcloudimg.com/raw/d9b3f225af6686820b31778fcc7b408e.png)
进入高级排序对话框，此时顺序为升序，聚合列为 BUDGET_COGS，聚合方式为总和。设置 TOP N为5，排序结果如下：
![](https://main.qcloudimg.com/raw/715d354f15c53f55085def7e8c9ea484.png)
【降序（总和\_BUDGET_COGS）】PRODUCT 列按照聚合列“总和\_BUDGET_COGS”进行降序序排序，排序结果如下：
![](https://main.qcloudimg.com/raw/876250622309874006efba7cd926a094.png)
进入“PRODUCT”的高级排序对话框，此时顺序为降序，聚合列为 BUDGET_COGS，聚合方式为总和。设置 TOP N 为5，排序结果如下：
![](https://main.qcloudimg.com/raw/606732deeb9ede0bf25f47274254da19.png)

### 查看详细数据（企业版功能）
【显示详细数据】单击组件右上角的【详细数据】，会弹出组件绑定数据集的详细数据信息对话框，如下图所示。
![](https://main.qcloudimg.com/raw/8d505499e6bec1b95675ed0275c33ea0.png)


