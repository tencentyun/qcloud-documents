交叉表组件（Pivot）是以交叉表的形式展现数据的载体。交叉表可以绑定任意一查询的多个字段。交叉表组件支持的功能和表格组件一样，只是由于交叉表的排列方式不同，定位格子的种类不同。

一个完整的交叉表有三部分组成：行表头、列表头、汇总。如果行表头、列表头、汇总都只有一列数据，那可以定位出3个格子。当改变格子大小尺寸时，这3类格子都可以有自己的大小、格式。

这个章节主要介绍如何制作交叉表、如何设置交叉表、如何绑定数据，以及各种交互功能。

## 制作交叉表

### 创建交叉表

拖拽仪表盘右侧面板-组件上的交叉表组件<img src="https://main.qcloudimg.com/raw/e4917720ee59c1567d2d0b5ad52ca91f.png"  style="margin:0;">到仪表盘编辑区。

### 绑定数据源

选中交叉表组件将鼠标移动至组件的工具栏处，单击【绑定数据】，打开交叉表组件的绑定界面。用户可通过鼠标拖拽来实现对交叉表组件的数据绑定，交叉表组件的每行均能够绑定多个数据段。在查询树中支持 Shift 键连续选中，以及 Ctrl 键不连续多选。

在绑定界面中交叉表行表头和列表头都可进行合计。列表头绑定的数据段在交叉表以横向显示，行表头绑定的数据段在交叉表中以纵向显示，汇总绑定的数据段用来对数据进行各种统计运算。

交叉表支持以下三种方式来绑定数据段：
- 拖拽数据段到绑定窗口实现列表头、行表头和汇总的绑定（如图所示），也可以拖拽数据段到绑定窗口替换绑定。
![](https://main.qcloudimg.com/raw/7c0ab5725ce362f5fba431972e0497e6.png)
- 拖拽数据段到交叉表区域实现列表头、行表头和汇总绑定，初始状态的列表头、行表头和汇总的划分区域如图所示：
![](https://main.qcloudimg.com/raw/8cf938b952b82e8870a1c62696c68c91.png)
也可以拖拽数据段到列表头、行表头和汇总替换绑定。还可以拖拽数据段在列表头、行表头和汇总插入绑定（可以插入到列表头区域的顶部或底部，插入到行表头区域的左侧或者右侧或者插入到汇总区域的左侧或者右侧）。
替换原有数据段的样式，如图所示：
![](https://main.qcloudimg.com/raw/74b43f45969d964676bac338bfca7293.png)
插入原有数据的样式显示，如图所示：
![](https://main.qcloudimg.com/raw/d03e5f540ec516ded28683816de4dadf.png)
双击查询树列表的数据段，实现绑定。

### 移除数据段

- 列表头和行表头我们有以下三种方法移除数据段：
 - 绑定窗口的下拉列表中选择删除。
 - 拖拽绑定窗口的数据段到查询树中实现移除。
 - 拖拽绿色小三角到查询树中实现移除。如图所示：
![](https://main.qcloudimg.com/raw/3a5464dbdc1f9589b752567adfc11097.png)
- 汇总我们有以下两种方法移除数据段：
 - 绑定窗口的下拉列表中选择删除。
 - 拖拽绑定窗口的数据段到查询树中实现移除。

## 设置交叉表

交叉表的设置包括交叉表的名称与新增表头行数、在预览模式下是否可见等。

交叉表的设置与表设置类似，本节只介绍交叉表特有的设置，其他普通设置，用户可参考 [设置表格](https://cloud.tencent.com/document/product/590/46827)。
- 【显示指标名称/隐藏指标名称】在交叉表中通过“右侧面板-设置-选项中隐藏指标名称的勾选状态”可将汇总数据段的名称显示出来/隐藏起来，默认为不勾选即显示指标名称，如下图所示。
![](https://main.qcloudimg.com/raw/ad0c2e5a9487fd7b6ebf845dd8fe69cd.png)
- 【纵向排列/横向排列】指标名称在交叉表的行表头显示还是在交叉表的列表头进行显示，如下图所示，指标的名称在交叉表的列表头显示。
![](https://main.qcloudimg.com/raw/8cd705155f531b6d3b07b7dfa49d6be1.png)
- 【隐藏行表头/ 显示行表头】在交叉表中通过“右侧面板-设置-选项-隐藏行表头的勾选状态”可将行表头显示出来/隐藏起来，默认为不勾选即显示行表头，如下图所示。
![](https://main.qcloudimg.com/raw/e9bf8465a11a2631f3f7e85d3b2ca875.png)

## 设置交叉表标题
选中组件后在右侧面板的常规-标题中可设置标题的显示隐藏状态以及修改交叉表组件的标题。默认为所绑定查询的名称。如下图所示。
![](https://main.qcloudimg.com/raw/0155b896294bfb066ae6e2980cba1c00.png)

## 设置交叉表样式
在表格组件的常规-表格样式中，可以对表格的样式进行设置。

系统默认的表格的样式共有十大色系，即：魔影红、水晶紫、苹果绿、青海蓝、晴空蓝、鲜明橙、魔法灰、橄榄绿、海洋蓝和银河灰。每个色系下面各有十种不同的样式，下图是苹果绿色系下的样式：
![](https://main.qcloudimg.com/raw/f208c6b2fb42c2d2c363f2f4923aab64.png)
设置样式后的表格（此样式为默认样式），如下图所示：
![](https://main.qcloudimg.com/raw/f0a1798d466b1ab54f4e427c3a3a5ae3.png)
对于条状样式，只在最内层数据和汇总列上设置条状样式，如下图所示：
![](https://main.qcloudimg.com/raw/c6190c8adfbae218f748830422796203.png)

## 设置交叉表格式
在交叉表组件中存在区域的概念，用户可选择组件样式对交叉表整体进行格式的设定，用户还可选择局部样式来对组件的特定区域进行格式设定。交叉表组件中存在标题区域、行表头区域、列表头区域和每列的数据区域，用户可针对特定的区域进行格式设定。详细内容可参考“设置格式”的介绍。

### 组件样式
选中组件后在右侧面板上展开组件样式，如下图所示：
![](https://main.qcloudimg.com/raw/88bdfbef074db2f9ff5b3f671ac38766.png)
【字体】设置组件中数据的字体。
【颜色】为组件设置背景色及前景色。
【对齐】调整组件中数据的对齐方式。其中自动换行是调整单元格内容长度超过单元格长度时会换行显示。
【边框】为组件添加边框，以及设置添加边框的格式。
【透明度】可以设置背景色的显示程度。
【格式刷】可以快速将指定区域的格式延用到其他区域上。
【自动换行】在保持列宽一定的情况下显示出单元格中的所有文本。

### 局部样式
选中交叉表的特定区域，单击右侧面板的常规，即可打开格式对话来对该区域进行格式的设定。
![](https://main.qcloudimg.com/raw/59564a2515e273c2f066676dec7606c2.png)

## 表格渲染
只能对数值类型的数据进行表格渲染，此属性只适用于表和交叉表。表格渲染通过柱状图，图表数量等形式来更加形象的描述数据的大小。
- 预定义渲染包括柱状渲染、正负柱状渲染、形状渲染、正负形状渲染、图片渲染、斜线渲染、红绿灯渲染和涨跌渲染。
- 表格渲染在表中的作用区域为列（不包括列表头），在交叉表中表格渲染的作用区域为行表头、列表头以及数据区。

详细说明请参见 [表格渲染](https://cloud.tencent.com/document/product/590/46829)。

## 设置叠放层次
叠放层次分为到顶部和到底部。当存在组件的重叠现象时，使用此功能可以调整组件的显示顺序。例如，下面的报告中，文本框被表格组件遮挡，需要通过叠放层次的设置，把文本框放在报告的最顶层。
![](https://main.qcloudimg.com/raw/e785b2c6ed06d174a562e331ee880331.png)
1. 选中需要设置层次的组件，例如文本组件。
2. 单击更多，选择【叠放层次】>【到顶部】。
![](https://main.qcloudimg.com/raw/2a0506c4a98ffb3249ad7400c62f06bd.png)
3. 文本组件出现在表格上层，如图所示。
![](https://main.qcloudimg.com/raw/f2ad23f3849911cd157b00ba6d39f6ae.png)

## 可视化分析
在仪表盘中各个组件根据各自特性，可以提供不同语义的数据展现。 腾讯云认为数据展现不是结束，而只是开始，看到问题，更需要解决问题。要满足用户的日常管理和决策，操作型商业智能的实时性要求就成为必然。为满足普通的用户对商业智能系统提供服务的实时性需求，不同特点的组件都提供了各自相符的数据分析的功能操作。

### 聚合计算
图表、表、交叉表、文本和仪表等组件绑定的度量列支持切换不同的聚合方式去展示数据。以表格为例，首次绑定一个度量列时，列的聚合方式默认为总和，可再次绑定4次，聚合方式默认依次为平均、计数、最小值、最大值，之后不能再绑定此列。

产品中提供了23种聚合方式，详细说明请参见 [聚合计算](https://cloud.tencent.com/document/product/590/46830)。

### 同比/环比计算（高级版功能）
同比环比适用于表、交叉表、图表组件，通常用来分析本阶段和上一个阶段的增长率。

同比（Year-on-year）是本阶段的某个周期与上个阶段的相同周期比较，适用于观察某个指标在不同阶段的变化，例如本周本日与上周本日比较，本年同月与上年同月比较等。环比（Month-on-month）是某个阶段与上一个阶段等时长比较，例如上周和本周、上月和本月、上季度和本季度等，用于表示数据的连续变化趋势。

产品中提供两种方式计算同环比：按日期维度计算，按非日期列计算。详细说明请参见 [同比/环比计算](https://cloud.tencent.com/document/product/590/46835)。

### 动态计算（企业版功能）
动态计算器是表、交叉表和图表组件特有的，用来计算格子之间的数值变化。例如求同比、环比、年度百分比和总计百分比等。此类计算器只能保持在单个组件里，不能被其他组件重复使用。

动态计算器指每个格子的数值是动态计算出来的，也可以称为是格间计算。主要解决在表格中沿着特定的方向来动态计算出数值。其中有两个要素，即计算方向和计算方法（或函数）。

计算方向就跟表的结构有关系。如果想做产品关于季度增量的环比计算，就需要把产品字段和季度字段作为分组，沿着季度字段来计算。我们把分组叫做分区（Partition）。沿着什么方向叫做基于的方向（Addressing）。

计算函数包括差值、百分比、差值百分比、汇总百分比、累积计算、移动计算和排名计算。每一种计算函数都有一些特殊的属性和参数。

界面上提供了一些内置的计算函数和计算方向，用户也可以根据需要自定义计算函数和计算方向。对于自定义的计算函数，还可以使用二次计算的属性，即当前动态计算可使用其他动态计算的结果再做第二次计算。详细说明请参见 [动态计算（企业版功能）](https://cloud.tencent.com/document/product/590/46831)。

### 合并单元格
该功能在表、交叉表组件中才能使用，可实现相同数据的合并。用户可对相同组件的不同区域分别进行合并单元格处理，互不影响。默认情况下相同数据是合并组的。详细说明请参见 [合并单元格](https://cloud.tencent.com/document/product/590/46836)。

### 交叉表钻取（企业版功能）

交叉表中对层次字段可以进行钻取整列和单元格钻取。钻取整列图标默认显示在行表头单元格和列表头的第一列单元格上，如图所示：
![](https://main.qcloudimg.com/raw/ca3d45beaa1942068967bc01d42ce14c.png)
如下图所示，在行表头上绑定层次字段 Year_DATE，列表头和汇总上分别绑定 PRODUCT 和 PROFIT，单击行表头上的下钻所有按钮“+”，则可以查看所有年份下相应的季度 PROFIT 值：
![](https://main.qcloudimg.com/raw/2c24e886880f38165510fd8ce963e079.png)
单击上钻所有按钮，则恢复到下钻所有前的状态。如果隐藏行表头名称，则钻取整列图标显示在第一行行表头上，如图所示：
![](https://main.qcloudimg.com/raw/15768a5242043102c0519f025db51be8.png)
也可以通过单元格钻取来查看具体某一年的各个季度的 PROFIT 值，例如，单击2009年的下钻按钮“+”，则可以查看该年份四个不同季度的 PROFIT 值，如下图所示：
![](https://main.qcloudimg.com/raw/0139b1020f10e606de3e9c023bbaed02.png)
同理，上钻时恢复到下钻前的状态。

### 笔刷（企业版功能）
笔刷功能适用于表、交叉表以及图表中，在其他组件中不支持此功能。当鼠标悬浮在组件区域时笔刷按钮显示在组件的右上方。详细说明请参见 [笔刷（企业版功能）](https://cloud.tencent.com/document/product/590/46839)。

### 排序
排序可以分为无序、升序、降序、手动排序和高级排序。详细说明请参见 [排序](https://cloud.tencent.com/document/product/590/46840)。

### 查看详细数据
【显示详细数据】单击组件右上角的【详细数据】，会弹出组件绑定数据集的详细数据信息对话框，如下图所示。
![](https://main.qcloudimg.com/raw/8d505499e6bec1b95675ed0275c33ea0.png)

### 切换行列表头
交叉表和图表组件支持通过切换行列表头/XY 轴，改变数据的展示形式。
- **切换行列表头**：用于交换交叉表中的行表头和列表头的位置。例如，切换下面交叉表的行列表头。
![](https://main.qcloudimg.com/raw/a75de777e59a0cdfe9f4a5e8dbc62428.png)
单击【切换行列表头】，交换行表头和列表头的位置，效果如下图所示。
![](https://main.qcloudimg.com/raw/274d586c6ff65b62cd206beae37b3acd.png)
- **切换 XY**：用于交换图表中的 X 轴和 Y 轴的位置。例如，切换下面图表的 X、Y 轴。
![](https://main.qcloudimg.com/raw/191e409217cfa8a29de92644bd6d5346.png)
单击【切换 XY】，交换 X 轴和 Y 轴的位置，效果如下图所示。
![](https://main.qcloudimg.com/raw/642bfb3faace61836a5750fbb69d7e0b.png)
