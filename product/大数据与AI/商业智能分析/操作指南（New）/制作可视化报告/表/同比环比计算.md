同比环比适用于表、交叉表和图表组件，通常用来分析本阶段和上一个阶段的增长率。

同比（Year-on-year）是本阶段的某个周期与上个阶段的相同周期比较，适用于观察某个指标在不同阶段的变化，例如本周本日与上周本日比较，本年同月与上年同月比较等；环比（Month-on-month）是某个阶段与上一个阶段等时长比较，例如上周和本周，上月和本月，上季度和本季度等等，用于表示数据的连续变化趋势。

产品中提供两种方式计算同环比：按日期维度计算、按非日期列计算。

## 日期维度的同环比
支持的日期表达式：年（Year）、年季度（YearQuarter）、年月（YearMonth）、年周（YearWeek）和天（FullDay）。

通常来讲，绑定了日期维度列和度量之后，在绑定的度量列的下拉列表中选择同比或者环比，展开的子菜单会根据日期列代表的周期自动显示比较的内容。下面会逐一列举不同的日期列可以计算的内容。

### 日期列天（FullDay）同比
绑定维度列天和度量列后，在绑定的度量列下面选择同比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/82420a1fdf7dcf20efc710336602eaed.png)
可以清晰的看到，按天（FullDay）计算同比时，可以计算本周同比增长率、本月同比增长率、本年同比增长率。同时，用户可以根据自己的需求选择定制不同的周期。关于定制，下面的定制章节就会讲到。

### 日期列天（FullDay）环比
绑定维度列天和度量列后，在绑定的度量列下面选择环比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/fdedf657cefd6bceecea99246eac2ed7.png)
按照维度列天计算得到环比本月数据值和同比增长率，展示的结果如下：
![](https://main.qcloudimg.com/raw/ae6f7d386a9151f4d4173f221287c8bf.png)

### 日期列年周（YearWeek）同环比
绑定维度列年周和度量列后，在绑定的度量列下面选择同比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/987304cd034e4a5ae5a2a957afbea82a.png)
继续添加度量列，可以计算年周的环比：
![](https://main.qcloudimg.com/raw/fac55ea7ea95e05fa0f1d5605cda935b.png)

### 日期列年月（YearMonth）同环比
绑定维度列年月和度量列后，在绑定的度量列下面选择同比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/02b4f1d09c8d5d98e48b57d232b76b70.png)
继续添加度量列，可以设计算年月的环比。
![](https://main.qcloudimg.com/raw/4ae5323d78bfe63d8daf67791b20baad.png)

### 日期列年季度（YearQuarter）同环比
绑定维度列年季度和度量列后，在绑定的度量列下面选择同比和环比，显示的子菜单如下图所示：
![](https://main.qcloudimg.com/raw/bae773188809a2d4a7da024338082283.png)
![](https://main.qcloudimg.com/raw/f9b6dd2af611b87b0465cdef60bd5892.png)

### 日期列年（Year）环比
绑定维度列年和度量列后，在绑定的度量列下面只能计算环比：
![](https://main.qcloudimg.com/raw/e154ec85a4d8ed7cbb0eab2539a752fe.png)

### 定制
在同比环比的子菜单中可以选择定制，用户可以根据不同需要设置大于等于1的周期间隔。
以日期列天（FullDay）为例，同比定制的菜单栏如下图所示：
![](https://main.qcloudimg.com/raw/d54431b1572a764dff4d8f7f1e179802.png)
【同比】：定制的大周期可以选择周、月、年。
当选择周时，可以计算本周增长率、本周增长值、本周同日数据值和上周同日数据值。
【周期间隔】：默认值为1。可以设置大于0的任意整数。
以日期列天（FullDay）为例，环比的定制菜单栏如下图所示。
![](https://main.qcloudimg.com/raw/4765b0d7bc64ee8738a98da30e72f04f.png)
【环比】：可以选择增长率、增长值、本日数据值和上日数据值。
【周期间隔】：默认值为1。可以设置大于0的任意整数。

### 应用举例
按日期列年月计算同比环比：
1. 增加一个日期维度列年月，增加一个度量列：总和 \_SALES。
2. 再增加一列：总和 \_SALES，在下拉菜单同比中选择，“本年同比增长率” 。
3. 依此类推，增加一列：总和 \_SALES，在下拉菜单中环比中选择环，“上月数据值”。
4. 再增加一列：总和 \_SALES，在同比子菜单中选择定制，在定制的菜单栏中选择“本年增长率”，设置周期间隔2年。
5. 再增加一列：总和 \_SALES，在环比子菜单中选择定制，在定制的菜单栏中选择“增长率”，设置周期间隔2月。计算结果如下图所示：
![](https://main.qcloudimg.com/raw/b9cf5dbfc1ae284fdbadbf39ee86e22c.png)

## 非日期维度的同环比
用户可以根据需求，自定义计算的周期和计算的方向，计算的周期包括周、月、年等，计算的方向包括增长值、增长率、本阶段数据值、上阶段数据值和定制等。

当添加了非日期维度列和度量列时，在绑定的度量数据段的下拉列表中选择同比或者环比时，会弹出相应的配置菜单进行计算。

### 环比
![](https://main.qcloudimg.com/raw/c2d424d307d433b6cd63a17c4e9a2070.png)
【日期列】：系统会自动检测到数据中的日期列，可以选择需要分析的日期列进行计算。可以按日、按周、按月、按季度和按年计算环比。
【环比】：可以选择比较的周期。
【周期间隔】：默认值为1，可以设置大于1的数值。
【时间基点参数】：设置计算日期。
【时间基点偏移】：默认值为0，可是设置“负 - 零 - 正”，即可向前偏移也可向后。

### 同比
![](https://main.qcloudimg.com/raw/f2e97d8646562e05d43ff8b0123c11c8.png)
【日期列】：计算同比的日期列，可以选择按日、按周、按月和按季度计算同比。
【同比】：同比周期，例如按日，同比的大周期有周、月、年；当选择的大周期为月时，可以计算增长率、增长值、本月同日月数据值和上月同日数据值。
【周期间隔】：默认值为1，可以设置大于1的数值。
【时间基点参数】：设置计算日期。
【时间基点偏移】：通过选项来控制是大周期还是小周期。时间基点偏移支持由“负 - 零 - 正”数，即可向前偏移也可向后。

### 应用举例
非日期列设置时间基点参数计算环比：
1. 新建一个表，添加一个维度列 STATE 一个度量列：总和 \_SALES。
2. 在列总和 \_SALES 的子菜单中选择环比，在环比的设置菜单中，选择“按月”、“增长率”，在时间基点参数中设置 m1=2010-04-02，如下图所示：
![](https://main.qcloudimg.com/raw/206475f1acac26892c20539921d10579.png)
3. 在菜单中，用户可以设置周期间隔和时间基点偏移量，在这里我们设置默认值，计算结果如下图所示：
![](https://main.qcloudimg.com/raw/90c4878edca71c99d349098776dabb7d.png)
4. 用户可以根据实际需求，在定义时间基点参数时，任意设置周期间隔和时间基点偏移量，如下图所示，设置按日同比：
![](https://main.qcloudimg.com/raw/97e06c043de4541dba28300af836b8a0.png)
