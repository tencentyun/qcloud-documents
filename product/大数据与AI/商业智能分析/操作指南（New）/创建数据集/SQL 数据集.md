各种实体以及实体之间的各种联系均可用关系模型来表示。关系模型就是指二维表格模型，因而一个关系型数据库就是由二维表及其之间的联系组成的一个数据组织。关系数据库是建立在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据，是目前数据库存储类型中的常用类型。当前主流的关系型数据库有 Oracle、SQL Server、MySQL、PostgreSQL、Hive、Spark 等。

标准数据查询语言 SQL 是一种介于关系代数与关系演算之间的结构化查询语言，包括查询、操纵、定义和控制，是一个通用的、功能极强的关系型数据库语言，同时又是一种高度非过程化的语言，只要求用户指出做什么而不需要指出怎么做。SQL 集成实现了数据库生命周期中的全部操作，提供了与关系数据库进行交互的方法，它可以与标准的编程语言一起工作。

SQL 数据集主要是通过 JDBC 和 ODBC 与目前主流数据库相联系。JDBC 和 ODBC 提供了一组对数据库访问的标准 API，建立了一组数据库访问的规范，支持 SQL 语句的执行，同时也是腾讯云商业智能分析 BI 与数据源之间的主要接口。腾讯云商业智能分析 BI 对数据库的操作不依赖任何 DBMS，不直接与 DBMS 打交道，所有的数据库操作由对应的 DBMS 的数据库驱动程序完成。

## 创建 SQL 数据集
登录 [商业智能分析控制台](https://console.cloud.tencent.com/bi)。可通过以下两种方式进入创建 SQL 数据集界面：
- 单击首页上的【SQL 数据集】，进入 SQL 数据集新建界面。
![](https://main.qcloudimg.com/raw/37eeb2a83e4d9d55e73fa20831a4339c.jpg)
2. 选择左侧菜单栏【创建数据集】，在新打开的页面上选择【SQL 数据集】。
 ![](https://main.qcloudimg.com/raw/09a60e27b55d36e6c3bbe27294dd6200.png)

## 使用存储过程创建 SQL 数据集
SQL 存储过程（Stored Procedure）是一组为了完成特定功能的 SQL 语句集，经编译后存储在数据库中。用户通过指定存储过程的名字来执行它。存储过程是数据库中的一个重要对象，任何一个设计良好的数据库应用程序都应该用到存储过程。

对于不带参数的数据库中存储过程的语法如下：
```
create procedure uui
as
select * from student
go
```
然后在产品的 SQL 语句中写的语句为`{Call mydb.dbo.uui ()}`。此时没有任何的参数需要配置，刷新元数据即可预览数据。**目前不支持带参的存储过程。**

## SQL 数据集特例（企业版功能）
### 数据集经纬度数据
SQL 语句支持对经纬度数据的查询。经度的范围是：0 - 180度，负数表示西经，正数表示东经；纬度的范围是：0 - 90度，负数表示南纬，正数表示北纬。可通过给定经度值和纬度值查找到给定圆或矩形范围内的数据。例如，`select * from "GIS.sqry" where pos incircle (-83.2215,42.1407, 200)` 表示：数据集表 GIS 中，经度值为：-83.2215，纬度值为：42.1407，半径为200米的圆形范围内的数据。通过 SQL 语句查询经纬度数据需要使用永洪的驱动。

列 pos 表示中心点的位置。它是通过特定的算法将经度和纬度结合在一起。使用前需要在数据集 GIS 中通过增加表达式的方式来增加 pos 列。创建表达式界面截图如下所示：
![](https://main.qcloudimg.com/raw/c0e3596f6d1f13606e8a33a28b8b6683.png)
- 参数 incircle 表示在圆形范围内查询。需要输入：经度值、纬度值、半径（米）。
- 参数 inrect 表示在矩形范围内查询。需要输入：经度值、纬度值、宽（米）和高（米）。

使用 SQL 语句对经纬度数据进行查询的截图如下所示：
![](https://main.qcloudimg.com/raw/15c3436b6fa2dbfc12fbb87f19b56d30.png)

## 性能检测
用户使用 SQL 数据集时，系统会对数据集性能进行实时检测，并对影响性能的地方做出橙色标识，告知用户哪些列为什么没有下推到数据库执行，如下图所示：
![](https://main.qcloudimg.com/raw/0f2898994dfc6b23e0bd5f4747ffbd34.png)
用户也可以通过单击菜单栏的“检测性能”，查看所有性能问题。
![](https://main.qcloudimg.com/raw/429cfcadc4c4da15733c6027c86bac26.png)

## 数据治理
创建数据集之后，刷新元数据，可对元数据进行一系列数据清洗、治理操作，如：转换为数字列（企业版）、转换为日期列（企业版）、转换为维度列、转换为度量列、设置文件夹（企业版）、设置数据层次（企业版）、设置日期层次（企业版）、设置数据范围（企业版）、设置表达式（企业版）、设置日期表达式、为字段设置别名、设置数据权限（企业版）。

数据治理详情请参考 [数据治理](/document/product/590/19686)。
