## 算法说明
1.TimeSeriesForcast 
时间序列预测模型，基于 Facebook 的 Prophet 模块实现的。该模型可通过已知的时间与因变量识别时间序列中的增长趋势、节假日对预测值的影响和周期趋势，其中周期包括：每周和一年中的季节性。同时，TimeSeriesForcast 模型还给出了预测的未来时间所对应的因变量值。具体请参考 [Prophet 文档](https://facebookincubator.github.io/prophet/)。该模块将上述趋势以及预测的因变量以图形的方式显示出来外，还提供了具体的预测到的因变量的数值。

- [**样例**](https://tio.cloud.tencent.com/ml/platform.html?projectId=29&flowId=91)

## 输入
- 数据形式：Dense
- 格式：| 参与计算的 features | 不参与计算的 features |
- 参与计算的 features：可通过**算法参数**的**日期列**和**因变量所在列**指定，如下示例中，第一列表示日期，第三列表示因变量。
    2015/12/21 1 2227
    2015/12/20 1 1245
    2015/12/23 1 2000
    2015/12/22 1 2266
- 不参与计算的 features：可包括不参与计算的特征。

## 输出
- 格式：| time | yhat | yhat_lower | yhat_upper |
- 说明：以空格连接各字段，从已知的时间到需要预测到的未来时间段内，预测的因变量值。
- time:：时间。
- yhat：预测的因变量。
- yhat_lower：预测的因变量向下浮动值。
- yhat_upper：预测的因变量向上浮动值。

## 参数
- **日期所在列**：从0开始计数。
- **因变量所在列**：日期对应的因变量值所在列，从0开始计数  。
- **growth**：增长趋势模型。整个预测模型的核心组件，分为两种："linear"与"logistic"，分别代表线性与非线性的增长，默认值："linear"。
- **cap**：承载量。非线性增长趋势中限定的最大值，预测值将在该点达到饱和。当选择非线性增长时，该项值必须给出。
- **changepoints**：改变点。使用者可以自主填写历史数据中标示着增长率发生改变的"改变点"，如果不填则系统自动识别。默认值：“None”。
- **n_changepoints**：用户指定潜在的"changepoint"的个数，默认值：25。
- **changepoint_prior_scale**：增长趋势模型的灵活度。调节"changepoint"选择的灵活度，值越大，选择的"changepoint"越多，从而使模型对历史数据的拟合程度变强，然而也增加了过拟合的风险。默认值：0.05。
- **seasonality_prior_scale**：调节季节性组件的强度。值越大，模型将适应更强的季节性波动，值越小，越抑制季节性波动，默认值：10.0。
- **holidays_prior_scale**：调节节假日模型组件的强度。值越大，该节假日对模型的影响越大，值越小，节假日的影响越小，默认值：10.0。
- **freq**：数据中时间的统计单位（频率），默认为"D"，按天统计，具体可参考 [时间序列/日期功能介绍](http://pandas.pydata.org/pandas-docs/stable/timeseries.html#offset-aliases)。
- **periods**：需要预测的未来时间的个数。例如按天统计的数据，想要预测未来一年时间内的情况，则需填写365。
- **mcmc_samples**：mcmc采样，用于获得预测未来的不确定性。若大于0，将做mcmc样本的全贝叶斯推理，如果为0，将做最大后验估计，默认值：0。
- **interval_width**：衡量未来时间内趋势改变的程度。表示预测未来时使用的趋势间隔出现的频率和幅度与历史数据的相似度，值越大越相似，默认值：0.80。当mcmc_samples = 0时，该参数仅用于增长趋势模型的改变程度，当mcmc_samples > 0时，该参数也包括了季节性趋势改变的程度。
- **uncertainty_samples**：用于估计未来时间的增长趋势间隔的仿真绘制数，默认值：1000。
- **holidays**：设置节假日的json格式配置文件，其中"holiday"表示某类节假日的名称，"ds"指定具体的节假日日期，"lower_window"表示该节假日包括指定日期之前的多少天，"upper_window"表示该节假日包括指定日期之后的多少天，上述四个参数均需要配置。以下是该文件的标准配置样例：
```json
{
    "holidays": [
      {
        "holiday": "playoff",
        "ds":["2008-01-13", "2009-01-03", "2010-01-16"],
        "lower_window": "-1",
        "upper_window": "0"
      },
      {
	"holiday": "superbowl",
        "ds": ["2010-02-07", "2014-02-02", "2016-02-07"],
        "lower_window": "0",
        "upper_window": "1"
      },
      {
	"holiday": "allyDefine",
        "ds": ["2017-02-07", "2016-02-02", "2015-02-07"],
        "lower_window": "-2",
        "upper_window": "1"
      }
    ]
}
```


2、时间序列特征抽取

- 算法说明
  时序特征抽取是一个转换器，能对包含时间序列的DataFrame进行特征抽取，产生一系列新的特征。支持的特征包括：最大值、最小值、均值、方差、标准差、偏度、峰度、中位数、极差、序列各项的平方和、序列相邻两项之差的均值等等。
- 样例
- 输入
  - 输入数据路径：输入文件所在路径。
  - 输入数据格式：每行样本的各列以空格连接，如10.2 12.8 3.67 …。
- 输出
  - 输出数据路径：输出文件所在路径
  - 输出数据格式：| 未参与的特征 | 选择的特征 | 生成的特征 |。每行样本的各列以空格连接，如10.2 12.8 3.67 …。生成的特征会append到最终的结果中。
- 参数
  - 选择特征列：表示需要计算的特征所在列，例如“1-12,15”，表示取特征在表中的1到12列，15列，从0开始计数。

3、差分整合移动平均自回归模型（ARIMA）

- 算法说明
    许多非平稳序列差分后会显示出平稳序列的性质，这个非平稳序列为差分平稳序列。差分平稳序列使用ARIMA进行拟合。
    ARIMA包含3个部分，即AR、I、MA。AR表示auto regression，即自回归模型；I表示integration，即单整阶数，时间序列模型必须是平稳性序列才能建立计量模型，ARIMA模型作为时间序列模型也不例外，因此首先要对时间序列进行单位根检验，如果是非平稳序列，就要通过差分来转化为平稳序列，经过几次差分转化为平稳序列，就称为几阶单整；MA表示moving average，即移动平均模型。可见，ARIMA模型实际上是AR模型和MA模型的组合。
    p为自回归模型滞后阶数，d为时间序列单整阶数，q为移动平均模型滞后阶数。当p、d为0时，ARIMA模型退化为MA模型，当q、d为0时，ARIMA模型退化为AR模型。当仅仅d为0时，ARIMA模型退化为ARMA模型。
- 样例
- 训练节点
  - 输入
   - 输入数据路径：输入训练文件所在路径
   - 输入数据格式：
      每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 参数
   - 时间列：时间数据所在的列。
   - 时间序列数据列：时间序列数据所在的列。
    - 自回归项数：p值，默认为1。
    - 差分次数：d值，默认为0。
    - 滑动平均项数：q值，默认为1。
    - 优化器评价次数：默认为100。
    - 迭代次数：默认为100。
    - intercept：是否带截距，默认为true。
- 预测节点
  - 输入
  - 输入数据路径：输入测试文件所在路径
  - 输入数据格式：
    每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 输出
   - 输出数据路径：经转换后的测试数据存储路径
   - 输出数据格式：每行样本的各列以空格连接，如1 0 1 0 …。最后的结果中，预测结果会append到数据的最后一列。
  - 参数
   - 时间列：时间数据所在的列。
   - 时间序列数据列：时间序列数据所在的列。

4、指数加权移动平均法（EWMA）

- 算法说明
    EWMA(Exponentially Weighted Moving Average)指数加权移动平均，是一种常用的序列数据处理方式。
    在t时刻，根据实际的观测值可以求取EWMA(t)：EWMA(t) = aY(t) + (1-a)EWMA(t-1)，t = 1,2,…..,n；其中，EWMA(t) 表示t时刻的估计值；Y(t) 表示t时刻的测量值；n 表示所观察的总的时间；a(0 < a <1)表示对于历史测量值权重系数。之所以称之为指数加权，是因为加权系数a是以指数式递减的，即各指数随着时间而指数式递减。用n表示为a = 2/(n+1)。
- 样例
- 训练节点
  - 输入
   - 输入数据路径：输入训练文件所在路径
   - 输入数据格式：
      每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 参数
   - 时间列：时间数据所在的列。
    - 时间序列数据列：时间序列数据所在的列。
    - 初始值：默认为0.0。
    - 优化器评价次数：默认为100。
    - 迭代次数：默认为100。
- 预测节点
  - 输入
  - 输入数据路径：输入测试文件所在路径
  - 输入数据格式：
    每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 输出
   - 输出数据路径：经转换后的测试数据存储路径
   - 输出数据格式：每行样本的各列以空格连接，如1 0 1 0 …。最后的结果中，预测结果会append到数据的最后一列。
  - 参数
   - 时间列：时间数据所在的列。
   - 时间序列数据列：时间序列数据所在的列。

5、广义自回归条件异方差模型（GARCH）

- 算法说明
  	自回归条件异方差模型（ARCH）模型的实质是使用残差平方序列的q阶移动平移拟合当期异方差函数值，由于移动平均模型具有自相关系数q阶截尾性，所以ARCH模型实际上只适用于异方差函数短期自相关系数。
  但是在实践中，有些残差序列的异方差函数是具有长期自关性，这时使用ARCH模型拟合异方差函数，将会产生很高的移动平均阶数，增加参数估计的难度并最终影响ARCH模型的拟合精度。
  为了修正个问题，提出了广义自回归条件异方差模型， 这个模型简记为GARCH（p,q）。GARCH模型实际上就是在ARCH的基础上，增加考虑异方差函数的p阶自回归性而形成，它可以有效的拟合具有长期记忆性的异方差函数。ARCH模型是GARCH模型的一个特例，p=0的GARCH（p,q）模型。
  本平台支持p=1、q=1的广义自回归条件异方差模型。
- 样例
- 训练节点
  - 输入
   - 输入数据路径：输入训练文件所在路径
   - 输入数据格式：
      每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 参数
   - 时间列：时间数据所在的列。
   - 时间序列数据列：时间序列数据所在的列。
   - 优化器评价次数：默认为100。
   - 迭代次数：默认为100。
- 预测节点
  - 输入
   - 输入数据路径：输入测试文件所在路径
   - 输入数据格式：
      每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 输出
   - 输出数据路径：经转换后的测试数据存储路径
   - 输出数据格式：每行样本的各列以空格连接，如1 0 1 0 …。最后的结果中，预测结果会append到数据的最后一列。
  - 参数
   - 时间列：时间数据所在的列。
   - 时间序列数据列：时间序列数据所在的列。

6、三次指数平滑模型（HoltWinters）

- 算法说明
          移动平均模型在解决时间序列问题上简单有效，但它们的计算比较难，因为不能通过之前的计算结果推算出加权移动平均值。此外，移动平均法不能很好的处理数据集边缘的数据变化，也不能应用于现有数据集的范围之外。因此，移动平均法的预测效果相对较差。
  指数平滑法(exponential smoothing)是一种简单的计算方案，可以有效的避免上述问题。按照模型参数的不同，指数平滑的形式可以分为一次指数平滑法、二次指数平滑法、三次指数平滑法。其中一次指数平滑法针对没有趋势和季节性的序列，二次指数平滑法针对有趋势但是没有季节特性的时间序列，三次指数平滑法则可以预测具有趋势和季节性的时间序列。术语“Holt-Winter”指的就是三次指数平滑。
  Holt-Winter指数平滑法按照季节性分量的计算方式不同，可以分为累加式季节性分量和累乘式季节性分量。
- 样例
- 训练节点
  - 输入
   - 输入数据路径：输入训练文件所在路径
    - 输入数据格式：
      每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 参数
   - 时间列：时间数据所在的列。
   - 时间序列数据列：时间序列数据所在的列。
   - period：数据季节性区间。
   - 优化器评价次数：默认为100。
   - 迭代次数：默认为100。
   - 季节性分量计算方式：有累加式和累乘式两种，默认是累加式。
- 预测节点
  - 输入
   - 输入数据路径：输入测试文件所在路径
   - 输入数据格式：
      每行样本的各列以空格连接，如10.2 12.8 3.67 …。
  - 输出
   - 输出数据路径：经转换后的测试数据存储路径
   - 输出数据格式：每行样本的各列以空格连接，如1 0 1 0 …。最后的结果中，预测结果会append到数据的最后一列。
  - 参数
   - 时间列：时间数据所在的列。
   - 时间序列数据列：时间序列数据所在的列。
