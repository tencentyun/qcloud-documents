
- **算法说明**

  IsolationForest是一种基于孤立森林的异常点检测算法，该算法首先构建n颗树，每棵树都从原始数据中有放回的采样m个样本进行训练，每颗树在训练的时候都完全采用了随机选择特征以及特征分裂点的方式，然后再将每颗树的训练结果进行汇总就可以得到每个样本成为异常点的概率（0到1之间的浮点值），该值越大越有可能是异常点。具体算法过程请参考论文[《Isolation-based Anomaly Detection》](https://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/tkdd11.pdf)。

- [**样例**](https://tio.cloud.tencent.com/ml/platform.html?projectId=33&flowId=137)
- **输入**
  - 数据形式：Dense
  - 格式：| 参与计算的features | 不参与计算的features |
  - 参与计算的features：可通过**算法参数**的**新特征所在列**以及**旧特征所在列**进行指定
  - 不参与计算的features：可包括不参与计算的特征
- **输出**
  - 格式：| 不参与计算的features | 样本属于异常点的概率 |
  - 样本属于异常点的概率：0到1之间的值。值越大，越有可能为异常值。使用时，可根据总体概率给定一个阈值，大于该阈值的为异常值，小于的为正常值。论文中给出了如下三种情况的说明：
    - 当该值非常接近1：该样本点就可以被定义为异常值
    - 如果该值远小于0.5：可相对安全的认为为正常值。
    - 如果所有样本的概率值都在0.5附近：认为整体没有异常值
  
- **参数**

  - 并行数：训练数据的分区数、spark的并行数
  - 抽样率：输入数据的采样率
  - 选择特征列：需要计算的特征所在列，例如“1-12,15”，表示取特征在表中的1到12列，15列，从0开始计数
  - 模型输入：已经获得的模型路径，没有则不填，必须是本模块训练的模型
  - 模型输出：已经获得的模型路径，没有则不填，必须是本模块训练的模型
  - 每颗树的样本数：构建每颗树需要的样本数，默认256，256在原理上已经足够
  - numTrees：构建森林需要的树个数，默认100
  - limitHeight：限制每棵树的最大深度，最大不超过每棵树的样本数，根节点深度为1
