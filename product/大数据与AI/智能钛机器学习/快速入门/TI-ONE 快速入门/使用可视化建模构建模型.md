## 操作背景
- 智能钛机器学习平台通过可视化的拖拽布局，组合各种数据源、组件、算法、模型及评估模块，为 AI 工程师打造从数据预处理、模型训练、到模型评估的全流程开发支持。更多详情请见 [可视化建模简介](https://cloud.tencent.com/document/product/851/44457)。
- 为了方便您有效地使用智能钛机器学习平台的可视化建模，本文档将通过一个乳腺癌预测案例向您演示使用流程。
- 在使用之前，请确保您已经完成了 [注册与开通服务](https://cloud.tencent.com/document/product/851/39086)。

## 操作步骤
### 步骤1：新建工程与任务流
使用智能钛机器学习平台建模，首先需要完成新建工程和工作流。

#### 新建工程
- 登录 [智能钛机器学习平台控制台](https://console.cloud.tencent.com/tione)，将平台地域切换为您开通服务时所选地域。在工程列表页面，单击【我的工程】>【新建工程】。                       

- 根据提示填写工程名称、工程描述、COS Bucket 。请在下拉列表处选择 Bucket 名称，该工程里的训练数据、中间结果等内容将存入此 Bucket。注意 COS Bucket 需要与平台处于**相同区域**，若无 COS Bucket 可选，请前往 [COS 控制台](https://console.cloud.tencent.com/cos) 新建，详情请参考 [创建存储桶](https://cloud.tencent.com/document/product/436/13309)。

  >!下拉列表选择 COS Bucket 时，您可选择个人的付费 COS 存储桶，也可选择 TI-ONE 提供的免费 COS 存储桶（此免费存储桶为 TI-ONE 自动为用户创建，空间存储上限为500GB，超过15天未登录，免费存储空间数据将被清空。如有大量数据存储需求，请使用个人付费 COS 存储服务）。

#### 新建任务流
在工程中单击“+”号，您可新建**自定义任务流**。创建完成后单击进入画布。

### 步骤2：数据接入

智能钛机器学习平台提供两种数据源途径：**本地数据**和 **COS 数据集**。

#### 数据集介绍

本次任务我们采用公开的 [乳腺癌数据集](https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/)，该数据集共包含569个样本，其中357个阳性（y = 1）样本，212个阴性（y = 0）样本；每个样本有32个特征，但本次实验中选取其中10个特征。
**数据集具体字段信息如下**（表格中包括每列字段的名称和对应取值范围）：

| 特征和标签（Attribute）     | 取值范围（domain）            |
| --------------------------- | ----------------------------- |
| Clump Thicknedd             | 1 ≤ n ≤ 10                    |
| Uniformity of Cell Size     | 1 ≤ n ≤ 10                    |
| Uniformity of Cell Shape    | 1 ≤ n ≤ 10                    |
| Marginal Adhsion            | 1 ≤ n ≤ 10                    |
| Single Epithelial Cell Size | 1 ≤ n ≤ 10                    |
| Bare Nuclei                 | 1 ≤ n ≤ 10                    |
| Bland Chromation            | 1 ≤ n ≤ 10                    |
| Normal Nucleoli             | 1 ≤ n ≤ 10                    |
| Mitoses                     | 1 ≤ n ≤ 10                    |
| （标签y）Class              | (2 for begin，4 for maligant) |

**数据集具体内容抽样展示如下**（前9列是特征取值，最后1列是标签取值）：
![](https://main.qcloudimg.com/raw/819676363ca20f102558d13a3143019c.png)

 #### 数据导入
1. 为方便用户操作，我们直接提供本实验所需的数据集 [cancer.csv](https://main.qcloudimg.com/raw/73aa027737753b77769468636e4ff1cc/cancer.csv)，请直接下载并保存到本地。
2. 在智能钛控制台的左侧导航栏，选择【输入】>【数据源】>【 本地数据】，并拖入画布中。
3. 在【本地数据】对应右边弹出的设置窗口中选择【算法 IO 参数】中的“数据文件”上传，单击【数据文件】输入框，选择刚保存到本地的 cancer.csv 数据集上传，单击【确定】。

<img src="https://main.qcloudimg.com/raw/2d97b53fcfed54e383c94259165a10b9.png" style="zoom:50%;" />

### 步骤3：数据预处理

在工程实践中，为了便于数据建模，需要对数据集中存在的缺失、重复等问题进行预处理，同时需要将字符串转换为可以参与建模的数值形式。

在模型训练时我们通常还会对数据进行切分，分为训练集 training set、验证集 validation set、测试集 test set。训练集用来训练模型，验证集用于调节模型超参数，测试集用来整体评估模型性能。 本实验将数据切割成训练集和测试集，比例为 8 : 2（80%用于训练，20%用于测试）。

1. 在控制台的左侧导航栏，选择【算法】>【机器学习算法】>【数据预处理】>【数据切分】，并拖入画布中。
2. 将【本地数据】的输出桩连接到【数据切分】的输入桩。
3. 填写参数：
   - 【算法 IO 参数 】中的各个数据路径参数根据连线自动生成，无需更改，您可单击【高级设置】查看
   - 输入文件类型：csv
   - 输入数据包含 header 信息：否
   - 输入数据分割符：空格
   - 切分比例：0.8（第一个输出桩为80%的训练数据，第二个输出桩为20%的测试数据）
   - driver 节点资源类型：您可按需选择。
   - executor 节点资源类型：您可按需选择。
   - 其余参数可默认

<img src="https://main.qcloudimg.com/raw/e83b9ae86d392529b9c66911e760935d.png" style="zoom:50%;" />

### 步骤4：模型训练

智能钛机器学习平台内置百余种机器学习与深度学习算子，您可以在左侧算法栏中选择合适的算子进行模型搭建。找到该算子拖入画布中，您可以根据节点图式进行连线，过程中任何连线或算子选择有误都可以通过右键删除。

#### 1. 选择算子
- 在控制台的左侧导航栏，选择【算法】>【机器学习算法】>【分类】>【决策树分类】，并拖入画布中。
- 将【数据切分】左边的输出桩连接到【决策树分类】左边的输入桩，表示训练数据输入模型；右边的输出桩连接到【决策树分类】最左侧的蓝色小烧杯处，表示将测试数据输入模型。

#### 2. 配置算法参数

单击该算子，在右侧弹框中填写【决策树分类】相关参数。您可按需填写，本案例参数配置如下：
- 特征列：0-8。
- 标签列：9。
- 输入数据包含 header 信息：是
- 输入数据分隔符：逗号
- 模型保存格式：ML
- driver 节点资源类型：您可按需选择。
- executor 节点资源类型：您可按需选择。
- 其余参数可默认

#### 3. 配置模型参数

左侧蓝色小烧杯代表模型，单击填写模型参数。您可按需填写，本案例参数配置如下：
- 模型更新方式：手动运行
- 模型运行方式：自动运行
- 特征列：0-8
- 输入/输出数据包含 header 信息：是
- 输入/输出数据分隔符：逗号
- 模型导入格式：ML
- driver 节点资源类型：您可按需选择。
- executor 节点资源类型：您可按需选择。

<img src="https://main.qcloudimg.com/raw/70c2f16c93e65313541f38388fc190cb.png" style="zoom:50%;" />

### 步骤5：模型评估
至此，我们已经利用 TI-ONE 搭建了乳腺癌预测模型，那么我们训练出的模型效果如何呢？本文中，我们可以利用智能钛的**模型评估**算子【二分类任务评估】来查看模型训练效果。

1. 在智能钛机器学习平台控制台的左侧导航栏，选择【输出】>【模型评估】>【二分类任务评估】，并拖入画布。
2. 单击【二分类任务评估】，填写参数：  
   - 标签列：9
   - 是否是打分项：否
   - 输入数据是否包含 header 信息：是
   - 输入数据分隔符：逗号
   - 预测列：10
   - driver 节点资源类型：您可按需选择。
   - executor 节点资源类型：您可按需选择。
   - 其余参数可默认

<img src="https://main.qcloudimg.com/raw/bcfe7dcf1a2d808f34392f14630c4133.png" style="zoom:50%;" />


### 步骤6：运行工作流
单击画布上方运行可运行工作流。

### 步骤7：查看模型效果
运行成功后，右键选择【二分类任务评估】>【评估指标】，即可查看模型效果。
![](https://main.qcloudimg.com/raw/5e2841f7e7e265618088f643700df4bb.png)
至此，我们完成了使用智能钛机器学习平台的可视化建模训练模型的流程。
