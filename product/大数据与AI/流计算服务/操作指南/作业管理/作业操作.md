对流计算 Oceanus 作业，您可以进行4种操作：发布、运行、停止、创建副本，这些操作支持批量处理，本文将对这4种操作进行概念解析与讲解。
## 发布
### 概念解析
流计算作业草稿开发完成后，单击**保存**按钮，即可发布为线上版本。流计算作业的**发布**操作成功后，根据作业的状态，可以执行**运行**已发布版本或**停止**线上运行作业操作。

### 操作步骤
在草稿中完成作业开发后，单击**保存**按钮，并单击**发布草稿**，即可发布为线上版本。新版本的版本编号由系统自动生成，用户需输入版本说明。
![](https://qcloudimg.tencent-cloud.cn/raw/86f4300803e1392714810e834bb4d938.jpg)
若线上没有**运行中**状态的作业，则可以直接**运行**新发布的版本。
![](https://qcloudimg.tencent-cloud.cn/raw/f8c7fd9654ac2e6da3af73a97c40b2b0.png)
若线上有**运行中**状态的作业，则需要先**停止**作业，选择停止时是否创建快照，等待作业完全停止后，再进行**运行**操作。
![](https://qcloudimg.tencent-cloud.cn/raw/3bc5f6dda321d84675861cf2ee72498f.jpg)
![](https://qcloudimg.tencent-cloud.cn/raw/198cf84f809192fc62fa79e57346991c.jpg)

## 运行
### 概念解析
作业的**运行**操作与**停止**操作相对应，表示启动一个新的作业运行实例。对于已经运行中的作业，若需要再次启动运行，可以选择先**停止**线上运行中的作业，再重新执行**运行**操作。

### 操作步骤
当一个作业进入**停止**状态后，如果需要继续运行，有两种操作方式。

1. 在流计算的**作业管理 > 操作**中单击更多，然后在下拉菜单中选择**运行**。随后，作业的状态会变成**操作中**。一段时间后，最终状态会变成**运行中**，此时表示作业已经启动成功。
![-w300](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/15/16395722001780.jpg)
2.发布新版本，并运行新版本。随后，作业的状态会变成**操作中**。一段时间后，最终状态会变成**运行中**，此时表示作业已经启动成功。
![](https://qcloudimg.tencent-cloud.cn/raw/bf8d760789845685e2c0ce5812889750.png)

### 从快照恢复作业
作业运行时，支持从历史快照恢复。运行作业时，提示如下：
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/15/16395729831909.jpg)
对于没有历史快照的作业，无法使用历史快照运行。
> ! 旧版本的集群不支持手动选择历史快照恢复，如需使用该功能，请[提交工单](https://console.cloud.tencent.com/workorder/category)升级集群。

### 特别提示
- 在作业的操作过程中，如果遇到任何异常情况，则会回退到作业的实际状态（例如，如果作业在暂停时异常退出，则状态会显示为**停止**；如果作业暂停不成功，且仍在运行，则回退到**运行中**），并在状态栏右侧显示一个三角形的叹号，当鼠标移过时，会显示出具体的报错信息。
- 对于常见的错误信息会有对应的操作建议，效果如下图：
![售后在线支持](https://camo.githubusercontent.com/f7271e3e59ebb354b80748530cb1fe9417e679305c628bacc884cb6639dfa936/68747470733a2f2f6d61696e2e71636c6f7564696d672e636f6d2f7261772f38316232333130343731366364663033386566643134363835636162386662632e706e67)
如有全英文报错信息，不便理解时，您可通过 [售后在线支持](https://cloud.tencent.com/online-service?from=connect-us) 咨询，我们会持续优化报错信息的展示。

> ! 在作业的运行过程中，请务必谨慎修改上下游对接产品的配置，包括但不限于对 CKafka 数据源和数据目的所使用的 Topic 做删除、扩容；以及对 MySQL 数据源和数据目的所使用的库表做锁表、修改表结构、新增约束、停机等，否则会对正在运行的流计算作业造成影响，导致数据不完整或作业异常。

## 停止
### 概念解析
作业的**停止**操作表示终止当前作业的执行，并选择是否保存所有运行时的状态。

### 操作步骤
当一个作业进入**运行中**状态后，如果需要停止运行，有两种操作方式。
1. 可在流计算的**作业管理 > 操作**中单击**更多**，然后在下拉菜单中选择**停止**。作业的状态即会变成**操作中**。一段时间后，最终状态会变成**停止**，此时表示作业已经完全停止运行。
2. 发布新版本，并选择停止当前版本。随后，作业的状态会变成**操作中**。一段时间后，最终状态会变成**停止**，此时表示作业已经完全停止运行。
![](https://qcloudimg.tencent-cloud.cn/raw/1c30bf76bf5d55da6f5bae10d8c371ac.jpg)
> !如果您希望保留作业当前的运行状态，并让作业下次启动时可以从上次停下的地方开始消费，请勾选**停止时创建快照**。
> 
![](https://qcloudimg.tencent-cloud.cn/raw/4508f1fab3ec19e7483e98effdc95d0f.jpg)

## 创建副本
### 概念解析
可以快速创建作业的副本，方便您做作业迁移或者同类作业的开发。
### 操作步骤
#### 单个副本创建
1. 进入作业详情页，可以在右上方的作业操作下拉选项选择**创建副本**。
![](https://qcloudimg.tencent-cloud.cn/raw/ebf87c910f835d847973d6eec2329d28.png)
2. 单击**创建副本**，会弹出选择框，选择目标目录，目标集群，填写副本名称。
![](https://qcloudimg.tencent-cloud.cn/raw/8c7af4cb41efdfe9f696271b7ecf0a44.png)
3. 单击**确认**，会弹出结果框。
![](https://qcloudimg.tencent-cloud.cn/raw/1af21221789e3c80b12a6bea62fa9e42.png)
4. 然后单击**作业名称**可以跳转到新作业的详情页。

#### 批量创建副本
1. 单击作业列表左侧的**批量操作**，选择批量创建副本。
![](https://qcloudimg.tencent-cloud.cn/raw/6d4e46591ea69d7ef0b88775b0cda1c0.png)
2. 单击**批量创建副本**，勾选需要批量创建副本的作业。
![](https://qcloudimg.tencent-cloud.cn/raw/939cd08d3aa1cc26008609b796d0d0f8.png)
3. 单击**创建副本**，会弹出选择框，选择目标集群，**批量创建副本不能选择目标目录，默认副本目录和源作业保持一致**
![](https://qcloudimg.tencent-cloud.cn/raw/8a6c4a33cffb00742dd6704d75c36cf0.png)
4. 单击**确认**，会弹出结果框，展示成功和失败的结果。
![](https://qcloudimg.tencent-cloud.cn/raw/4557fc4accd2382b82c65d58139df584.png)

>! 
>- 如果目标集群不支持源作业的 Flink 版本，作业副本的 Flink 版本将和目标集群默认 Flink 版本保持一致。
>- 如果源作业设置了细粒度资源，但是目标集群不支持细粒度资源的，作业资源配置的 JobManager 规格 和 TaskManager 规格设置为 1CU。
>- 作业只能在工作空间内部复制，目标集群只能选择已绑定给当前空间的集群。
