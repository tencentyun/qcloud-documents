流计算 Oceanus 作业有 3 种操作方式：发布、运行、停止。本文将对这 3 个作业操作进行概览解析与讲解。

## 发布
### 概念解析
流计算作业草稿开发完成后，单击**保存**按钮，即可发布为线上版本。流计算作业的**发布**操作成功后，根据作业的状态，可以执行**运行**已发布版本或**停止**线上运行作业操作。

### 操作步骤
在草稿中完成作业开发后，单击**保存**按钮，并单击**发布草稿**，即可发布为线上版本。新版本的版本编号由系统自动生成，用户需输入版本说明。
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/17/16397281590932.jpg)
若线上没有**运行中**状态的作业，则可以直接**运行**新发布的版本。
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/17/16397283355407.jpg)
若线上有**运行中**状态的作业，则需要先**停止**作业，选择停止时是否创建快照，等待作业完全停止后，再进行**运行**操作。
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/17/16397282199437.jpg)
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/17/16397282535493.jpg)

## 运行
### 概念解析
作业的**运行**操作与**停止**操作相对应，表示启动一个新的作业运行实例。对于已经运行中的作业，若需要再次启动运行，可以选择先**停止**线上运行中的作业，再重新执行**运行**操作。

### 操作步骤
当一个作业进入**停止**状态后，如果需要继续运行，有两种操作方式。

1. 在流计算的**作业管理 > 操作**中单击更多，然后在下拉菜单中选择**运行**。随后，作业的状态会变成**操作中**。一段时间后，最终状态会变成**运行中**，此时表示作业已经启动成功。
![-w300](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/15/16395722001780.jpg)
2.发布新版本，并运行新版本。随后，作业的状态会变成**操作中**。一段时间后，最终状态会变成**运行中**，此时表示作业已经启动成功。
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/17/16397283355407.jpg)

### 从快照恢复作业
作业运行时，支持从历史快照恢复。运行作业时，提示如下：
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/15/16395729831909.jpg)
对于没有历史快照的作业，无法使用历史快照运行。
> ! 旧版本的集群不支持手动选择历史快照恢复，如需使用该功能，请[提交工单](https://console.cloud.tencent.com/workorder/category)升级集群。

### 特别提示
- 在作业的操作过程中，如果遇到任何异常情况，则会回退到作业的实际状态（例如，如果作业在暂停时异常退出，则状态会显示为**停止**；如果作业暂停不成功，且仍在运行，则回退到**运行中**），并在状态栏右侧显示一个三角形的叹号，当鼠标移过时，会显示出具体的报错信息。
- 对于常见的错误信息会有对应的操作建议，效果如下图：
![售后在线支持](https://camo.githubusercontent.com/f7271e3e59ebb354b80748530cb1fe9417e679305c628bacc884cb6639dfa936/68747470733a2f2f6d61696e2e71636c6f7564696d672e636f6d2f7261772f38316232333130343731366364663033386566643134363835636162386662632e706e67)
如有全英文报错信息，不便理解时，您可通过 [售后在线支持](https://cloud.tencent.com/online-service?from=connect-us) 咨询，我们会持续优化报错信息的展示。

> ! 在作业的运行过程中，请务必谨慎修改上下游对接产品的配置，包括但不限于对 CKafka 数据源和数据目的所使用的 Topic 做删除、扩容；以及对 MySQL 数据源和数据目的所使用的库表做锁表、修改表结构、新增约束、停机等，否则会对正在运行的流计算作业造成影响，导致数据不完整或作业异常。

## 停止
### 概念解析
作业的**停止**操作表示终止当前作业的执行，并选择是否保存所有运行时的状态。

### 操作步骤
当一个作业进入**运行中**状态后，如果需要停止运行，有两种操作方式。
1. 可在流计算的**作业管理 > 操作**中单击**更多**，然后在下拉菜单中选择**停止**。作业的状态即会变成**操作中**。一段时间后，最终状态会变成**停止**，此时表示作业已经完全停止运行。
2. 发布新版本，并选择停止当前版本。随后，作业的状态会变成**操作中**。一段时间后，最终状态会变成**停止**，此时表示作业已经完全停止运行。
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/17/16397282199437.jpg)
> !如果您希望保留作业当前的运行状态，并让作业下次启动时可以从上次停下的地方开始消费，请勾选停止时创建快照。
> 
![-w800](https://mweb-1306209138.cos.ap-guangzhou.myqcloud.com/2021/12/17/16397282535493.jpg)
