## 功能说明

图片下载失败时，返回包 Headers 中的 X-ErrNo 为错误码字段，请参考下表进行处理。

## 错误码列表

### 下载时处理错误码

| 错误码 | 说明                                                         | 处理措施                                                     |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| -103   | 无效的请求；请求报文无法识别。                                | 请检查请求内容。                                               |
| -104   | 无效的 APPID，URL 中包含的 APPID 无效，或者域名没有和 APPID 绑定。 | 请检查 APPID 是否正确。|                              
| -105   | 无效的样式名，URL 中指定的样式名或者别名没有配置。             | 请检查样式配置或样式名内容。|                   
| -106   | 无效的 URL，URL 格式不符合格式要求。                          | 请检查 URL 格式。                                    |
| -107   | 无效的 Host 头域。                                             | 请检查 Host 是否正确。                                         |
| -108   | 无效的 Referer。                                               | 请检查相关 Referer 配置。                                      |
| -109   | 无效的样式名 ID。没有找到该样式名对应的图片。可能是上传该图片后，新增的样式名， 因此图片上传时不能生成该样式名对应的数据。 |                                 -                             |
| -110   | 该图片在黑名单中。                                             |                   -                                        |
| -120   | 回源到源站获取数据时，源站返回的数据有异常，无法正常获取到图片数据。 | 请检查源站数据。               |
| -124   | 下载偏移错误。HTTP 请求的 Range 断点续传偏移量可能设置错误。   | 请检查断点续传偏移量的相关配置。|                               
| -154   | 原图保护机制禁止该 URL 下载。                                | 请使用样式访问。                                               |
| -156   | 强制执行302流程。                                              |                   -                                           |
| -162   | 业务配置为欠费，禁止下载图片。                                 | 请及时充值。                                                   |
| -163   | 业务配置不存在。                                               | 请检查相关配置项。                                             |
| -164   | 热图下载，限制。                                               | 请降低请求频率，或 [提交工单](https://console.cloud.tencent.com/workorder/category) 联系我们处理。 |              -
| -165   | 攻击性下载请求，限制。                                         |           -                                                   |
| -166   | 消息格式错误。                                                 |          -                                                    |
| -167   | 文件太大，无法支持图片下载。                                   | 请降低图片大小。                                               |
| -168   | 文件太大，无法支持图片下载。                                   | 请降低图片大小。                                               |
| -441   | 图片格式不符，无法进行压缩。                                   | 请使用数据万象支持的图片格式进行图片处理操作。具体支持格式为 jpg、bmp、gif、png、webp。 |                                                 -
| -442   | 图片超过限制大小。                                             | 请将图片长宽限制在9999像素以内。                     |
|  -443   |   图片格式不满足处理限制                                      |   请使用支持的图片格式进行处理，详情请参见 [规则与限制](https://cloud.tencent.com/document/product/460/36620)               |
| -447   | 图片分辨率超出限制或动图帧数过多。                                | 请将图片长宽限制在9999像素以内（动图请限制帧数）。   |
| -901   | 压缩超时。                                                     |                     -                                         |
| -902   | 回源超时，镜像存储功能把请求转发到开发商源站，但没有收到响应，超时了。 | 请检查源站数据或回源配置。|                                    
| -5062  | 图片涉嫌违禁。                                                 | 请检查图片内容是否违规。                                       |
| -6101  | 图片不存在、图片没有上传或者图片已经删除。              | 请检查请求源数据。  |                                         
| -29033 | 下载请求无有效的 range。                                     |           -                                                   |
| -29034 | 下载的 offset 大于文件 size。                                  |           -                                                |
| -29214 | 触发频控。                                                     | 请降低请求频率，或 [提交工单](https://console.cloud.tencent.com/workorder/category) 联系我们处理。 |
| -40168 | 原图为空数据。                                                 | 请检查请求源数据。                                             |
| -46152 | 非法的 bucketName。                                            | 请检查存储桶名称是否正确。 |                                 
| -46154 | 非法的 APPID。                                                 | 请检查 APPID 是否正确。                                        |
| -46614 | 文件尚未上传完成，禁止下载。                                   | 请等待文件上传成功后请求。 |                              
| -46617 | 命中黑名单。                                                   | 请检查图片内容是否违规。                                       |
| -46618 | 签名校验失败。                                                 | 请检查签名是否准确。                                           |
| -46619 | 签名过期。                                                     | 请更新签名。                                                   |
| -46620 | Bucket 被封禁。                                                | 您的 Bucket 已被封禁，请 [提交工单](https://console.cloud.tencent.com/workorder/category) 联系我们处理。 |     -
| -46621 | 文件被封禁。                                                   | 您的资源已被封禁，请 [提交工单](https://console.cloud.tencent.com/workorder/category) 联系我们处理。 |
| -46627 | 用户目前在黑名单中。                                           | 您的账号已被封禁，请 [提交工单](https://console.cloud.tencent.com/workorder/category) 联系我们处理。 |
| -46628 | 文件不存在。                                                   | 请确认请求下载的文件是否真实存在。                        |
| -46642 | APPID 不存在。                                                 | 请检查 APPID 是否正确。                                     |
| -46646 | 文件已封禁。                                                   | 文件已被封禁，请检查文件内容是否违规。  |                    

### 持久化处理错误码

| 错误码 | 说明       | 处理措施            |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
|-60998|图片处理参数无效。|请检查图片处理规则是否正确。|
|-60997|图片处理规则过多。|持久化处理当前最多支持五条规则，请控制在五条以内。|
|-60996|文件太大，无法处理。|请将文件控制在32MB以内。|
|-60987|图片获取失败。|请检查图片 URL。|
|-60983|无效的 Host。|请检查 Host。|
|-60972|无效地域。|请检查请求地域是否支持数据万象服务。数据万象现有地域详见 [地域与域名](https://cloud.tencent.com/document/product/460/31066)。|
|-60967|图片样式不存在。|请检查图片样式。|
|-60957|样式数量超过上限。|当前样式数量上限为100条，如需更多样式请联系我们。|
|-60955|无效的 URL。|请检查 URL 是否正确。|
|-60950|未指定文件。|请在请求中指定需要处理的文件。|
|-60949|请求频率过高。|请放缓请求频率。如有需要请联系我们提升频率限制。|
|-60948|账号涉嫌违规。|您的 APPID 已被封禁，请 [提交工单](https://console.cloud.tencent.com/workorder/category) 联系我们处理。|
|-60938|签名信息不完整。|请检查签名信息中的必选项。|
|-60936|请求被拒绝。|AccessDenied。|
|-60932|签名错误。|签名无效，请检查签名信息是否匹配。|
|-62999|无效的图片格式。|请检查图片格式是否正确。|


其他透传自 COS 下载侧错误码详见 [COS 错误码](https://cloud.tencent.com/document/product/436/8432)。
