本文档用于指导您如何通过控制台进行匹配管理。

## 前提条件

- 已完成 [规则创建](https://cloud.tencent.com/document/product/1294/48962)。
- 如果您需要创建一个“**请求 GSE 资源**”的匹配，则需完成 [游戏服务器队列创建](https://cloud.tencent.com/document/product/1165/41031)。

## 操作步骤

### 创建匹配

1. 登录 [游戏玩家匹配控制台](https://console.cloud.tencent.com/gpm) ，单击左侧【匹配管理】。
2. 进入匹配管理页面，单击【创建】。
   ![](https://main.qcloudimg.com/raw/3fdf7b62de89ae5e1fb720de402fef0c.jpg)
3. 填写规则名称、描述和关联规则等信息。
   GPM根据匹配结果是否需要自动请求对战服资源，将匹配分为两个类型。下面分别介绍两种类型的匹配创建参数。

<span id="test2"></span>

 - #### 无需自动连接对战的匹配：

   GPM 仅为此类型匹配进行匹配票据撮合，即按配置的规则搜索到符合条件的票据形成完整匹配。匹配结果的处置，以及匹配完成后的对战连接，需要用户自行处理。关于此类型的匹配流程，详情可参见 [独立使用的匹配](https://cloud.tencent.com/document/product/1294/49602)。

   ![](https://main.qcloudimg.com/raw/39e505fc68bd087f36edda453bea460f.jpg)

   - 名称：输入匹配名称，必填，长度限制在128字节以内。
   - 描述：匹配的相关描述，非必填，长度限制在1024字节以内。
   - 关联规则：必填，当前匹配所关联的规则。
   - 匹配超时时间：必填，GPM 为一个匹配票据执行匹配搜索的最长时间为1-600秒。
   - 接收通知地址：非必填，只支持 HTTP、HTTPS 协议。当前匹配中的票据完成匹配，或发生状态变更时，将触发 GPM 对该地址进行事件消息推送。强烈建议您配置接收通知地址，使用 GPM 的事件推送功能完成业务流程。
   - 是否为匹配结果请求服务器资源：必填，此处选“否”。



<span id="test2"></span>

- #### 请求对战服资源

  GPM 可以为匹配结果请求 [游戏服务器伸缩 GSE](https://cloud.tencent.com/document/product/1165) 的服务器资源，从而启动一个游戏服务器会话。成功匹配的玩家，可以连接到 GSE 分配的资源进行游戏对战。创建此类型的匹配，您需要先在 GSE 中创建一个队列，详情可参见 [创建游戏服务器队列](https://cloud.tencent.com/document/product/1165/41031)。关于此类型的匹配流程，详情可参见 [需要请求对战服资源的匹配](https://cloud.tencent.com/document/product/1294/49601)。并填写以下信息：
  ![](https://main.qcloudimg.com/raw/c6b59a8772b9a3eb003fd3c591ab75c9.jpg)

   - 是否为匹配结果请求服务器资源：必填，此处选“请求 GSE 资源”。
   - 游戏服务器队列地域：必填，GSE 服务器队列所在地域。
   - 游戏服务器队列：必填，GSE 的服务器队列名称。
   - 自定义推送数据：非必填，此参数用于透传给 GSE，将用于在 GSE 创建游戏服务器会话。长度限制为1024字节以内。
   - 游戏服务器会话数据：非必填，此参数用于透传给 GSE，将用于在 GSE 创建游戏服务器会话。长度限制为1024字节以内。
   - 游戏属性：非必填，此参数用于透传给GSE，将用于在 GSE 创建游戏服务器会话。
     - key：属性名称，最大长度不超过32个 ASCll 字符。
     - value：属性值，最大长度不超过96个 ASCll 字符。

4. 单击【确定】。新建匹配后，在匹配管理页面，就会生成相应的匹配 MatchCode。
   ![](https://main.qcloudimg.com/raw/e459b3948922bbe38b947f5be0d70789.jpg)

### 查看匹配

进入匹配管理页面，单击规则列表中的【MatchCode】，即可查看匹配详情。

>?如果当前匹配需要请求 GSE 资源，您可以点击游戏服务器队列名称，跳转进 [游戏服务器伸缩 GSE 控制台](https://console.cloud.tencent.com/gpm) 查看当前匹配关联的游戏服务器队列信息。
>
![](https://main.qcloudimg.com/raw/09ab6b99d7693c41a660876221b75090.jpg)

### 编辑匹配

进入匹配管理页面，选择匹配列表中的【编辑】操作，即可对当前匹配的信息进行编辑。成功完成编辑的匹配，新的配置信息将即刻生效。
![](https://main.qcloudimg.com/raw/0c13529c6f90f594e31db393af65d439.jpg)

### 删除匹配

进入匹配管理页面，选择匹配列表中的【删除】操作，即可删除当前匹配的信息。

>!匹配删除后，MatchCode 将立即失效，匹配配置信息将被销毁，当前 MatchCode 对应的日志主题及过往日志记录将被清除。
>
![](https://main.qcloudimg.com/raw/c62c5fe0a841c939342e915d184ce320.jpg)



