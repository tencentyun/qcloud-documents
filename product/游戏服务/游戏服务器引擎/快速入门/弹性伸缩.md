## 操作场景

本文档主要指导您如何通过服务器舰队实现弹性伸缩的功能。



## 前提条件
已完成 [入门示例](https://cloud.tencent.com/document/product/1165/43363)。

## 操作步骤

### 修改扩缩容配置和进程数 

1. 登录 [游戏服务器伸缩控制台](https://console.cloud.tencent.com/gse/asset)，单击左侧菜单**服务器舰队**。
2. 单击入门示例中创建的服务器舰队的 ID，进入服务器舰队详情页，单击**扩缩容**页签，进入扩缩容详情页。
![](https://main.qcloudimg.com/raw/bccaa5f26f4f8b3977e1ddae08cd10e6.png)
3. 在该页面单击右上角**修改**，修改扩缩容配置，详情如下：
 1. 调节方式选择“自动调节”。
 2. 实例范围调整到0 - 3，让其有扩的空间。
 3. 游戏服务会话缓冲配置成30%，则当服务器承载的游戏对局超过70%时，即会扩容。 
 4.  修改配置完成后，单击**确定**。
![](https://main.qcloudimg.com/raw/4f803538a652e7481377c08d898f36f8.png)
<dx-alert infotype="explain" title="">
 -  游戏服务器会话缓冲  = 可用游戏服务器会话数 / 最大游戏服务器会话数
  =（最大游戏服务器会话数 - 活跃游戏服务器会话数）/ 最大游戏服务器会话数。
 - 游戏服务器会话缓冲配置为30%时，可用的游戏服务器会话不足30%时会扩容，超过30%时会缩容。
</dx-alert>

 
 
### 创建游戏服务器会话，观察扩容情况
1. 在控制台上，单击左侧菜单**入门示例**，根据 [入门示例](https://cloud.tencent.com/document/product/1165/43363) 中的操作步骤，完成前三步操作，再连续单击7次**创建游戏服务器会话**，从而共创建8个游戏服务器会话，触发扩容条件。
![](https://main.qcloudimg.com/raw/2f0b68ccdcf982abe80f5bd6f31965c3.png)
<dx-alert infotype="explain" title="">
 - 游戏服务器伸缩控制台的入门示例默认配置1台服务器最多承载10个（可更改）游戏服务器会话，因此当承载7个游戏服务器会话时，游戏服务器会话缓冲 = 可用的游戏服务器会话数 / 最大的游戏服务器会话数 =（最大游戏服务器会话数 - 活跃游戏服务器会话数）/ 最大游戏服务器会话数 =（10 - 7）/ 10 = 30%。
 - 活跃的游戏服务器会话数超过7个需进行扩容，因此观察扩容情况需要创建至少8个游戏服务器会话。
</dx-alert>




2. 单击左侧菜单[**服务器舰队**](https://console.cloud.tencent.com/gse/fleet)，选择刚一键创建的服务器舰队 ID，进入舰队详情，单击**实例列表**页签。在该页面观察服务实例数量，2分钟后，您将发现服务器被扩容至2台。
![](https://main.qcloudimg.com/raw/a459a46391d5598f493e1cfa970b3cf5.png)
<dx-alert infotype="explain" title="">
8个游戏服务器会话创建完成后，请**不要**单击**完成**进入下一轮体验，观察缩容情况仍需要在此基础上进行后续操作。
</dx-alert>



### 结束游戏服务器会话，观察缩容情况

1. 在控制台上，单击左侧菜单**入门示例**，接上述观察扩容情况后的操作步骤，每选择一个游戏服务器会话，单击**创建玩家会话**，即可创建一个玩家会话。
![](https://main.qcloudimg.com/raw/f44e2f660a187480a36fc25e26aec37a.png)
2. 单击**跳转至客户端网页**进入客户端页面，单击**连接**即可成功连接服务器，单击**结束游戏会话**，即可结束游戏服务器会话。步骤1、2连续分别操作2次，即可结束2个游戏服务器会话，触发缩容条件。
![](https://main.qcloudimg.com/raw/40c8ab0555b9e9e159f785de0b8eb29c.png)
<dx-alert infotype="explain" title="">
 - 游戏服务器会话缓冲 = 可用游戏服务器会话数 / 最大游戏服务器会话数 =（最大游戏服务器会话数-活跃游戏服务器会话数）/ 最大游戏服务器会话数 =（20 - 6）/ 20 = 70%。
 - 活跃的游戏服务器会话数仅剩6个，可用的游戏服务器会话为70%，超过30%会缩容。
 - 对于当前版本，您关闭客户端网页后，之前创建的玩家会话不能再重新连接客户端，需要新创建一个玩家会话，才能再次连接客户端，从而去关闭游戏服务器会话。
</dx-alert>



3. 单击左侧菜单[**服务器舰队**](https://console.cloud.tencent.com/gse/fleet)，选择刚一键创建的服务器舰队 ID，进入舰队详情，单击**实例列表**页签。在其页面观察服务实例数量，2分钟后，您将发现服务器被缩容至1台。
![](https://main.qcloudimg.com/raw/486951f6ca1ae7f0f30f11d3ee3b7718.png)




