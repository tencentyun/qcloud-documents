

## 服务器舰队 

多个 CVM 实例构建成了一个服务器舰队，一个 CVM 上运行多个游戏服务器会话。GSE 对游戏服务器会话进行管理和分配，通常一个游戏服务器会话是一个进程。

![](https://main.qcloudimg.com/raw/3896b1505c8c99852a3bc8e4f9b31fa3.png)

#### CVM 弹性伸缩

- 根据游戏服务器会话缓冲进行弹性伸缩   
客户配置游戏服务器会话缓冲，即预留空闲的服务器进程占比，空闲不够时扩容，空闲足够时缩容。

- 有状态的缩容  
GSE 不会缩减有游戏服务器会话运行的实例，缩容时，GSE 会通知游戏服务器会话，游戏服务器会话可以决定是否立即缩容。如果开发者在产品配置页面，选择了完全保护，游戏服务器会话如果一直在运行，并未同意缩容，将永远不会缩容。

## 游戏服务器队列

游戏服务器队列实际上是一组有优先级的服务器舰队的队列。该队列可以包含全球各地的服务器舰队，从而有条件实现就近调度和容灾。

![](https://main.qcloudimg.com/raw/a252ee9449113f6b257d17286066531e.png)

#### 容灾原理 
GSE 支持多地部署，在多个地区构建服务器舰队，组成一个服务器舰队的队列，某个地域出现故障后，客户端到服务器的延时会变得非常大，系统会自动切换到延时较小的区域，从而实现容灾。同时，开发者也可手动调整舰队的优先级，将故障区域踢出队列。

#### 就近分配原理 
GSE 提供测速工具，可以测到客户端到服务端的延时，对于对战类的场景，GSE 将分配离整个房间玩家综合比较近的区域的服务器给客户。



## 别名 

客户端通过别名（alias）请求服务器舰队（fleet）下的服务器，版本更新的时候，新建服务器舰队（fleet），并把别名（alias）的配置指向新建的服务器舰队（fleet），客户端仍然调用同一个别名，实现不停服更新。
![](https://main.qcloudimg.com/raw/3e196b186638aff82b68f125bcc94ee8.png)




