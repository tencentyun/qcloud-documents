
## 案例说明
本文档通过一个完整的 DEMO，指导您如何通过 Cocos 引擎使用游戏联机对战引擎。

## 前提条件
已 [下载并安装 Cocos Creator](https://www.cocos.com/products#CocosCreator)（V2.1.0以上版本）。

## 操作步骤
1. 打开 Cocos Creator，新建一个“腾讯云联机对战游戏范例”工程。（您也可下载 [游戏范例工程代码](https://mgobe-1258556906.cos.ap-shanghai.myqcloud.com/cocos-mgobe.zip)，自行导入工程）
![](https://main.qcloudimg.com/raw/7d64a73714f259c1b588521f57c45361.png)
2. 新建完成后，您将得到一个工程包，结构如下图所示：
 - **assets**：该目录下为所有客户端代码，游戏联机对战引擎的客户端 SDK 已导入该目录。所有的客户端逻辑，可在 assets\script 目录下查看。
 - **serverless**：该目录下为工程的服务端代码，包括游戏联机对战引擎的实时服务器框架。
![](https://main.qcloudimg.com/raw/ab2ed4f6a7194067a139fd081ab4b89f.png)
3. 进入 Cocos Creator 主界面，单击顶部工具栏的“![](https://main.qcloudimg.com/raw/09071d4fabcf9239a2ce8f2d96972dac.png)”按键，运行当前 DEMO。通过浏览器打开的界面如下图所示：
![](https://main.qcloudimg.com/raw/3d69120bb52b0719ef65cc56b7d5fe0b.png)

<dx-alert infotype="notice" title="">
 - 由于当前 DEMO 演示联机功能，请您复制地址，在两个浏览器窗口运行当前 DEMO，以便您体验通信同步效果。
 - 当前窗口展示的游戏 ID、游戏 Key、域名，为体验 DEMO 专用的游戏信息，当同时体验的用户较多时，可能产生通信延迟或卡顿。为了更好的体验效果，建议您替换为私有的游戏 ID、游戏 Key、域名。
</dx-alert>


4. 单击**体验游戏联机对战引擎**进入如下页面，并单击**初始化**，开始体验。
![](https://main.qcloudimg.com/raw/f5c1e0cd448a4dcaa2c3f653a847a236.png)
  
  - **通过“创建房间”、“随机匹配”、“加入房间”三种方式，体验加入一个游戏房间功能**
    1. 单击**创建房间**，您可直接加入一个游戏房间。
    2. 单击**随机匹配**，MGOBE 将按照预设的匹配规则为您匹配其他玩家并加入游戏房间。您需要在另一个浏览器运行页面同步单击**随机匹配**，使两个浏览器被分配进同一个房间。
    3. 当您已经加入一个游戏房间后，可获取当前房间号，并在其他浏览器窗口通过指定的房间号加入游戏房间。  
   
   - **体验房间内消息发送功能**
   ![](https://main.qcloudimg.com/raw/be9d00d407e19cc3766018cc57c87bed.png)
   选择“房间内发消息”，输入文字并发送，在两个浏览器窗口可以看到消息发送的同步效果。（只有房主可以切换房间内的消息通信方式）  
 
   - **体验实时服务器状态同步功能**         
  ![](https://main.qcloudimg.com/raw/872a37aaccf9052ca3c6208fb6cb89a5.png)
    1. 选择“实时服务器状态同步”，当前页面有4个方向按键，可以控制玩家运动。此处运动逻辑在服务端进行计算，默认的运动逻辑为一次点击运动一格。您可在 serverless 框架下查看修改实时服务器代码。
    2. 如需体验修改实时服务器逻辑代码，可将 DEMO 首页的游戏信息替换为您的私有游戏信息，并修改实时服务器代码，通过 Cocos Creator 服务面板一键发布，或在腾讯云控制台发布您的实时服务器代码。
   
   -  **体验帧同步功能**  
   ![](https://main.qcloudimg.com/raw/83f8a8f914e94808330dc78473f1ca86.png)
  选择“帧同步”，当前页面的操作面板有4个按键，**开始帧同步**、**跑**、**停**、**停止帧同步**；您需要先单击**开始帧同步**，方可操作**跑**/**停**控制玩家移动。
