## 功能概览
腾讯云云硬盘快照对部分用户开放了 **定期快照** 功能，该功能便于开发者灵活设置备份任务策略。常见的策略如：
- 非核心业务数据盘，可设定每周一零点进行一次自动快照备份，保存 1 个月后自动删除；
- 核心业务数据盘每隔 24 小时进行一次快照备份，保存 1 周后删除。

如果您需要体验该功能，请提交 [内测申请](https://cloud.tencent.com/apply/p/h60ocht5tra)。

## 策略说明
- **对象** ：所有 CBS 云硬盘，包括系统盘和数据盘。

- **执行策略**：自动快照时间点可具体到日 - 小时。执行策略保存后，长期有效。执行策略可修改，修改成功后立即生效。

- **定期销毁（重要）**：定期快照提供定期销毁的功能，可设置快照的生存周期（ 1 ~ 30 天）后，到期将自动删除自动生成的快照，降低备份成本。若不设置定期销毁策略，则自动快照将长期保留。

- **批量**：先设定定期快照策略，可勾选多块云硬盘，针对多块云硬盘批量执行同一策略。
 
- **脚本暂停**：非使用中的云硬盘将不执行自动快照策略。非使用中的云硬盘指系统盘、数据盘关联的云服务器关机或数据盘未挂载。

- **命名规则**：自动快照的命名：snap_yyyyMMdd_HH，yyyyMMdd 是当天的日期，HH 为小时，例如 snap_20140418_11 表示 2014 年 4 月 18 日 11 时创建的自动快照。您也可以自行修改快照命名。

- **生命周期（重要）**：快照的生命周期有 2 种，
 1. 手动创建的快照，生命周期默认为 **长期保存** ，只要账户余额充足，则可长期保留；
 2. 定期快照，根据创建规则，可设定 **定期销毁** 的时间点，也可设置为长期保留。

- **快照冲突**：自动快照与自定义快照使用上没有冲突，当正在对某一块磁盘执行自动快照时，用户需要等待自动快照完成后，才能创建自定义快照（反之同理）；如果磁盘数据量大，一次打快照时长超过两个自动快照时间点间隔，则下一个时间点不打快照自动跳过。例如：用户设置 9:00、10:00、11:00 为自动快照时间点，9:00 打快照的时候时长为 70 分钟，也就是 10:10 才打完，那 10:00 预设时间点将不打快照，下个快照时间点为 11:00。

- **快照额度**：每块磁盘具有一定的快照额度，若某块磁盘的快照数量达到额度上限，自动快照任务会被挂起、阻塞。快照额度主要是为了避免开发者遗忘了某个自动快照策略，导致存储成本无止境攀升。
 
- **ASP**：ASP 指的是定期快照策略，即 Auto Snapshot Policy。

- **ASP 额度**：单个账户下，每一个区域最多设定 100 个 ASP 策略。单个 ASP 最多关联 300 块硬盘。

- **保存周期**：对于自动快照，控制台会显示回收的倒计时时间。 对于手动创建快照，显示永久保留。自动快照可手动单击改为永久保留。

- **ASP 暂停功能**：ASP 自动快照策略提供手动触发 **暂停** 的功能，暂停后，则不会再自动创建快照。但自动快照的生命周期不受影响，到期后会自动退订。例如生命周期为 7 天，到期后依然清退。

- **操作日志**：操作日志会显示所有自动快照的创建过程，与手动添加的快照相同。
 
## 操作指引
### 一. 创建定期快照策略
登录 [快照控制台](https://console.cloud.tencent.com/cvm/snapshot) ，新建定期快照策略。
![](https://main.qcloudimg.com/raw/990ef11d385f9c077e242e1a97718bcc.png)
填写快照名称、备份日期、备份时间点、快照保留时间，单击【确定】保存。
![](//mc.qcloudimg.com/static/img/dffffb2a9248765fd1782bceb57e001b/image.jpg)

### 二. 关联云硬盘
策略创建完成后，您可以将云硬盘添加到定期策略中，实现自动快照功能。
![](https://main.qcloudimg.com/raw/19c1c796c8f32f951a74b98f18c2cda0.png)

### 三. 将自动快照转为永久保留的快照
单击自动快照的 ID，在详情页单击【长期保存】，将自动快照设置为永久保留。
![](//mc.qcloudimg.com/static/img/6238e66c512784793558bc0e23692e3c/image.jpg)
快照永久保留示意图：
![](https://main.qcloudimg.com/raw/903a4ff8fc7962cd7f2f723f054695de.png)
