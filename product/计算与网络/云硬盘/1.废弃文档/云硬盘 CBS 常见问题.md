## 一般性问题
问：当CVM销毁时，数据会发生什么情况？

由于本地盘的生命周期完全跟随CVM实例，因此当CVM实例销毁时存储于本地盘中的数据将一并被销毁。存储在云硬盘 (CBS) 上的数据独立于实例的生命周期，您可以自由选择是否需要在实例生命周期之外保留 CBS 卷。因此，我们建议您使用 CBS 来存储需要保存较长时间的数据。

问：CBS 不同类型之间有什么区别？

云硬盘 CBS 提供最新一代的三种卷类型：适用于日志等大文件顺序读写、非频繁访问的普通云硬盘，适用于 Web 服务器和各种中小型数据库等大部分 IO 场景的高性能云硬盘和适用于交易型工作负载、大型数据库的 SSD 云硬盘。这些卷类型的性能特点和价格各不相同，您可根据应用程序要求选择您所需的存储性能和相应费用。有关硬盘类型和性能的更多信息，请参阅产品详情页面。

问：我应该选择哪种 CBS 类型？

在选择硬盘类型前，请先确认您需要用来进行什么样的工作类型数据存储：

- 如果您的硬盘用来存储系统日志、企业工作文件、数据仓库、小型博客、BBS等请求不特别频繁的场景数据，则推荐您使用普通云硬盘来获得最低的成本
- 如果您的硬盘用来存储中小型数据库、Web/App应用、交易型工作负载等常规场景数据，则推荐您使用高性能云硬盘来获得最佳性价比
- 如果您的硬盘用来存储大型核心数据库、OLTP业务、NoSQL数据库等工作负载较高、对性能要求较高的场景数据，则推荐您使用 SSD 云硬盘来获得最高的性能

问：在成功购买后，是否能更换云硬盘的类型？
目前暂不支持云硬盘在不同类型之间进行切换，您可以对数据进行快照备份后通过快照创建一块您需要的新类型云硬盘。

问：在成功购买后，是否能调整云硬盘的容量？

云硬盘支持容量调整功能，可扩大但不可缩小容量

## 云硬盘使用和生命周期问题
问：是否支持多个实例访问同一块云硬盘？

虽然您可以将多达 10 块云硬盘挂载到一个实例，但是目前暂不支持多个实例访问同一块云硬盘。


问：能否将多块硬盘逻辑上合并成一块硬盘以获得更好性能？

可以。您可以将挂载到 CVM 实例的多块云硬盘一起条带化，以实现超越单硬盘的更高的性能。详细内容请参考[多块弹性云盘构建LVM逻辑卷](https://cloud.tencent.com/document/product/362/2933)。

问：随云主机一起购买的数据盘可以卸载吗？
自2017年11月后，随主机一起购买的数据盘支持卸载和重新挂载。为避免卸载后重新挂载至另一台到期时间不同的云主机上导致生命周期管理困难，我们在挂载时提供了对齐到期时间、设置自动续费等多种选项，请您注意选择合适的生命周期管理方式，避免因硬盘到期导致的数据丢失问题。

问：云硬盘到期后系统如何处理？

云硬盘到期后，我们将对云硬盘的性能进行限制，但不会解除其与云主机的关联关系（如有），您将在使用云硬盘时发现其性能有显著下降。同时，云硬盘到期前后系统均将以短信的形式通知您。仍未续费的情况下，系统将解除云硬盘与云主机的关联关系并将云硬盘回收至回收站，此时续费即可恢复。若到期 7 日后仍未进行续费，则硬盘将被销毁所有数据不可找回。

问：卸载云硬盘时会丢数据吗？

云硬盘中的数据不因挂载或卸载而发生改变。为了保持数据一致，我们强烈建议： 

- 在Windows操作系统下，为了保证数据完整性，建议您暂停对该磁盘的所有文件系统的读写操作，否则未完成读写的数据会丢失。 
- 在Linux操作系统下，您需要登录云服务器实例并对该磁盘进行umount命令行操作，命令执行成功后再进入控制台对磁盘进行卸载操作。

问：为什么挂载云硬盘时找不到我想挂载的云服务器？

请确保您的云服务器实例和云硬盘盘处于同一个地域的同一个可用区下，云硬盘不可跨可用区进行挂载。同时确保您的实例没有被释放。

问：在同一台子机上挂载了几块相同大小、相同类型的云硬盘，在操作系统中如何区分它们？

对于Linux操作系统，您可以通过执行`ls -l /dev/disk/by-id `命令查看到弹性云盘与设备名之间的对应关系：
![](//mccdn.qcloud.com/static/img/56e625dd23adfb78829d34a7e86e9291/image.png)

对于Windows操作系统，您可以通过执行`wmic diskdrive get caption,deviceid,serialnumber`或者`wmic path win32_physicalmedia get SerialNumber,Tag`命令查看：
![](//mccdn.qcloud.com/static/img/205b1060c7bc7446becddee81971c506/image.png)

问：云硬盘使用上有什么注意事项？

- 对于独立购买的云硬盘，在使用`fstab`配置静态文件系统信息时，文件系统标识应使用文件系统的 UUID 或者 label，防止由于多个云硬盘在同一子机上多次挂载/卸载后导致云盘在子机中的内核名称发生变化。 
- 请特别注意，如果云硬盘先于云服务器到期，那么该云硬盘将会在到期时一段时间内被限流、解挂和回收。为防止对您的业务产生影响，请注意及时对其续费。
- 如果云硬盘从云服务器上移除对您的关键业务不会产生严重影响，那么在配置`fstab`时可以考虑使用`nofail`选项，防止由于云硬盘从云服务器上移除后导致系统重启时报错。
- 建议您在 Windows 操作系统下使用云盘前先在 `diskpart` 内执行`san policy=OnlineAll`操作。
- 从 Windows 操作系统中解挂云硬盘时建议您先中断对该盘的所有读写操作，并执行`offline（脱机）`操作。

## 快照常见问题
问：是否需要卸载硬盘或中断所有读写才能拍摄快照？

否，您可以在硬盘连接和使用期间实时拍摄快照，不会影响您正常的业务。不过，快照只能捕获已写入 CBS 卷的数据，不包含应用程序或操作系统已在内存中缓存的数据。为了确保快照中捕获了所有应用程序的数据，我们建议您先彻底地暂停对硬盘的IO操作后进行快照制作。对于用作系统盘的 CBS 卷，我们建议您先进行关机，以便能拍摄完整的快照。

问：能否读取以前的快照来恢复？

每个快照都有一个唯一的全局标识，用户可以根据任何现有的快照回滚或创建新的 CBS 卷。

问：快照回滚是否需要关机？

对于已经挂载在子机上的硬盘，回滚时需要关闭子机；对于未挂载的硬盘则可以直接执行回滚操作

问：制作快照是否会影响硬盘性能？

制作快照时根据硬盘写入数据的数据量情况将对硬盘读写性能有较小影响，因此我们推荐您在业务低谷时期进行快照操作

问：制作快照到快照可用需要多久？

快照制作的时间根据您硬盘写入量的情况、底层的读写情况等各种因素变化，较难预测。不过您无需担心，制作快照并不影响您正常使用硬盘。

## 硬盘性能常见问题
问：什么是随机 IO？什么是顺序 IO？

IO要么是随机的，要么是顺序的。随机 IO 是指访问地址不连续，而是随机分布在磁盘 LUN 的寻址空间内。主要产生随机 IO 的业务包括：OLTP 业务、SQL、即时通信业务等

顺序 IO 指的是读写操作连续从相邻的地址访问数据，按逻辑块逐个进行。在顺序 IO 访问中，硬盘寻道时间大幅缩短，因为读写磁头基本不需要移动就可以访问下一个块。如数据备份、写日志流水等业务大部分产生的是顺序 IO	

问：什么是IOPS？

IOPS (Input/Output Per Second)即每秒的输入输出量(或读写次数)，是衡量硬盘性能的重要指标之一。IOPS 是指单位时间内系统能处理的 I/O 请求数量，一般以每秒处理的 I/O 请求数量为单位，I/O 请求通常为读或写数据操作请求。

传统磁盘本质上一种机械装置，如FC, SAS, SATA磁盘，转速通常为5400/7200/10000/15000 rpm不等。影响磁盘的关键因素是磁盘服务时间，即磁盘完成一个 I/O 请求所花费的时间，它由寻道时间、旋转延迟和数据传输时间三部分构成。

常见的，一块 7200 转的机械硬盘能提供 75-150 的 IOPS，15000 转的机械硬盘能提供 175-210 的 IOPS (具体的数值视访问模式，如顺序、随机，以及 IO 大小等因素决定）

问：应用程序读写的 IO 大小是否会影响我获得的 IOPS 性能？

会。对于给定的资源，您获得的 IOPS 取决应用程序读取和写入操作的 IO 大小。通常在 IO 大小为 256K 等小块读写时，能将硬盘的 IOPS 性能充分应用起来。

问：应用程序读写的 IO 大小是否会影响我获得的吞吐性能？

会。对于给定的资源，您获得的吞吐量取决于应用程序读取和写入操作的 IO 大小。通常在 IO 大小为 1M 等大块读写时，能将硬盘的吞吐性能充分应用起来。


