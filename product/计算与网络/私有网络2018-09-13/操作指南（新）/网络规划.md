在您使用腾讯云私有网络前，为避免临时扩容带来的问题，您需要结合业务来规划私有网络的数量及网段等。
- [如何规划私有网络数量？](#planVPC)
- [如何规划子网数量？](#planSubnet)
- [如何规划私有网络和子网的网段（CIDR）？](#planCIDR)
- [如何规划路由表数量？](#planRoute)
- [如何规划跨地域多中心混合云网络？](#planExample)

## 如何规划私有网络数量？[](id:planVPC)
- **规划一个私有网络**
如果您的业务量较小，且部署在同一地域，业务间无须通过私有网络进行隔离，推荐您规划一个私有网络。
您可以在一个私有网络中创建多个子网和路由表来实现流量的精细化管理，另外，建议您将多个子网分散到不同的可用区，实现不同可用区之间的相互容灾。
![](https://main.qcloudimg.com/raw/7cd47095dc881c77b833057ef3a37ad3.png)
- **规划多个私有网络**
如果您有如下任何一个需求，推荐您规划多个私有网络：
 - **业务部署在多地域**
当您在多地域部署业务时，需要规划多个私有网络。因为一个私有网络无法跨地域部署，所以当业务在多个地域时，则需在每个地域至少部署一个私有网络。
私有网络之间默认不互通，如果不同私有网络间有互通需求，可以通过 [对等连接](https://cloud.tencent.com/document/product/553) 或 [云联网](https://cloud.tencent.com/document/product/877) 实现私有网络互通。
![](https://main.qcloudimg.com/raw/10f5254360d73398cd250f3ba71e3122.png)
 - **多业务部署在同一地域且需隔离**
当您有多个业务部署在同一地域，且多个业务间需要相互隔离，则此时您需要规划多个私有网络，为每个业务部署一个私有网络。因为私有网络之间默认不互通，所以您无须进行其他额外的操作，即可实现多业务之间的隔离。
![](https://main.qcloudimg.com/raw/043282f6db23433899394cb3e45ba970.png)

## 如何规划子网数量？[](id:planSubnet)
- 一个私有网络可以同时拥有多个子网（默认配置为100个），相同私有网络下不同子网默认内网互通。
- 为实现跨可用区容灾，建议在一个私有网络，至少创建两个位于不同可用区的子网。


## 如何规划私有网络和子网的网段（CIDR）？[](id:planCIDR)
**私有网络和子网的网段掩码一旦设定后，则无法修改。**因此，请结合业务规模和通信场景合理地规划私有网络和子网，这将有利于后期业务的平滑扩展和运维。
>?
>- 私有网络支持IPv4和IPv6地址功能。由于IPv6 地址为 GUA 地址，非私有地址，因此不支持用户自定义规划。本文详细介绍IPv4 私有地址网段的规划。
>- IPv6地址分配遵循如下原则：每个 VPC 分配1个/56的 IPv6 CIDR，每个子网分配1个/64的 IPv6 CIDR，每个弹性网卡分配1个 IPv6 地址。
>
#### 规划私有网络网段
- **您可使用如下私有网段中的任意一个作为您的私有网络网段：**
 - **10.0**.0.0 - **10.255**.255.255（**掩码范围需在16 - 28**之间）
 - **172.16**.0.0 - **172.31**.255.255（**掩码范围需在16 - 28**之间）
 - **192.168**.0.0 - **192.168**.255.255 （**掩码范围需在16 - 28**之间）
- **在规划私有网络网段时，请注意：**
 - 如果您需要建立多个私有网络，且私有网络间或私有网络与 IDC 间有通信需求时，请避免多个私有网络网段重叠。
 - 如果您的私有网络需要和基础网络互通，请创建网段范围在`10.[0~47].0.0/16`及其子集的私有网络，其他网段的私有网络无法实现与基础网络的互通。
 - VPC CIDR 和 子网 CIDR 创建后都不能修改。当 VPC CIDR 或 子网 CIDR 地址不足时，可通过 [创建辅助 CIDR ](https://cloud.tencent.com/document/product/215/51962#21) 解决，但是由于辅助 CIDR 处于内测阶段，且会增加更多操作的复杂性，因此建议在创建 VPC 和子网时，合理规划网段地址。

#### 规划子网网段
- **子网网段范围：**您可选择在私有网络网段范围内或与私有网络网段相同的网段作为您的子网网段，如私有网络网段为 10.0.0.0/16，则您可选择 10.0.0.0/16 - 10.0.255.255/28 之间的网段作为子网网段。
- **子网大小和 IP 容量**：子网创建后不可修改，因此创建子网时应使子网网段的 IP 容量满足需求，但子网不宜过大，以防后续业务扩展时无法再创建新的子网。
- **业务需要**：同一个私有网络下可按照业务模块划分子网，如 Web 层、逻辑层、数据层分别部署在不同子网，不同子网间可使用 [网络 ACL](https://cloud.tencent.com/document/product/215/20088) 进行访问控制。

>?
>- 如果子网所属私有网络与其他私有网络或 IDC 有通信需求，请避免子网网段与对端网段重叠，网段重叠则无法内网互通。
>- 如果子网网段已经重叠，您可以 [更换实例子网](https://cloud.tencent.com/document/product/213/16565) 后使用云联网，或重新创建私有网络、购买云服务器。

## 如何规划路由表数量？[](id:planRoute)
路由表用于控制子网内的流量走向，每个子网仅且只能绑定一个路由表。腾讯云私有网络支持默认路由表和自定义路由表。
- **规划一个路由表**
如果您的私有网络不同子网的流量走向需求相同或类似，推荐您规划一个路由表，您可以创建不同的路由策略来控制流量走向。
![](https://main.qcloudimg.com/raw/37ce9836a9eec4c33f5643b7978b123f.png)
- **规划多个路由表**
如果您的私有网络不同子网的流量走向需求有较大不同，则推荐您规划多个路由表。有不同需求的子网各自绑定对应的路由表，通过路由策略来控制流量走向。
![](https://main.qcloudimg.com/raw/275221b4419c78cd79752f18e951862e.png)

## 如何规划跨地域多中心混合云网络？[](id:planExample)
如果您需要建立多个私有网络，且私有网络间或私有网络与 IDC 间有通信需求时，请避免私有网络网段与互通的网段重叠。
例如，在成都地域有一个网段为`10.1.0.0/16`本地数据中心，需要在上海和北京两个地域新建两个云上数据中心，且与成都的本地数据中心有通信需求，则建议上海和北京两个地域的云上数据中心的私有网络网段分别为`10.2.0.0/16`、`10.3.0.0/16`，避免因网段重复而导致无法进行通信。您可通过如下两种方式进行连接，实现本地数据中心与云上数据中心、云上数据中心间的通信。
- **方式一：**均使用云联网进行连接，通过一个云联网，实现全网互联互通。
![](https://main.qcloudimg.com/raw/1efc659ca487e6b7d8ba1d92050f5f8c.png)
- **方式二：**处于上海和北京地域的云上数据中心，均通过专线接入连接成都本地数据中心，实现本地数据中心与云上数据中心的通信；上海和北京地域的云上数据中心间，通过对等连接，连接对应所属私有网络，实现云上数据中心间的通信。
![](https://main.qcloudimg.com/raw/949447db5b6769f58ad0e3994e227918.png)

**在多私有网络场景下的相关建议：**
- 请尽量给不同私有网络规划不同的网段。
- 若无法给不同私有网络规划不同的网段，请尽量给不同私有网络的子网规划不同的网段。
- 若无法给不同私有网络的子网规划不同的网段，请确保规划通信子网网段不同。

## 相关文档
- 若需快速搭建一个具有 IPv4 CIDR 的私有网络，从新建私有网络和子网，到云服务器的购买并绑定一个弹性公网 IP，并最终实现公网访问，请参见 [快速搭建 IPv4 私有网络](https://cloud.tencent.com/document/product/215/30716)。
- 若需快速搭建一个具有 IPv6 CIDR 的私有网络，并为私有网络内的云服务器开启 IPv6，实现 IPv6 的内外网通信，请参见 [搭建 IPv6 私有网络](https://cloud.tencent.com/document/product/215/47557)。
