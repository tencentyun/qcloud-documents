腾讯云私有网络（Virtual Private Cloud，VPC）使用了 GRE 隧道封装技术，实现了虚拟网络的隔离，每一个私有网络都有一个 GRE 隧道号来唯一标识，每一个隧道号都对应了一个虚拟网络。

## 技术原理
腾讯云的虚拟化云网络是一种软件定义网络（Software-defined networking，SDN）。软件定义网络 (SDN) 旨在赋予网络灵活性和敏捷性。利用 SDN 设计、构建和管理网络，可以实现控制平面和数据平面的分离，通过直接对控制平面进行编程，并对用于应用和网络服务的底层基础设施进行抽象化。

通用路由封装协议（Generic Routing Encapsulation，GRE）提供了将一种协议的报文封装在另一种协议报文中的机制，是一种三层隧道封装技术，使报文可以通过 GRE 隧道透明的传输，解决异种网络的传输问题。

基于 SDN 技术和 GRE 协议，腾讯云自研出了控制系统和数据转发系统，实现了私有网络产品。通过 GRE 隧道封装技术，一个私有网络就对应了一个隧道号，在这个私有网络实例内的云服务器、云数据库等实例进行数据传输时，都会进行 GRE 封装，并附带上唯一的所属私有网络隧道号来标识，然后送到物理网络中传输。相同的私有网络传输数据时，隧道号相同，自然互通；而不同的私有网络间传输数据时，由于隧道号不同，所以无法进行通信，实现了网络隔离。

## 逻辑架构
如下图所示，私有网络的核心组件是控制器和转发器，控制台通过调用云 API，可以使控制器生成控制信息，从而控制转发器实现对应数据的转发。控制器实现的是通过用户的配置下发转发信息，转发器实现的是数据平面的数据转发，二者共同实现私有网络的数据转发功能。
![](https://main.qcloudimg.com/raw/79d61aa8923138d301803b9e77bbaabb.png)

