## 路由表
路由表由多条路由策略组成，用于控制私有网络内子网的出流量走向。每个子网能且只能关联一个路由表，一个路由表可以关联多个子网。您可以为不同流量走向的子网创建多个路由表。
![](https://main.qcloudimg.com/raw/1649e71eab7f022dffc4b49f90d97f52.png)

### 默认路由表
用户创建私有网络时，系统会自动为其生成一个默认路由表。在之后的子网创建过程中，如果用户没有选择自定义路由表，子网会自动关联该默认路由表。
您可以在默认路由表中添加、删除和修改路由策略，但无法删除该默认路由表。

### 自定义路由表
您可以在 VPC 中创建自定义路由表，自定义路由表可以被删除。您可以为具有相同路由策略的子网建立一个自定义路由表，并将路由表与需要遵循其路由策略的所有子网关联。
您可以在 [创建子网时关联路由表](https://cloud.tencent.com/document/product/215/20110)，或在子网创建后，[更换子网关联路由表](https://cloud.tencent.com/document/product/215/20126)。

## 路由策略
路由策略由目的端、下一跳类型和下一跳组成：
- 目的端
目的网段描述（仅支持网段格式，如果希望目的端为单个 IP，可设置掩码为 32（例如`172.16.1.1/32`），目的端**不能**为路由表所在私有网络内的 IP 段，原因是 Local 路由已表示此私有网络内默认内网互通。
- 下一跳类型
私有网络的数据包的出口。私有网络下一跳类型支持 “NAT 网关”、“云服务器”等类型。详情清参见 [自定义路由策略](#luyoucelue)。
- 下一跳
指定具体跳转到的下一跳实例（使用下一跳 ID 标识），例如您私有网络内的某个具体 NAT 网关。

## 系统路由策略
系统路由策略由系统自动下发，不能修改和删除，也无法禁用。
- 创建私有网络后，系统会在路由表中自动添加一条默认路由，表示此私有网络内所有资源均内网互通：
<table><tbody>
<tr><th>目的端</th><th>下一跳类型</th><th>下一跳</th></tr>
<tr><td>Local</td><td>Local</td><td>Local</td></tr>
</tbody> </table>
- 如果您创建了 [网络探测](https://cloud.tencent.com/document/product/215/14991)，系统也会下发一条下一跳为该网络探测实例的路由。

<span id='luyoucelue'></span>
## 自定义路由策略
您可以添加自定义路由来替换系统路由，或将目标流量路由到指定的目的地。在添加自定义路由时，您可以指定路由策略的下一跳类型：
- 云主机（公网网关）：将指向目标网段的流量转发到一个公网网关（开启了转发功能的云服务器）。更多公网网关信息，详情请参见 [公网网关](https://cloud.tencent.com/document/product/215/20078)。
- VPN 网关：将指向目标网段的流量转发到一个 VPN 网关。
- 专线网关：将指向目标网段的流量转发到一个专线网关。
- 对等连接：将指向目标网段的流量转发到对等连接另一端的 VPC 。
- NAT 网关：将指向目标网段的流量转发到一个 NAT 网关。
- 云主机：将指向目标网段的流量转发到私有网络内的一台 CVM 实例。
- 云主机的公网 IP：将指向目标网段的流量转发到私有网络内的一台 CVM 实例的公网 IP（包括普通公网 IP 和弹性 IP）。

### 路由策略优先级
当路由表中存在多条路由策略时，路由优先级由高至低分别为：
- 私有网络内流量：私有网络内流量最优先匹配。
- 最精确路由（最长前缀匹配）：当路由表中有多条条目可以匹配目的 IP 时，采用掩码最长（最精确）的一条路由作为匹配项并确定下一跳。
- 公网 IP：路由策略均匹配失效时，通过公网 IP 对 Internet 进行外访。

### NAT 网关 / EIP 优先级说明
当一个子网关联了 NAT 网关，且子网内云服务器有公网 IP（或弹性 IP）时，会默认通过 NAT 网关访问 Internet（因为最精确路由的优先级高于公网 IP），但您可以设置路由策略，实现通过云服务器公网 IP 访问 Internet。详情请参见 [调整 NAT 网关和 EIP 的优先级](https://cloud.tencent.com/document/product/552/30012)。

## 使用约束
- 不支持 BGP 和 OSPF 等动态路由协议。
- 路由表相关资源限制如下表所示：
<table><tbody>
<tr><th>资源</th><th>限制 / 个</th></tr>
<tr><td>每个私有网络内的路由表个数</td><td>10</td></tr>
<tr><td>每个子网关联路由表个数</td><td>1</td></tr>
<tr><td>每个路由表的路由策略数</td><td>50</td></tr>
</tbody> </table>

## 计费方式
路由表的创建和使用完全免费。更多私有网络价格信息，详情请参见 [计费概述](https://cloud.tencent.com/document/product/215/20096)。

## 操作指南
控制台操作，详情请参见 [操作概述](https://cloud.tencent.com/document/product/215/20132)。
