迁移任务用于进行物理机间的操作系统与数据迁移，在符合迁移条件的情况下，实现透明化的迁移工作，迁移完成后，除资源 ID（cpm-XXXXXX）发生变化，以及解绑 LB/EIP 外，目标服务器将继承原服务器的其它配置信息（如网络配置等）与数据。

## 核心流程
迁移任务的整体流程分为两大环节，依次进行：
- **发起迁移**
请您由物理机页面，选定源服务器与目标服务器，启动迁移任务。
迁移信息较验成功后，将会正式启动迁移流程。
- **确认结果**
迁移完成后，消息中心将发出通知，需要请您前往迁移任务页面，对迁移结果进行确认。

>! 请前往 [消息中心](https://console.cloud.tencent.com/messageCenter/messageConfig) 订阅“产品消息 -产品服务相关通知”类别，以保证可收到通知。
>

## 状态生命周期
![](https://main.qcloudimg.com/raw/b71f53601fecc82ac01bb7ad5c0adfc0.png)

- **启动任务**
您发起迁移的动作，这是整体作务的起点。
- **较验中**
迁移任务是高风险操作，且对系统环境有要求，故需要在本环节进行环境校验。
- **校验失败**
服务器密码不正确或环境不符合迁移要求，将会出现此状态，并终止任务。
- **准备中**
较验通过后，将对源服务器与目标服务器进行迁移前的准备动作，此时未正式启动迁移。
- **处理中**
正式启动迁移，进行数据同步。
- **待确认**
平台已完成迁移工作，源服务器离线且未重装，目标服务器上线，需要请您确认迁移是否达到预期目标。
- **迁移失败**
您在确认环节，选择了迁移失败，此时将进行回滚动作，目标服务器重装，源服务器上线，源服务器恢复到迁移前的状态，并终止任务。
- **迁移异常**
您在确认环节，评估并发现迁移效果与预期不一致，需要进一步服务，可选择此状态。选择此状态后，将弹出售后工单页，请您填写相关信息，将由售后人员，协助您完成后续工作。
- **迁移成功**
您在确认环节，评估达到迁移的预期目标，则请选择此状态，选中后将进行迁移的扫尾工作，如对源服务器进行重装，以避免 IP 等配置信息冲突的情况。扫尾完成后，任务结束。

## 迁移约束与建议
迁移任务受限于客观因素，将在较验环节进行验证，并于此章节明确说明约束，并给出明确建议：
### 迁移约束
- 请开启分布式网关，否则无法完成迁移。
- 请确保目标服务器兼容源服务器当前操作系统，否则无法完成迁移。
- 请确保源服务器与目标服务器处理同一可用区，否则无法完成迁移。
- 请确保目标服务器的逻辑盘数量与容量，均大于源服务器，否则无法完成迁移。
- 请确保服务器处理“运行中”状态，否则无法完成较验。
- 请确保服务器的 ICMP(Ping) 可响应，否则无法完成较验。
- 请确保服务器的密码正确，否则无法完成较验。
- 请确保服务器已安装 python/expect 工具。（最新官方镜像已包含此工具，但早期版本需自助安装，版本没有要求）
- 暂不支持容器管理机（ccsmaster）迁移。
- 暂不支持 Windows 系统迁移。
- 暂不支持 NVMe 机型迁移。

### 迁移建议
- 建议机型：非 NVMe 的 Linux 服务器，并使用重装功能，验证操作系统兼容性。
- 建议网络：源服务器与目标服务器均配置为同 VPC 同子网，验证网络可用性。
