## åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨

Malagu æä¾›äº†ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…· `@malagu/cli`Â ï¼Œè®¾è®¡æ€è·¯éƒ¨åˆ†å€Ÿé‰´äº† `@vue/cli`Â ã€‚æˆ‘ä»¬çš„åº”ç”¨åˆå§‹åŒ–ã€è¿è¡Œã€æ„å»ºå’Œéƒ¨ç½²ç­‰ç­‰æ“ä½œéƒ½æ˜¯åŸºäºè¯¥å‘½ä»¤è¡Œå·¥å…·å®Œæˆã€‚æ›´å¤šæœ‰å…³[å‘½ä»¤è¡Œå·¥å…·](https://www.yuque.com/cellbang/malagu/xbfpir)æ–‡æ¡£ã€‚

### å¿«é€Ÿåˆå§‹åŒ–
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£… `@malagu/cli`Â å‘½ä»¤è¡Œå·¥å…·ï¼Œç„¶åä½¿ç”¨ `malagu init`Â å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ªæ¨¡æ¿åº”ç”¨ï¼Œ `malagu init`Â å¯ä»¥æŒ‡å®šé¡¹ç›®åç§°å’Œæ¨¡æ¿ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™ä¼šè®©æ‚¨é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ¨¡æ¿ï¼Œå¹¶ä¸”é¡¹ç›®åç§°ä¸ºæ¨¡æ¿åç§°ã€‚

```
npm i -g @malagu/cli
malagu init

## å›½å†…ç”¨æˆ·å¯ä»¥ä½¿ç”¨é•œåƒæºåŠ é€Ÿ
npm i @malagu/cli -g --registry=https://registry.npm.taobao.org
malagu init
```
é€‰æ‹©æ¨¡æ¿ï¼š
```
âœ  js malagu init


                   ___
 /'\_/`\          /\_ \
/\      \     __  \//\ \      __       __   __  __
\ \ \__\ \  /'__`\  \ \ \   /'__`\   /'_ `\/\ \/\ \
 \ \ \_/\ \/\ \L\.\_ \_\ \_/\ \L\.\_/\ \L\ \ \ \_\ \
  \ \_\\ \_\ \__/.\_\/\____\ \__/.\_\ \____ \ \____/
   \/_/ \/_/\/__/\/_/\/____/\/__/\/_/\/___L\ \/___/
                                       /\____/
                   @malagu/cli@1.18.3  \_/__/

? Select a template to init (Use arrow keys or type to search)
â¯ backend-app Official
  sample-app Official
  vue-app Official
  database-app Official
  admin-app Official
  microservice Official
  file-service Official
  puppeteer Official
  monorepo Official
  mycli Official
```
  
é€‰æ‹©å®Œæ¨¡æ¿ç±»å‹åï¼Œä¼šåŸºäºè¯¥æ¨¡æ¿åˆ›å»ºå¥½åº”ç”¨ï¼Œå¹¶å®‰è£…å¥½ç›¸å…³ä¾èµ–ã€‚å®‰è£…çš„æ—¶å€™ï¼Œå‘½ä»¤è¡Œå·¥å…·æ ¹æ®å½“å‰ç¯å¢ƒï¼Œæ™ºèƒ½é€‰æ‹©åŒ…ç®¡ç†å™¨ã€‚å¦‚æœç¯å¢ƒä¸­åªå­˜åœ¨ npm å·¥å…·ï¼Œåˆ™é€‰æ‹© npmï¼Œå¦åˆ™ä¼˜å…ˆä½¿ç”¨ yarn å·¥å…·ã€‚è¿™é‡Œé€‰æ‹© `backend-app`Â æ¨¡æ¿ï¼Œåº”ç”¨åˆå§‹åŒ–å¥½åï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

```
âœ  js malagu init

                   ___
 /'\_/`\          /\_ \
/\      \     __  \//\ \      __       __   __  __
\ \ \__\ \  /'__`\  \ \ \   /'__`\   /'_ `\/\ \/\ \
 \ \ \_/\ \/\ \L\.\_ \_\ \_/\ \L\.\_/\ \L\ \ \ \_\ \
  \ \_\\ \_\ \__/.\_\/\____\ \__/.\_\ \____ \ \____/
   \/_/ \/_/\/__/\/_/\/____/\/__/\/_/\/___L\ \/___/
                                       /\____/
                   @malagu/cli@1.18.3  \_/__/

? Select a template to init backend-app Official
yarn install v1.22.4
info No lockfile found.
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Saved lockfile.
âœ¨  Done in 57.52s.
Success! Initialized "backend-app" example in /Users/kevin/js/backend-app.
```

åˆå§‹åŒ–åçš„é¡¹ç›®å…³é”®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š
```
.
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ module.ts            # æ¨¡å—å…¥å£æ–‡ä»¶
â”‚Â Â  â””â”€â”€ home-controller.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

æ‚¨ä¼šå‘ç° Malagu çš„åº”ç”¨æ²¡æœ‰åº”ç”¨å¯åŠ¨å…¥å£æ–‡ä»¶ï¼Œæœ¬è´¨ä¸Šæ˜¯æœ‰çš„ï¼Œåªä¸è¿‡æ¡†æ¶é»˜è®¤å®ç°äº†åº”ç”¨å¯åŠ¨å…¥å£æ–‡ä»¶ã€‚

ç»å¤§éƒ¨åˆ†æƒ…å†µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒã€‚å½“ç„¶ï¼Œå¼€å‘ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å…¥å£æ–‡ä»¶ã€‚åœ¨ Malagu çš„ä¸–ç•Œé‡Œé¢ï¼šä¸€åˆ‡çš†ç»„ä»¶ï¼Œåº”ç”¨ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªæ ¹ç»„ä»¶ã€‚ç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šçš„ nodejs åŒ…ã€‚è¿™ä¹Ÿè¯´æ˜äº†å¼€å‘è‡ªå®šä¹‰ç»„ä»¶æå…¶ç®€å•ä¸”ç»Ÿä¸€ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯æ¡†æ¶ä¼šçº¦å®šæ¨¡å—å…¥å£æ–‡ä»¶çš„åŠ è½½ä½ç½®ã€‚å½“ç„¶ï¼Œæ¨¡å—å…¥å£æ–‡ä»¶åŠ è½½ä½ç½®ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ã€‚Malagu çš„ä¸€ä¸ªæ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼šçº¦å®šå¤§äºé…ç½®ã€‚


### æœ¬åœ°è¿è¡Œåº”ç”¨

Malagu å‘½ä»¤è¡Œå·¥å…·æä¾›äº†ä¸€ä¸ªæ”¯æŒ HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰èƒ½åŠ›çš„æœ¬åœ°è¿è¡Œå‘½ä»¤ `malagu serve`Â ã€‚å¦å¤–ï¼Œé™¤äº† `malagu init`Â å‘½ä»¤å¤–ï¼Œå…¶ä»–å‘½ä»¤éƒ½æ˜¯åº”ç”¨ä¸Šä¸‹æ–‡æ„ŸçŸ¥å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒMalagu ä¼šæŠŠè¿™äº›å‘½ä»¤å§”æ‰˜ç»™åº”ç”¨ä¸­ä¾èµ–çš„ `@malagu/cli-service`Â å»æ‰§è¡Œã€‚è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯è®©å…¨å±€å‘½ä»¤çš„è¡Œä¸ºæ°¸è¿œä¸å½“å‰åº”ç”¨ä¾èµ–çš„æ¡†æ¶ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼ŒåŒæ—¶ï¼Œä¹Ÿè®© `@malagu/cli`Â ä½“ç§¯å˜å°ä¸”ç¨³å®šï¼Œå®‰è£…é€Ÿåº¦å¾ˆå¿«ï¼Œä¹Ÿæ— éœ€ç»å¸¸å‡çº§ã€‚
```
malagu serve
open http://localhost:3000
```
```
âœ  backend-app malagu serve

                   ___
 /'\_/`\          /\_ \
/\      \     __  \//\ \      __       __   __  __
\ \ \__\ \  /'__`\  \ \ \   /'__`\   /'_ `\/\ \/\ \
 \ \ \_/\ \/\ \L\.\_ \_\ \_/\ \L\.\_/\ \L\ \ \ \_\ \
  \ \_\\ \_\ \__/.\_\/\____\ \__/.\_\ \____ \ \____/
   \/_/ \/_/\/__/\/_/\/____/\/__/\/_/\/___L\ \/___/
                                       /\____/
                   @malagu/cli@1.18.3  \_/__/

malagu mode - local
malagu component - @malagu/core@^1.18.2
malagu component - @malagu/web@^1.18.2
malagu component - @malagu/mvc@latest
malagu component - @malagu/cloud@^1.18.2
malagu component - @malagu/faas-adapter@^1.18.2
malagu component - @malagu/fc-adapter@latest
malagu component - backend-app@0.0.0

malagu target - backend
malagu module - @malagu/web/lib/common/module
malagu module - @malagu/web/lib/node/module
malagu module - @malagu/mvc/lib/node/module
malagu module - @malagu/cloud/lib/node/module
malagu module - @malagu/faas-adapter/lib/node/module
malagu module - @malagu/fc-adapter/lib/node/module
malagu module - /Users/kevin/js/backend-app/src/module

 DONE  Compiled successfully in 1028ms                                                                         ä¸Šåˆ10:21:03

 I  The backend is running at http://localhost:3000

Build completed in 0.722s
```


æ”¯æŒ HMR åŠŸèƒ½ï¼Œä¿®æ”¹ä»£ç æ— éœ€é‡å¯ï¼Œå¿«é€Ÿè°ƒè¯•éªŒè¯ã€‚å¦å¤–ï¼ŒMalagu æ¨¡æ¿é»˜è®¤æä¾›äº†ä¸ vscode å•æ­¥è°ƒè¯•èƒ½åŠ›ï¼Œå¼€ç®±å³ç”¨ã€‚

### éƒ¨ç½²åº”ç”¨
Malagu æ¡†æ¶æä¾›äº† `malagu deploy` å‘½ä»¤ç”¨äºéƒ¨ç½²ã€‚ä¸ä¼ ç»Ÿæ¡†æ¶æœ€å¤§çš„åŒºåˆ«åœ¨äºæä¾›äº†ä½“éªŒæè‡´çš„ä¸€é”®éƒ¨ç½²ã€å¤šç¯å¢ƒæ”¯æŒã€å¼€ç®±å³ç”¨çš„ CICD èƒ½åŠ›ã€‚è¯¥èƒ½åŠ›çš„å®ç°å¾—ç›Šäº Serverless æŠ€æœ¯çš„å‘å±•ã€‚

```
malagu deploy
```
å¦‚æœæ‚¨æ˜¯é¦–æ¬¡éƒ¨ç½²ï¼Œå‘½ä»¤è¡Œå·¥å…·ä¼šè‡ªåŠ¨æç¤ºæ‚¨è¾“å…¥äº‘å¹³å°ç›¸å…³çš„è®¿é—®ç§˜é’¥ä¿¡æ¯ï¼ˆAccessKeyï¼‰ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ `malagu config` æ‰‹åŠ¨é…ç½®æˆ–ä¿®æ”¹è®¿é—®ç§˜é’¥ä¿¡æ¯ã€‚æ›´å¤šæœ‰å…³[å¹³å°è®¿é—®ç§˜é’¥é…ç½®](https://www.yuque.com/cellbang/malagu/ktefxi)ã€‚

![](https://cdn.nlark.com/yuque/0/2021/png/365432/1617332629421-b2b92021-6d0c-447c-8016-2bccd1ef5f08.png?x-oss-process=image%2Fresize%2Cw_1504%2Climit_0&date=1630921134240)

éƒ¨ç½²æˆåŠŸåçš„æ•ˆæœå›¾å¦‚ä¸‹ï¼š
![image](https://user-images.githubusercontent.com/44248273/132196130-3e80c259-f2a8-42f4-8799-9c1bfa792b6c.png)
