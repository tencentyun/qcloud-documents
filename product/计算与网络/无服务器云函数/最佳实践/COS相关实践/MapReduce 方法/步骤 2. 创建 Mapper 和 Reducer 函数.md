

## 创建 Mapper 函数

### 通过控制台模板函数创建

1. 登录云函数控制台，选择左侧导航栏中的 **[函数服务](https://console.cloud.tencent.com/scf/list)**。
2. 在“函数服务”页面上方选择**北京**地域，并单击**新建**进入新建函数页面。根据页面相关信息进行配置。如下图所示：
![](https://main.qcloudimg.com/raw/f8d50377821149b9eb3a1b7d343d40d8.jpg)
	- **创建方式**：选择**模板创建**。
	- **模糊搜索**：输入 “map_function”，并进行搜索，选择 “map_function” 模板。
		单击模板中的**查看详情**，即可在弹出的“模板详情”窗口中查看相关信息，支持下载操作。
3. 单击**下一步**，函数名称默认填充，可根据需要自行修改。按照引导配置运行角色：
	**运行角色**：勾选**启用**，本文以“配置并使用SCF模板运行角色”为例。如下图所示：
	![](https://main.qcloudimg.com/raw/c31c22eacc871b8b7cc0a4ccb157f63b.jpg)
	- **配置并使用SCF模版运行角色**：选择该项将会自动创建并选择关联了 COS 全读写权限的 SCF 模板运行角色。
	- **使用已有角色**：需在下拉列表中选择包含上述权限的已有角色。
>? 云函数在运行时，会使用运行角色换取临时密钥，操作相关云产品资源。
4. 单击展开**函数代码**卡片，可以浏览代码信息，如需修改变量等参数值，可以选择在线修改并保存。




### 配置 COS 触发器

1. 在**触发器配置**中，选择**自定义创建**，根据页面的参数信息进行填写。如下图所示：
![](https://main.qcloudimg.com/raw/457c381e4ba4107b229c68faa10a7745.jpg)
主要参数信息说明如下：
	- **触发方式**：选择**COS触发**。
	- **COS Bucket**：选择**srcmr**。
	- **事件类型**：选择**全部创建**。
2. 单击**完成**，完成函数和 COS 触发器创建。


## 创建 Reducer 函数

### 通过控制台模板函数创建

1. 登录云函数控制台，选择左侧导航栏中的 **[函数服务](https://console.cloud.tencent.com/scf/list)**。
2. 在“函数服务”页面上方选择**北京**地域，并单击**新建**进入新建函数页面。根据页面相关信息进行配置。如下图所示：
   ![](https://main.qcloudimg.com/raw/a9bf05e73d2dd36d017303c8b2612709.jpg)
   - **创建方式**：选择**模板创建**。
   - **模糊搜索**：输入 “reduce_function”，并进行搜索，选择 “reduce_function” 模板。
     单击模板中的**查看详情**，即可在弹出的“模板详情”窗口中查看相关信息，支持下载操作。
3. 单击**下一步**，函数名称默认填充，可根据需要自行修改。按照引导配置运行角色：
	**运行角色**：勾选**启用**，本文以“配置并使用SCF模板运行角色”为例。如下图所示：
	![](https://main.qcloudimg.com/raw/9209cc50b757bf346a968d0d4feb8908.jpg)
	- **配置并使用SCF模版运行角色**：选择该项将会自动创建并选择关联了 COS 全读写权限的 SCF 模板运行角色。
	- **使用已有角色**：需在下拉列表中选择包含上述权限的已有角色。
4. 单击展开**函数代码**卡片，可以浏览代码信息，如需修改变量等参数值，可以选择在线修改并保存。



### 配置 COS 触发器

1. 在**触发器配置**中，选择**自定义创建**，根据页面的参数信息进行填写。如下图所示：
![](https://main.qcloudimg.com/raw/6a11571299dcf72ca0a12744db7bbec0.jpg)
主要参数信息如下：
	- **触发方式**：选择**COS触发**。
	- **COS Bucket**：选择**middlestagebucket**。
	- **事件类型**：选择**全部创建**。
2. 单击**完成**，完成函数和 COS 触发器创建。


