## 创建 COS Bucket
1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos)。
2. 创建一个 Bucket，命名为 idcard-detect，并选择**北京**地域，权限选择 “私有读写”。

## 开通 AI 接口
前往 [文字识别控制台](https://console.cloud.tencent.com/ocr) 开通身份证识别功能，单击**开通服务**即可。

## 创建云函数
1. 登录云函数控制台，选择左侧导航栏中的 **[函数服务](https://console.cloud.tencent.com/scf/list)**。
2. 在“函数服务”页面上方选择**北京**地域，并单击**新建**进入新建函数页面。
设置以下参数信息，并单击**下一步**。如下图所示：
 - **创建方式**：选择**模板创建**。
 - **模糊搜索**：输入“身份证识别”，并进行搜索。
单击模板中的**查看详情**，即可在弹出的“模板详情”窗口中查看相关信息，支持下载操作。
![](https://main.qcloudimg.com/raw/1e0c3e3f07114a48e76ce1383554f7f2.png)
3. 函数名称默认填充，可根据需要自行修改。按照引导配置运行角色：
 - **运行角色**：勾选“启用”，选择“配置并使用SCF模版运行角色”，将会自动创建并选择关联了 COS 全读写权限的 SCF 模版运行角色，或选择“使用已有角色”，在下拉列表中选择包含上述权限的已有角色。本文以“配置并使用SCF模版运行角色”为例。如下图所示：
 ![](https://main.qcloudimg.com/raw/d31cc9d75afa313763abeb7665c1510e.png)
>? 云函数在运行时，会使用运行角色换取临时密钥，操作相关云产品资源。




## 配置触发器

在“触发器配置”中，选择“自定义创建”，根据页面的参数信息进行填写。如下图所示：
![](https://main.qcloudimg.com/raw/0716d8a8e1cb83e2a0ff86df01731b12.png)
主要参数信息如下：
- **触发方式**：选择 “COS触发”。
- **COS Bucket**：选择 “idcard-detect”。
- **事件类型**：选择“全部创建”。

单击**完成**，即可完成函数和 COS 触发器创建。

## 测试函数功能
1. 切换至 [对象存储控制台](https://console.cloud.tencent.com/cos/bucket)，选择创建好的 Bucket：idcard-detect，单击**上传文件**，选择自己拍好的身份证照片，照片要清晰可读且尽可能大的占满图片，然后上传。
2. 进入云函数控制台查看执行结果，在 **日志** 中可以看到打印出来的日志信息，包含身份证识别的结果。如下图所示：
![](https://main.qcloudimg.com/raw/2f1df813647d9b5061fc9c4e5dfb1400.jpg) 



