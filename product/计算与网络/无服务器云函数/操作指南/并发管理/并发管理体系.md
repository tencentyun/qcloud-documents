云函数平台提供函数粒度的并发管理能力，供您灵活控制不同函数的并发情况。

## 并发管理体系

目前云函数有两个层次的并发管理能力，分别是账号并发额度和函数的最大独占配额。

```
账号级并发额度
  |- 函数级最大独占配额
```

>?[预置并发](https://cloud.tencent.com/document/product/583/46743) 不在并发管理能力中，仅作为预先启动实例的能力。同一个函数下的版本共享该函数的并发。


## 账号级并发额度

每个账号在地域维度有总并发额度限制，默认为 128,000 MB 或 64,000MB，详情可参见 [配额限制](https://cloud.tencent.com/document/product/583/11637)。地域间的并发额度相互独立，彼此不受影响。

默认情况下，一个地域下的所有函数共享账号级并发额度，即在某一具体时刻，所有函数处于运行状态的实际并发额之和，最大可以达到账号并发额度。超出并发额度的请求将遇到超限错误（432 ResourceLimitReached），可以通过 [提交工单](https://console.cloud.tencent.com/workorder/category) 来进一步提升账号配额。

您可以使用函数的[最大独占配额能力](#reserved)，将地域维度并发分配至某个函数上，从而实现对函数的并发进行管理。为了避免账号级额度全部分配后，未设置最大独占配额的函数无法调用，云函数平台将 12,800MB 的账号级并发额度限制为不可分配、仅供未配置保留的函数使用。如下图所示：
![](https://main.qcloudimg.com/raw/f88bc46d1fec6cfe349102e627d05e89.png)

## [最大独占配额](id:reserved)

最大独占配额是函数维度的上的并发管理能力。当您为一个函数设置最大独占配额，将会有以下两个效果：

- **最大独占配额是此函数的并发额度上限**，所有版本的并发额度加和小于等于最大独占配额。
- 并发额度划给该函数后为**函数独享**，不再提供给其它函数。




最大独占配额是函数并发额度的上限，您可以通过该能力进行函数并发的管理，费用的管控，避免出现费用失控的情况。同时，您也可以通过将函数**最大独占配额设置为0来实现对函数关停**的操作。所有针对该函数的请求，都会出现并发超限的错误。

设置函数保留会占用地域级的并发额度。若地域级未占用额度（地域级额度 - 分配给其他函数的最大独占配额 - 12,800MB）不足，则无法设置。


### 设置最大独占配额

参考以下步骤可以针对函数设定期望的最大独占配额额度。

1. 登录 [云函数控制台](https://console.cloud.tencent.com/scf/index?rid=1)，选择左侧导航栏中的**函数服务**。
2. 在“函数服务”列表页面，选择需进行配置的函数名，进入“函数管理”页面。
3. 在“函数管理”页面中，选择左侧**并发配额**，进入“并发配额”页面。
4. 在“并发配额”页面中，选择“最大独占配额”，进入“最大独占配额”页面。
5. 在“最大独占配额”页面中，单击页面右侧的**设置**。
6. 在弹出的“设置函数最大独占配额”窗口中，选择设置期望的最大独占配额，单击**提交**即可。如下图所示：
   ![](https://main.qcloudimg.com/raw/f27c22f16008ffe092c420f35549b8d2.png)
   设置完成后，您可在“并发管理”页面的“最大独占配额”页中查看配置状态。


### 删除最大独占配额

当您不再计划使用最大独占配额时，可进行删除操作。删除最大独占配额后，函数将于其他函数共享账号维度的并发额度。

>? 删除最大独占配额与最大独占配额为0是不同的配置。
- **删除最大独占配额**：函数没有专享额度，使用地域下的共享额度，上限由共享额度的使用情况而定。
- **最大独占配额为0**：函数专享额度为0，函数并发上限为0，函数无法运行，停止对触发事件的响应。
>
1. 登录 [云函数控制台](https://console.cloud.tencent.com/scf/index?rid=1)，选择左侧导航栏中的**函数服务**。
2. 在“函数服务”列表页面，选择需进行配置的函数名，进入“函数管理”页面。
3. 在“函数管理”页面中，选择左侧**并发配额**，进入“并发配额”页面。
4. 在“并发配额”页面中，单击“最大独占配额”，进入“最大独占配额”页面。
5. 在“最大独占配额”页面中，单击页面右侧的**删除**。
6. 在弹出的“删除函数最大独占配额”窗口中单击**确认**即可。如下图所示：
   ![](https://main.qcloudimg.com/raw/f13b9784d93e4cee803eb72245ff4943.png)

