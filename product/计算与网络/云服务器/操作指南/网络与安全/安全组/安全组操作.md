## 操作场景

您可以在首次配置云服务器时配置安全组，也可以通过控制台的安全组页面对安全组进行创建、查看、更新和删除等操作，并同时管理安全组及安全组规则。本文介绍在控制台如何进行安全组操作的方法。

## 前提条件

已登录 [腾讯云云服务器控制台](https://console.cloud.tencent.com/cvm/index)。

## 操作步骤

### 创建安全组
>? 创建安全组时，您可以选择腾讯云提供的“**放通全部端口**”和“**放通22，80，443，3389端口和ICMP协议**”两种模版进行创建，也可以选择自定义模板进行创建。
>
#### 通过腾讯云模板创建

1. 在左侧导航栏中，选择【[安全组](https://console.cloud.tencent.com/cvm/securitygroup)】，单击【新建】。如下图所示：
![](https://main.qcloudimg.com/raw/cd844f9935a388bd8ab2f596396dd176.png)
2. 在弹出的“新建安全组”窗口中，根据实际需求，选择“**放通全部端口**”或者“**放通22，80，443，3389端口和ICMP协议**”模板，填写安全组名称，设置所属项目。如下图所示：
![](https://main.qcloudimg.com/raw/88a3bbc54435920219eb72cc8e0a3da6.png)
3. 单击【确定】，即可完成创建。

#### 通过自定义模板创建

1. 在左侧导航栏中，选择【[安全组](https://console.cloud.tencent.com/cvm/securitygroup)】，单击【新建】。如下图所示：
![](https://main.qcloudimg.com/raw/cd844f9935a388bd8ab2f596396dd176.png)
2. 在弹出的“新建安全组”窗口中，选择“自定义”模板，填写安全组名字，设置所属项目，单击【确定】。如下图所示：
![](https://main.qcloudimg.com/raw/4411a21c9ca5df7a17983df1730af78c.png)
3. 在弹出的提醒窗口中，单击【立即设置规则】。如下图所示：
![](https://main.qcloudimg.com/raw/5f98fb929fdbf6fac7928515519b5c82.png)
4. 在新建安全组的“安全组规则”页面，根据实际需求，单击“入站规则”和“出站规则”的【添加规则】。如下图所示：
![](https://main.qcloudimg.com/raw/6e72149d6771ade3fbbc38fb11ed50a6.png)
5. 在弹出的“添加入站/出站规则”窗口中，设置规则，单击【完成】。
添加规则的主要参数如下：
 - **类型**：您可以选择系统规则模板，或者自定义规则。
 - **来源/目标**：流量的源（入站规则） 或目标（出站规则），请指定以下选项之一：
       - 指定的单个 IP 地址或IP地址范围：用 CIDR 表示法（比如 203.0.113.0 或者 203.0.113.0/24）
       - 引用安全组 ID ，您可以引用以下安全组的ID之一：
           - 当前安全组。（表示与安全组关联的云服务器）
           - 其他安全组。同一区域中同一项目下的另一个安全组 ID 。
       - 引用 [参数模板](https://cloud.tencent.com/document/product/215/20090) 中的 IP 地址对象或 IP 地址组对象。
 - 协议端口：填写协议类型和端口范围，您也可以引用 [参数模板](https://cloud.tencent.com/document/product/215/20090) 中的协议端口或协议端口组。
 - 策略：允许或拒绝。

 >! 
 > - 引用安全组 ID 法作为高阶功能，您可选择使用。所引用安全组的规则不会被添加到当前安全组。
 > - 在配置安全组规则时，如果在来源/目标中输入安全组 ID ，表示仅将此安全组 ID 所绑定的云服务器实例、弹性网卡的内网 IP 地址作为来源/目标，不包括外网 IP 地址。
>

### 修改安全组规则
>? 根据实际需求，您可以对已经设置的安全组规则进行修改。
>
1. 进入【[安全组](https://console.cloud.tencent.com/cvm/securitygroup)】管理页面，选择您需要修改规则的安全组ID/名称，单击右侧的【修改规则】。如下图所示：
![](https://main.qcloudimg.com/raw/5a6854b2c27f5d8fb742d88f1846b523.png)
2. 在待修改的“安全组规则”页面，根据实际需求，对已有规则进行**编辑**、**删除**或者通过**插入**调整规则的优先级。安全组内规则的优先级位置越上，优先级越高。如下图所示：
![](https://main.qcloudimg.com/raw/4a33b33159703a2c64203fbd8557f1c4.png)

### 关联实例到安全组

1. 进入【[安全组](https://console.cloud.tencent.com/cvm/securitygroup)】管理页面，选择需要关联的安全组，单击【管理实例】，进入关联实例页面。如下图所示：
![](https://main.qcloudimg.com/raw/5eade52943841c42563b94c176763d6c.png)
2. 在“关联实例”页面，单击【新增关联】。如下图所示：
![](https://main.qcloudimg.com/raw/b72c10681ae4d3892d8b641b84290229.png)
3. 在弹出的“新增实例关联”窗口，选择您所需要关联到此安全组的一个或者多个实例，单击【确定】，增加与此安全组相关的实例。如下图所示：
![](https://main.qcloudimg.com/raw/d45b471f7fd48c3357d83837cf28021f.png)

### 克隆或删除安全组

进入【[安全组](https://console.cloud.tencent.com/cvm/securitygroup)】管理页面，选择需要克隆或者删除的安全组，单击【更多】，选择【克隆】或【删除】。如下图所示：
![](https://main.qcloudimg.com/raw/36c33bd1f7ced0e008e431b0e31b5073.png)
- 如果选择**克隆**安全组，默认只克隆此安全组的入站/出站规则，不克隆与此安全组相关联的实例。
- 如果选择**删除**安全组，请判断待删除的安全组是否存在关联的实例。若存在关联的实例，则需要先将关联实例**移除安全组**（单击【管理实例】）。否则删除安全组操作不可执行。
![](https://main.qcloudimg.com/raw/5eade52943841c42563b94c176763d6c.png)

### 导入/导出安全组规则

1. 进入【[安全组](https://console.cloud.tencent.com/cvm/securitygroup)】管理页面，选择需要导入/导出安全组规则的安全组 ID/名称，单击【修改规则】，进入该安全组管理页面。如下图所示：
![](https://main.qcloudimg.com/raw/5a6854b2c27f5d8fb742d88f1846b523.png)
2. 选择【安全组规则】>【入站规则】或者【出站规则】页签，单击【导入规则】。
>! 
> - 如果您原来已有规则，则建议您先导出现有规则，否则导入新规则时，将覆盖原有规则。
> - 如果原来为空规则，则可先导出模板，编辑好模板文件后，再将文件导入。
>
![](https://main.qcloudimg.com/raw/c06c51f01b667c00dfe63ea7653a7287.png)
3. 在弹出的“**批量导入-入站/出站规则**”窗口中，选择模板文件，单击【开始导入】。

### 使用安全组 API

除了在云服务器控制台，您还可以通过安全组 API 对安全组进行操作，详情请参考 [安全组 API](https://cloud.tencent.com/document/product/213/12447)。
