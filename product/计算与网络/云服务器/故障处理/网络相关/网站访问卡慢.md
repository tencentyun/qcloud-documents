一次完整的 HTTP 请求包括域名解析、建立 TCP 连接、发起请求、服务器接收到请求进行处理并返回处理结果、浏览器对 HTML 代码进行解析并请求其他资源、最后对页面进行渲染呈现。这其中经历了用户本地客户端、客户端到接入服务器之间的网络节点以及服务器，这三个环节中的任意一个出现问题，都有可能导致网站访问卡慢。
## 一. 本地客户端问题确认
本地客户端访问播测网站（ping.huatuo.qq.com），测试本地访问各域名的速度，确认本地网络是否存在问题。测试结果如下图，从结果中可以获知访问各个域名的延迟，以及网络是否正常。如果不正常请联系您的网络服务提供商进行协助定位解决。
![](https://mc.qcloudimg.com/static/img/147fa13722d12163f4fc0ca6ad40df81/image.png)
## 二. 网络链路问题确认
若第一步确认没有异常，请进一步确认本地客户端到服务器之前网络是否有问题。
1. 本地客户端 ping 服务器公网 IP，确认是否存在丢包或延时高的情况。
2. 若存在丢包或时延高的情况，进一步使用 MTR 进行诊断。具体参考 [服务器网络延迟和丢包处理](https://cloud.tencent.com/document/product/213/14638)。
3. 若 ping 服务器 IP 无异常，可以使用 dig/nslookup 查看 DNS 的解析情况，排查是否 DNS 解析引起的问题。也可以通过直接使用 IP 访问对应页面，排查是否 DNS 的问题导致访问慢。

## 三. 服务器问题确认
如果客户端和网络链路都没有问题，进一步对 Web 服务器进行分析。是否系统资源不足、中病毒木马或者被 DDoS 攻击了。
1. 登录 [云服务器控制台](https://console.cloud.tencent.com/cvm/index) ，在云服务器详情页，单击 tab【监控】，可以查看实例资源使用情况。
![](https://mc.qcloudimg.com/static/img/fd32ca7361dc89f56ee8d51ff72dca4d/image.png)
2. 若 CPU/内存/带宽/磁盘使用率过高，可能是服务器自身负载较高或者中毒等问题导致，请参考对应的文档进行排查：
 - [CPU 使用率过高排查（Linux 系统）](https://cloud.tencent.com/document/product/213/14634)
 - [CPU 使用率过高排查（Windows 系统）](https://cloud.tencent.com/document/product/213/14635)
 - [带宽利用率过高问题处理](https://cloud.tencent.com/document/product/213/14637)

## 四. 业务问题确认
1. 若通过第三步定位到是服务器负载引起的资源消耗增大，则属于正常情况。可以通过优化业务程序，或升级现有的服务器配置或购买新的服务器分担现有服务器的压力解决。
2. 若上述三步都正常，则建议查看日志文件，定位具体是哪一步导致服务器响应慢，进行针对性的优化。
