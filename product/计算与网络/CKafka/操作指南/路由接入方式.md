## 操作场景
该任务指导您在使用消息队列 CKafka 时，通过控制台配置路由接入规则，增强对公网/内网传输中的用户网络访问控制。关于公网的访问请参考 [用户访问控制（ACL 与用户管理）](https://cloud.tencent.com/document/product/597/31528)。

## 前提条件
该功能目前处于灰度测试阶段，如需试用请通过 [提交工单](https://console.cloud.tencent.com/workorder/category?level1_id=6&level2_id=335&source=0&data_title=%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97CMQ/CKAFKA/IoT%20MQ&step=1) 的方式开通白名单。
>?一个实例最多创建5条路由。选择 SASL_PLAINTEXT 接入方式的路由有且仅可以有一条，例如路由类型为公网域名接入选择了 SASL_PLAINTEXT 接入方式，则创建其他的路由时不可以再选择 SASL_PLAINTEXT 接入方式。

## 操作步骤
1. 在实例基本信息页面，单击接入方式模块中的【添加路由策略】。
2. 在弹窗中，选择路由类型和接入方式。
路由类型：VPC 网络、公网域名接入，具体说明如下：
 -  **VPC 网络**
操作场景：您购买实例时选择私有网络并选择了相应的 VPC 环境（例如 VPC A），表示仅能所选择的 VPC A 访问您的消息队列 CKafka 服务（生产数据、消费数据等）；若后续使用过程中发现其他 VPC 环境（例如 VPC B）有需求访问 VPC A 内的消息队列 CKafka 服务，则可以通过配置接入方式，选择 VPC 网络的路由策略。
操作建议：为了保证安全性，该接入方式提供用户管理和 ACL 策略配置，以管理用户访问权限，请酌情配置。
![](https://main.qcloudimg.com/raw/b3db412a49930a0a38a3f8a6c1ab1867.png)
>?控制台上提供的 VPC 网络访问地址（例如`172.16.0.12:9092` ），用于获取后端服务的通讯地址，真实访问地址中端口可能存在多个，请在您的服务器上放通9092后的所有端口，以便服务可以正常访问。
 -  **公网域名接入**
操作场景：当您的消费者或者生产者处于自建机房或其他云服务时，可以通过提公网访问方式对消息队列 CKafka 内的数据进行生成和消费。
操作建议：为了保证安全性，Kafka 提供了多种安全认证机制，主要分为 SSL 和 SASL2 大类。其中 SASL/PLAIN 是基于账号密码的认证方式，比较常用。消息队列 CKafka 支持 SASL_PLAINTEXT 认证，请您在选择公网域名接入时酌情配置接入鉴权方式。
![](https://main.qcloudimg.com/raw/e61a8b9acfe3d1e5fa71c8cabdbe9965.png)
3. 单击【提交】，完成路由策略添加。
