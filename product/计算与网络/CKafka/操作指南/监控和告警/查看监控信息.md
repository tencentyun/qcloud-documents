## 操作场景

消息队列CKafka支持监控您账户下创建的资源，包括实例、Topic、Consumer Group等，帮助您实时掌握资源状态，针对可能存在的问题及时处理，保障其稳定运行。

本文为您介绍通过 CKafka 控制台查看监控指标的操作方法和监控指标的含义。

## 操作步骤

1. 登录 [CKafka 控制台](https://console.cloud.tencent.com/ckafka)。
2. 在实例列表中，单击需要查看的“实例 ID/名称”，进入实例详情页。
3. 在实例详情页顶部，单击**监控**，选择要查看的实例资源标签，设置好时间范围，可以查看实例监控数据。
<table>
    <tr>
        <th>图标</th>
        <th>说明</th>
    </tr>
    <tr>
        <td><img src ="https://main.qcloudimg.com/raw/9ba57bbd3b8ef3efc4f687d63d27a46d.png" style ="margin:0"></td>
        <td>单击可查看监控指标同环比。</td>
    </tr>
    <tr>
        <td><img src ="https://main.qcloudimg.com/raw/34bdbdbdabb7b5720bf17d78c636a4ad.png" style ="margin:0"></td>
        <td>单击可刷新获取最新的监控数据。</td>
    </tr>
    <tr>
        <td><img src ="https://main.qcloudimg.com/raw/8f2bf7f4df9ddd959f0ecb69fdda8e4c.png" style ="margin:0"></td>
        <td>单击可将图表复制到 Dashboard，关于 Dashboard 请参见 <a href="https://cloud.tencent.com/document/product/248/47161">什么是 Dashboard</a>。</td>
    </tr>
    <tr>
        <td><img src ="https://main.qcloudimg.com/raw/af20129df7be46f33ab7d3598f6e9213.png" style ="margin:0"></td>
        <td>勾选后可在图表上显示图例信息。</td>
    </tr>
</table> 

### 监控信息展示

> ?您可以单击以下页签，查看实例、Topic、Consumer Group 监控信息的具体展示。

<dx-tabs>
::: 实例
![](https://qcloudimg.tencent-cloud.cn/raw/9ae7626831bfdcf86413092864aae58a.png)
:::
::: Topic
选择分区后，可以查看指定 Partition 的监控数据。

![](https://main.qcloudimg.com/raw/c98feb71acf140cc73fe39dcdc8d2340.png)

不选择时默认全部，展示现有的 Topic 级别的监控数据。

![](https://qcloudimg.tencent-cloud.cn/raw/cd0b88a7a8e8aa4ecf23adbfd502c591.png)
:::
::: Consumer\sGroup
**Consumer Group-Topic 监控**
![](https://main.qcloudimg.com/raw/0b008c55fbcb549b7aacd77a47b0101f.png)
**Consumer Group-Partition 监控**
![](https://qcloudimg.tencent-cloud.cn/raw/897c79a8d131281907708eca721f99a7.png)
:::
</dx-tabs>



### 监控指标含义及说明

以下是 CKafka 监控指标相关说明。其中备注**推荐**字样的指标是根据历史用户反馈统计建议对其配置监控和告警策略，请您根据实际情况合理配置监控和告警策略。
<dx-tabs>
::: 实例

| 监控指标                          | 说明                                                         |
| --------------------------------- | ------------------------------------------------------------ |
| 实例磁盘占用量 (MB)               | 实例磁盘占用量（包含副本），按照所选择的时间粒度取最新值。   |
| 磁盘使用百分比 (%)**（推荐）**    | 当前磁盘占用与实例规格磁盘总容量的百分比。                   |
| 实例连接数 (Count)**（推荐）**    | 客户端和服务器的连接数。                                     |
| 实例最大生产流量 (MB)**（推荐）** | 实例生产消息峰值带宽（不包含副本生产的带宽）。               |
| 实例最大消费流量 (MB)**（推荐）** | 实例消费消息峰值带宽（消费时无副本的概念）。                 |
| 实例消费带宽百分比(%)             | 实例消费带宽占配额百分比                                     |
| 实例消费限流次数 (Count)          | 实例消费限流次数。                                           |
| 实例生产带宽百分比(%)             | 实例生产带宽占配额百分比。                                   |
| 实例生产限流次数 (Count)          | 实例生产限流次数。                                           |
| 实例生产消息峰值带宽 (MB)         | 实例生产消息峰值带宽（包含副本生产的带宽）。                 |
| 实例落盘的消息总条数 (Count)      | 实例落盘的消息总条数（不包含副本），按照所选择的时间粒度取最新值。 |
| 实例消费流量 (MB)                 | 实例消费流量（不包含副本产生的流量），按照所选择的时间粒度统计求和。 |
| 实例生产消息条数 (Count)          | 实例生产消息条数，按照所选择的时间粒度统计求和。             |
| 实例生产流量 (MB)                 | 实例生产流量（不包含副本产生的流量），按照所选择的时间粒度统计求和。 |
| 实例消费消息条数 (Count)          | 实例消费消息条数，按照所选择的时间粒度统计求和。             |

:::
::: Topic

**Topic 监控**


| 监控指标                             | 说明                                                         |
| ------------------------------------ | ------------------------------------------------------------ |
| 最大生产流量（MB/s）                 | Topic 最大生产流量(不含副本流量)。                           |
| 最大消费流量（MB/s）                 | Topic 最大消费流量。                                         |
| 消费消息条数（条）                   | Topic 的实际消费消息条数，按照所选择的时间粒度统计求和。     |
| 消费流量（MB）                       | Topic 的实际消费流量（不包含副本产生的流量），按照所选择的时间粒度统计求和。 |
| 占用磁盘的消息总量（MB）**（推荐）** | Topic 实际占用磁盘的消息总量（不包含副本），按照所选择的时间粒度取最新值。 |
| 生产消息条数（条）                   | Topic 的实际生产消息条数，按照所选择的时间粒度统计求和。     |
| 生产流量（MB）                       | Topic 的实际生产流量（不包含副本产生的流量），按照所选择的时间粒度统计求和。 |
| 落盘的消息总条数（条）               | Topic 的实际的落盘的消息总条数（不包含副本），按照所选择的时间粒度取最新值。 |
| topic 消费限流次数(Count/s)          | Topic 消费限流次数，按照所选择的时间粒度统计求和。           |
| topic 生产限流次数(Count/s)          | Topic 生产限流次数，按照所选择的时间粒度统计求和。           |


**Topic-Partition 监控**


| 监控指标                  | 说明                                                         |
| ------------------------- | ------------------------------------------------------------ |
| 消费消息条数（Count）     | Partition 的实际消费消息条数，按照所选择的时间粒度统计求和。 |
| 消费流量（MB）            | Partition 的实际消费流量（不包含副本产生的流量），按照所选择的时间粒度统计求和。 |
| 落盘的消息总条数（Count） | Partition 的实际的落盘的消息总条数（不包含副本），按照所选择的时间粒度取最新值。 |
| 占用磁盘的消息总量（MB）  | Partition 实际占用磁盘的消息总量（不包含副本），按照所选择的时间粒度取最新值。 |
| 生产消息条数（Count）     | Partition 的实际生产消息条数，按照所选择的时间粒度统计求和。 |
| 生产流量（MB）            | Partition 的实际生产流量（不包含副本产生的流量），按照所选择的时间粒度统计求和。 |

:::                 
::: Consumer\sGroup        


**Consumer Group-Topic 监控** 



| 监控指标                              | 说明                                        |
| ------------------------------------- | ------------------------------------------- |
| 主题最大 offset                       | 当前主题中所有分区的最大 offset。           |
| 主题消费 offset（区分 offset 最大值） | 当前主题所有分区中消费组消费的最大 offset。 |
| 主题未消费消息数（条）                | 当前主题所有分区消费组未消费消息总和。      |
| 主题消费速度（条/分钟）               | 当前主题所有分区消费组消费速率总和。        |



**Consumer Group-Partition 监控**



| 监控指标                           | 说明                                    |
| ---------------------------------- | --------------------------------------- |
| 分区消费速度（条/分钟）            | 消费分组在该分区的消费速率（条/分钟）。 |
| 当前消费 offset                    | 消费分组该分区当前消费 offset。         |
| 当前分区最大 offset                | 当前 分区 最大 offset。                 |
| 未消费的消息条数（条）**（推荐）** | 消费分组在该分区下未消费消息数。        |

:::                             
</dx-tabs>               

指标中英文对照详情参见文档 [CKafka 监控指标](https://cloud.tencent.com/document/product/248/12154)。

### CKafka 监控 API 文档

CKafka 监控 API 详情可参见如下文档：

- [主题监控](https://cloud.tencent.com/document/product/248/45120)
- [实例监控](https://cloud.tencent.com/document/product/248/45121) 
- [消费分组监控](https://cloud.tencent.com/document/product/248/45122)
