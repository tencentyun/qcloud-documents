腾讯云消息队列服务的队列服务和主题模式目前均为免费使用，若您是公网访问 CMQ 服务，公网入流量费用免费，公网出流量将会产生流量费用，具体流量费用请参照 [按流量计费](https://cloud.tencent.com/document/product/213/10579#.E6.8C.89.E6.B5.81.E9.87.8F.E8.AE.A1.E8.B4.B9) 。若您是内网访问 CMQ 服务，出流量和入流量均免费。推荐您使用内网访问 CMQ 服务.
 
## 价格总览（Queue）

腾讯云消息队列的收费由以下三部分组成：请求次数费用、消息堆积费用和出流量费用。所有费用按地域分别收取，每小时进行一次结算。

>**注意：**
>当前 CMQ 的请求次数费用、消息堆积费用，还未正式扣费。正式扣费前将邮件、电话、短信通知您，请各位开发者放心使用。


### 请求次数费用

单地域下，用户开通 CMQ 服务后，腾讯云将对 **每小时** 内消息队列的 API/SDK 请求次数进行统计。每百万次请求收费为： **2.00 元/百万次** ，每小时结算一次。请求次数以百万为单位，精确到小数点后两位。

以下为计费示例：

- 2016 年 5 月 20 号下午 16：00-17：00，用户总请求次数为 1,323,454 次。则计算的请求次数 1.32（百万次），本时间段请求次数费用为 1.32 \* 2.00 = 2.64 元。
- 2016 年 5 月 20 号下午 18：00-19：00，用户总请求次数为 181,000 次。则计算的请求次数 0.18（百万次），本时间段请求次数费用为 0.18 \* 2.00 = 0.36 元。

### 消息堆积费用（包括消息回溯费用）

每小时 CMQ 将对单地域下的所有消息收取堆积费用，计算公式如下：

```
堆积消息费用 ＝ 消息总数 * 堆积消息单价
```

其中堆积消息单价为： **0.010 元/百万条/小时** 。消息总数的统计以百万为单位，单小时内消息总数是每分钟消息堆积总数的平均数（即每小时抽取 60 个点取平均值）。计算精确到小数点后两位。消息回溯费用会合并在消息堆积费用里，一起计算

以下为计费示例： 
- 2016 年 5 月 20 号下午 16：00-17：00，A 队列的堆积消息总数量为 1323450 条，则该小时 A 队列的消息堆积费用为 0.01\*1.32 = 0.01 元

### 出流量费用

腾讯云网络流量计费原则：入流量免费，出流量计费。（内测期，公网流量费正常收取，建议您使用内网api地址进行内测）

| 流量类型 | 定义 | 用量 |单价 |
|---------|---------|---------|---------|
| 入流量 | 数据传入至 CMQ |所有 |免费 |
| 内网出流量（同地域） | 同一个地域内的业务系统，使用消息队列的内网域名从 CMQ 主动获取数据或 CMQ 主动推送数据至此业务系统，产生的流量（经由腾讯云内网） |所有 |免费 |
| 外网出流量 | 同一个地域内的业务系统，使用消息队列的 Internet 域名从 CMQ 主动获取数据或 CMQ 主动推送数据至此业务系统，产生的流量（经由 Internet） |所有 |中国大陆（内地）：0.80 元/GB；中国香港：1.00 元/GB；北美：0.50 元/GB |
 
## 价格总览（Topic）
 
消息队列-费用组成：API 请求费用 + 消息堆积费用 + 出流量费用

计费方式：按量计费（按小时计费）

分地域：所有费用按地域，分别收取


**注意：当前 CMQ 的请求次数费用、消息堆积费用，还未正式扣费。正式扣费前将邮件、电话、短信通知您，请各位开发者放心使用**



### API 请求费用
当前允许发布的消息最大限制为 64 KB。每 64 KB 区块的已发布数据以 1 次请求计费（不足 64KB 以 64KB 计费）。配置某个 TOPIC 的订阅者，API 也以 1 次请求计费。例如，有 30 个订阅者，1 次负载为 64KB 的 API 调用将以 30 次请求计费。 消息发布单价： 2 元/百万条

计费规则进行四舍五入，计算到小数点后两位，如消息发布为 1439321 条（143 万条），则收 2.86 元

以下为计费场景： 
- 当设定某 Queue 作为 topic 的订阅方时候，Topic 投递消息后，会收取 2 部分的费用，即 Queue 接收消息的 API 请求费用，以及 Queue 的消息投递费用

### 消息堆积费用
存在消息堆积在 Topic 的情况（为发布、或多次重试后失败的堆积），堆积消息费用计算公式如下： 
```
堆积消息费用 ＝ 消息总数 * 堆积消息单价
```
扣费以该小时内的平均消息堆积数计算，1 小时内采样 60 个点，计算平均值

计费规则进行四舍五入，计算到小数点后两位，如消息堆积数为 1439321 条（143 万条），则收 0.01 元

堆积消息单价： 0.010 元/百万条 每小时

以下为计费示例： 
- 在 2016 年 5 月 20 号，在下午 16：00-17：00，ATopic 的堆积消息总数量为 1323450 条，则该小时，A 队列的消息堆积费用为 0.01 元

### 出流量费用

腾讯云流量计费原则：Topic 入流量不收钱，Topic 发布订阅的出流量计费（内测期，公网流量费正常收取，建议您使用内网 API 地址进行内测）


收费标准：中国大陆（内地） 0.80 元/GB；中国香港 1.00 元/GB；北美 0.50 元/GB

收费纬度：针对某个 Topic，单独收费，有多个订阅者时，出流量会叠加

| 流量类型	| 定义	| 用量 |	单价 |
|---------|---------|---------|---------|
| 入流量	| 数据传入至 CMQ	| 所有	| 免费 |
| 内网出流量（同地域）|	同一个地域内，在腾讯云内网，CMQ-Topic 投递数据，产生的流量（走的是腾讯内网） |	所有	| 免费 |
| 外网出流量 |	CMQ 订阅投递消息，产生的流量（走的是公网）|	所有	| 中国大陆（内地）：0.80 元/GB；中国香港：1.00 元/GB；北美：0.50 元/GB |






