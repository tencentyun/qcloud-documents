>!**腾讯云消息队列 CMQ 服务将于2019年5月2日23:59:59正式商业化，实行按量后付费的策略**。请您及时进行账户充值以避免服务中断。具体收费标准请参考 [计费概述](https://cloud.tencent.com/document/product/406/13647) 和 [欠费说明](https://cloud.tencent.com/document/product/406/13647)。
>为了提供更高效可靠的消息队列服务， 如您的消息队列 CMQ 中存在闲置不使用的 Queue 和 Topic 请及时删除，避免产生不必要的资源占用费。
感谢您对腾讯云的信赖与支持，我们将会一如既往的提供高效稳定的服务。

腾讯云消息队列服务的队列服务和主题模式目前均为免费使用，将于2019年5月2日23:59:59开始正式收费。
- 如果您是公网访问 CMQ 服务，公网入流量费用免费，公网出流量将会产生流量费用，具体流量费用请参照 [公网计费模式（按流量计费）](https://cloud.tencent.com/document/product/213/10578#.E8.AE.A1.E8.B4.B9.E7.B1.BB.E5.9E.8B) 。
- 如果您是内网访问 CMQ 服务，出流量和入流量均免费（推荐您使用内网访问）。
 
## Queue 价格
**费用组成**：请求次数费用、消息堆积费用 + 出流量费用 + 资源占用费。
**计费方式**：所有费用按地域分别收取，每小时进行一次结算。

>!当前 CMQ 的资源占用暂未正式计费。建议您删除空置的 Queue，避免资源浪费以及产生不必要的费用，正式扣费前将邮件、短信通知您，请各位开发者放心使用。


### 请求次数
单地域下，用户开通 CMQ 服务后，腾讯云将对**每小时**内消息队列的 API/SDK 请求次数进行统计。请求次数以百万为单位，精确到小数点后两位。每百万次请求收费为**2.00元/百万次**，每小时结算一次。

#### 示例1
2016年5月20日16:00 - 17:00，用户总请求次数为1,323,454次。则计算的请求次数为1.32（百万次），本时间段请求次数费用为1.32 × 2.00 = 2.64元。
#### 示例2
2016年5月20日18:00 - 19:00，用户总请求次数为181,000次。则计算的请求次数为0.18（百万次），本时间段请求次数费用为0.18 × 2.00 = 0.36元。

### 消息堆积（包括消息回溯）
每小时 CMQ 将对单地域下的所有消息收取堆积费用，计算公式如下：
```
堆积消息费用 ＝ 消息总数 × 堆积消息单价
```
其中堆积消息单价为**0.010元/百万条/小时** 。消息总数的统计以百万为单位，单小时内消息总数是每分钟消息堆积总数的平均数（即每小时抽取60个点取平均值）。计算精确到小数点后两位。消息回溯费用会合并在消息堆积费用里，一起计算。

#### 示例
2016年5月20日16:00 - 17:00，A 队列的堆积消息总数量为1,323,450条，则本段时间内 A 队列的消息堆积费用为 0.01 × 1.32 = 0.01元。

### 出流量
腾讯云网络流量计费原则：入流量免费，出流量计费（内测期间，公网流量费正常收取，建议您使用内网 API 地址进行内测）。

| 流量类型 | 定义 | 用量 |单价 |
|---------|---------|---------|---------|
| 入流量 | 数据传入至 CMQ |所有 |免费 |
| 内网出流量（同地域） | 同一个地域内的业务系统，使用消息队列的内网域名从 CMQ 主动获取数据或 CMQ 主动推送数据至此业务系统，产生的流量（经由腾讯云内网） |所有 |免费 |
| 外网出流量 | 同一个地域内的业务系统，使用消息队列的 Internet 域名从 CMQ 主动获取数据或 CMQ 主动推送数据至此业务系统，产生的流量（经由 Internet） |所有 |中国大陆（内地）：0.80 元/GB；中国香港：1.00 元/GB；其他地区：0.50 元/GB |

### 资源占用
|按阶梯计费 |调用次数/Queue/日 |Queue/日（公有云）|
|----------|------------------|----------------|
|第一阶梯| 0 ≤ 调用次数 ≤ 100万次 |2.0元|
|第二阶梯 |100万次 < 调用次数 ≤ 500万次 |1.5元|
|第三阶梯 |500万次以上| 免费|

## Topic 价格
**费用组成**：API 请求费用 + 消息堆积费用 + 出流量费用
**计费方式**：按量计费（按小时计费）、分地域（所有费用按地域，分别收取）
>!当前 CMQ 的资源占用费还未正式计费。建议您删除空置的 Topic，避免资源浪费以及产生不必要的费用，正式扣费前将邮件、短信通知您，请各位开发者放心使用。


### API 请求
- 当前允许发布的消息最大限制为64KB，每64KB 区块的已发布数据以1次请求计费（不足64KB 以 64KB 计费）。配置某个 Topic 的订阅者，API 也以1次请求计费。例如，有30个订阅者，1次负载为64KB 的 API 调用将以 30 次请求计费。 
- **消息发布单价**： 2元/百万条
计费规则进行四舍五入，计算到小数点后两位，如消息发布为1,439,321 条（143万条），则收 2.86 元
- **计费场景**
当设定某 Queue 作为 Topic 的订阅方时，Topic 投递消息后，会收取两部分的费用：Queue 接收消息的 API 请求费用，以及 Queue 的消息投递费用。

### 消息堆积
如存在消息堆积在 Topic 的情况（为发布、或多次重试后失败的堆积），堆积消息费用计算公式如下： 
```
堆积消息费用 ＝ 消息总数 × 堆积消息单价
```
**堆积消息单价**： 0.010元/百万条/每小时
扣费以该小时内的平均消息堆积数计算，1小时内采样60个点，计算平均值。
计费规则进行四舍五入，计算到小数点后两位，如消息堆积数为1,439,321条（143万条），则收0.01元。


#### 计费示例
在2016年5月20日16：00 - 17：00，ATopic 的堆积消息总数量为1,323,450条，则该小时，A 队列的消息堆积费用为0.01元。

### 出流量
腾讯云流量计费原则：Topic 入流量免费，Topic 发布订阅的出流量收费（内测期，公网流量费正常收取，建议您使用内网 API 地址进行内测）。
**收费标准**：中国大陆（内地）：0.80元/GB；中国香港：1.00 元/GB；其他地区：0.50 元/GB。
**收费维度**：针对某个 Topic，单独收费；有多个 Topic 时，出流量会叠加。

| 流量类型	| 定义	| 用量 |	单价 |
|---------|---------|---------|---------|
| 入流量	| 数据传入至 CMQ	| 所有	| 免费 |
| 内网出流量（同地域）|	同一个地域内，在腾讯云内网，CMQ-Topic 投递数据，产生的流量（使用腾讯内网） |	所有	| 免费 |
| 外网出流量 |	CMQ 订阅投递消息，产生的流量（使用公网）|	所有	| 中国大陆（内地）：0.80元/GB；中国香港：1.00 元/GB；其他地区：0.50 元/GB |

### 资源占用
|按阶梯计费 |调用次数/Topic/日 |Topic/日（公有云）|
|----------|------------------|----------------|
|第一阶梯| 0 ≤ 调用次数 ≤ 100万次 |2.0元|
|第二阶梯 |100万次 < 调用次数 ≤ 500万次 |1.5元|
|第三阶梯 |500万次以上| 免费|






