与微信支付紧密合作的第三方移动金融支付解决方案提供商，如深圳威富通等，促进了全国各行各业的线下商铺，通过微信支付，提高效率，免除现金结算的低效率。支付系统主要架构如下：- 1、	威富通的支付系统，将用户提交的支付请求，发送给微信支付，微信支付确认后会返回ACK- 2、	返回的ACK确认后，微信支付系统会下发一条『消费信息明细』，详细说明了消费的账户信息、时间、金额，终端信息等- 3、	此时威富通将该明细，写入CMQ，用作暂存。消费明细作为终端用户与商家之间交易的重要凭证，必须可靠传递，保证不丢- 4、	异步的，将CMQ内的消费明细，返回给多租户（线下商家）。建立订阅关系后，CMQ可1对1返回，或1对多投递通知，完成结算。
- 参考图示如下：![](//mc.qcloudimg.com/static/img/7f42706e0f87a942e0c0122167797fa5/image.png)