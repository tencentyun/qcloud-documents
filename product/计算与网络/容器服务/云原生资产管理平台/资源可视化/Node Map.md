
## 概述
传统的对象管理页面一般都是通过列表形式展开的，例如 TKE 集群里现有的资源对象列表，但列表的展示方式具备如下缺点：每一行都是一些抽象的数字，可读性不高；对象之间没有明确的标识区分；无法支持某种形态的排序。为此，TKE 推出了云原生资产管理的能力，通过可视化的形式，将用户所有的资源对象进行展示，该平台具备丰富的过滤查询、类型聚合、状态展示能力，可以帮助用户快速定位目标对象。

Node Map 主要通过可视化的页面展示节点的各项状态和指标，帮助用户了解当前集群节点的资源利用率、装箱率情况，辅助用户分析节点可能存在的问题。

## 注意事项
Node Map 不支持统计超级节点的各项指标。

## 使用方式
1. 登录 [容器服务控制台](https://console.cloud.tencent.com/tke2/cluster?rid=8)。
2. 在左侧选择**云原生资产管理 > Node Map**。
3. 在“Node Map”页面中，选择**地域**、**集群类型**和**集群**后，进行查看。


## Node Map 功能说明

Node Map 分为概览和资源对象热图，如下图所示：

![](https://qcloudimg.tencent-cloud.cn/raw/95968bde5a27783491aeccab15ba1342.png)

1. 上半区域是集群里的节点概览。
2. 下半区域是集群里的每一个节点资源对象。



### 集群/节点概览
集群/节点概览如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/c5ae67beecbfa05aa1c2634ff25e5625.png)

- **节点概览**：展示当前集群中不同节点类型的节点数量和所占比例；展示当前集群节点的总核数和总内存数。
- **成本概览（仅供参考）**：展示当前集群中过去一个月不同节点类型的成本所占比例和价格，根据集群中使用的节点和刊例价推算得出。价格仅供参考，完整的准确价格请查看腾讯云 [费用中心](https://console.cloud.tencent.com/expense/overview)。
- **CPU 利用率分布**：根据节点24小时利用率均值查看集群中节点 CPU 利用率分布情况。
>? CPU 利用率定义：节点真实 CPU 资源使用量除以节点规格。
>
- **CPU 装箱率分布**：根据节点24小时利用率均值查看集群中节点 CPU 装箱率分布情况。
>? CPU 装箱率定义：节点上所有 Pod 的 CPU Request 之和除以节点规格。
>
- **内存利用率分布**：根据节点24小时利用率均值查看集群中节点内存利用率分布情况。
>? 内存利用率定义：节点真实内存资源使用量除以节点规格。
>
- **内存装箱率分布**：根据节点24小时利用率均值查看集群中节点内存装箱率分布情况。
>? 内存装箱率定义：节点上所有 Pod 的内存 Request 之和除以节点规格。
>
- **CPU 使用比例**：根据右上角的指定周期时间段查看集群中节点 CPU 使用比例走势情况。
- **内存使用比例**：根据右上角的指定周期时间段查看集群中节点内存使用比例走势情况。


### 节点对象查看
节点对象如下图所示，您可以通过节点筛选、分组、状态进行节点的过滤和聚合展示。
![](https://qcloudimg.tencent-cloud.cn/raw/80d49d316265e10808d4abb30ac2246c.png)

- **筛选**：根据相关指标筛选得到目标节点，若您不选择，则是默认选择了所有的节点。支持过滤多个属性，取交集。
- **聚合**：对筛选出来的节点进行分组，每一组节点在同一个浅色框内，一个框内的每个节点具有相同的属性值。
- **状态**：您可以通过**节点状态**进行筛选，支持选择**CPU 峰值利用率、CPU 利用率均值**和 **CPU 装箱率**。
  - CPU 利用率峰值：节点 CPU 峰值利用率，分24小时，7天，20天维度。
  - CPU 利用率均值：节点 CPU 均值利用率，分24小时，7天，30天维度。
  - CPU 装箱率：节点 CPU 均值装箱率，分24小时，7天，30天维度。
>! 在节点对象热图中的节点，默认按照当前选择的“节点状态”属性值进行**升序排列**。例如，您选择的节点状态是 “24h CPU 利用率均值”，则节点对象热图里的节点默认是按照节点24h CPU 利用率均值升序排列。
>
 筛选后的节点由**绿、蓝、红**三色区分。您可以单击页面右下角的![](https://qcloudimg.tencent-cloud.cn/raw/8268535a09f01a2d60ef381373dc234e.png)，调整三种状态的阈值范围。如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/3503b3fac52ab127a901b51bf303d3ec.png)




### 节点操作

当您的鼠标悬浮在节点对象上后，您可以查看节点详情，并进行如下操作：
![](https://qcloudimg.tencent-cloud.cn/raw/4bb5b4c013efa370d726c77f81614df2.png)

1. 单击**详情**，查看当前节点的详情信息。如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/d717bfaf38216bca976e19d932684745.png)
<dx-tabs>
::: 节点详情
- **功能开关**
  - **Request 推荐**：集群级别的功能开关。开启后，可以根据 Workload 的使用情况，给 Workload 推荐合适的 Request。更多请参考 [Request 推荐](https://cloud.tencent.com/document/product/457/75471)。
  - **原生节点专用调度器**：集群级别的功能开关。开启后，可以虚拟放大原生节点规格，调度更多的 Pod。更多请参考 [原生节点专用调度器](https://cloud.tencent.com/document/product/457/75472)。

- **节点信息**
  - **节点规格**：节点的 CPU 和内存量。
  - **装箱率**：节点上所有 Pod 得 Request 之和除以节点规格。
  - **24h 利用率均值**：节点 CPU 和内存24小时均值利用率。
  - **24h 利用率峰值**：节点 CPU 和内存24小时峰值利用率。

- **节点走势图信息**
  - **CPU 使用比例**：
    - 根据右上角的指定周期时间段查看集群中节点 CPU 使用比例走势情况。
  - **内存使用比例**：
    - 根据右上角的指定周期时间段查看集群中节点内存使用比例走势情况。
:::
::: Pod 详情
- **CPU 用量走势图**
  - **申请量**：Pod 的 Request 数值。
  - **实际用量**：Pod 实际的用量。
  - **推荐量**：Pod 推荐的用量。需要提前开启 [Request 推荐](https://cloud.tencent.com/document/product/457/75471)。
      
- **Pod 信息**
  - **Pod 名称**：Pod 的名字。
  - **Pod 状态**：Pod 的状态。
  - **所属 Workload**：当前 Pod 所属的 Workload。
  - **Request**：黑字部分是当前 Pod 的 Request 配置，蓝字部分是当前 Pod 通过 Request 推荐，推荐的建议数值（需要打开 [Request 推荐组件](https://cloud.tencent.com/document/product/457/75471)）。
>! 
>1. 单击蓝字部分推荐的 Request，您可以一键更新该 Pod 所属的 Deployment 的 Request 数值。
>2. 一键更新 Request 能力属于原生节点专有能力，如果 Workload 有部分 Pod 不在原生节点上，需要先将 Pod 迁移到原生节点。更多请参考 [Request 推荐](https://cloud.tencent.com/document/product/457/75471)。
>
:::
</dx-tabs>
2. 单击**驱逐**，将节点内的 Pod 从节点中驱逐到集群内其他节点。
3. 单击**移出**，将节点移出节点池。
  - 若节点在节点池：当前节点归属节点池管理，需要前往节点池页面处理。
  - 若节点不在节点池：可以将节点从集群中删除。若节点是按量计费的节点，支持同时销毁节点。
4. 单击**取消封锁**，将节点调度进新的 Pod。
>? 节点在驱逐之后，会自动封锁。单击**取消封锁**后，该节点可以继续调度进新的 Pod。
