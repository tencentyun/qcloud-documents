## 操作场景
腾讯云容器服务（Tencent Kubernetes Engine，TKE）是高度可扩展的高性能容器管理服务，您可以在托管的云服务器实例集群上轻松运行应用程序。在本教程中，您将了解如何使用容器服务快速创建和管理容器集群，并在集群内快速、弹性地部署您的服务。

## 操作步骤
### 创建集群
首先您需要创建集群。集群是指容器运行所需云资源的集合，包含了若干台云服务器、负载均衡器等腾讯云资源。本文以自定义新建集群为例：
1. 登录 [腾讯云容器服务控制台](https://console.cloud.tencent.com/tke2)，单击左侧导航栏中的**集群**。
2. 在“集群管理”页面中，单击集群列表上方的**新建**。
3. 在“创建集群”页面，设置集群的基本信息，并单击**下一步**。如下图所示：
![](https://main.qcloudimg.com/raw/683f3c0a47e248214b21db453c369a43.png)
 - **集群名称**：输入要创建的集群名称，不超过60个字符。
 - **新增资源所属项目**：根据实际需求进行选择，新增的资源将会自动分配到该项目下。
 - **Kubernetes版本**：提供多个 Kubernetes 版本选择，前往 [Supported Versions of the Kubernetes Documentation](https://kubernetes.io/docs/home/supported-doc-versions/) 查看各版本特性对比。
 - **运行时组件**：提供**docker**和**containerd**两种选择。详情请参见 [如何选择 Containerd 和 Docker](https://cloud.tencent.com/document/product/457/35747)。
 - **所在地域**：建议您根据所在地理位置选择靠近的地域，可降低访问延迟，提高下载速度。
 - **集群网络**：为集群内主机分配在节点网络地址范围内的 IP 地址。详情请参见 [容器及节点网络设置](https://cloud.tencent.com/document/product/457/9083)。
 - **容器网络**：为集群内容器分配在容器网络地址范围内的 IP 地址。详情请参见 [容器及节点网络设置](https://cloud.tencent.com/document/product/457/9083)。
 - **操作系统**：根据实际需求进行选择。
 - **集群描述**：填写集群的相关信息，该信息将显示在**集群信息**页面。
 - **高级设置**：可设置 ipvs。
 ipvs 适用于将在集群中运行大规模服务的场景，开启后不能关闭。详情请参见 [集群启用 IPVS](https://cloud.tencent.com/document/product/457/32193)。
4. 参考以下信息选择机型，并单击**下一步**。如下图所示：
![](https://main.qcloudimg.com/raw/ca7ce4445afb62fc6df35ab38673e5ca.png)
 - **节点来源**：提供**新增节点**和**已有节点**两个选项，请根据实际需求进行选择。
 - **Master 节点** ：Master 的部署方法决定了您集群的管理模式，我们提供**平台托管**和**独立部署**两种集群模式选择。详情请参见 [集群类型](https://cloud.tencent.com/document/product/457/32187#.E9.9B.86.E7.BE.A4.E7.B1.BB.E5.9E.8B)。
 - **计费模式**：提供**按量计费**和**包年包月**两种计费模式。详情请参见 [计费模式](https://cloud.tencent.com/document/product/213/2180)。
 - **Worker 配置**：此处以“**节点来源**”选择为**新增节点**为例，该模块下所有设置项默认如上，您可根据实际需求进行更改。
5. 参考以下信息进行云服务器配置，并单击 **下一步**。如下图所示：
![](https://main.qcloudimg.com/raw/2cea97f264f1d39a5dd7f35913cbfa3f.png)
 - **容器目录**：默认不勾选。勾选即可设置容器和镜像存储目录，建议存储到数据盘。
 - **安全组**：安全组具有防火墙的功能，用于设置云服务器的网络访问控制。支持以下设置：
    - 新建并绑定默认安全组，可预览默认安全组规则。
    - 根据业务需要，可单击**添加安全组**自定义配置安全组规则。
    更多详情请参见  [容器服务安全组设置](https://cloud.tencent.com/document/product/457/9084)。
 - **登录方式**：提供三种登录方式：
    - **立即关联密钥**：密钥对是通过算法生成的一对参数，是一种比常规密码更安全的登录云服务器的方式。详情请参见 [SSH 密钥](https://cloud.tencent.com/document/product/213/6092)。
    - **自动生成密码**：自动生成的密码将通过 [站内信](https://console.cloud.tencent.com/message) 发送给您。 
    - **设置密码**：请根据提示设置对应密码。
6. 确认配置信息，并单击**完成**，即可完成集群创建。
7. 创建完成的集群将出现在集群列表中。如下图所示：
![](https://main.qcloudimg.com/raw/1bb3f771500daa9fd05422298b15abdf.png)

### 创建服务
至此已成功创建了集群，此步骤介绍如何创建服务。服务是由多个相同配置的容器和访问这些容器的规则组成的微服务。
1. 在“集群管理”页面，单击需要创建服务的集群 ID。
2. 在该集群的工作负载 “Deployment” 管理页，单击**新建**。如下图所示：
![](https://main.qcloudimg.com/raw/ded44992dca3d00cb28bc709d404a41f.png)
3. 在“新建Workload” 页面，设置工作负载基本信息。如下图所示：
![](https://main.qcloudimg.com/raw/f29badb02603da7cb31d3dfe04083d1f.png)
 - **工作负载名**：输入需创建工作负载的名称。
 - **描述**：输入工作负载的相关信息。
 - **标签**：`key = value` 键值对，本文中标签默认值为 `k8s-app = 工作负载名`。
 - **命名空间**：根据实际需求进行选择。
 - **类型**：根据实际需求进行选择。
4. （可选）设置数据卷，如需指定容器挂载至指定路径时，单击**添加数据卷**。详情请参见 [Volume 管理](https://cloud.tencent.com/document/product/457/31713)。如下图所示：
![](https://main.qcloudimg.com/raw/2e1f6d4676833ea4e03777f90910e85a.png)
>!源路径不指定时将默认分配临时路径。
> 
 - **类型**：支持使用临时目录、主机路径、NFS盘、已有PVC、腾讯云硬盘、ConfigMap、Secret 七种类型的数据卷。详情请参见 [Volume 管理](https://cloud.tencent.com/document/product/457/31713)。
5. 参考以下信息设置实例內容器。如下图所示：
![](https://main.qcloudimg.com/raw/d667edcdbfa9db500ac218b46fb89b11.png)
 - **名称**：输入需创建容器的名称。
 - **镜像**：单击**选择镜像**，可在我的镜像、我的收藏、公有镜像及 Docker Hub镜像下选择。
 - **镜像版本（Tag）**：容器服务默认选择 latest 版本。如需使用该镜像的其它版本，可在单击输入框并在列表中选择。
 - **CPU/内存限制**：request 用于预分配资源，当集群中的节点没有 request 所要求的资源数量时，容器会创建失败。limit 用于设置容器使用资源的最大上限，避免异常情况下节点资源消耗过多。
 - **GPU限制**：根据实际需求设置。
 - **环境变量**：变量名只能包含大小写字母、数字及下划线，并且不能以数字开头。
6. 参考以下信息设置实例数量。如下图所示：
![](https://main.qcloudimg.com/raw/ba84b0c86836f2e3dc4412877f7e97ee.png)
 - **手动调节**：设定实例数量，本文实例数量设置为1。可单击`+`或`-`控制实例数量。
 - **自动调节**：满足任一设定条件，则自动调节实例（pod）数目。详情请参见 [自动伸缩基本操作](https://cloud.tencent.com/document/product/457/37384)。
7. 参考以下信息进行访问设置。如下图所示：
![](https://main.qcloudimg.com/raw/1199b006bed6caab09ea25975afb5df1.png)
 - **Service**：勾选**启用**。
 - **服务访问方式**：服务的访问方式决定该服务的网络属性，不同访问方式的服务可提供不同网络能力。详情请参见 [服务访问方式](https://cloud.tencent.com/document/product/457/45487#.E6.9C.8D.E5.8A.A1.E8.AE.BF.E9.97.AE.E6.96.B9.E5.BC.8F)。
 - **负载均衡器**：根据实际需求进行选择。
 - **端口映射**：选择”协议“，填写“容器端口”和“服务端口”。
8. 单击**创建Workload**，即可完成服务的创建。创建完成的服务将出现在服务列表中。

### 查看资源
在上述步骤中，您创建了集群、服务，此步骤介绍如何查看已成功创建的资源。
#### 查看集群
1. 单击左侧导航栏中的**集群**，在“集群管理”页面选择集群 ID。
2. 进入默认显示的 “Deployment” 管理页面。左侧菜单栏功能如下：
 - **基本信息**：显示集群的基本信息。
 - **节点管理**：节点是一台已注册到集群内的云服务器。可以进行新建节点、添加已有节点、新建伸缩等的操作。
 - **命名空间**：命名空间是对一组资源和对象的抽象集合。可以对命名空间进行新建和删除操作。
 - **工作负载**、**服务**、**配置管理**、**存储**：Kubernetes 常用资源对象，详情请参见 [对象分类](https://cloud.tencent.com/document/product/457/31700#.E5.AF.B9.E8.B1.A1.E5.88.86.E7.B1.BB)。
 - **日志**：显示相关日志信息。
 - **事件**: 创建服务时会跳转至此页面，显示服务创建时流水事件。


### 查看服务
1. 单击左侧导航栏中**集群**，在“集群管理”页面选择集群 ID。
2. 在 “Deployment” 管理页面，选择**服务** > **Service**。如下图所示：
![](https://main.qcloudimg.com/raw/94ddcaede56a5a2d22ca76f6c3a2653a.png)
3. 选择 “Service” 列表页中的服务名称，进入服务详情页。可查看以下信息：
 - **详情**：显示 Service 基本信息及高级设置信息。
 - **事件**：显示 Service 最近1小时内发生的事件信息。
 - **YAML**：可通过编辑 YAML 以更新 Service。


### 删除资源
在本文中，启动了集群和服务两种资源。此步骤介绍如何清除所有资源以免产生不必要的费用。

#### 删除服务
1. 选择左侧导航栏中**集群**，进入“集群管理”页面并单击需删除服务的集群 ID。
2. 在 “Deployment” 管理页面中，选择**服务** > **Service**。
4. 在 “Service” 管理页面，单击 Service 所在行右侧的**删除**。如下图所示：
![](https://main.qcloudimg.com/raw/4e36c248ea9e496ae39fd26bd5900533.png)
5. 在弹出框中单击**确定**，即可删除服务。


#### 删除集群
1. 选择左侧导航栏中的**集群**，在“集群管理”页面选择需删除集群所在行右侧**更多** > **删除**。如下图所示：
![](https://main.qcloudimg.com/raw/ac7d0e9ab98d35c9e07d3c9b9ff9ea7b.png)
2. 在弹出框中确认信息后，单击**确定**即可删除集群。
>!
>- 集群在删除期间，无法对外提供服务，请提前做好准备，以免造成影响。
>- 若删除集群，则该集群内的 Service 也随即被删除。
>




## 后续操作
通过本文，您已经了解如何在腾讯云容器服务中配置、部署和删除服务。使用腾讯云容器服务，您将无需安装、运维、扩展您的集群管理基础设施，只需进行简单的 API 调用，便可启动和停止 Docker 应用程序，查询集群的完整状态，以及使用各种云服务。

您可进入下一个教程，了解 [负载均衡](https://cloud.tencent.com/document/product/457/9110) 和 [镜像仓库](https://cloud.tencent.com/document/product/457/9118) 的基本概念和操作，并通过 [入门示例](https://cloud.tencent.com/document/product/457/11138) 快速构建服务。

​                                          
