## 简介

虚拟节点并不是节点，而是一种调度能力，支持将标准 Kubernetes 集群中的 Pod 调度到集群服务器节点之外的资源中。腾讯云容器服务的虚拟节点会将开启该功能的集群中，符合调度条件的 Pod 调度到由 [弹性容器服务 EKS](https://cloud.tencent.com/document/product/457/39804) 维护的云上计算资源中。

部署在虚拟节点上的 Pod 具备云服务器一致的安全隔离性，具备与部署在集群既有节点上的 Pod 一致的网络隔离性、网络连通性。如下图所示：
![](https://main.qcloudimg.com/raw/b9dd4be95d11a476e5434bc4fdd42e29.png)


## 相关概念

#### 弹性容器

在集群部署虚拟节点，将调度到虚拟节点上的 Pod 简称为弹性容器。部署为弹性容器的工作负载不占用集群服务器节点资源，也不受服务器节点资源上限限制。


#### 节点池

为帮助您高效管理 Kubernetes 集群内节点，腾讯云容器服务引入节点池概念。借助节点池基本功能，您可以方便快捷地创建、管理和销毁节点，以及实现节点的动态扩缩容。详情请参见 [节点池概述](https://cloud.tencent.com/document/product/457/43719)。


## 产品优势

#### 弹性更快、更高效
相比节点池及伸缩组，虚拟节点的扩容、缩容流程简化了购买、初始化、退还服务器的流程，大大提升了弹性的速度，尽可能降低在扩容流程中可能出现的失败，使得弹性更加的高效。
- 对于扩容，虚拟节点的扩容流程短，秒级扩容
![](https://main.qcloudimg.com/raw/47663e035a646019954aca2d3fa37471.png)


- 对于缩容，虚拟节点的缩容流程短，无损缩容，瞬时缩容
![](https://main.qcloudimg.com/raw/3789124ea4091fd7550fd452bca3804d.png)

#### 更节省成本
虚拟节点由于具备秒级弹性的优势，及无服务器、按需使用的产品形态，使其在成本方面具有很大的优势。
- 按需使用，减少集群的资源的buffer。调度到真实节点上的Pod，由于起规格不能完全匹配节点规格，总会存在一些碎片资源无法被利用，但是仍然在计费；而虚拟节点是按需使用，避免了碎片资源的产生，提升整体集群的资源利用率，减少buffer，降低成本。

- 减少弹性资源的计费时长，节省成本。由于虚拟节点是秒级扩容，瞬时缩容，因此会大大降低在扩缩容过程中产生的计费成本。

## 计费方式

虚拟节点本身不收取任务费用，根据调度到虚拟节点上 Pod 资源计费。

虚拟节点上的弹性容器具有预付费、后付费（按量计费、竞价）的两种计费模式。按照实际配置的资源及使用时间计算，无需提前支付费用。会根据工作负载申请的 CPU、GPU、内存数值以及工作负载的运行时间来核算费用，详情请参见 [弹性容器定价](https://cloud.tencent.com/document/product/457/39806)。

## 调度说明

通常，开启了虚拟节点的集群在服务器节点资源不足时，会自动把 Pod 扩容到虚拟节点上。而服务器节点资源充足时，会优先缩容虚拟节点上的 Pod。另外，也支持手动将 Pod 调度到虚拟节点上。详情请参见 [虚拟节点 Pod 调度说明](https://cloud.tencent.com/document/product/457/53030)。


## 应用场景

#### 快速秒级扩容，轻松应对突发流量
对于不定时突发流量，很难保证及时的节点扩缩，若以流量高值为基线去配置资源规格，在流量平稳时，仅使用一小部分资源，资源浪费严重。建议配置虚拟节点，无需额外预置资源，随时应对突发流量。

- 高弹性：快速秒级扩容，轻松应对突发流量，业务流量下降后自动销毁 Pod，无损缩容。
- 低成本：避免资源空置成本，提升资源利用率。

#### 减少集群资源 buffer，应对长期运行服务波峰

对于长期运行且资源负载特征为潮汐型的应用，虚拟节点可以不占用集群服务器节点资源，快速的部署大量 Pod。在业务波峰进行扩容时会自动的优先调度到节点上，消耗预留的节点资源，再调度到虚拟节点上为集群补充更多的临时资源，这些资源会随着 Pod 缩容自动退还。

- 高弹性：秒级扩容，业务流量下降后自动销毁Pod，无损缩容。
- 低成本：减少集群预留 buffer，将集群的节点维护在资源利用率更高、使用和预留更合理的水平，节省成本。


#### 替代节点扩缩容，应对短期运行任务
对于短时间运行、资源需求量大的任务，一般需要手动扩容大量的节点保证资源，再调度Pod，任务结束后再退还机器；节点资源有buffer，造成资源浪费。建议使用虚拟节点，直接将Pod直接手动调度到虚拟节点上，无需节点管理。

- 无需进行节点扩缩：无需在部署这些负载前后进行集群节点的扩缩容，降低了扩缩节点的时间周期和维护成本。且任务运行结束 Pod 退出会自动退还资源并停止计费，不需要人力或程序再干预。
- 按需使用，降低成本：任务需要多少资源，则创建多少资源的Pod，不会造成节点多余的资源buffer。

