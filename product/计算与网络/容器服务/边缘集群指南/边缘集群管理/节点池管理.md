## 操作场景
本文介绍如何通过公有云界面，对边缘容器的边缘节点进行节点池管理和节点池的分组管理。这里重构了旧版本的 NodeGroup 和 NodeUnit 的界面交互，只有从 2022年3月29日之后的新建集群会使用新的交互逻辑，使用旧版本的集群不受影响。
其中“边缘节点池”对应 SuperEdge 的 NodeUnit 设计，“节点池分类”对应 SuperEdge 的 NodeGroup 的设计。其中详细设计原理可以参考 Github：
https://github.com/superedge/superedge/blob/main/docs/components/site-manager_CN.md

- [操作场景](#操作场景)
- [操作步骤](#操作步骤)
  - [边缘节点池（NodeUnit）](#边缘节点池nodeunit)
  - [节点池分组（NodeGroup）](#节点池分组nodegroup)
  - [Service Group资源删除保护](#service-group资源删除保护)

## 操作步骤

[](id:边缘节点池nodeunit)

### 边缘节点池（NodeUnit）
1. 登录 [腾讯云容器服务控制台](https://console.cloud.tencent.com/tke2)，选择左侧导航栏中的**边缘集群**。
2. 单击需要远程登录节点的集群 ID，进入该集群详情页。
3. 选择页面左侧节点管理 > 边缘节点池，进入边缘节点池列表页面，如下图显示：
![](https://qcloudimg.tencent-cloud.cn/raw/f6328b0dd47c8b6cfa642bbeaf259cab.png)
4. 每个集群会有一个默认的节点池（unit-node-all），这里会包含所有的加入到此集群的边缘节点
5. 点击“新建节点池”，可以按照业务需求创建一个新的节点池，输入节点池名称，并按照需求加入现有节点：
![](https://qcloudimg.tencent-cloud.cn/raw/c4ecbc85ec8616430460ba5871b90407.png)
![](https://qcloudimg.tencent-cloud.cn/raw/6a47d02e67356f3d58cd2a250abe6600.png)
6. 对于已有节点池，点击 操作->修改节点列表，可以对节点池内的节点进行添加和删除的操作：
![](https://qcloudimg.tencent-cloud.cn/raw/f4f8eba5587381b855c84c2323471c25.png)
7. 点击 操作->删除，可以删除指定的节点池
注：以上所有的对边缘节点池的操作，都会对节点上的 Label 标签产生影响。



[](id:节点池分组nodegroup)
### 节点池分组（NodeGroup）
节点池分组可以看作是对之前节点池进行不同类型的分类，例如我们有 5 个节点池：NodeUnit1/NodeUnit2/NodeUnit3/NodeUnit4/NodeUnit5，我们可以创建 3 个不同的节点池分组，例如 NginxGroup/DatabaseGroup/MidewareGroup，然后分别在每个 NodeGroup 下绑定需要的 NodeUnit，举例如下：
![](https://qcloudimg.tencent-cloud.cn/raw/6b4e56b55322de6d1e99ae7966d71e88.png)

根据此结构创建不同的 NodeGroup 后，就可以使用边缘容器相关的 DeploymentGrid/StatefusetGrid/ServiceGrid 能力进行多地域的分发部署了。例如我们可以创建 Nginx 实例的 DeploymentGrid，绑定到 NginxGroup 中，NginxGroup 中的 NodeUnit1/NodeUnit3/NodeUnit5 这 3 个地域都会同时部署完全相同的 Nginx 的 Deployment 实例，在三个地域同时提供接入服务。
具体操作步骤：
1. 登录 [腾讯云容器服务控制台](https://console.cloud.tencent.com/tke2)，选择左侧导航栏中的**边缘集群**。
2. 单击需要远程登录节点的集群 ID，进入该集群详情页。
3. 选择页面左侧节点管理 > 节点池分类，进入边缘节点池列表页面，如下图显示：
![](https://qcloudimg.tencent-cloud.cn/raw/6b297ee62cdd3bbe2ecfae9a8f490c55.png)
4. 点击“新建分类”，可以创建新的节点池分类：
![](https://qcloudimg.tencent-cloud.cn/raw/d16a245a7d30604dbf137fb70731f8df.png)
这里需要输入节点池分类的名称，同时选择关联的节点池（可以多选），点击“完成” 完成分类的创建
5. 对于已经存在的节点池分类，可以点击“修改节点池”，对分类中的节点池进行增加和删除的操作
![](https://qcloudimg.tencent-cloud.cn/raw/95ea88f9261645300ed245ea33ac2485.png)
6. 如何使用节点池分类
选择页面左侧 Service Group > DeploymentGrid，DeploymentGrid 管理页面，如下图显示：
![](https://qcloudimg.tencent-cloud.cn/raw/7bd6b72c751245ebc02d3a02a924111e.png)
点击“新建”，按照需求输入 DeploymentGrid 相关参数，选择相应的 NodeGroup 即可进行部署，如下图显示：
![](https://qcloudimg.tencent-cloud.cn/raw/e239b703c0c413079807cec55b337ddb.png)

[](id:service-group资源删除保护)
### Service Group资源删除保护
1.选择页面左侧 Service Group > DeploymentGrid，DeploymentGrid 管理页面，如下图显示：
![](https://qcloudimg.tencent-cloud.cn/raw/b65d92b1022d64a11e6f7639e14316fa.png)

2.点击“删除”，若当前应用已关联的节点池组【NodeGroup】下关联了节点池【NodeUnit】,则会提示“请您前往【节点管理】->【节点池分类】页面移除【nginx】关联的节点池】”，如下图显示：
![](https://qcloudimg.tencent-cloud.cn/raw/2ebab2c88d478e379aca49d591212dc3.png)
- 2.1.选择页面 左侧节点管理 > 节点池分类页，如下图显示:
  ![](https://qcloudimg.tencent-cloud.cn/raw/bc9f1ecebb06a43291dd3529939de7fd.png)
  
- 2.2. 选中【nginx】节点池组并且点击“修改节点池”，清空所有关联的节点池，并且点击“完成”，如下图显示:
  ![](https://qcloudimg.tencent-cloud.cn/raw/5acc4104cc4c9d5588cee1b6c270edc6.png)
    ![](https://qcloudimg.tencent-cloud.cn/raw/36c6a78ad4fe7b399b0f651cb332118f.png)


- 2.3. 再次选择页面左侧 Service Group > DeploymentGrid，并且选择需要删除的DeploymentGrid【nginx】,点击“删除”，如下图显示:
  ![](https://qcloudimg.tencent-cloud.cn/raw/a46499f4b10529acab7e52afae999511.png)
  ![](https://qcloudimg.tencent-cloud.cn/raw/1579cce6bf99f1fe342d5a0491b5dc19.png)
- 2.4.提示“删除成功”，即完成删除deploymentGrid【nginx】，如下图显示:
  ![](https://qcloudimg.tencent-cloud.cn/raw/07aa75eb97e2bee472e64e8c2f46c35a.png)

3.点击“删除”，若当前应用已关联的节点池组【NodeGroup】未关联节点池【NodeUnit】,则会提示“确定要删除DeploymentGrid:nginx”，按照操作继续点击“确定”，即可成功删除deploymentGrid【nginx】, 如下图显示：
![](https://qcloudimg.tencent-cloud.cn/raw/1579cce6bf99f1fe342d5a0491b5dc19.png)
![](https://qcloudimg.tencent-cloud.cn/raw/07aa75eb97e2bee472e64e8c2f46c35a.png)

