- [操作场景](#操作场景)
- [操作步骤](#操作步骤)
  - [跨地域访问](#跨地域访问)


## 操作场景
本文介绍如何实现在不同边缘地域Pod访问不同地域的服务,例如在南京地域的Pod可以成功访问北京地域的服务,在北京地域的Pod也可以成功访问南京地域的服务。

## 操作步骤
[](id:跨地域访问)
### 跨地域访问
1. 登录 [腾讯云容器服务控制台](https://console.cloud.tencent.com/tke2)，选择左侧导航栏中的**边缘集群**。
2. 单击需要远程登录节点的集群 ID，进入该集群详情页。
3. 选择页面左侧**工作负载** > **Deployment**，进入Deployment列表页面，分别新建2个名称为`nginx-nj`和`nginx-bj`的deployment,操作步骤如下：
   - 3.1 新建名称为的`nginx-nj`的deployment，同时添加标签`http-proxy=enable`,如下图显示:
    ![](https://qcloudimg.tencent-cloud.cn/raw/99537169030df494b40950e381865c67.png)
    `nginx-nj`的yaml，如下图显示:
     ```
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        labels:
          k8s-app: nginx-nj
          qcloud-app: nginx-nj
      spec:
        ...
        template:
          metadata:
            ...
            labels:
              http-proxy: enable
              ...
          spec:
          ... 
      ```
   - 3.2 新建名称为的`nginx-bj`的deployment，同时添加标签`http-proxy=enable`,如下图显示:
    ![](https://qcloudimg.tencent-cloud.cn/raw/baf6c726c334e371d19e80409f8dca8f.png)
    `nginx-bj`的yaml，如下图显示:
     ```
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        labels:
          k8s-app: nginx-bj
          qcloud-app: nginx-bj
      spec:
        ...
        template:
          metadata:
            ...
            labels:
              http-proxy: enable
              ...
          spec:
          ... 
      ```
   - 3.3 确认deployment列表
   ![](https://qcloudimg.tencent-cloud.cn/raw/364de75c62e733b69f2ab68b16aa24e2.png)

4.远程登录南京边缘地域的Pod访问北京地域的服务,如下图显示:
```
root@nginx-nj-79c84945b8-8sslj:/# curl http://nginx-bj.default:80
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
```
5.远程登录北京边缘地域的Pod访问南京地域的服务,如下图显示:
```
root@nginx-bj-654d558894-r7b5j:/# curl http://nginx-nj.default:80
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
```