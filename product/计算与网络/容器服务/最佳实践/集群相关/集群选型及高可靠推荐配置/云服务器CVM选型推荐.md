本文介绍在创建容器服务集群时，如何选择更低成本、贴合实际业务的云服务器 CVM 类型。

## 集群规划分析
用户在创建并使用容器服务集群时，会使用一定数量的小规格 CVM。而此情况会产生以下弊端：
- 小规格的 CVM 网络资源受限。
- 若仅一个容器就几乎占用了一个小规模 CVM，则此 CVM 的剩余资源就无法再利用（例如，构建新的容器或恢复失败的容器），导致资源浪费。

建议您使用大规格 CVM，优势如下：
- 网络带宽大，对于大带宽类的应用，资源利用率高。
- 容器在单台 CVM 内建立通信的比例增大，减少网络传输。
- 拉取镜像的效率更高，镜像仅拉取一次就可被多个容器使用。而对于小规模 CVM，拉取镜像的次数会增多，如需进行集群伸缩，会花费更多的时间，无法达到立即响应的目的。

## 选择 Master 节点规格
通过容器服务创建的集群，Master 节点上运行着 etcd、kube-apiserver 及 kube-controller 等核心组件，对于集群的稳定性有至关重要要的影响。对于需用于生产环境的集群，请慎重选择 Master 节点的规格。
>?
>- 本文所述集群规模即为集群里的节点数量。Master 节点规格与集群规模有关，集群规模越大，所需的 Master 节点规格也越高。
>- 您可从节点数量、Pod数量、部署频率及访问量等多个角度衡量集群规模。
>
对于常见的集群规模，可参考如下方式选择 Master 节点的规格（如用于测试环境，则规格可以小一些。以下选择可尽量保证 Master 负载维持在一个较低的水平上）：
<table>
<tr>
<th>节点规模</th>
<th>Master规格</th>
</tr>
<tr>
<td>1 - 5个节点</td>
<td>4核8G（不建议2核4G）</td>
</tr>
<tr>
<td>6 - 20个节点</td>
<td>4核16G</td>
</tr>
<tr>
<td>21 - 100个节点</td>
<td>8核32G</td>
</tr>
<tr>
<td>100 - 200个节点</td>
<td>16核64G</td>
</tr>
</table>

## 选择 Worker 节点规格
您可从以下两个角度衡量需选择的 Worker 节点规格：
- 请确认整个集群日常使用的总核数及可用度的容忍度。例如，集群总核数为160核：
	- 若容忍度为10%，那么最小选择为10台16核 CVM，并且高峰运行的负荷请勿超过160 × 90% = 144核。
	- 若容忍度是20%，那么最小选择为5台32核 CVM，并且高峰运行的负荷请勿超过160 × 80% = 128核。
	依次类推，即使有一台 CVM 出现故障，剩余 CVM 仍可以支持现有业务正常运行。
- 请确认 `CPU：Memory` 比例。对于使用内存比较多的应用，例如 Java 类应用，建议考虑使用1:8的机型。
