## 数据卷挂载设置

### 数据卷(volume)介绍
大家都知道Docker镜像是由多个文件系统叠加而成。当我们启动一个容器的时候，Docker会加载只读镜像层并在其上添加一个读写层。当删除Docker容器，并通过该镜像重新启动时，之前的更改将会丢失。为了能够保存数据以及共享容器间的数据，Docker提出了Volume的概念。简单来说，Volume就是目录或者文件，它可以绕过默认的联合文件系统，而以正常的文件或者目录的形式存在于宿主机上。

在Docker中，数据卷只是磁盘或另一容器中的目录。生命周期不受管理，直到最近才有本地磁盘支持的卷。Docker现在提供卷驱动程序，但是现在的功能非常有限。我们容器服务采用的是kubernetes的数据卷的概念，Kubernetes 数据卷具有明确的生命周期管理，支持多种类型的数据卷，实例(pod)可以同时使用任意数量的数据卷。

更多kubernetes 数据卷信息可见[详情](https://kubernetes.io/docs/concepts/storage/volumes/)。
### 容器服务数据卷使用说明
腾讯云容器服务是基于kubernetes编排系统搭建的，当前支持以下类型的数据卷：

- emptyDir：用于临时存储，生命周期同实例(pod)。在腾讯云容器服务中创建服务的时候，数据卷的源路径不填即为emptydir模式。
- hostPath: 指定主机的文件系统的中文件或目录挂载到容器的某一路径中，在腾讯云容器服务中创建服务时填写源路径即为hostPath模式。
- 云硬盘：类似kubernetes的其他第三方块存储插件（腾讯云正在积极加入开源建设，相关插件后续会提交到社区），这里指定一块腾讯云的CBS云硬盘挂载到容器的某一路径下，创建数据卷时选择对应的云硬盘即可。
- nfs盘：指定一个nfs目录进行挂载。

使用步骤：

- 第一步：添加数据卷
![Alt text](https://mc.qcloudimg.com/static/img/95fa43aef0712a1c798ac2c762d1d43d/%7BFA88D589-64B7-4F27-90F2-1E8A86485DA6%7D.png)
- 第二步：在容器配置中设置该数据卷的挂载路径
![Alt text](https://mc.qcloudimg.com/static/img/728edfe98f53421d0b621c4f2a290649/%7BE25FD03D-CEAC-406E-8582-913897778175%7D.png)
使用数据卷存以下情况：

>- 创建服务时，数据卷挂载可以为空；
- 数据卷挂载的每条记录的卷名称和目标路径不能重复；
- 若需要数据卷挂载，则每条记录的卷名称和目标路径不能为空；
- 若数据卷挂载的源路径为空，系统将分配一个临时目录在`/var/lib/kubelet/pods/pod_name/volumes/kubernetes.io~empty-dir`，不建议您使用临时的数据卷，该数据卷的生命周期与实例的生命周期保持一致；
- 若数据卷挂载的权限未选择，系统将自动设置该权限为读写权限；
- 数据卷命名规范：由小写字母和数字和连接符“-”组成，必须是小写字母开头，且在20个字符以内。


### 持久卷(PersistentVolume and PersistentVolumeClaim)
敬请期待

