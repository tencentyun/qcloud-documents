腾讯云容器服务（Tencent Kubernetes Engine）是高度可扩展的高性能容器管理服务，您可以在托管的云服务器实例集群上轻松运行应用程序。在本教程中，您将了解如何使用容器服务快速创建和管理容器集群，并在集群内快速、弹性地部署您的服务。

## 步骤 1：创建集群
首先您需要创建集群。集群是指容器运行所需云资源的集合，包含了若干台云服务器、负载均衡器等腾讯云资源。
1. 登录 [腾讯云容器服务控制台](https://console.cloud.tencent.com/ccs)。
2. 单击左侧导航栏中的【集群】，单击集群列表页的【新建】。
![](https://main.qcloudimg.com/raw/983945cbf3738b6cdf1cefaceda3804c.png)
3. 设置集群的基本信息。
 - **集群名称**：您要创建的集群的名称。不超过 60 个字符。
 - **新增资源所属项目**：集群内新增的云服务器、负载均衡器等资源将会自动分配到该项目下。
 - **节点设置**：新增节点；空集群用于创建不包含任何节点的空集群， 集群创建完成后，您仍需添加已有节点或新增节点。
 - **Kubernetes 版本**：选择 Kubernetes 版本。
 - **所在地域**：建议您根据所在地理位置选择靠近的地域。可降低访问延迟，提高下载速度。
 - **集群网络**：如现有的网络不合适，您可以去控制台 [新建私有网络](https://console.cloud.tencent.com/vpc/vpc?rid=1)。
 - **容器网络**：为集群内容器分配在容器网络地址范围内的 IP 地址。参阅 [容器及节点网络设置](/doc/product/457/9083)。
 - **集群描述**：创建集群的相关信息。该信息将显示在 **集群信息** 页面。
 ![](https://main.qcloudimg.com/raw/7ab68aa5298d2c033b859ee6a4fc120b.png)
4. 选择机型（支持系统盘为云盘的所有机型）。
 - **计费模式**：提供按量计费和包年包月两种计费模式，参阅 [详细对比](https://cloud.tencent.com/document/product/213/2180)。
 - **所在地域**：显示当前服务所在地域。
 - **可用区**：选择当前服务可用的区域。
 - **节点网络**：为集群内服务器分配在节点网络地址范围内的 IP 地址。参阅 [容器及节点网络设置](/doc/product/457/9083)。
 - **实例族**：选择实例族。
 - **实例类型**：选择实例类型。详细对比参看 [实例类型概述](/doc/product/213/7153#.E5.8F.AF.E7.94.A8.E5.AE.9E.E4.BE.8B.E7.B1.BB.E5.9E.8B2) 。
![](https://main.qcloudimg.com/raw/e3cc267b474a09e84c630a307f22acd3.png) 
5. 填写云服务器配置并单击 【完成】。
 - **操作系统**：选择操作系统。
 - **系统盘**：提供本地硬盘、普通云硬盘、SSD 云硬盘三种服务选择。**本地硬盘** 固定为 50 GB，系统盘不支持更换介质，使用本地硬盘的服务器暂不支持升级 CPU/内存/硬盘；**普通云硬盘** 适用于大文件顺序读写场景，如日志流水、流媒体业务，数据仓储等；**SSD 云硬盘** 的后端使用 NVMe 固态存储，适用于核心数据库业务、大型 OLTP 业务，以及对 IO 性能有极高的要求的业务。
 - **数据盘**：本地硬盘步长 10 GB，最高为 500GB；普通云硬盘步长 10 GB，最高为 4000 GB；SSD 云硬盘步长 10 GB，最高为 16000 GB。
 - **公网宽带**：提供按宽带计费和按使用流量两种计费模式，参阅 [详细对比](https://cloud.tencent.com/document/product/213/509)。
 - **带宽**：勾选 **免费分配公网 IP**，系统将免费分配公网 IP，若不需要，请选择带宽值为 0 。
 - **主机名**：选择 **自动命名** 云服务器将自动命名为 ccs_集群id_node；**手动命名** 云服务器名称不超过 60 个字符。
 - **登录方式**：提供三种对应登录方式。
    i. **设置密码**：请根据提示设置对应密码。
    ii. **立即关联密钥**：密钥对是通过一种算法生成的一对参数，是一种比常规密码更安全的登录云服务器的方式。详情参阅 [SSH 密钥](/doc/product/213/503) 。
    iii. **自动生成密码**：自动生成的密码将通过站内信发送给您。
 - **安全组**：安全组具有防火墙的功能，用于设置云服务器 CVM 的网络访问控制。参阅 [容器服务安全组设置](/doc/product/457/9084) 。
 - **云主机数量**：选择服务器数量。
 - **自动调节**：勾选 **开启** 将自动创建最大节点数为 2 的伸缩组，当集群内节点出现异常导致集群资源不足时，将创建同等配置的按量计费的云服务器来避免集群故障。
 - **费用总计**：显示配置费用和网络费用。
![Alt text](https://main.qcloudimg.com/raw/33400238d456e6d4f06d15676452f677.png)

6. 创建完成的集群将出现在集群列表中。
![](https://main.qcloudimg.com/raw/1526bc9175686a1ae341d74ffcb0873f.png)

## 步骤 2：创建服务
您现已创建了集群，接下来就是创建服务。服务是由多个相同配置的容器和访问这些容器的规则组成的微服务。
1. 单击左侧导航栏中的【服务】，单击服务列表页的【新建】。
![](https://main.qcloudimg.com/raw/f1a031e18b65c1931b6e0bf646164802.png)
2. 基本信息设置。
 - **服务名称**：要创建的服务的名称。服务名称最长 63 个字符，只能包含小写字母、数字及分隔符(-)，且必须以小写字母开头，数字或小写字母结尾。
 - **所在地域**：建议您根据所在地理位置选择靠近的地域。
 - **运行集群**：选择服务所要运行的集群。运行集群需要选择运行中和集群内有可用服务器的集群。
 - **服务描述**：创建服务的相关信息。该信息将显示在 **服务信息** 页面。
![](https://main.qcloudimg.com/raw/aef8964cb6088e7848033850a8cd48e7.png)

3. 部署设置。

 - **设置数据卷（选填）**
要指定容器挂载至指定路径时，单击【添加数据卷】。详情查看 [使用指引](https://cloud.tencent.com/document/product/457/9112)。
>**注意：**
>源路径不指定时将默认分配临时路径。

     - 类型：支持使用本地硬盘、云硬盘、NFS 盘、配置项四种类型的数据卷。相关详细介绍请参阅 [容器服务数据卷使用说明](https://cloud.tencent.com/document/product/457/9112#.E5.AE.B9.E5.99.A8.E6.9C.8D.E5.8A.A1.E6.95.B0.E6.8D.AE.E5.8D.B7.E4.BD.BF.E7.94.A8.E8.AF.B4.E6.98.8E)。
     - 名称：数据卷的名称。
     - 路径：指定容器要挂载的路径。

 ![](https://main.qcloudimg.com/raw/6a7b65dc0d2a7ca4e532baf0e28aa7bb.png)
 
 - **设置运行容器**
     - 名称：要创建容器的名称。最长 63 个字符，只能包含小写字母、数字及分隔符(-)，且不能以分隔符开头或结尾。
     - 镜像：单击【选择镜像】，可选择在我的镜像、我的收藏、TencentHub 镜像、DockerHub 镜像和其他镜像下创建服务。
     - 镜像版本（Tag）：容器服务默认选择版本。如果您需要使用镜像的其它版本，单击版本显示框选择。
     - CPU/内存限制：Request 用于预分配资源,当集群中的节点没有 request 所要求的资源数量时,容器会创建失败。Limit 用于设置容器使用资源的最大上限,避免异常情况下节点资源消耗过多。
     - 环境变量：变量名只能包含大小写字母、数字及下划线，并且不能以数字开头。

 ![](https://main.qcloudimg.com/raw/83f89d392f38bb8bcbbe427f15960b3d.png)
 
 - **实例数量**
     - 手动调节：直接设定实例数量。一个实例由相关的一个或多个容器构成。可单击 + 或 - 控制实例数量。
     - 自动调节：满足任一设定条件，则自动调节实例（pod）数目。
 ![](https://main.qcloudimg.com/raw/10129daba44bfa7d7573c968cab8c4a4.png)

4. 访问设置。
 - **服务访问方式**：服务的访问方式决定了这个服务的网络属性，不同访问方式的服务可以提供不同网络能力。提供的四种访问方式详细介绍请参阅 [服务访问方式设置](https://cloud.tencent.com/document/product/457/9098)。
 - **端口映射**：选择 **协议**，填写 **容器端口** 和 **服务端口**。
 ![](https://main.qcloudimg.com/raw/a2384fa820dbff399a43ad9f8bf4a1f6.png)

5. 单击【创建服务】完成服务创建。创建完成的服务将出现在服务列表中。

## 步骤 3：查看资源
在上述步骤中，您创建了集群、服务。在此步骤中，您将查看您所创建的资源。
### 查看集群
1. 单击左侧导航栏中的【集群】，单击集群列表页集群的【ID/名称】。
![](https://main.qcloudimg.com/raw/bcbbf59e647fb27c7a3ddabe34f1f937.png)
2. 单击后显示以下内容。
- **节点列表** ：节点是一台已注册到集群内的云服务器。可以进行新建节点、添加已有节点、移除节点的操作。
- **Namespace 列表**：Namespace 是对一组资源和对象的抽象集合。单击【Namespace 列表】，可以对 Namespace 进行新建和删除操作。
- **伸缩组列表**：显示伸缩组列表信息。
- **集群信息**：显示了集群的基本信息。
![](https://main.qcloudimg.com/raw/1c4cc3731ff8bfd75d99a70ec78b8da4.png)

### 查看服务
1. 单击左侧导航栏中的【服务】，单击服务列表页服务的【名称】。
![](https://main.qcloudimg.com/raw/971b2c62809ab5eab4ebe760ff4c9662.png)
2. 单击后显示以下内容。
- **实例列表**：实例由相关的一个或多个容器构成。可以进行更新实例数量和销毁实例操作。
- **服务信息**：显示了服务基本信息、配置信息和端口映射信息。
- **事件**：创建服务时会跳转至此页面，显示服务创建时流水事件。
- **日志**：显示相关日志信息。
![](https://main.qcloudimg.com/raw/b3104be008721633eeb29064a7e923dd.png)

## 步骤 4：删除资源
在本教程中，您启动了两种资源：集群和服务。在此步骤中，您将清除所有的资源以免产生不必要的费用。
### 删除集群
1. 单击左侧导航栏中的【集群】，单击集群列表页面右侧【更多】下的【删除】。
![](https://main.qcloudimg.com/raw/2814955239dc0ca327aa4b1d865c4278.png)
2. 单击【确定】。
![](https://main.qcloudimg.com/raw/fd84ce3368edcfc37a65b71bf0cf04d8.png)
>**注意：**
>集群在删除期间，无法对外提供服务，请提前做好准备，以免造成影响。

### 删除服务
1. 单击左侧导航栏中的【服务】，单击服务列表右侧【更多】下的【删除】。
![](https://main.qcloudimg.com/raw/0779678a3a0c24bfd31bf3b93377d07d.png)
2. 单击【确定】。
![](https://main.qcloudimg.com/raw/3a4b0bec6291d38a52464f18b30ac01a.png)
## 更多
通过本教程，您已经了解如何在腾讯云容器服务 TKE 中配置、部署和删除服务。使用腾讯云容器服务 TKE，您将无需安装、运维、扩展您的集群管理基础设施，只需进行简单的 API 调用，便可启动和停止 Docker 应用程序，查询集群的完整状态，以及使用各种云服务。

您可以进入下一个教程，了解 [负载均衡](/doc/product/457/9110) 和 [镜像仓库](/doc/product/457/9118) 的基本概念和操作。您还可以通过 [快速入门](/doc/product/457/7851) 里的入门实例快速入门构建服务。
