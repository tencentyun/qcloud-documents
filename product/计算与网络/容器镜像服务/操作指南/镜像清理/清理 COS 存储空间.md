## 操作场景
腾讯云容器镜像服务（Tencent Container Registry，TCR）支持设置自定义规则批量清理企业版实例内的镜像版本，但在删除镜像版本后，存储在实例关联的对象存储 COS 内的镜像数据仍保留。您可以使用制品清理功能，删除对象存储 COS 内已失效的镜像版本相关数据，清理 COS 存储空间，降低存储费用。本文将介绍如何使用制品清理功能，清理 COS 存储空间。

## 注意事项

制品清理功能将会影响实例服务状态及实例内数据，请评估以下注意事项后谨慎操作：
- 在执行制品清理任务时，将无法推送镜像到镜像仓库，但仍可以从镜像仓库内拉取镜像，即实例将处于只读状态。
- 制品清理任务将清理实例内所有镜像仓库内已不再被有效镜像版本关联的镜像 Layer 数据，此删除过程不可逆，建议执行真实清理任务前，使用模拟运行评估影响范围。
- 制品清理任务的耗时与 COS 内已存储镜像数据大小，镜像历史版本数相关，且暂不支持临时中止任务，建议选在非业务时间执行清理任务，或使用模拟运行评估执行时间。

## 操作步骤
### 模拟运行清理
1. 登录 [容器镜像服务](https://console.cloud.tencent.com/tcr) 控制台，选择左侧导航栏中的**制品清理**。
2. 在“制品清理”页面即可查看当前实例内的制品清理任务列表。如需切换实例，请在页面上方的“实例名称”下拉列表中进行选择。
3. 单击**模拟运行清理**，仔细阅读相关提示。
<dx-alert infotype="notice" title="">
模拟运行制品清理将全面扫描实例内可清理的垃圾数据，并预估清理范围及清理时间，期间实例基础功能不受影响，仍可推送及拉取制品，但密集计算任务可能影响实例部分功能响应性能。
</dx-alert>
4. 单击**确定**即可执行模拟清理任务。
 
### 立即执行清理
1. 登录 [容器镜像服务](https://console.cloud.tencent.com/tcr) 控制台，选择左侧导航栏中的**制品清理**。
2. 在“制品清理”页面查看当前实例内的制品清理任务列表。如需切换实例，请在页面上方的“实例名称”下拉列表中进行选择。
3. 单击**立即执行清理**，仔细阅读相关提示。
<dx-alert infotype="notice" title="">
执行制品清理期间实例将被设置为只读模式，仍可拉取镜像，无法推送镜像。任务执行时间与实例内制品数据量及实例使用时长有关。
</dx-alert>
4. 单击**确定**即可立即执行清理任务。


