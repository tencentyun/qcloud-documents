
## 操作场景
腾讯云容器镜像服务（Tencent Container Registry，TCR）中的镜像仓库用于直接管理容器镜像，单个镜像仓库可包含不同版本的容器镜像。镜像仓库归属于命名空间，并从命名空间继承了公开、私有属性及安全扫描触发方式。

镜像仓库是 TCR 中进行权限管理的最小单位，实例管理员可授予子用户镜像仓库的管理或只读权限。例如，授权子账户 tom 仅能拉取镜像仓库 project-a-frontend 中的镜像，但无法推送或删除镜像的权限。更多权限管理及授权方式请参考 [企业版授权方案示例](https://cloud.tencent.com/document/product/1141/41417)。本文档介绍如何在 TCR 企业版实例内创建并管理镜像仓库。



## 前提条件

在创建并管理 TCR 企业版实例的镜像仓库前，您需要完成以下准备工作：
- 已成功 [创建企业版实例](https://cloud.tencent.com/document/product/1141/40716)。
- 如果使用子账号进行操作，请参考 [企业版授权方案示例](https://cloud.tencent.com/document/product/1141/41417) 提前为子账号授予对应实例的操作权限。

## 操作步骤


### 创建镜像仓库
1. 登录 [容器镜像服务](https://console.cloud.tencent.com/tcr) 控制台，选择左侧导航栏中的【镜像仓库】。
在“镜像仓库”页面即可查看当前实例内的镜像仓库列表。如需切换实例，请在页面上方的“实例名称”下拉列表中进行选择。
2. 单击【新建】，在“新建镜像仓库”窗口中，参考以下提示进行镜像仓库配置。如下图所示：
![](https://main.qcloudimg.com/raw/9c7c140240507d0b834e5c36103cadc2.png)
 - **所属实例**：当前所选实例，新建的命名空间将属于该实例。
 - **命名空间**：镜像仓库所属的命名空间，如果列表为空，请先在该实例内 [新建命名空间](https://cloud.tencent.com/document/product/1141/41803#.E6.93.8D.E4.BD.9C.E6.AD.A5.E9.AA.A4)。
 - **名称**：镜像仓库名称，长度为2 - 200个字符，只能包含小写字母、数字及分隔符（`.`、`_`、`-`、`/`），且不能以分隔符开头、结尾或连续。名称支持多级路径，例如 `team-01/front/nginx`，可根据业务需要灵活设置。
 - **镜像来源**：支持“本地推送镜像”及“平台构建镜像”，如何通过平台构建镜像请参见 [配置镜像构建](https://cloud.tencent.com/document/product/1141/45762)。
 - **简短描述**：简短描述镜像仓库信息。支持中文输入，最长为100个字符，可在创建后重新编辑。
 - **详细描述**：详细描述镜像仓库信息。支持 Markdown，最长为1000个字符，可在创建后继续编辑。
3. 单击【确定】即可创建镜像仓库。
 
### 镜像仓库相关操作
成功创建后即可在“镜像仓库”页面查看，此时您可执行以下操作对镜像仓库进行管理。如下图所示：
![](https://main.qcloudimg.com/raw/da0a7ecad3c69b5df7bb63e64908c47f.png)
-  **筛选命名空间**
在“镜像仓库”列表中选择<img src="https://main.qcloudimg.com/raw/cec7f1733d3e76d18c27b0bcbb65965b.png" style="margin: -3px 0px">进行筛选，即可在下拉列表中选择仅需要查看的命名空间。
- **查看仓库详情**
单击指定镜像仓库的名称即可进入该仓库的详情页面，可在详情页中管理镜像版本，编辑镜像仓库的基本信息。
-  **删除镜像仓库**
单击指定镜像仓库所在行右侧的【删除】即可删除该镜像仓库。为避免您误删重要数据，删除镜像仓库时需要二次确认。
>!镜像仓库被删除后，**镜像仓库内的所有容器镜像均被直接删除**。 


### 管理镜像版本
单击指定镜像仓库名称，即可进入该仓库的详情页面，默认选择【版本管理】页签。您可在此页面管理仓库内的镜像版本，并执行安全扫描，查看层信息等操作。如下图所示：
![](https://main.qcloudimg.com/raw/02373fdce067c3f10cc54d3a7293cc82.png)
- **筛选镜像版本**
在版本列表右上方搜索框中输入指定的镜像版本即可镜像搜索，支持模糊搜索。
- **获取拉取指令**
选择指定镜像版本所在行右侧的【拉取指令】即可复制该镜像版本的拉取指令。
- **执行安全扫描**
选择指定镜像版本所在行右侧的【扫描】即可主动触发安全扫描，待对应的“安全级别”属性出现扫描结果时，即可单击<img src="https://main.qcloudimg.com/raw/269b8df52ed30d1c102de61bcb5e1b6a.png" style="margin:-3px 0px">查看结果详情。
- **查看镜像层信息**
选择指定镜像仓库的所在行右侧的【层信息】即可在弹窗中查看该镜像的层信息。
- **删除镜像版本**
 选择指定镜像仓库的所在行右侧的【删除】即可删除该镜像版本。为避免您误删重要数据，删除镜像版本时需要二次确认。
 >!删除指定镜像版本可能会同时删除与其镜像 ID 相同的其他镜像版本，造成其他镜像版本不可用。

### 镜像构建
支持使用托管在 GitHub、GitLab.com、Gitee 码云 及 CODING 上的源代码进行编译构建，详情请参见 [配置镜像构建](https://cloud.tencent.com/document/product/1141/45762)。
   
### 编辑仓库信息
在镜像仓库的详情页面选择【仓库信息】页签，即可查看并编辑仓库的基本信息。如下图所示：
![](https://main.qcloudimg.com/raw/7854bca0d060431b3d6af1e35848e2e7.png)
- **编辑简短描述**
选择“简短描述”后的<img src="https://main.qcloudimg.com/raw/f6a3c9acf9c397aa917299582b7b7523.png" style="margin:-3px 0px">，即可进入编辑状态，完成修改后单击【保存】即可完成编辑。
- **编辑详细描述**
选择“详细描述”后的<img src="https://main.qcloudimg.com/raw/f6a3c9acf9c397aa917299582b7b7523.png" style="margin:-3px 0px">，即可进入编辑状态，完成修改后单击【保存】即可完成编辑。详细描述支持 Markdown 语法，保存后可查看渲染后的文本效果。
