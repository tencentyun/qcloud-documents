## 概述

实例是 API 网关中的一种资源，实例可提供处理 API 所需的公网 IP、内网 IP、公网出口、计算、存储等资源，服务必须挂载在实例下才能正常运行。

## 实例类型

- **共享实例：**共享实例是 API 网关默认提供的实例类型，采用后付费计费模式，底层机器资源由地域下的一组 API 网关用户所共享，面向业务规模较小，对性能、稳定性要求不高的个人用户。

- **专享实例：**专享实例支持共享实例的全部能力，支持预付费包年包月和按量计费两种计费模式。专享实例的底层资源由用户独享，相较于共享实例可提供更高的性能和 SLA 保证，更适合生产环境使用，面向大型客户。

<div style="background-color:#00A4FF; width: 190px; height: 35px; line-height:35px; text-align:center;"><a href="https://buy.cloud.tencent.com/apigateway_instance/buy" target="_blank"  style="color: white; font-size:16px;">点此购买专享实例</a></div>

## 实例对比

| 对比项             | 共享实例                   | 专享实例                                      |
| ------------------ | -------------------------- | --------------------------------------------- |
| 适用场景           | 业务规模较小、研发测试环境 | 大型业务、生产环境                            |
| 计费方式           | 按量计费                   | 包年包月、按量计费                            |
| 计费项             | 调用次数、外网出流量       | 实例费用、外网出流量                          |
| SLA                | 99.9%                      | 99.95% - 99.99%                               |
| 公网入口地址       | 一组用户共享               | 独享                                          |
| VPC 内网入口地址   | 一组用户共享               | 独享                                          |
| 公网出口地址       | 一组用户共享               | 独享                                          |
| 公网出口带宽       | 一组用户共享               | 独享                                          |
| 请求包体大小限制   | 16MB                       | 支持用户调节，最大 10GB（即将上线）           |
| 服务、API QPS 上限 | 500QPS                     | 2500QPS - 50000QPS                            |
| 运行环境           | 未运行在 VPC 中            | 运行在 VPC 中，天然具备和 VPC、专线打通的能力 |

> !如实际请求超过 QPS 上限较多则可能影响实例整体性能，超过 QPS 上限的请求有一定概率会被丢弃。

## 专享实例产品特性

#### 高性能、低延迟

专享实例相较于共享实例，底层资源更由用户独享，因此具备更高的性能和更低延迟，最高可支持数万 QPS，轻松应对大流量。

#### 网络互通

API 网关专享实例运行在 VPC 中，支持将客户端请求转发到部署在 VPC 内、专线 IDC 内、公网的各种服务。并且与云上常见的后端服务（云服务器 CVM、云函数 SCF、容器服务 TKE、腾讯微服务平台 TSF、负载均衡 CLB，以及用户部署在公网、内网 VPC、专线 IDC 内的服务）都进行了深度整合，提供产品化的对接方式。

#### 固定且独立的出口地址

与共享实例用户共享出口 IP 不同，API网关专享实例提供固定且独立的出口 IP，保证业务长期稳定运行。

#### 安全与高可用

API 网关专享实例的安全与高可用可体现在物理隔离、集群化、异常地址剔除等几个方面。

- 物理隔离：API 网关专享实例租户与本地域下的其他专享实例租户、共享实例租户之间完全物理隔离，实例间无数据交互，其他实例受到攻击不影响当前实例的稳定性。
- 集群化：API 网关专享实例底层资源一般有多台机器（除基础版外），单台机器出现异常不影响整体服务的可用性。
- 异常地址剔除：API 网关专享实例会动态监测后端健康情况，自动剔除后端异常地址；当配置多个后端地址时，部分地址异常不影响网关服务。
- 支持与安全产品对接：API 网关专享实例支持与腾讯云提供的安全产品（如 Web 应用防火墙 WAF、数字身份管控 IAM）对接，由专业安全服务提供安全支持。

#### 支持后端负载均衡

API 网关专享实例具备后端负载均衡能力，可对接运行在 VPC 内的多个业务节点，用户可轻松使用 API 网关将容器集群、云服务器 CVM 组的能力对外开放出来。

## 专享实例适用场景

API网关专享实例的核心优势在于超高性能、超高SLA保证、安全性，典型的适用场景如下：

#### 高并发场景：

电商秒杀、订票系统等高并发场景一般是定时触发，流量在瞬间突增，又要求客户端请求只有部分能够成功。可使用API网关专享实例+服务限流功能满足客户对高并发和限流的需要。

#### 重要线上业务：

重要线上业务一般对稳定性、安全要求较高。API 网关专享实例提供超高 SLA，可保障客户业务平稳运行。

#### 复杂网络环境：

用户的后端业务分布在公网、VPC、IDC 专线等多种复杂的网络环境中，又需要一个共同的流量出口。API 网关专享实例支持与云上的多种复杂网络环境打通，能作为这些复杂环境的统一接入层。 

## 各 region 支持专享实例情况

| 区域               | 取值         | 支持情况 |
| ------------------ | ------------ | -------- |
| 华南地区（广州）   | ap-guangzhou | 支持     |
| 华东地区（上海）   | ap-shanghai  | 支持     |
| 华北地区（北京）   | ap-beijing   | 支持     |
| 港澳台地区（香港） | ap-hongkong  | 支持     |
