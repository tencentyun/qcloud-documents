## **表格树**

### **属性介绍**

| 属性分类       | 属性名称                                                     | 属性作用                                                     |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 基本属性       | 组件ID                                                       | 组件在当前页面的唯一标识。                                   |
| 选择模式       | 组件的列表项前面可以选择增加单选或多选按钮。**无**：不显示前面的单选或多选按钮。**单选：**每一个列表项前面显示单选按钮。**多选**：每一个列表项前面显示多选按钮，表头显示全选按钮。 |                                                              |
| 显示条件       | 显示或隐藏表格树组件，支持表达式输入                         |                                                              |
| 数据属性       | 表格类型。**相同表头**：外部表格与内部表格列名相同。**不同表头**：外部表格与内部表格列名不同，内部表格列为外部表格关联字段展示列 |                                                              |
| 数据属性       | 数据源                                                       | **流程**：该表格的数据源由指定的流程返回，并且在表单渲染时触发流程执行。**数据库**：该表格树的数据源由所选对象的数据库中读取。选择指定对象后，可以设置数据筛选条件，比如展示的数据的指定字段必须包含或不包含指定值。 |
| 选择对象       | 数据源为上下文或数据库时，需选择要展示的对象。               |                                                              |
| 树形关系       | 构建上下级层级结构，例如部门组织树，集团单位→二级单位→三级单位 |                                                              |
| 选择流程       | 数据源为流程时，需选择流程以及选择流程值中要展示的对象。     |                                                              |
| 筛选条件       | ![img](https://main.qcloudimg.com/raw/89dcfac284abdde42fe99901489fdfbe.png) <br/>数据源为数据库时，可以添加指定筛选条件，只显示对应字段包含或不包含指定内容的数据项。 |                                                              |
| 设置列         | ![img](https://qcloudimg.tencent-cloud.cn/raw/8260bacf91eb81b63114586008b56f5e.png)<br/>拖动各项可以改变各列的前后顺序，点击新增列可以增加一个新的列，单击各项后方的设置按钮可以设置该列的高级设置，单机各项后方的删除按钮可以删除该列，勾选展示操作列可以增加操作列。**列名**：该列表头的显示名称。**数据源**：选择该列显示的数据。**列宽**：各列按所填数字的比例动态调整列宽，图例为100:50，即2:1。**高级设置**：渲染为超链接：该数据项会被渲染为超链接样式。点击：设定点击该数据项时触发的事件，必须在勾选“渲染为超链接”时才有效。自定义代码：自定义该数据项的代码。是否隐藏：在选“是”时，该列会被隐藏。支持排序：勾选时该列可以进行排序。默认排序字段：在最开始加载完数据后依据此字段进行排序显示，可以选择默认升序或降序。对齐方式：该数据项在本列中的对齐方式，可选择左对齐、居中对齐或右对齐。列固定：设定该列固定出现在表格的最左侧或最右侧。 |                                                              |
| 设置操作列     | **操作列**：对应操作的显示名称。**交互动作**：点击对应操作后执行的动作。**操作列高级设置**：点击防抖：防止按钮短时间多次点击，可设置点击触发间隔权限资源：权限资源开启时，应用发布后，此组件将自动生成一个权限资源项以供角色配置。按钮类型：包括主按钮、次按钮、链接按钮、错误按钮、图标按钮。显示条件：包括表达式输入以及无。 |                                                              |
| 显示序列号     | 点击可新增序号列                                             |                                                              |
| 顶部操作设置   | 显示顶部操作按钮                                             | 在表格树顶部添加按钮组件。                                   |
| 显示搜索条     | 在表格树顶部添加搜索组件，搜索样式可选择表单搜索、搜索条以及简洁搜索。表单搜索：在表格树上方插入表单搜索组件，利用不同字段进行搜索。搜索条：支持多关键字搜索。简洁搜索：支持搜索查询表格树所有内容。![img](https://qcloudimg.tencent-cloud.cn/raw/45e9f5ec8b1233fc0fadeb7ef17a9504.png) |                                                              |
| 显示下载       | 在表格树顶部显示下载按钮，可以下载表格树内容。               |                                                              |
| 显示导入       | 在表格树顶部显示导入按钮，点击导入按钮后支持EXCEL导入，包括上传Excel，数据映射导入完成三个步骤。![img](https://qcloudimg.tencent-cloud.cn/raw/11d3b6b91e068a1763d4a586990d075f.png) |                                                              |
| 显示列设置     | 在表格树顶部显示列设置按钮。用户在运行态可以点击该按钮来设置显示或隐藏指定字段。 |                                                              |
| 显示分页       | 在表格树底部显示分页。                                       |                                                              |
| 移动端适配设置 | 展示方式                                                     | 可以更改表格在移动端的展示样式。包括两种：默认列表：与PC端展示样式类似。卡片：以卡片形式展示每一条数据。 |

### **基础功能**

表格树组件用以实现在主表格下嵌套子表格并支持新增或删减子表格，表格树组件举例两个应用场景：相同表头表格树展示、不同表头表格树展示。

#### **场景一：相同表头表格树展示**

![img](https://qcloudimg.tencent-cloud.cn/raw/31dafd91933adfef22ae51d11187ef5d.png)

具体用法如下：

步骤1：

新建客户对象，客户对象中上级单位需要关联客户对象本身。

![img](https://qcloudimg.tencent-cloud.cn/raw/cf97b2121ba464e6015edbde3b3614d5.png)

步骤2：

从对象中生成页面：客户。新建“表格树页面相同表头”页面，将表格树组件拖入中间画布区，右边属性设置如图所示：表格类型默认显示相同表头；树形关系选择上级单位关联关系；筛选条件设置为上级单位为空。

![img](https://qcloudimg.tencent-cloud.cn/raw/a2eab7f7e298df914f14d014a2087887.png)
![img](https://qcloudimg.tencent-cloud.cn/raw/a36ab073baffcbba7585fa7b068c213d.png)

步骤3：

点击新增按钮，打开新增客户信息页面，默认参数选择常量，新建场景。

![img](https://qcloudimg.tencent-cloud.cn/raw/b3a7aa5e2adaee9aa22de03d36f879ff.png)

步骤4：

配置客户相关信息页面，注意：集团单位无上级单位，二级单位要选择上级单位-客户名称字段。

![img](https://qcloudimg.tencent-cloud.cn/raw/4a3ada153054f1d1b3e8415ac8ddb4b5.png)

![img](https://qcloudimg.tencent-cloud.cn/raw/006fff4cfbadcae6d87493aba8874226.png)

步骤5：

在导航设置中配置页面导航信息。

![img](https://qcloudimg.tencent-cloud.cn/raw/66b9f2082029e8fc7a2a8330eea1a7b6.png)

![img](https://qcloudimg.tencent-cloud.cn/raw/3226f50aeab851f68a0d8934eea0e7c7.png)

步骤6：

点击发布，进入运行态看下效果。当集团公司信息录入完成后，录集团下属二级单位时，可以选择上级单位为集团公司，这样表格树中展示数据为集团公司下属二级单位详情表格。

![img](https://qcloudimg.tencent-cloud.cn/raw/2158e4312738101068ce84aed144fbd1.png)

![img](https://qcloudimg.tencent-cloud.cn/raw/5fb21143d3b0c57f1e2c6fee85f35788.png)

#### **场景二：不同表头表格树展示**

![img](https://qcloudimg.tencent-cloud.cn/raw/02891bbb361c0662713006674d670cb4.png)

具体用法如下：

步骤1：

新建线索对象，线索对象需新建客户关联关系字段关联客户对象。

![img](https://qcloudimg.tencent-cloud.cn/raw/699678f6282b619c67fe9a6f64812a1f.png)

步骤2：

从对象中生成页面：对象。新建“表格树页面不同表头”页面，将表格树组件拖入中间画布区，在表格类型中选择不同表头；外层表格数据源选择客户对象，内层表格选择与客户关联的线索对象。

![img](https://qcloudimg.tencent-cloud.cn/raw/d5a3bb57f15ca9fe0b501df490d1003d.png)

步骤3：

按照场景一相同方式配置新建线索信息页面。客户展示字段要选择客户名称。

![img](https://qcloudimg.tencent-cloud.cn/raw/7b6521e49a9ffafded6fc58f0579e614.png)

![img](https://qcloudimg.tencent-cloud.cn/raw/4fa7dcd26b87415d328c20eb956f8d27.png)

步骤4：

按照场景一配置页面导航。

步骤5：

点击发布，进入运行态看下效果。当我们录入一条线索数据时，可以选择是哪个客户的线索，例如图中录入集团公司这个客户的线索，在点击提交后，客户表头的表格下可以看到线索表头中新增了线索4的线索明细数据。

![img](https://qcloudimg.tencent-cloud.cn/raw/766987f92d77c25e2e322025fd993f91.png)

![img](https://qcloudimg.tencent-cloud.cn/raw/ff348e38145795eff2bfbc49ce451e34.png)
