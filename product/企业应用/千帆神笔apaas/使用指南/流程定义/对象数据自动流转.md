以下视频为您介绍如何使用流程处理对象数据：
<div class="doc-video-mod"><iframe src="https://cloud.tencent.com/edu/learning/quick-play/3565-61851?source=gw.doc.media&withPoster=1&notip=1"></iframe></div>

## 功能介绍

对象活动节点是在流程编排中操作对象模型中的业务数据的节点。目前包括：创建记录、删除记录、更新记录、查询记录、提交入库共 5 个节点。这些对象记录的操作会持久化到对象模型的数据存储中。5 种对象节点配合其他流程节点灵活编排，能实现复杂的对象数据读写操作。
![img](https://main.qcloudimg.com/raw/b938c84806b2b35ad853e1ee41fa1a75.png)

## 创建记录

创建记录节点可以创建对象模型的一条记录。单击右侧“创建记录”将节点拖拽到流程画布中，此时右侧会展示对象节点的属性配置，包括基础属性和赋值配置。
![img](https://main.qcloudimg.com/raw/075bcaec5904bf890704e271e4b81e13.png)

### 基础配置

基础配置包括：
- 节点名称：流程节点的名称标记。
- 输出变量名称：创建记录节点除了在数据存储中会创建一条记录，还会生成一个流程变量，该变量的唯一标记在此处定义，可供流程下游节点使用。
- 选择对象：此处选择需要创建哪一种对象模型的业务数据。

### 字段赋值

1. 选择需要创建的对象类型之后，单击**设置赋值**，在弹出的设置赋值框中，可对需要创建的对象的字段进行赋值操作。
   ![img](https://main.qcloudimg.com/raw/8a845c45822c8bbad543aa0d0411e5db.png)
2. 在设置赋值弹窗中，会自动加载该对象所有的字段信息，包括：apiKey、字段名称、字段是否必填、字段类型、右值，右值支持三种类型赋值，包括：
	- 常量赋值：如 1、"abc"、0.12 等。
	- 变量赋值：流程上游节点输出的流程变量值，包括流程入参变量。
	- 系统变量赋值：目前支持“当前用户”、“当前日期”两个系统变量。
	- 表达式赋值：引用系统表达式或自定义表达式，输出对应字段类型的值。
	**例：通过表达式赋值，设置客户对象字段的值。如下图**![img](https://qcloudimg.tencent-cloud.cn/raw/e7c6d5ba42e5bb189780f0cbef9eef27.png)

3. 单击**确定**后，即字段赋值完成。
在对象赋值时：
 - 右值的类型需要和左值类型保持一致。
 - 必填为“是”的必须进行赋值，必填为“否”的可以不进行赋值。

## 更新记录

更新记录节点可以更新单条或者批量更新多条对象记录。单击右侧“更新记录”将节点拖拽到流程画布中，此时右侧会展示更新记录节点的属性配置，包括基础属性和赋值配置。
![img](https://main.qcloudimg.com/raw/6d5e446b3407f2d4165b2fe6cbc82321.png)

### 基础配置

基础配置包括：

- 节点名称：流程节点的名称标记。
- 对象记录：选择要更新的记录信息。此处可以选择对象类型的流程变量，包括流程对象或者对象列表。

### 字段赋值

1. 单击**设置赋值**，会弹出字段赋值弹窗进行字段赋值。和创建对象不同，更新记录默认不展示对象字段。需要手动选择字段，并进行右值赋值。右值支持三种类型赋值，包括：
	- 常量赋值：如 1、"abc"、0.12 等。
	- 变量赋值：流程上游节点输出的流程变量值，包括流程入参变量。
	- 系统变量赋值：目前支持“当前用户”、“当前日期”两个系统变量。
	-  表达式赋值：引用系统表达式或自定义表达式，输出对应字段类型的值，
	**例：通过表达式，设置今天为请假开始日期。如下图**
		![img](https://qcloudimg.tencent-cloud.cn/raw/bcee17abe1a26dddb6618ee004d25f00.png)
2. 单击**确定**后，即字段赋值完成。
对象赋值时：
 - 右值的类型需要和左值类型保持一致。
 - 至少设置一条更新字段。
![img](https://main.qcloudimg.com/raw/ec41a73f74d253a016d6b09555e3f767.png)

## 查询记录

查询记录节点可以查询数据存储中的业务数据。单击右侧“查询记录”将节点拖拽到流程画布中，此时右侧会展示查询记录节点的属性配置，包括基础属性和查询条件配置。
![img](https://main.qcloudimg.com/raw/e719157d6f7242a3049f003c701c62b9.png)

### 基础属性

基础配置包括：

- 节点名称：流程节点的名称标记。
- 输出变量名称：创建记录节点除了在数据存储中会创建一条记录，还会生成一个流程变量，该变量的唯一标记在此处定义，可供流程下游节点使用。
- 选择对象：此处选择需要创建哪一种对象模型的业务数据。
- 查询范围：可以选择查询其中一条记录或者查询全部记录。

### 查询条件设置

1. 单击**设置查询条件**，会弹出查询条件弹窗配置查询字段。查询条件需要设置左值字段、操作符和右值，并根据查询条件填写规则：
   设置单个查询规则，规则填写：1，如下图![img](https://qcloudimg.tencent-cloud.cn/raw/3589e7996c641bdd2e5d944e653ad1e3.png)
   设置多条查询条件时，规则填写时需通过and/or组合，例如下图：查询当"前日期创建"或"行业包括制造业且地址在广东"的客户![img](https://qcloudimg.tencent-cloud.cn/raw/70247b9840d5c45b95fb4075735d45ff.png)
	- 左值选择对象字段，查询记录默认不展示对象字段，需要手动选择字段。
	- 操作符支持等于/不等与、为空/不为空、、包含/不包含、属于/不属于等，根据字段类型不同选择对应支持的操作符。
	- 右值的选择和创建/更新记录对象类似，支持三种类型赋值，包括：
		- 常量赋值：如 1、"abc"、0.12 等。
		- 变量赋值：流程上游节点输出的流程变量值，包括流程入参变量。
		- 系统变量赋值：目前支持“当前用户”、“当前日期”两个系统变量。
2. 单击**确定**后，即字段赋值完成。
	在对象赋值时请注意：
	- 右值的类型需要和左值类型保持一致。
	- 至少需要设置一条查询字段。
3. 单击**确认**后，查询条件的配置会被保存。
例如：查询职务为"销售部经理"的所有"已激活"的用户。
   ![img](https://qcloudimg.tencent-cloud.cn/raw/65d5efac7867f05cb0f827042a613762.png)

## 删除记录

删除记录节点用来删除一条对象记录或者批量删除多条对象记录。单击右侧“删除记录”将节点拖拽到流程画布中，此时右侧会展示删除节点的属性配置，主要包括：

- 节点名称：流程节点的名称标记。
- 对象记录：选择要更新的记录信息。此处可以选择对象类型的流程变量，包括流程对象或者对象列表。
  ![img](https://main.qcloudimg.com/raw/a40c894813234133313871034f06f12c.png)

## 提交入库

提交入库节点将流程中对象类型的变量提交到对象模型数据中保存。提交入库和创建记录的区别在于，提交入库直接选择一个流程变量入库，不需要像创建记录做字段赋值操作，且支持主子表一起提交，操作起来比较简单，特别适合流程入参数据支持持久化的场景。

![img](https://qcloudimg.tencent-cloud.cn/raw/f2d91a3fb80e226a87b16f69a050c207.png)
单击右侧“提交入库”将节点拖拽到流程画布中，此时右侧会展示提交入库节点的属性配置，主要包括：

- 节点名称：流程节点的名称标记。
- 数据操作：目前仅支持新增场景，后续会开放支持更新场景。
- 对象记录：选择要新增的记录信息。此处可以选择对象类型的流程变量，包括流程对象或者对象列表。
  ![img](https://main.qcloudimg.com/raw/62486c98658f456289024f1a045a1623.png)

### 示例

**案列场景**：某用户提交一个请假申请流程，流程支持一个请假单可选择多个时间段。
**操作步骤**：

1. 进入对象建模页面，单击左侧对象列表的**+**，新建请假单、请假明细对象。![img](https://qcloudimg.tencent-cloud.cn/raw/44e07e8c5fade47208dc63b510ad2b17.png)
2. 进入页面设计页，单击左侧**创建页面**，在新建页面中单击**新建审批流程页面**，新建请假单审批提交页面。![img](https://qcloudimg.tencent-cloud.cn/raw/9f771b3d68ce608ee73c427891ac445b.png)![img](https://qcloudimg.tencent-cloud.cn/raw/3a310d15d36d97967e9df028a13dc5f7.png)
3. 将"表单"组件拖入页面中，并将数据源中选择对象设置为请假单。![img](https://qcloudimg.tencent-cloud.cn/raw/5af57410e8b769531196dadb03a40417.png)
4. 将"子表单"拖入表单组件中，并选择子表单数据源为请假明细。![img](https://qcloudimg.tencent-cloud.cn/raw/0e58ea153a12d9fffb79ac1181cf38f4.png)
5. 在流程编排页，单击左侧流程建模的**+**，新建流程名称为“请假流程”的审批流。 ![img](https://qcloudimg.tencent-cloud.cn/raw/b375e39cfbe49b1335ca793b9ec83674.png)![img](https://qcloudimg.tencent-cloud.cn/raw/dd4571f4fe16c7c6a1216aefa0d731cf.png)
6. 添加请假申请提交节点。从右侧元素栏中拖出"审批节点"至画布中，如图进行配置。该节点是审批发起人填写请假信息的节点，因此“是否为审批开始节点”项选择“是”。一个审批流中只能有一个审批开始节点。![img](https://qcloudimg.tencent-cloud.cn/raw/5f28e9e223e168cf90dc556461cd8fd5.png)设置页面输出变量，此处将提交的申请信息保存到变量 leave 中。
	 ![img](https://qcloudimg.tencent-cloud.cn/raw/c1bb4a88ae4ef40620203582b7824333.png)
7. 添加请假单提交入口节点，并选择上一节点输出变量 leave，提交入库可将流程中提交的请假单、请假明细保存至对象模型数据中。![img](https://qcloudimg.tencent-cloud.cn/raw/08491a31a477a44f4a021d5ccded8229.png)
8. 添加组长审批节点。从右侧元素栏中拖出“组长审批”至画布中，如图进行配置。该节点是审批人进行审批的节点，因此“是否为审批开始节点”项选择“否”。一个审批流中可以有多个非审批开始节点。![img](https://qcloudimg.tencent-cloud.cn/raw/52b79f71b71ce8543f2d8be7bb5dd5f2.png)设置页面输入变量，将上一节点保存的申请信息作为该节点页面的输入：
	 ![img](https://qcloudimg.tencent-cloud.cn/raw/782bb173bc1727cf4f2888347cb28863.png)

**审批流运行效果**：
1. 登录 [千帆神笔 aPaaS 运行态首页](https://apaas.cloud.tencent.com/)，进入“流程中心”，点击"发起流程"，并选择请假流程，进入请假流程申请页面，填写请假事由、开始时间、结束时间等信息 ，点击**提交审批**![img](https://qcloudimg.tencent-cloud.cn/raw/dcd6160f58720e3543f384516e647875.png)![img](https://qcloudimg.tencent-cloud.cn/raw/8448113b28c6ee1ae1f8a40df96cf6b2.png)
2. 组长进入“流程中心”页签，在“待我处理”页查看待审批流程。点击流程名称，进入流程详情页，查看请假单信息。![img](https://qcloudimg.tencent-cloud.cn/raw/8bff01993095b6498c582997298cc357.png)![img](https://qcloudimg.tencent-cloud.cn/raw/d087c48eb917ad5a77161696f5a41df2.png)
3. 单击同意、拒绝、转办、回退等按钮审批流程。



