审批流是一种包含“审批节点”的流程，用户通过审批流，可以完成多种审批场景，例如：请假、报销等。

## 路径
登录 [千帆 aPaaS 设计态首页](https://apaas.cloud.tencent.com/)，在首页单击【流程编排】新建流程，并从右侧元素栏中拖出“审批节点”至画布中。
![img](https://main.qcloudimg.com/raw/63f5e8fdea86f6260bf120f7e1aeb66d.png)        
![img](https://main.qcloudimg.com/raw/2cb2ed4feb8a23f0040bf618a3c1dd45.png)        

## 属性说明

| 属性               | 说明                                                         |
| ------------------ | ------------------------------------------------------------ |
| 节点名称           | 节点在画布中的名称。                                           |
| 是否为审批开始节点 | 通用的审批流程，基本都会存在两种页面：<br><li>发起人提交信息的提交页面（审批开始节点），例如：员工填写的请假单里信息，由员工提交。<br><li>审核人进行内容审核的页面（非审批开始节点），例如：组长看到员工的请假单信息，组长可以单击【同意】或者【拒绝】，填写审批意见。 |
| 分支               | 审批开始节点只有一个提交分支，可自行定义分支名称。           |
| 审批页面           | 下拉选择一个“审批流程页面”。                                 |
| 设置页面变量       | 可设置页面输入变量和页面输出变量。                             |
| 分支               | 非开始审批节点后会有两个分支：通过分支和拒绝分支，可自行定义分支名称。 |
| 审批任务接收人     | 指当前审批节点由谁审批，目前支持角色、用户、指定人、表达式四种类型的接收人。 |
| 审批页面           | 下拉选择一个“审批流程页面”。                                   |
| 设置页面变量       | 可设置页面输入变量和页面输出变量。<br><li>页面输入变量：从流程到页面的变量，可以将流程中的数据在页面表单里展示。<br><li>页面输出变量：从页面到流程的变量，可以将页面上的表单数据保存成流程变量。 |
| 审批策略           | 目前支持任签、会签两种策略。<br><li>任签：指只要指定的审批任务接收人只要有任何一个人审批通过或拒绝，则流程流向下一个节点。<br><li>会签：指只要指定的审批任务接收人必须都审批通过，则流程流向下一个节点。 |


## 案例介绍
### 案例场景
为某公司新建一个请假审批流程，申请人需要填写请假开始时间、请假结束时间、请假事由、请假类型等信息，主线流程为：审批人提交申请>组长审批> HR 审批>流程结束，如果请假天数小于等于3天，则不需要 HR 审批。

### 操作步骤
1. 在对象建模页面，单击左侧对象列表的【+】，新建请假信息对象。
![img](https://main.qcloudimg.com/raw/c0fa778be8812ffc94d3c899d0f71d83.png)        
2. 在页面设计页，单击左侧【创建页面】，在新建页面中单击【新建审批流程页面】。
![img](https://main.qcloudimg.com/raw/aea9ed16cfc2745f3b79538e8784ce1b.png)        
 ![img](https://main.qcloudimg.com/raw/efdfa08e04521ad3f738971e1bce3333.png)        
3. 配置请假申请页面，该页面是审批发起人填写请假信息的页面，审批按钮要选择【提交申请】。
![img](https://main.qcloudimg.com/raw/f2856fb99e349112f5017c3a4fd1d883.png)        
4. 配置请假审批页面，该页面是审批人进行审批时使用到的页面，审批按钮可选择【同意】、【驳回】、【取消】。
![img](https://main.qcloudimg.com/raw/ec9b18bfbecea1e995b6652e960afbea.png)        
5. 在流程编排页，单击左侧流程建模的【+】，新建流程名称为“请假流程”的审批流。    ![img](https://main.qcloudimg.com/raw/5b45cf4207e27f2250563c610793e5b9.png)        
 ![img](https://main.qcloudimg.com/raw/f226432a8c398b4a03d5779776739fcb.png)        
6. 添加请假申请提交节点。从右侧元素栏中拖出“提交申请”至画布中，如图进行配置。该节点是审批发起人填写请假信息的节点，因此“是否为审批开始节点”项选择“是”。一个审批流中只能有一个审批开始节点。
![img](https://main.qcloudimg.com/raw/03f255eef206e3e1fb8d92df7da3f634.png)        
 - 设置页面输出变量，此处将提交的申请信息保存到变量 approveInfo 中。
 ![img](https://main.qcloudimg.com/raw/11f0efd149f560ae2aa6adbf9d61e492.png)        
7. 添加组长审批节点。从右侧元素栏中拖出“组长审批”至画布中，如图进行配置。该节点是审批人进行审批的节点，因此“是否为审批开始节点”项选择“否”。一个审批流中可以有多个非审批开始节点。   ![img](https://main.qcloudimg.com/raw/e620a57facd5505e7a57f5889fee789c.png)        
 - 设置页面输入变量，将上一节点保存的申请信息作为该节点页面的输入：      
![img](https://main.qcloudimg.com/raw/20ee542abd62b8f67fed29bb2ed01396.png)        
 - 设置页面输出变量，将该节点提交的申请信息保存到变量 approveInfo1 中。
![img](https://main.qcloudimg.com/raw/27addb7719e93e4ae4539e53cb1b18fe.png)        
8. 添加 HR 审批节点。从右侧元素栏中拖出“HR 审批”至画布中，如图进行配置。
![img](https://main.qcloudimg.com/raw/89b61e31e29b6bb957d84b8a79ef2257.png)        
 - 设置页面输入和输出变量：
![img](https://main.qcloudimg.com/raw/51d7b564aa4cc2ff3882683a29550b8e.png)                         ![img](https://main.qcloudimg.com/raw/df10d8973b60ed4b18e2ed9bfa77a42a.png)        
9. 根据请假天数判定是否需要 HR 审批。从右侧元素栏中拖出“排他网关”至画布中，配置网关分支条件，如图所示。
![img](https://main.qcloudimg.com/raw/8a85039cf2f9e788444b599fe094253f.png)        

### 审批流运行效果
1. 登录 [千帆 aPaaS 设计态首页](https://apaas.cloud.tencent.com/)，进入“既定应用”，单击按钮触发审批流（可以通过按钮绑定一个审批流来触发），并单击【提交申请】。
![](https://main.qcloudimg.com/raw/f367efe7f0999b92e43dde8d7032a85c.png)
2. 组长进入“流程中心”页签，在“待我处理”页进行审批。如果组长审批通过，则会进入下一个审批节点，如果组长驳回，则流程结束。
![](https://main.qcloudimg.com/raw/d528916c358e1c397cde0ec3fdebfc34.png)
![](https://main.qcloudimg.com/raw/a78d189b6b7c9ae264e9046f513d29f2.png)
3. 如果请假天数大于3天，则还需要 HR 进入“流程中心”页签的“待我处理”页进行审批。
![](https://main.qcloudimg.com/raw/ba17f23eb758e8868f161a065a9eeca8.png)
![](https://main.qcloudimg.com/raw/aee4ebb5b0142fe51a09fb3cecfe3b87.png)


