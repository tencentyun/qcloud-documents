以下视频为您介绍如何配置审批流：
<div class="doc-video-mod"><iframe src="https://cloud.tencent.com/edu/learning/quick-play/3565-61850?source=gw.doc.media&withPoster=1&notip=1"></iframe></div>

## 操作场景

审批流是一种包含人工任务节点的流程，用户通过审批流，可以完成多种审批场景，例如：请假、报销等。

本文以某公司新建一个请假审批流程为例进行说明，申请人需要填写请假开始时间、请假结束时间、请假事由、请假类型等信息，主线流程为：审批人提交申请 > 组长审批 > HR 审批 > 流程结束，如果请假天数小于等于3天，则不需要 HR 审批。



## 操作步骤

### 新建审批流

1. 登录 [千帆神笔aPaaS 设计态首页](https://apaas.cloud.tencent.com/)，在首页单击**对象建模**。
2. 在对象建模页面，单击左侧对象列表的 <b>新建对象</b>，新建“请假信息”对象。
![](https://qcloudimg.tencent-cloud.cn/raw/97d29fe88ea3591a41c01aef830d4d60.png)
3. 在**页面设计**页，单击左侧**+页面**，在新建页面中单击**从对象中自动生成**。
![](https://qcloudimg.tencent-cloud.cn/raw/485459c053cb1c53327dc7c7282cfc61.png)
4. 选择对象为“请假信息”，页面类型为“审批流页面”，单击**确定**进入配置页面。
![](https://qcloudimg.tencent-cloud.cn/raw/ccfb1406869be917090170a079a7d4bf.png)
5. 请假信息页面从对象中自动生成。![img](https://qcloudimg.tencent-cloud.cn/raw/620b7bd5df650746dedf457a0fecc281.png)
6. 配置组长和HR的审批页面，该页面是审批人进行审批事使用到的页面，通过在“请假信息” 中，复制为“请假审批_组长”和“请假审批_HR”页面。
![img](https://qcloudimg.tencent-cloud.cn/raw/29c2348f76349ca841370f58b5f07392.png)
7. 在流程编排页，单击左侧**新建流程**，新建流程名称为“请假流程”的审批流。 ![img](https://qcloudimg.tencent-cloud.cn/raw/a5e8e46f051697b073a3c41e1e60183d.png)
8. 添加请假申请提交节点。从左侧元素栏中拖出"审批节点"至画布中，如图进行配置。此节点是审批发起人填写请假信息的节点，将“是否为审批开始节点”项选择“是”。一个审批流中只能有一个审批开始节点。
![](https://qcloudimg.tencent-cloud.cn/raw/678456bcbfe7124a8b3c04c09fdc0269.png)
设置页面输出变量，此处将提交的申请信息保存到变量 leave 中。
![](https://qcloudimg.tencent-cloud.cn/raw/c6864fdb989226e634b8f0b67cb6356d.png)
9. 添加组长审批节点。从左侧元素栏中拖出“组长审批”至画布中，如图进行配置。该节点是审批人进行审批的节点，因此“是否为审批开始节点”项选择“否”。一个审批流中可以有多个非审批开始节点。
![](https://qcloudimg.tencent-cloud.cn/raw/a5d3eaa248ca2dff9c6e2a56b771115a.png)
	- 设置页面输入变量，将上一节点保存的申请信息作为该节点页面的输入：
	![](https://qcloudimg.tencent-cloud.cn/raw/ac2434783b56158852dc20fac8c23b48.png)
	- 设置页面输出变量，将该节点提交的申请信息保存到变量 leave_zz 中。
	![](https://qcloudimg.tencent-cloud.cn/raw/3475ede87bcae265bfe91f9845183e35.png)
10. 添加 HR 审批节点。从左侧元素栏中拖出“HR 审批”至画布中，如图进行配置。
![](https://qcloudimg.tencent-cloud.cn/raw/9578ca3defd0716eb62ba9694921c5e9.png)
	- 设置页面输入变量：
![](https://qcloudimg.tencent-cloud.cn/raw/913783882548ff925257b4c216d76f55.png)
	- 设置页面输出变量：
![](https://qcloudimg.tencent-cloud.cn/raw/3bdd09e56ff0866adb1fa3df2102f2fb.png)
11. 根据请假天数判定是否需要 HR 审批。从右侧元素栏中拖出“排他网关”至画布中，配置网关分支条件，如图所示。![](https://qcloudimg.tencent-cloud.cn/raw/22e4066a0917c307953bdbba096d7319.png)
12. 在审批节点的高级属性中，流程支持在上一节点处理完成后，对当前节点设定的处理人中选择具体处理人。![img](https://qcloudimg.tencent-cloud.cn/raw/e173fba3c740a2b38fd1a11312c253dd.png)



### 审批流运行效果

1. 登录 [千帆神笔 aPaaS 运行态首页](https://apaas.cloud.tencent.com/)，进入“流程中心”，点击"发起流程"，并选择请假流程，进入请假流程申请页面。
![](https://qcloudimg.tencent-cloud.cn/raw/55a8b5ad88bc204dafb18454f6c55c94.png)
输入相关请假开始、结束等信息，单击**提交申请**。
![](https://qcloudimg.tencent-cloud.cn/raw/165d710ce6684e80538b7cb84b91c999.png)
2. 组长进入“流程中心”页签，在“待我处理”页进行审批。点击审批按钮（同意/拒绝）如果组长审批通过，则会进入下一个审批节点，如果组长拒绝，则流程结束，也可以点击流程进入审批详情页进行审批。
![](https://qcloudimg.tencent-cloud.cn/raw/976ed41067459b2231945d1d01017fc4.png)
可进行流程抄送、转办、回退等。
![](https://qcloudimg.tencent-cloud.cn/raw/0d11f9208823b991ac5f830e34f03cab.png)
3. 组长同意此流程后，输入流程意见时可@某位同事进行处理。
![](https://qcloudimg.tencent-cloud.cn/raw/36b575efb7f502b7930e0c389d31e1ec.png)
在上一节点处理完成后，支持选择下一节点处理人。
![](https://qcloudimg.tencent-cloud.cn/raw/08a7fb0979e343aef8b20d6497d83db9.png)
4. 如果请假天数大于 3 天，则还需要 HR 进入“流程中心”页签的“待我处理”页进行审批。
![](https://qcloudimg.tencent-cloud.cn/raw/31aac44655a3281558359980293a4d90.png)
审批记录如下：
![](https://qcloudimg.tencent-cloud.cn/raw/54cbaad253707f45756a463c165f5e2a.png)

### 审批流管理后台
1. 登录 [千帆神笔aPaaS 运行态首页](https://apaas.cloud.tencent.com/)，访问“生产环境”，点击“管理后台”，在“工作流管理”中点击“流程实例管理”，可以查看到所有流程的管理页面。对相关流程的审批进度、时间、状态和操作等，更好的管理整个审批的流程。![img](https://qcloudimg.tencent-cloud.cn/raw/6104120b15e496e84802ff863d7e36cb.png)
2. 在流程管理页面可以对相关流程进行“终止”“作废”“回退”“撤销”“转办”“跳过”等操作以及查询流转记录![img](https://qcloudimg.tencent-cloud.cn/raw/c6cd908304aacccb89929fea74685541.png)
3. 管理员有权对流程操作进行“终止”“作废”，作废后的流程通过企业微信应用文本卡片消息进行推送。流程创建者在“流程中心”查看作废详情。   
![img](https://qcloudimg.tencent-cloud.cn/raw/955697653528baf512a95f9b794cae59.png)



### 属性设置
单击各“流程管理”的属性设置，可以自定义修改流程名称、流程唯一标识以及对标题的自定义设置，同时可以通过表达式来对标题进行自定义设置。
![](https://qcloudimg.tencent-cloud.cn/raw/d7c696f74835c5b90e0073a6c87ef444.png)


#### 属性说明：

| 属性               | 说明                                                                                                                                                                                                                                                                                                                                                            |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 节点名称           | 节点在画布中的名称。                                                                                                                                                                                                                                                                                                                                            |
| 是否为审批开始节点 | 通用的审批流程，基本都会存在两种页面：<li>发起人提交信息的提交页面（审批开始节点），例如：员工填写的请假单里信息，由员工提交。</li><li>审核人进行内容审核的页面（非审批开始节点），例如：组长看到员工的请假单信息，组长可以单击**同意**或者**拒绝**，填写审批意见。</li>                                                                            |
| 分支               | 审批开始节点只有一个提交分支，可自行定义分支名称。                                                                                                                                                                                                                                                                                                              |
| 审批页面           | 下拉选择一个“审批流程页面”。                                                                                                                                                                                                                                                                                                                                    |
| 设置页面变量       | 可设置页面输入变量和页面输出变量。                                                                                                                                                                                                                                                                                                                              |
| 分支               | 非开始审批节点后会有两个分支：通过分支和拒绝分支，可自行定义分支名称。                                                                                                                                                                                                                                                                                          |
| 审批任务接收人     | 指当前审批节点由谁审批，目前支持角色、用户、变量、表达式四种类型的接收人。                                                                                                                                                                                                                                                                                    |
| 审批页面           | 下拉选择一个“审批流程页面”。                                                                                                                                                                                                                                                                                                                                    |
| 设置页面变量       | 可设置页面输入变量和页面输出变量。<li>页面输入变量：从流程到页面的变量，可以将流程中的数据在页面表单里展示。</li><li>页面输出变量：从页面到流程的变量，可以将页面上的表单数据保存成流程变量。</li>                                                                                                                                                  |
| 审批策略           | 目前支持任签、会签两种策略。<br /><li>任签：指只要指定的审批任务接收人只要有任何一个人审批通过或拒绝，则流程流向下一个节点。</li><li>会签：指只要指定的审批任务接收人必须都审批通过，则流程流向下一个节点。</li>                                                                                                                                          |
| 更多设置           | 目前支持抄送、转办、加签、撤销、回退五种设置：<li>抄送：审批人"同意"某一流程节点时，可将该审批节点抄送给其他用户。</li><li>转办：审批人可将当前审批节点转接给其他用户审批。</li><li>加签：审批人可添加当前流程节点审批人。</li><li>撤销：流程发起人可撤回未处理或未结束的流程。</li><li>回退：当前审批流程回退到上一流程节点。</li> |
| 消息设置           | 目前支持流程待办送达、流程处理结果两种消息设置<li>流程待办送达消息：流程提交或流转时，自动发送审批待办消息给流程审批人。</li><li>流程处理结果消息：流程审批结束后，自动发送审批处理结果消息给流程发起人。</li>             <li>上一节点指定处理人：上一节点处理完成，将从当前节点设定的处理人中选择具体处理人</li>                                                                                                                         |







