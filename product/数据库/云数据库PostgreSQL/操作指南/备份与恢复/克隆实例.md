如您需要进行数据恢复，可使用克隆 PostgreSQL 实例功能，从备份中快速恢复实例数据至新购的 PostgreSQL 实例。本文为您介绍如何通过云数据库 PostgreSQL 控制台实现克隆操作。

## 操作场景
云数据库 PostgreSQL 提供克隆实例功能，支持通过克隆将实例恢复到日志备份保留时间内的任意时间点，并且支持恢复到指定物理备份的备份集。克隆会先根据用户所选的时间点并通过备份数据创建一个新实例，新实例经过验证后，用户可再将数据通过 [DTS](https://cloud.tencent.com/document/product/571/8707) 数据传输服务迁回源实例，或者直接使用克隆的新实例。

### 克隆方式
- 按时间点克隆：将实例恢复到任意时间点，时间点的选择范围由您设置的日志保留时长决定。
- 按备份集克隆：将实例恢复到任一物理备份的备份集，备份集选择范围由您设置的数据备份保留时长决定。

### 新实例费用
- 新的克隆实例计费模式可根据克隆时自行选择，与购买实例保持一致。
- 新的克隆实例会在完全克隆成功后，才开始进行计费。  

## 前提条件
- 源实例状态须为**运行中**。
- 若克隆方式选择**按备份集**克隆，源实例必须已经完成物理备份，备份状态可至 [控制台](https://console.cloud.tencent.com/postgres) 的备份列表查看。
- 账户内余额须大于0。

## 注意事项
- 新克隆实例硬盘空间大小须大于要克隆的数据大小，否则可能导致克隆失败。
- 新克隆实例的数据库版本须与源实例相同。
- 对于已使用容量超过6TB的实例，请 [提交工单](https://console.cloud.tencent.com/workorder/category) 进行数据恢复。

## 操作步骤
1. 登录 [PostgreSQL 控制台](https://console.cloud.tencent.com/postgres)，在实例列表，单击实例 ID 或**操作**列的**管理**，进入实例管理页面。
2. 在实例管理页面，选择**备份恢复** > **备份列表**页， 在左上角单击**克隆**，或在需要克隆的备份**操作**列单击**克隆**。
![](https://qcloudimg.tencent-cloud.cn/raw/294d900c246eadeb86b8730ddab43e24.png)
3. 进入购买页，选择克隆实例的克隆方式和相应配置，确认无误后，单击**立即购买**。
 - 按时间点恢复：可从源数据库实例上恢复出具体到某个时间点的数据库实例，可选择的时间范围为最近7天。
 - 按备份集恢复：可从指定的备份集中恢复出新实例，备份集选择范围由您设置的数据备份保留时长所决定。
>?备份保留时长可至[控制台](https://console.cloud.tencent.com/postgres) 的备份列表查看。
>
![](https://qcloudimg.tencent-cloud.cn/raw/0f2e798629cdd4066d13155b6a0945a6.png)
4. 购买成功后，可在实例列表页查看克隆实例的详情。


## 热点问题
#### 克隆过程中是否会影响源实例的访问？
克隆过程使用原有备份集以及上传至对象存储 COS 中的日志文件进行恢复，不会影响源实例的访问。
