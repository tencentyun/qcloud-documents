### 如何选择腾讯云数据库 SQL Server 架构？
云数据库 SQL Server 架构支持单节点（原基础版）架构、双节点（原高可用版/集群版）。为保证实例的高可用性，建议您选用双节点架构（原高可用版/集群版），并采用 [跨 AZ 高可用部署](https://cloud.tencent.com/document/product/238/43221)。如果对 SA 权限的开放强依赖，可选用单节点（原基础版）。不同架构版本的区别如下：
- 双节点（原高可用版/集群版）：
 - SQLServer 2008 R2、2012、2014、2016 Enterprise/Standard 版采用数据库镜像（Database Mirroring）高可用复制方案，提供秒级自动切换，“零”数据损失的可靠性。
 - SQLServer 2017、2019 Enterprise/Standard 版，采用 AlwaysOn 技术构建高性能、高可用、高可靠、易维护的 SQL Server 集群。
- 单节点（原基础版）：单节点部署，存储和计算分离，高性能云盘三副本存储可防止数据丢失，全面开放 SA 权限。

架构版本差异性详见 [产品架构](https://cloud.tencent.com/document/product/238/3254) 及 [实例类型](https://cloud.tencent.com/document/product/238/71650)。

### 如果业务需要用到只读，该如何选择云数据库 SQL Server 的架构及版本？
如果需要只读，建议使用双节点（原高可用版/集群版） SQL Server 2017 enterprise 版或 SQL Server 2019 enterprise 版，数据同步更高效更稳定，详见 [只读实例概述](https://cloud.tencent.com/document/product/238/43227) 及 [只读实例规格](https://cloud.tencent.com/document/product/238/71653)。

### 云数据库 SQL Server 的性能怎么样？
云数据库 SQL Server 分为单节点架构（原基础版）和主备双节点架构（原高可用版/集群版）：
- 单节点架构（原基础版-高性能云盘）的 TPM 最高为132万 TPM。
- 单节点架构（原基础版-云 SSD）的 TPM 最高为138万 TPM。
- 主备双节点架构（原高可用版/集群版）的 TPM 最高为458万 TPM。

详细性能请参见 [性能测试报告](https://cloud.tencent.com/document/product/238/36296)。

[](id:ZCLNXGG)
### 云数据库 SQL Server 都支持了哪些规格？
云数据库 SQL Server 单节点（原基础版）、双节点（原高可用版/集群版）主实例规格详见 [主实例规格列表](https://cloud.tencent.com/document/product/238/71652)，只读实例的规格详见 [只读实例规格列表](https://cloud.tencent.com/document/product/238/71653)。

### 如何选择云数据库 SQL Server 规格？
云数据库 SQL Server 规格可以从容量和性能两个方面来选择，容量根据数据存储需求来定，所支持的实例规格详见 [主实例规格列表](https://cloud.tencent.com/document/product/238/71652) 和 [只读实例规格列表](https://cloud.tencent.com/document/product/238/71653)，性能请参见 [性能测试报告](https://cloud.tencent.com/document/product/238/36296)。

### 云数据库 SQL Server 支持哪些地域？
云数据库 SQL Server 所支持部署的地域及可用区，请参见 [地域和可用区](https://cloud.tencent.com/document/product/238/7520)。

### 云数据库 SQL Server 支持哪些版本？
支持的版本请参见 [引擎及版本](https://cloud.tencent.com/document/product/238/3263)。

### 云数据库 SQL Server 的版本兼容性如何？
云数据库 SQL Server 的高版本可以兼容低版本，但是低版本不能兼容高版本。如2016版可以升级或迁移到2019版，但2019版不可以降级或迁移到2016版。

### 云数据库 SQL Server 都支持哪些功能？
云数据库 SQL Server 不同系列版本的支持功能有所差异，详见 [功能概览及差异](https://cloud.tencent.com/document/product/238/71649) 及 [约束与限制](https://cloud.tencent.com/document/product/238/2021)。

### 云数据库 SQL Server 不同版本所支持的功能都有哪些差异性？
云数据库 SQL Server 各个版本所支持的功能及差异性，请参见 [功能概览及差异](https://cloud.tencent.com/document/product/238/71649)。

[](id:DSGSJK)
### 云数据库 SQL Server 实例对库的数量是否有限制？最多可建立多少个数据库？
云数据库 SQL Server 从性能上考虑，数据库数量过多会导致实例性能下降，占用 Worker Thread 等资源，同时超过数据库数量创建限制，易发生主备同步异常。建议单实例创建的数据库数量不要超过其最大限制，单实例可以承载的数据库数量跟实例 CPU 核数相关，详细的各版本对应最大数据库数量计算公式请参见 [数据库数量](https://cloud.tencent.com/document/product/238/2021#SJKSL)。

虽然用户也可以通过 SSMS 工具连接实例创建数据库，通过 SSMS 创建的库，也会自动同步到备机，但是建议不要超过各个版本的数据库数量创建限制，超过限制后易发生主备同步异常。

### 云数据库 SQL Server 是否支持实时热备？
云数据库 SQL Server 双节点（原高可用版/集群版）实例，均支持实时热备，为一主一备。

### 云数据库 SQL Server 适合哪些应用场景？
云数据库 SQL Server 适用于行业工具、移动办公、游戏、医疗、医药、传媒、互联网、物联网、零售、电商、物流、保险、证券、技术服务、汽车、旅游、金融等各类场景应用，详见 [应用场景](https://cloud.tencent.com/document/product/238/3248)。

### 云数据库 SQL Server 具备哪些高可用及容灾能力？
云数据库 SQL Server 在实例、服务器、机房、可用区、地域等不同级别的维度均做了相应的容灾能力，以此保障当自然灾害、设备故障、人为操作破坏等灾难发生时，在保证数据尽量少丢失的情况下，保持生存系统的业务不间断地运行。
备份是一切容灾建设的压舱石，也是数据高可用的最后一道防线，云数据库 SQL Server 同时也具备非常丰富的备份能力，其目的是为了系统数据完全崩溃时能够恢复数据，尽量保证业务可挽回，并且消耗时间短。
云数据库 SQL Server 提供了多样化架构的实例，保障实例的高可用性：
- 双节点（原高可用版/集群版）实例中，SQL Server 2008R2/2012/2014/2016 Enterprise 版本为主备双节点，底层部署于物理机，采用数据库镜像（Mirror）高可用复制方案，提供秒级 HA 自动切换。
- 双节点（原高可用版/集群版）实例中，SQL Server 2017/2019 Enterprise 版本为主备双节点，底层部署于物理机，采用 AlwaysOn 技术构建高性能、高可用、高可靠、易维护的 SQL Server 集群，提供秒级 HA 自动切换。
- 单节点（原基础版）为单个节点，底层部署于云服务器 CVM，存储和计算分离，底层高性能云盘三副本存储可防止数据丢失。极端情况下，万一实例挂了后，会重新拉起一个新的实例，把原实例中的数据采用数据备份及最近的一次日志备份通过备份恢复的方式自动还原进去，具体恢复时间会受数据量的大小而定，两台数据库实例的服务器通常处于同一台物理机。

在同城容灾上，提供了多可用区部署能力。同一地域内可用区与可用区之间内网是互通的，可用区之间能做到故障隔离。针对主备双节点实例，可将主备打散在同一地域的不同可用区，主可用区1主，备可用区1备，提升业务连续性，以防数据库实例发生故障或可用区中断，同时控制台可自助进行切换，验证业务健壮性，可用区内、可用区间切换对应用透明。

在异地容灾上，提供了跨地域备份能力，用于支持将备份文件存放到另一个地域存储，支持设置跨地域备份保留时间及同时设置多个备份地域。开启跨区域备份策略后，会自动将该实例的备份文件备份到目标区域。某一区域的实例故障后，可以在异地区域使用备份文件在异地恢复到新的实例，用来恢复业务。以此实现数据库恢复的高可用性，满足数据可用性及安全性、异地备份恢复、异地容灾、长期归档数据、监管等需求。

与此同时，云数据库 SQLServer 也具备非常丰富的备份能力，从而保障数据安全，防止数据丢失或损坏。包括自动备份、手动备份、数据备份、日志备份、单库备份、打包备份、实例备份、多库备份、定制备份策略、自定义7天 - 1830天的备份保留天数及自定义备份周期等。

此外我们不仅在数据层建设了完善的容灾能力，在管控层也建设了完善的容灾能力。数据库的跨区容灾，必定伴随着业务也需要跨区容灾才会有价值，而业务跨区分布式部署，则必定带来脑裂的问题。在业务管控层，我们 HA 采用3 AZ 部署，同城2 AZ，跨城1 AZ，来保障业务的稳定不间断地运行。此外真正切换时，也会判断数据库同步状态（数据库同步系统表）是否正常，以此保障误切情况。

[](id:NXCPYS)
### 云数据库 SQL Server 具有哪些产品优势？
云数据库 SQL Server 具有微软正版授权，可持续为用户提供最新的功能，避免未授权使用软件的风险。具有即开即用、稳定可靠、安全运行、弹性扩缩容等特点，同时也具备高可用架构、数据安全保障和故障秒级恢复功能，让用户能专注于应用程序的开发。
- 版本多样化：提供2种部署架构，单节点（原基础版）、双节点（原高可用版/集群版），全面保障服务的高可用性。
- 正版授权：云数据库 SQL Server 具有微软正版授权，可持续为用户提供最新功能，避免未授权使用软件的风险，让您的企业在竞争市场中更值得信赖。
- 性能卓越：全新推出的90C720GB规格，TPM 高达450万，性能和性价比再次提升超过30%，再次打破了腾讯云自身保持的行业性能记录。
- 稳定可靠：具有99.9996%的数据可靠性和99.95%的服务可用性，提供监控告警、备份恢复、数据迁移、灵活扩缩容等便捷的云上管控能力。
- 管理便捷：用户无需关心数据库的安装与维护等，只需通过腾讯云管理控制台或 SQL Server Management Studio（SSMS）即可轻松实现数据库管理、权限设置、监控报警等各项管理工作。
- 监控告警：管理控制台中可以查看连接数、请求数、磁盘 IO 、缓冲命中率等几十项重要指标，全方位监控数据库运行状况，准确了解数据库负载及系统健康状况。支持用户自定义资源阈值告警，帮助运维工程师及时发现数据库异常，从而快速响应并解决潜在的系统问题。
- 商业智能：提供集数据存储、抽取、装载、转换、可视化分析一体的 SSIS + BI 商业智能分析服务， 帮助客户全链路解决商业智能分析、高价值数据挖掘、主数据管理体系建设等场景的问题。

### 云数据库 SQL Server 与自建数据库 SQL Server 相比，具有哪些优势？
云数据库 SQL Server 与自建数据库相比，对比优势如下：
<table>
<thead><tr><th>功能</th><th>云数据库 SQLServer</th><th>自建数据库 SQL Server</th></tr></thead>
<tbody>
<tr>
<td>服务可用性</td><td>请参见 <a href="https://cloud.tencent.com/document/product/238/3252" target="_blank">服务等级协议</a>。</td><td>需自行保障，自行搭建主从复制，自建 RAID 等。</td></tr>
<tr>
<td>系统安全性</td><td>防 DDoS，及时修复各种数据库安全漏洞。数据安全符合国家和国际全套安全标准。</td><td>自行部署，价格高昂，自行修复数据库安全漏洞。安全合规不可保障，很难在短时间内符合安全要求。</td></tr>
<tr>
<td>数据库性能</td><td>高性能设备，性能卓越，TPM 可达450万，请参见 <a href="https://cloud.tencent.com/document/product/238/36296" target="_blank">性能测试报告</a>。</td><td>通用型设备，无优化调优。</td></tr>
<tr>
<td>软硬件投入</td><td>无软硬件投入，按需付费。</td><td>数据库服务器成本相对较高。</td></tr>
<tr>
<td>系统托管</td><td>无托管费用。</td><td>托管费用比较高。</td></tr>
<tr>
<td>部署扩容</td><td>即开即用，快速部署，弹性扩缩容。</td><td>需硬件采购、机房托管、部署机器等工作，需自己解决稳定性问题，构建大量的支撑模块，管理工具， 技术投入巨大，周期长。</td></tr>
<tr>
<td>资源利用率</td><td>按实际结算，弹性扩缩容，资源利用率高。</td><td>考虑峰值，资源利用率很低。</td></tr>
<tr>
<td>数据容灾</td><td>默认配置主从、备份等，支持多可用区部署、跨地域备份等
同城、异地容灾方案。</td><td>自行实现，需要寻找备份存放空间以及定期验证备份是否可恢复，要额外花费更多的金钱和时间。</td></tr>
<tr>
<td>管控服务</td><td>具备完善的实例生命周期管理，监控告警，备份恢复，实例、数据库、账号、网络、参数、日志管理等丰富的云上管控功能。</td><td>所有管控能力均需要用户自行搭建。</td></tr>
<tr>
<td>采购成本</td><td>实例价格透明，比买云服务器都划算。</td><td>除实例外需自己构建容灾、监控、管控等，这块成本完全不可控。</td></tr>
<tr>
<td>License</td><td>具有微软正版授权，可持续为用户提供最新的功能，用户无需额外购买 License。</td><td>盗版有法律风险，正版授权昂贵。</td></tr>
<tr>
<td>运维成本</td><td>无需用户自己运维，腾讯云7 * 24小时专业团队大客户优质服务保障。</td><td>需招聘专职 DBA 来维护，花费大量人力成本。</td></tr>
</tbody></table>

[](id:QYDSQL)
### 如何将数据迁移到云数据库 SQL Server？
腾讯云数据库 SQL Server 支持本地 IDC 自建、腾讯云 CVM 服务器自建、其他云厂商云服务器自建、其他云厂商的云数据库、腾讯云云数据库迁移至腾讯云数据库 SQL Server。支持 [冷备迁移](https://cloud.tencent.com/document/product/238/50267)、[使用 DTS 迁移数据](https://cloud.tencent.com/document/product/238/50268) 这两种迁移方式，您可根据业务场景选择适合业务的迁移方式。
- 如果您的业务允许停机进行备份,可采用 [冷备迁移](https://cloud.tencent.com/document/product/238/50267)，即通过 bak 备份文件进行数据恢复来将源数据库迁移到腾讯云数据库 SQL Server，支持用户通过 COS 文件或本地上传文件，来迁移数据至云数据库 SQL Server，支持全量备份文件、全量备份文件 + 日志备份、全量备份文件 + 差异备份3种恢复方式。
- 如果您的业务不允许停机，需要不停机平滑迁移，可 [使用 DTS 迁移数据](https://cloud.tencent.com/document/product/238/50268)，支持全量迁移、全量+增量迁移这两种迁移类型，支持公网、云主机自建、专线接入、VPN 接入、云联网接入、云数据库等多种接入类型。
