### 云数据库 SQL Server 如何备份?
云数据库 SQLServer 具备非常丰富的备份能力，从而保障数据安全，防止数据丢失或损坏，支持在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)  的**备份管理**页对备份进行管理与查看，包括自动备份、手动备份、数据备份、日志备份、单库备份、打包备份、实例备份、多库备份、跨地域备份、定制备份策略、自定义7天 - 1830天的备份保留天数及自定义备份周期等，详情请参见 [备份概述](https://cloud.tencent.com/document/product/238/70163)。

### 如何设置自动备份?
您可在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)  实例的**备份管理**页进行设置，详情请参见 [设置自动备份](https://cloud.tencent.com/document/product/238/70165)。

### 如何创建手动备份?
您可在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)  实例的**备份管理**页进行设置，详情请参见[ 创建手动备份](https://cloud.tencent.com/document/product/238/70156)。

### 如何查看及修改备份策略？
您可在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)  实例的**备份管理**页进行查看及修改备份策略，详情请参见 [设置自动备份](https://cloud.tencent.com/document/product/238/70165)。

### 云数据库 SQL Server 能够保存多长时间的备份？
云数据库 SQL Server 自动备份默认保留7天，支持自定义备份保留天数，有效期根据用户设置的备份天数而定，详情请参见 [设置自动备份](https://cloud.tencent.com/document/product/238/70165)。
手动备份没有手动删除时，保留时长会随自动备份的保留时长来保存。用户可根据需要进行删除，详情请参见[ 删除手动备份](https://cloud.tencent.com/document/product/238/70159)。

[](id:KYSDSCM)
### 备份可以手动删除吗？
- 自动备份无法手动删除，可设置备份保留时间，到期后会自动删除。
- 手动备份可在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver) 的备份列表手动删除，没有手动删除的前提下会随自动备份的保留时长来保留。

### 数据和日志备份是否可以关闭？
不可以关闭。但可以通过 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver) 减少备份频率和删除不再使用的手动备份数据，来降低备份空间的占用量。

### 为什么无法发起手动备份任务？
请确认下您设置的自动备份任务时间，如果实例正在进行每天的自动备份，则无法发起手动备份。

### 如何取消备份任务？
云数据库 SQL Server 的备份任务不可以取消。

### 数据库在备份时间段中是否可用？
备份窗口是用户自定义的每天自动备份的时间段，在该时间段内云数据库 SQL Server 实例将进行备份。云数据库 SQL Server 服务借助这些定期的备份，让您能够将数据库实例回档到保留期内的备份点。在备份时段期间，业务不受影响，但不能在云数据库 SQL Server 服务的管理控制台做重启、手动备份操作。

### 云数据库 SQL Server 如何备份单个数据库？
您可以登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，在实例列表，单击实例 ID，选择备份管理页，单击**备份任务配置**，将备份文件形式设置为：单库备份文件，则会将该实例每个数据库的 .bak 文件不经打包直接上传至 COS 上进行保存，详情请参见 [配置备份任务](https://cloud.tencent.com/document/product/238/70166)。

[](id:SLJXBFRW)
### 云数据库 SQL Server 如何设置在从实例进行备份任务？
您可以登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，在实例列表，单击实例 ID，选择备份管理页，单击备份任务配置，将备份任务执行选项设置为：从实例进行备份任务，则可以调整备份任务所在的执行实例，详情请参见 [配置备份任务](https://cloud.tencent.com/document/product/238/70166)，仅2017/2019集群版实例支持设置备份任务执行实例。

### 云数据库 SQL Server 的备份文件如何下载？
云数据库 SQL Server 控制台提供备份的文件列表，并可以通过内网和外网地址下载备份文件。
您可以登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，在实例列表，单击实例 ID，选择备份管理页，在备份列表，单击**下载**，获取文件的内外网下载地址，或直接单击**本地下载**来进行下载，详情请参见 [下载备份](https://cloud.tencent.com/document/product/238/7523)。

### 云数据库 SQL Server 可以通过第三方工具自行进行备份吗？
云数据库 SQL Server 不支持通过第三方工具自行备份，出于安全考虑 ，不能开放物理机的数据目录权限，用户目前只能通过控制台发起备份。

### 超出备份保留时间的备份还可以下载或还原吗？
到期后的备份集会自动删除，无法进行下载还原。
- 建议您根据需求合理设置备份保留时间，或在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver) 下载备份文件至本地。
- 您也可以在控制台通过手动备份来保存实例数据，手动备份支持手动删除，没有手动删除的前提下会随自动备份的保留时长来保留。
>?手动备份亦会占用备份空间，请合理使用备份空间，避免造成额外的费用。

[](id:YGLSLXZ)
### 已隔离的实例还可以下载备份吗？
已隔离实例还可以下载备份。
- 包年包月实例：实例到期后的7天后，即从实例到期后第8天开始，实例被隔离进入回收站，此时将禁止回档、手动备份，自动备份依然进行，可在实例操作列 > 更多，进行备份下载，该实例备份超出免费赠送空间的部分依然计费，直至实例下线。
- 按量计费实例：实例到期24个小时后，实例被隔离进入回收站，此时将禁止回档、手动备份，自动备份依然可以进行，可在实例操作列 > 更多，进行备份下载，该实例备份超出免费赠送空间的部分依然计费，直至实例下线。

### 云数据库 SQL Server 实例删除后，备份文件还会保留吗？
云数据库 SQL Server 实例删除后，对应的备份文件会随之自动全部删除，不会保留。如需保留数据，请务必确认完成数据备份后再删除实例。

### 云数据库 SQL Server 备份空间如何收费？
云数据库 SQL Server 会按地域赠送一定额度的免费备份空间，免费备份空间大小为您在对应地域下所有单节点（原基础版）、双节点（原高可用版/集群版）的主实例的存储空间之和，超出免费额度的备份空间定价，请参见 [备份空间收费说明](https://cloud.tencent.com/document/product/238/70171)。

### 超出备份空间免费额度怎么办？
当您的备份文件大小超出备份空间免费额度时，您可以增加存储空间或减少备份空间的使用量。
实例的备份文件会占用备份空间，每个云数据库 SQL Server 实例的备份空间都有一定量的免费额度，超出免费额度的备份空间使用量将会产生额外的费用。

[](id:JSBFKJKX)
### 云数据库 SQL Server 如何减少备份空间开销？
- 删除不再使用的手动备份数据（手动备份可在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver) 的实例管理页的**备份管理**页面进行删除）。 
- 降低非核心业务的数据自动备份频率（可在控制台调整备份周期和备份保留时间，一周至少备份2次）。
>?[回档功能](https://cloud.tencent.com/document/product/238/7522) 基于备份周期和备份保留天数内的数据备份 + 日志备份，缩短自动备份频率和保留天数会影响实例数据的回档时间范围，请您权衡备份配置。
>
- 缩短非核心业务的数据备份和日志备份保存时间（备份保留时间为7天已经能满足大多数场景需要）。

| 业务场景             | 备份保留时间                                                 |
| -------------------- | ------------------------------------------------------------ |
| 核心业务             | 建议7天 - 1830天                                              |
| 非核心、非数据类业务 | 建议7天                                                      |
| 归档业务             | 建议数据备份保留时间设置为7天，根据实际业务需求手动备份数据，用完及时删除 |
| 测试业务             | 建议数据备份保留时间设置为7天，根据实际业务需求手动备份数据，用完及时删除 |

### 如何查看云数据库 SQL Server 的备份空间使用情况？
您可以登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，选择**数据库备份**，查看备份空间了解您的账号下各个地域总实例的备份空间统计及备份趋势，以及单个实例的备份空间实时统计情况，详情请参见 [查看备份空间](https://cloud.tencent.com/document/product/238/70168)。

[](id:SLRHHDS)
### 云数据库 SQL Server 实例如何回档？
云数据库 SQL Server 的数据备份默认保留7天，支持自定义备份保留天数，日志备份保留天数与数据备份保留天数一致，用户可以根据所设置的备份保留时长，回档实例数据到保留时间之内的任意时刻，详情请参见 [回档数据库](https://cloud.tencent.com/document/product/238/7522)。

### 云数据库 SQL Server 实例如何克隆数据库？
云数据库 SQL Server 提供克隆数据库功能，支持一键克隆已有的数据库到本实例下，克隆时需指定新库名称，新克隆数据库的数据库账号权限等相关信息和克隆前的数据库保持一致，详情请参见 [克隆数据库](https://cloud.tencent.com/document/product/238/70913)。

### 下载后的数据备份和日志备份有什么用？
您可以使用这些备份文件随时恢复数据，可以恢复到云上的其他数据库，也可以恢复到自建数据库，详情请参见 [冷备迁移](https://cloud.tencent.com/document/product/238/50267)。

### 下载的备份能恢复到另一个云数据库 SQL Server 实例上吗？
在云数据库 SQL Server 控制台中，您可以使用冷备迁移功能通过下载的备份文件将数据库恢复到另一个 SQL Server 实例上，详情请参见 [冷备迁移](https://cloud.tencent.com/document/product/238/50267)。

### 如何将本地自建数据库备份恢复到云数据库 SQL Server 上呢 ？
在云数据库 SQL Server 控制台中，您可以采用直接上传备份文件或从 COS 下载备份文件的方式，上传备份文件，通过冷备迁移功能，将自建数据库备份恢复到云数据库 SQL Server 上，详情请参见 [冷备迁移](https://cloud.tencent.com/document/product/238/50267)。

### 云数据库 SQL Server 是否支持完全备份后恢复至自建数据库？
云数据库 SQL Server 支持完全备份，下载备份文件后，可以自行恢复至自建数据库，详情请参见 [下载备份](https://cloud.tencent.com/document/product/238/7523)。

[](id:LZBFYHQB)
### 冷备迁移中直接上传备份与从 COS 下载备份，两种备份上传方式有何区别？
- 直接上传备份：是用户将备份文件从本地上传至腾讯云的 COS，再下载至云数据库 SQL Server 中进行恢复。另外上传至腾讯云 COS 中不会占用用户的备份存储空间，但有24小时保存期间，超时则自动删除。
- 从 COS 下载备份：是将备份文件从用户自己的 COS 中下载至云数据库 SQL Server 中进行恢复。

### 冷备迁移中通过直接上传备份方式上传备份文件，上传的备份文件会占用用户自己的备份存储空间吗？
备份恢复场景中上传的备份文件，是直接上传至腾讯云 COS 进行中转，不会占用用户自己的备份存储空间，上传成功后文件将保存24小时，超时则自动删除。
