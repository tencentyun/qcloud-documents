慢查询日志是用来记录在 SQL Server 中执行时间超过指定时间的查询语句。通过慢查询日志，可以查找出哪些查询语句的执行效率低，以便进行优化。通常，SQL Server 慢查询日志是排查问题的 SQL 语句，以及检查当前 SQL Server 性能的一个重要功能。
本文为您介绍通过控制台查询和下载慢查询日志。

## SQL Server 慢查询相关说明
- 慢查询日志默认开启采集，不支持关闭。
- 慢查询采集阈值默认为1秒(1秒=1000毫秒)，超过1秒的执行 SQL 会被记录为慢查询日志。
- 慢查询日志文件默认每5分钟采集一次，即每5分钟内，超过1秒的执行 SQL 均会被记录。
- 慢查询日志保留时间默认为7天，到期后自动删除。

## 操作步骤
1. 登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)。
2. 在上方选择地域，找到需要查询或下载慢查询日志的实例，单击实例 ID 或在其**操作**列单击**管理**，进入实例管理页。
![](https://qcloudimg.tencent-cloud.cn/raw/b25aeb5532333fb82bd0a7a717f77085.png)
3. 在实例管理页，选择**操作日志** > **慢查询日志**，可以查看慢查询日志列表。
 - 支持查看的字段信息为：文件名、文件生成开始时间、文件生成结束时间、文件大小、操作（下载）。
 - 支持根据时间范围检索慢日志：近5分钟、近15分钟、近半小时、近1小时、近3小时、近24小时、今天、昨天、近3天、近7天、近30天以及自定义时间段。
![](https://qcloudimg.tencent-cloud.cn/raw/4e83f9fd25cb075e6ac3b68222d8d4fe.png)
4. 在**操作**列单击**下载**，即可下载慢查询日志文件。
