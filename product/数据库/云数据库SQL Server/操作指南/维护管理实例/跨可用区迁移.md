## 操作场景
跨可用区迁移用于将实例迁移至同一地域内的其它可用区。迁移可用区后，实例的所有属性、配置、内网地址、子网都不会改变。迁移所需时间跟实例的数据量有关，且数据量越大，数据迁移时间越长，期间实例访问不受影响。

## 支持实例类型
- 支持高可用版、集群版主实例。
>?如果高可用版、集群版主实例开通了 RO 副本或发布订阅，则需 [提交工单](https://console.cloud.tencent.com/workorder/category) 申请才能使用跨可用区迁移。
- 不支持基础版实例。
- 不支持 RO 实例。

## 前提条件
实例迁移的前提条件为实例所在的地域有多个可用区。

## 迁移影响
- 迁移过程中，不允许取消本次迁移操作。
- 迁移前后实例的名称、访问 IP、访问端口均不发生变化。
- 迁移过程中，会涉及到数据的搬迁，期间 SQL Server 实例可正常访问，业务不受影响。
- 迁移所需时间跟实例的数据量有关，且数据量越大，数据迁移时间越长。
- 迁移完成后，会涉及实例切换，将按指定切换时间进行切换，切换时会发生秒级数据库连接闪断。

## 操作步骤
### 跨可用区迁移
1. 登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，在实例列表，单击实例 ID 或**操作**列的**管理**，进入实例详情页面。
2. 在实例详情页面的**基本信息**栏中，单击**跨可用区迁移**，进入跨可用区迁移页面。
![](https://main.qcloudimg.com/raw/f0926dae66b2577e55ce6e89c403ecbc.png)
3. 在跨可用区迁移页面中，可以查看实例当前的可用区信息，选择目标可用区、是否多可用区部署、切换时间，勾选跨可用区迁移规则，单击**提交**。
>?单击**提交**后，底层开始搬迁数据到目标可用区，该过程不影响实例运行及访问。
>搬迁完成后，将按指定的切换时间（**在迁移完成时切换**或**在维护时间内切换**）进行切换，切换时会发生秒级数据库连接闪断，至此完成跨可用区迁移。
>
![](https://main.qcloudimg.com/raw/070694f73b787e42577ac2e6a2148882.png)

### 查看迁移任务
您可以通过**数据库管理**页右上角的**当前任务**，查看跨可用区迁移任务。
<img src="https://main.qcloudimg.com/raw/96769d19d1864b611a01f56a87693d47.png" style="zoom:50%;" />

### 立即切换
若某迁移任务选择在维护时间内切换，但因特殊情况需在未到维护时间内做切换，可在 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，单击**操作**列的**立即切换**进行立即切换。

