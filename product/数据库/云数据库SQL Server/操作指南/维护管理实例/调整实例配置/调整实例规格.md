本文为您介绍通过云数据库 SQL Server控制台调整实例规格的操作方法。

## 实例规格
云数据库 SQL Server 支持的实例规格及价格详细可参见 [产品规格](https://cloud.tencent.com/document/product/238/8294)。

## 前提条件
云数据库 SQL Server 实例及其所关联的实例处于正常状态下（运行中），并且当前没有任务执行时才能够发起调整配置操作。

## 规格变配流程
**规格扩容场景**
用户在控制台进行配置调整后，系统会判定通过原地扩缩容或者数据迁移的方式来完成变更，变配流程如下：
![](https://qcloudimg.tencent-cloud.cn/raw/5dcfff69e85bb1025fc4d1727434d1db.png)

## 变配影响说明
### 单项变配说明
单项变配指规格和磁盘仅调整一个，变配的影响：
<table>
<tbody>
<tr><th width=12%>版本</th><th width=12%>变配项</th><th width=12%>变配判断</th><th>变配影响</th><th width=19%>时间</th></tr>
<tr>
<td rowspan="1">基础版</td>
<td>规格扩容<br>或<br>磁盘扩容<br>或<br>规格缩容</td><td>原地升降级</td><td>1. 实例在调整配置过程中，会重启实例。<br>2. 会出现3分钟左右的服务不可用状态。<br>3. 请在业务允许的低峰期进行操作。</td><td>需要选择生效时间</td></tr>        
<tr>
<td rowspan="4">高可用版/集群版</td>
<td>磁盘缩容</td><td>原地降级</td><td>1. 实例在调整配置过程中，将进行原地缩容。<br>2. 期间不会进行数据迁移和实例重启，不会发生闪断。<br>3. 提交即时生效，不会对业务造成影响。</td><td>提交立即变配</td></tr>
<tr>
<td>规格缩容</td><td>原地降级</td><td>1. 实例在调整配置过程中会，将进行原地缩容。<br>2. 会出现1分钟左右的服务不可用状态。<br>3. 请在业务允许的低峰期进行操作。</td><td>需要选择生效时间</td></tr>
<tr>
<td>规格扩容<br>或<br>磁盘扩容</td><td>迁移升级</td><td>1. 实例在调整配置过程中，将进行迁移扩容，且数据量越大，数据迁移时间越长，期间实例访问不受影响。<br>2. 迁移完成后会进行切换，切换时会发生秒级数据库连接闪断，请确保业务具备重连机制。<br>3. 闪断过程中，与数据库、帐号、网络等相关的大部分操作将无法执行，请保证在业务低峰期进行切换操作。</td><td>需要选择生效时间</td></tr>
<tr>
<td>规格扩容<br>或<br>磁盘扩容</td><td>原地升级</td><td>1. 实例在调整配置过程中，将进行原地扩容。<br>2. 期间不会进行数据迁移和实例重启，不会发生闪断。<br>3. 提交即时生效，不会对业务造成影响。</td><td>提交立即变配</td></tr>
</tbody></table>

### 组合变配说明
组合变配指规格和磁盘同时调整，变配的影响：
<table>
<tbody>
<tr><th width=12%>版本</th><th width=12%>变配项</th><th width=12%>变配判断</th><th>变配影响</th><th width=19%>时间</th></tr>
<tr>
<td rowspan="1">基础版</td>
<td>规格扩容<br>磁盘扩容<br>规格缩容</td><td>原地升降级</td><td>1. 实例在调整配置过程中，会重启实例。<br>2. 会出现3分钟左右的服务不可用状态。<br>3. 请在业务允许的低峰期进行操作。</td><td>需要选择生效时间</td></tr>        
<tr>
<td rowspan="6">高可用版/集群版</td>
<td>规格扩容+磁盘扩容</td><td>原地升级</td><td>1. 实例在调整配置过程中，将进行原地扩容。<br>2. 期间不会进行数据迁移和实例重启，不会发生闪断。<br>3. 提交即时生效，不会对业务造成影响。</td><td>提交立即变配</td></tr>
<tr>
<td>规格扩容+磁盘扩容</td><td>迁移升级</td><td>1. 实例在调整配置过程中，将进行迁移扩容，且数据量越大，数据迁移时间越长，期间实例访问不受影响。<br>2. 迁移完成后会进行切换，切换时会发生秒级数据库连接闪断，请确保业务具备重连机制。<br>3. 闪断过程中，与数据库、帐号、网络等相关的大部分操作将无法执行，请保证在业务低峰期进行切换操作。</td><td>需要选择生效时间</td></tr>
<tr>
<td>规格扩容+磁盘缩容</td><td>原地升降级</td><td>1. 实例在调整配置过程中，将进行原地扩容。<br>2. 期间不会进行数据迁移和实例重启，不会发生闪断。<br>3. 提交即时生效，不会对业务造成影响。</td><td>提交立即变配</td></tr>
<tr>
<td>规格扩容+磁盘缩容</td><td>迁移升降级</td><td>1. 实例在调整配置过程中，将进行迁移扩容，且数据量越大，数据迁移时间越长，期间实例访问不受影响。<br>2. 迁移完成后会进行切换，切换时会发生秒级数据库连接闪断，请确保业务具备重连机制。<br>3. 闪断过程中，与数据库、帐号、网络等相关的大部分操作将无法执行，请保证在业务低峰期进行切换操作。</td><td>需要选择生效时间</td></tr>
</tr>
<td>规格缩容+磁盘扩容</td><td>可能原地升降级，可能迁移升降级</td><td>1. 实例在调整配置过程中，可能会出现1分钟左右的服务不可用状态，可能会进行迁移扩容，且数据量越大，数据迁移时间越长，期间实例访问不受影响。<br>2. 迁移完成后会进行切换，切换时会发生秒级数据库连接闪断，请确保业务具备重连机制。<br>3. 闪断过程中，与数据库、帐号、网络等相关的大部分操作将无法执行，请保证在业务低峰期进行切换操作。</td><td>需要选择生效时间</td></tr>
</tr>
<td>规格缩容+磁盘缩容</td><td>原地降级</td><td>1. 实例在调整配置过程中会，将进行原地缩容。<br>2. 会出现1分钟左右的服务不可用状态。<br>3. 请在业务允许的低峰期进行操作。</td><td>需要选择生效时间</td></tr>
</tbody></table>

## 操作步骤
1. 登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，选择实例所在地域，在实例列表找到对应实例，在其**操作**列单击**配置调整**。
![](https://qcloudimg.tencent-cloud.cn/raw/0af75c9bde19fc2b66d239ea8bd8951a.png)
2. 在弹出的配置调整窗口，在变更规格，硬盘容量选项，选择需要变更的 CPU/内存、磁盘容量，检查设置无误后,单击**确认**。
>?
>- 选择变更配置的**生效时间**并勾选橙色提示。
>  - 维护时间内：在实例详情页可修改维护时间。
>  - 立即调整：立即执行变配。
>- 如涉及磁盘缩容，为了避免缩容失败，实例缩容后的磁盘空间要求大于等于当前已使用磁盘空间的2倍。
>- 若待规格调整的实例有关联其他实例（只读实例）且涉及数据迁移，请 [提交工单](https://console.cloud.tencent.com/workorder/category) 联系我们。
>
![](https://qcloudimg.tencent-cloud.cn/raw/86cf1d26426833592927d45ec757676a.png)
3. 在跳转的支付窗口，确认配置信息和费用，单击**提交订单**。
4. 返回实例列表，待实例状态由**实例配置调整调整中**变为**运行中**，即完成规格升级，可在**实例列表**或**实例详情页**查询和确认该实例的新规格配置。


