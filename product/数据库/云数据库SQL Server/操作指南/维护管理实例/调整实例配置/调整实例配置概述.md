云数据库 SQL Server 支持通过控制台快捷调整实例架构、版本、规格等，提供灵活的扩缩容操作。您可根据业务所处的实际情况（业务初期、业务快速发展期、业务高峰期、业务低谷期等）灵活的调整 SQL Server 实例的配置，从而更好地满足资源充分利用和成本实时优化等需求。

## 前提条件
云数据库 SQL Server 实例及其所关联的实例处于正常状态下（运行中），并且当前没有任务执行时才能够发起调整配置操作。

## 变更项
| 变更项 | 说明 |
|---------|---------|
| 架构 | a. 支持高可用版升级为集群版。<br>b. 基础版暂时不支持升级为高可用/集群版，如有业务需要，可新购高可用/集群实例后，通过 [DTS 迁移数据](https://cloud.tencent.com/document/product/238/50268)。|
| 版本 | a. 高可用版支持版本升级。<br>b. 关联有只读实例的高可用/集群的版本升级，需 [提交工单](https://console.cloud.tencent.com/workorder/category)。 |
| 实例规格 | a. 所有实例类型均支持变更规格，包括规格扩容和规格缩容。<br>b. 对应规格下硬盘容量上限以控制台**调整配置**界面为准。 |
| 硬盘容量 | a. 高可用/集群版支持磁盘扩容及磁盘缩容。<br/>b. 基础版支持磁盘扩容，不支持磁盘缩容。 |

>?如您需要横向扩展数据库的读取能力，请参见 [管理只读实例](https://cloud.tencent.com/document/product/238/43231)，通过只读实例来分担主实例的压力。

## 升降级限制
| 实例类型 | 版本升级 | 架构升级 | 规格扩容 | 磁盘扩容 | 版本降级 | 架构降级 | 规格缩容 | 磁盘缩容 |
|---------|---------|---------|---------|---------|---------|---------|---------|---------|
| 基础版实例 | X | X |   &#10003; |  &#10003; | X  | X  |  &#10003;  | X  |
| 高可用版实例 |  &#10003; |  &#10003; |  &#10003; |  &#10003; | X  | X  |  &#10003;  |  &#10003;  |
| 集群版实例 | X | X |   &#10003; |   &#10003; | X  | X  |  &#10003;  | &#10003;  |
| 只读实例 | X| X |   &#10003; |  &#10003; | X  | X  |  &#10003;  |  &#10003;  |

## 实例硬盘超限说明
- 为保障您业务正常进行，当硬盘空间快要满时，请及时升级数据库实例规格或者购买硬盘空间。
- 高可用版/集群版实例，实例存储数据量超过实例所购买的磁盘空间，将无法进行数据库导入，回档等功能，需扩容或在控制台删除部分数据库表释放存储空间。
- 基础版实例，实例存储数据量超过实例所购买的磁盘空间后，数据库将进入只读状态，只能读取，不能写入。进行扩容或在控制台删除部分数据库表释放存储空间，即可立即恢复读写。

## 调整配置规则
- 调整配置过程中，不允许取消本次调整配置操作。
- 调整配置前后实例的名称、访问 IP、访问端口均不发生变化。
- 调整配置过程中，可能会涉及到数据的搬迁，期间 SQL Server 实例可正常访问，业务不受影响。
- 调整配置完毕时可能会涉及实例切换（即秒级 SQL Server 数据库连接断开），建议程序有自动重连功能，切换会在实例可维护时间内做切换，请参见 [设置实例维护时间](https://cloud.tencent.com/document/product/238/43218)。

## 注意事项
由于基础版只有一个数据库节点，没有备节点作为热备份，因此当该节点意外宕机或者执行变更配置、版本升级等任务时，会出现较长时间的不可用。如果业务对数据库的可用性要求较高，不建议使用基础版，可选择高可用或集群版。

## 计费规则
请参见 [调整实例费用说明](https://cloud.tencent.com/document/product/238/43212)。

## 操作步骤
- [调整实例架构](https://cloud.tencent.com/document/product/238/67861)
- [调整实例版本](https://cloud.tencent.com/document/product/238/67862)
- [调整实例规格](https://cloud.tencent.com/document/product/238/67863)
