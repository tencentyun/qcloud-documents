## 操作场景
云数据库 SQL Server 支持用户通过 COS 文件来进行数据迁移。
>!
>- 迁移之前需保证目的实例的 SQL Server 版本不低于源实例的版本。
>- 迁移的 bak 文件需保证每个 bak 文件只包含一个库。
>- 迁移库不能与云 SQL Server 库有库名重复的情况。

## 操作步骤
### 上传备份至 COS
1. 登录 [COS 控制台](https://console.cloud.tencent.com/cos)，选择“存储桶列表”，单击【创建Bucket】。
3. 在弹出的创建界面，配置对应信息，单击【确定】。
>!
>- Bucket 的地域需要和迁移目标的 SQLServer 实例的地域相同。
>- Cos 迁移不支持跨地域。
3. 返回存储桶列表，选择对应的存储桶，在“操作”列单击【文件列表】。
4. 在文件列表页，单击【上传文件】，可以选择单个或多个文件上传。
5. 文件上传完后，可在“操作”列单击【文件信息】，查看获取“原文件链接”。

### 通过 COS 源文件迁移数据
1. 登录 [SQL Server 控制台](https://console.cloud.tencent.com/sqlserver)，在左侧栏选择“数据传输”。
2. 单击【创建任务】，创建新的离线迁移任务。
  - 任务名称：用户自定义。
  - 源实例类型：选择“SQL Server 备份还原(COS方式)”。
  - COS 原文件链接：上传源文件到 COS 后可查看文件信息，获取 COS 原文件链接。
  - 目标库类型和目标库地域：根据源库的配置由系统自动生成。
  - 实例 ID：选择需要迁入的实例，只能选择同一地域下的实例。
>!源库信息的“地域”必须和 COS 源文件连接的地域相同。

![](https://main.qcloudimg.com/raw/5c884d7ede2c8a38f538108b38a100ec.png)
3. 配置完成后，单击【下一步】。
4. “选择类型”和“数据库设置”目前支持调整，单击【创建任务】。
5. 返回任务列表，此时任务状态为“初始化”，选择并单击【启动】同步任务。
6. 数据同步完成后，需要手动单击【完成】，同步进程才会结束，根据“状态”查看迁移是否成功。
 - 任务状态变为“任务成功”时，表示数据迁移成功。
 - 任务状态变为“任务失败”时，表示数据迁移失败，请查看失败信息，并根据失败信息修正后重新迁移。

