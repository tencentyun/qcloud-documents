## 数据迁移
**注：**

**1、在迁移之前请保证源实例的版本和目的实例的SQL Server版本一致**

**2、迁移的bak文件请保证每个bak文件只包含一个库**

**3、迁移库不能与云SQL Server库有库名重复的情况**

为提高迁移效率，现网业务大数据量迁移建议采用离线迁移+在线热迁移两种方式；
离线迁移可以把99%的数据快速安全的迁移到腾讯云内网。另外，出于安全考虑，云数据库服务器通常不建议直接暴露在公网（即使开启外网IP也会存在限速），所以也需要通过离线迁移+在线热迁移两种方式。
### 迁移前准备
1、“管理中心>云数据库>SQL Server”创建需要导入的数据库，并赋与账号“读写”权限；

2、下载“[Windows客户端上传工具](https://mc.qcloudimg.com/static/archive/ef1dec9f9a72cbafdc707915475a368e/upload.zip)”；

3、准备需要离线迁移至腾讯云的数据备份文件；

### 迁移步骤
1、将已准备好的数据备份文件通过“Windows客户端上传工具”上传至腾讯云提供的免费中转存储中（[如何使用上传工具](https://www.qcloud.com/doc/product/238/6412)）；

2、数据库实例页面左侧导航栏中选择“SQLServer>数据传输>创建任务”；
![](https://mc.qcloudimg.com/static/img/7b0b5cadaa2df742364316302df429e2/1.png)

3、创建新的离线迁移任务。任务名称由用户自定义，源实例类型选择“SQLServer备份还原”，源库地域请选择在使用“Windows客户端上传工具”上传备份文件时所指定的地域（通常与目标库地域保持一致），目标库类型和目标库地域会根据源库的配置由系统自动生成，最后在实例ID下拉列表中选择需要迁入的实例；
![](https://mc.qcloudimg.com/static/img/ff4798508e2156b7824d9a69e694155d/2.png)

4、任务创建完毕后，页面跳转到任务列表，选择并启动任务；
![](https://mc.qcloudimg.com/static/img/3e68d2d9ccdbded799a94c5a2d61d0f4/5.png)

5、查看同步状态，当状态变为“同步成功”时，整个离线迁移过程结束，数据迁移成功。若状态变为“同步失败”，请查看失败信息，并根据失败信息修正后重新迁移；
