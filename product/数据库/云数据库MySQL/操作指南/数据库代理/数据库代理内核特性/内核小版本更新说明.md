
本文为您介绍云数据库 MySQL 数据库代理的版本更新说明。

## 查看数据库代理版本
您可通过实例的 [数据库代理](https://cloud.tencent.com/document/product/236/54653) 页的**概览** > **代理版本**处查看。
![](https://qcloudimg.tencent-cloud.cn/raw/1fbde8e165ed1d8381fcfbfc391e6063.png)

## 版本升级说明
| 版本 | 说明 | 
|---------|---------|
| 1.1.3 | **功能更新**<br>支持了在 MySQL 预处理的 COM_PREPARE 报文中使用 hint 路由信息，现在在 PREPARE 中使用 hint 指定路由目标后，后续的 execute 报文将会发送到指定的后端节点上。<br>**问题修复**<br>1. 数据库代理上的主实例进行主从切换后，前端连接立即重置。<br>2. 修复了只读实例超过延迟阈值后负载均衡可能失效的问题。现在当只读实例延迟回落到阈值以内后，路由会正常恢复。<br>3. 修复了对于 MySQL  8.0可能返回错误握手信息导致建连失败的问题。| 
| 1.1.2 | **功能更新**<br>1. 支持 MySQL 8.0 版本。<br>2. 支持连接级连接池功能，应对短连接业务下，频繁和数据库建立连接的场景。数据库代理会将连接进行保存，在下一次建连时复用连接。<br>3. 支持了只读实例的重连功能。长连接场景下，当只读实例发生重启，或者添加了新的只读实例，数据库代理将自动重新对只读实例建连恢复路由。<br>4. 更新了内部内存管理机制，新版本将会有更低的内存消耗。<br>**问题修复**<br>1. 修复了后端连接超时断开后，客户端连接仍未断开的问题。<br>2. 修复了内部缓存可能会导致内存过快增长的问题。<br>3. 修复了小概率情况下可能会返回格式不正确报文的问题。| 
| 1.0.1 | **功能更新**<br>1. 支持 MySQL 5.7 版本。<br>2. 支持读写分离。<br>3. 支持读写分离下的读权重配置。<br>4. 支持主从复制延迟阈值设置，只读实例延迟达到阈值以上后将从路由中剔除，延迟回落到阈值以下后恢复路由。如果主从复制中断则直接剔除中断的只读实例。<br>5. 支持最小保留数设置，当发生只读实例剔除时，如果设置了最小保留数为 n，则至少会保留 n 个只读实例在路由里。<br>6. 支持故障转移设置，默认开启。如果故障转移关闭，且主实例读权重为0，则所有只读实例均剔除后，读请求会报错。如果故障转移开启，或主库权重不为0，则会将请求路由到主实例。<br>7. 支持 hint 语法指定路由节点。| 
