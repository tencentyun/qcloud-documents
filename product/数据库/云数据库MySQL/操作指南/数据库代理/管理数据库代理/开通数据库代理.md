
本文为您介绍如何通过云数据库 MySQL 控制台开启数据库代理。

[数据库代理](https://cloud.tencent.com/document/product/236/54652) 是位于云数据库服务和应用服务之间的网络代理服务，用于代理应用服务访问数据库时的所有请求。数据库代理提供自动读写分离、连接池、连接保持等高级功能，具有高可用、高性能、可运维、简单易用等特点。

## 前提条件
- 实例状态为运行中，且实例为双节点或三节点架构。
- 实例部署方式为单可用区。

## 注意事项
- 数据库代理目前支持的地域：
  - 北京（除一、二、四区）、上海（除一区）、广州（除一、二区）、上海金融（除一、二区）、北京金融、成都、重庆、南京、香港（除一区）。
  - 东京（除一区）、曼谷（除一区）、弗吉利亚（除一区）、硅谷（除一区）、孟买（除一区）、首尔（除一区）、新加坡（除一、二区）。
- 数据库代理目前支持的版本：双节点、三节点 MySQL 5.7（内核小版本须20201230及以上），双节点、三节点 MySQL 8.0（内核小版本须20211130及以上），升级主实例内核小版本会同时升级所关联的只读实例和灾备实例，请参见 [升级内核小版本](https://cloud.tencent.com/document/product/236/45522)。

## 操作步骤
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在实例列表，选择需要开启代理的主实例，单击实例 ID 或**操作**列的**管理**，进入实例管理页面。
2. 在实例管理页面，选择**数据库代理**页，单击**立即开启**。
![](https://main.qcloudimg.com/raw/9ba629a02b689fcd3edba09b8578635d.png)
3. 在弹出的对话框，选择规格节点，单击**确定**，然后刷新页面。
    - 网络类型：仅支持私有网络 VPC，默认与主实例保持一致。
    - 代理规格：2核4000MB内存、4核8000MB内存、8核16000MB内存。
    - 节点个数：代理节点个数，推荐代理个数为：主实例和只读实例 CPU 核数之和的 1/8（向上取整），例如主实例为4核 CPU，只读实例为8核 CPU，则推荐代理数量 = (4 + 8 ) / 8 ≈ 2
    - 连接池状态：连接池详细介绍请参见 [连接池概述](https://cloud.tencent.com/document/product/236/68182)。
    - 安全组：是重要的网络安全隔离手段，可根据需要选择已有安全组或新建安全组。
<img src="https://qcloudimg.tencent-cloud.cn/raw/da0eb4b07cddf363f9b8e096d81edde2.png"  style="zoom:90%;"> 
4. 开通成功后，可在数据库代理页查看基本信息，管理代理节点，也可在连接地址项对数据库代理地址、网络类型修改和添加备注。
>?
>- 您可通过查看代理节点列表的**连接数**或查看各代理节点的性能监控，来判断各节点是否出现访问不均衡现象。若出现各代理节点连接数不均衡的现象，可单击**重新负载均衡**打散连接。
>- 重新负载均衡会触发代理节点重启，重启过程中会有短暂服务不可用现象，建议在低峰期重启服务，请确保业务具备重连机制。
>
![](https://qcloudimg.tencent-cloud.cn/raw/bfd80748290599022c21ae0fe38fe7fb.png)

