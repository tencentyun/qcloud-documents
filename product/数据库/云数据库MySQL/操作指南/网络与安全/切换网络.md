## 操作场景
腾讯云网络分为 [基础网络和私有网络 VPC](https://cloud.tencent.com/document/product/215/20083)，给用户带来不同的优质服务。在此基础之上，我们提供如下更灵活的服务，方便您管理网络。
- **网络间切换**
  - 基础网络切换为私有网络：支持单台云数据库主实例的基础网络切换至私有网络。
  - 私有网络 A 切换为私有网络 B：支持单台云数据库主实例的私有网络 A 切换至私有网络 B。
- **设置自定义 IP 端口**
 - 自定义主实例 IP：支持在实例详情页自定义主实例 IP 和端口。
 - 自定义只读实例 IP：支持在实例详情页自定义只读实例 IP 和端口。

## 注意事项
- 将基础网络切换为私有网络后，仅相同私有网络下客户端可以互通。可以通过 [配置](https://cloud.tencent.com/document/product/215/36515) 私有网络网段，将私有网络 IP 保持与基础网络 IP 地址不变。
- 旧 IP 地址保留时间默认为24小时，最长保留时间支持168小时，若旧 IP 地址的回收时间设置为0小时，更换网络后会立即回收旧 IP 地址。
- 基础网络切换私有网络后不可逆，云数据库切换至私有网络后与其他私有网络及基础网络的云服务不互通。
- 若切换的云数据库为主实例，有挂载只读实例或灾备实例，当主实例切换网络后，挂载的只读实例或灾备实例不会随主实例自动切换网络，需手动进行网络切换。

## 子网说明
- 子网是私有网络的一个网络空间，为逻辑概念，同一私有网络下可以创建不同可用区的子网，同一私有网络下不同可用区的子网默认可以内网互通。
- 选择网络后，子网默认展示为所选实例同一可用区的子网 IP，您也可以自定义选择同地域其他可用区的子网 IP，实际业务连接访问为就近逻辑，不会增加网络时延。

## 操作步骤
### 切换网络
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在实例列表，单击实例 ID 或**操作**列的**管理**，进入实例详情页面。
2. 在实例基本信息的**所属网络**后，根据网络间切换类型，单击**转VPC网络**或**更换网络**。
3. 在弹出的对话框，选择私有网络以及相应子网，单击**确定**。
>?
>- 若未指定 IP 地址，系统将自动分配。
>- 目的 VPC 只能选择 MySQL 实例所在地域的 VPC 网络，但不限制子网可用区的选择并可查看子网地址范围。
>- 建议选择云服务器所在地域的 VPC，否则云服务器无法通过内网访问 MySQL（除非在两个 VPC 之间创建 [对等连接](https://cloud.tencent.com/document/product/553/18827) 或 [云联网](https://cloud.tencent.com/document/product/877/18675)）。
>
   - **基础网络转私有网络**
![](https://qcloudimg.tencent-cloud.cn/raw/be6e02a6228c01563b1d5627b711b56b.png)
   - **私有网络转私有网络**
![](https://qcloudimg.tencent-cloud.cn/raw/05dbc17d05f2ab3ba28b3aa3c95d99e6.png)
4. 返回实例详情页，可查看到实例的所属网络。
>?
>- 若旧 IP 地址回收时间设置为0小时，则更换网络后会立即回收旧 IP 地址。
>- 若旧 IP 地址回收时间设置为非0小时，则更换网络后旧 IP 地址会在设置的时间后进行回收，如需提前释放旧 IP 地址，可在**实例详情**页 > **基本信息** > **内网地址**后，单击保留地址，然后对目标地址操作立即释放。
>![](https://qcloudimg.tencent-cloud.cn/raw/ec488978bcc76e47068cded6ec11e59d.png)
>![](https://qcloudimg.tencent-cloud.cn/raw/b51f18430d1fa59c08fdd9d1f4bc3fa3.png)


### RO 组切换网络
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在实例列表，单击实例 ID 或**操作**列的**管理**，进入实例详情页面。
2. 在只读实例的 **RO 组信息**中，根据网络间切换类型（基础网络转 VPC / VPC 转 VPC），单击**更换子网**或**转VPC网络**。
![](https://qcloudimg.tencent-cloud.cn/raw/eea41b3e29241c7b1af84269bbed8e0a.png)
![](https://qcloudimg.tencent-cloud.cn/raw/34ff0975acbc4715cdf50f558506bb40.png)
3. 在弹出的对话框，选择私有网络以及子网，单击**确定**。
>?
>- 若未指定 IP 地址，系统将自动分配。
>- 目的 VPC 只能选择 MySQL 实例所在地域的 VPC 网络，但不限制子网可用区的选择并可查看子网地址范围。
>- 建议选择云服务器所在地域的 VPC，否则云服务器无法通过内网访问 MySQL（除非在两个 VPC 之间创建 [对等连接](https://cloud.tencent.com/document/product/553/18827) 或 [云联网](https://cloud.tencent.com/document/product/877/18675)）。
4. 系统切换完成后，即可在只读实例页查看 RO 组的所属网络。
>?
>- 若旧 IP 地址回收时间设置为0小时，则更换网络后会立即回收旧 IP 地址。
>- 若旧 IP 地址回收时间设置为非0小时，则更换网络后旧 IP 地址会在设置的时间后进行回收，如需提前释放旧 IP 地址，可在**只读实例**页找到目标 RO 组，在**内网地址**后单击保留地址，然后对目标地址操作立即释放。
>![](https://qcloudimg.tencent-cloud.cn/raw/8361cc539dcf37ee9c7f21ac22bf5ed7.png)


### 自定义 IP 端口
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在实例列表，单击实例 ID 或**操作**列的**管理**，进入实例详情页面。
2. 在实例基本信息的内网地址、端口后，单击<img src="https://main.qcloudimg.com/raw/788902e3f8c335cf17de420f7181c2a8.png"  style="margin:0;">。
>!修改内网地址和端口会影响正在访问的数据库业务。
3. 在弹出的对话框，自定义 IP、端口，确认无误后，单击**确定**。
