云数据库 MySQL 开启数据库代理后，默认添加一个数据库代理的连接地址，之后您可新增连接地址，通过使用不同的连接地址来实现不同的业务逻辑，可创建连接地址的数量与数据库代理节点数相同。您可通过控制台查看和修改数据库代理连接地址的访问策略。

## 前提条件
已 [开通数据库代理](https://cloud.tencent.com/document/product/236/82231)。

## 查看访问策略
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在上方选择地域，然后单击目标实例 ID，进入实例管理页。
2. 在实例管理页，选择**数据库代理** > **访问策略**。
![](https://qcloudimg.tencent-cloud.cn/raw/f0b2b826d4f60c0f3d819feaaf8a2977.png)

## 修改访问策略
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在上方选择地域，然后单击目标实例 ID，进入实例管理页。
2. 在实例管理页，选择**数据库代理** > **访问策略**，找到目标访问策略，单击**设置**。
>?您也可以在**数据库代理** > **概览** > **连接地址**下找到目标访问地址，单击其**操作**列的**调整配置**。
>
3. 在跳转的窗口下，修改具体策略的配置，单击**确定。**
![](https://qcloudimg.tencent-cloud.cn/raw/5c83e80b73359f22a4db8430373cd9b2.png)
<table>
<thead><tr><th>参数</th><th>说明</th></tr></thead>
<tbody><tr>
<td>读写属性</td>
<td>修改此代理访问地址的读写属性，支持选择读写分离或只读。</td></tr>
<tr>
<td>只读实例延迟剔除</td>
<td>设置只读实例延迟剔除策略，此项开启，可设置延迟剔除阈值和只读实例最小保留数。无论此项是否启用，只读实例故障时均会尝试剔除和恢复。<ul><li>延迟剔除阈值：输入大于1或等于1的整数，单位为秒。</li><li>只读实例最小保留数：数量与主实例拥有只读实例数相关，设置为0时，当只读节点全部被剔除后，所有访问会转发到主实例上，直至只读实例重新加入。</li></ul></td></tr>
<tr>
<td>连接池状态</td>
<td>连接池功能主要用于减少短连接业务频繁建立新连接带来的实例负载。此项开启后，可选择支持的连接池类型，目前默认仅支持会话级连接池。</td></tr>
<tr>
<td>事务拆分</td>
<td>设置是否开启，开启后，在一个事务中拆分读和写到不同的实例上去执行，读请求转发到只读实例，降低主实例负载。</td></tr>
<tr>
<td>读权重分配</td>
<td>支持选择系统自动分配或自定义，如开通数据库代理时配置了多个可用区，则支持对不同可用区下的代理节点访问数据库的权重进行分别配置。</td></tr>
<tr>
<td>故障转移（读写属性为读写分离）</td>
<td>设置是否开启，开启后，数据库代理出现故障时，连接地址将会路由到主实例。</td></tr>
<tr>
<td>自动添加只读实例</td>
<td>设置是否开启，开启后，若您购买新的只读实例，会自动添加到数据库代理中。<ul><li>当读权重为系统自动分配时，新购只读实例按照规格大小默认权重分配。</li><li>当读权重为自定义时，新购只读实例默认加入时权重为0，可通过数据库代理页，连接地址下的调整配置来修改。</li></ul></td></tr>
</tbody></table>

