## 备份简介
### 备份方式
数据库备份可用于应对数据丢失或损坏以及数据误操作等，云数据库 MySQL 高可用版支持**自动备份**和**手动备份**两种方式来备份数据库。

### 备份类型
云数据库 MySQL 高可用版支持两种备份类型：
- **物理备份**，物理数据全拷贝（自动备份与手动备份均支持）。
- **逻辑备份**，SQL 语句的备份（手动备份支持）。
>?
>- 物理备份恢复方式需要用 xbstream 解包，详细操作请参见 [使用物理备份恢复数据库](https://cloud.tencent.com/document/product/236/33363)。
>- 单个实例的表数量超过100万后，可能会造成备份失败，同时也会影响数据库监控，请合理规范表的数量，控制单个实例表数量不超过100万。

| 物理备份的优势 | 逻辑备份的劣势 |
|---------|---------|
| <li>备份速度快。<li>支持流式备份和压缩。<li>备份成功率高。<li>恢复简单并且高效。<li>依赖备份进行的耦合操作，例如，增加 RO、增加灾备会变得更快。<li>物理备份完成的平均时长为逻辑备份的八分之一左右。<li>物理备份的导入速度比逻辑备份导入快十倍左右。| <li>恢复时需要执行 SQL 和构建索引，恢复时间长。<li>备份速度慢，数据量大的情况下尤为明显。<li>备份过程中会对实例造成压力，可能会加大主从延迟。<li>有可能会丢失浮点数的精度信息。<li>由于各种问题（错误视图等），可能导致备份失败。<li>依赖备份进行的耦合操作，例如，增加 RO、增加灾备会变得缓慢。 |

### 备份对象
 | 数据备份 | 日志备份 |
|---------|---------|
 | MySQL 5.5/5.6/5.7（高可用版）：<li>自动备份支持全量物理备份。<li>手动备份支持全量物理备份、全量逻辑备份和单库单表逻辑备份。<li>自动备份与手动备份均支持压缩和下载。<li>自动备份不可主动删除，可设置保留时长。<li>手动备份可主动删除，没有删除的前提下一直保留。 | MySQL 5.5/5.6/5.7（高可用版）：<li>Binlog 文件会占用实例的磁盘容量。<li>Binlog 支持下载，但不支持压缩。<li>可设置 Binlog 保留时长。|

## 注意事项
- 云数据库 MySQL 的自动备份于2019年02月26日起，仅支持物理备份。自动备份设置默认方式为物理备份，不再提供逻辑备份。存量自动备份为逻辑备份的实例会陆续被自动切换为物理备份。
此切换不会影响您业务访问，可能会影响您自动备份的使用习惯。若您需要逻辑备份，可以使用 [云数据库 MySQL 控制台](https://console.cloud.tencent.com/cdb) 中的手动备份方式或者通过 [API 调用](https://cloud.tencent.com/document/product/236/15844) 来生成逻辑备份。
- 不论是逻辑备份还是物理备份文件都会被压缩，故部分下载文件无法使用，可通过手动逻辑备份中的备份部分库表功能代替，请参见 [手动备份](#manual-backup)。
- 实例备份文件占用备份空间，云数据库 MySQL 目前的备份空间全部免费，后续备份空间收费会另行通知。请合理设计备份周期、合理使用备份空间，避免后续收费后造成额外的费用。
- 尽量选择业务低峰期进行备份。
- 备份文件有保留时间，请及时下载需要保留的备份文件到本地。
- 备份期间请禁止 DDL 操作，避免锁表导致备份失败。

## 自动备份 MySQL 数据
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在实例列表页，单击实例名进入管理页面，选择【备份恢复】>【自动备份设置】。
![](https://main.qcloudimg.com/raw/11a66eaae41cde48918b82ed72ec168d.png)
2. 在弹出的备份设置对话框选择各备份参数，单击【确定】。参数说明如下：
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>备份发起时间</td>
<td><ul><li>可以自定义选择时间区间，建议设置为业务低峰期时间。
<li>默认时间为系统自动分配的备份发起时间。备份发起时间只是备份开始启动的时间，并不代表备份结束的时间。<br>例如，选择：02:00 - 06:00点，系统会在02:00 - 06:00时间范围内的某一个时间点发起备份，具体的发起时间点取决于后端备份策略和备份系统状况。</td>
</tr>
<tr>
<td>数据备份保留时间</td>
<td><ul><li>数据备份文件可以保留7天 - 732天（目前备份空间免费），默认为7天。<li>备份空间收费将另行通知。</td>
</tr>
<tr>
<td>日志备份保留时间</td>
<td><ul><li>日志备份文件可以保留7天 - 732天（目前备份空间免费），默认为7天。<strong>日志备份天数必须小于等于数据备份天数。</strong>  <li>备份空间收费将另行通知。</td>
</tr>
</tbody></table>

![](https://main.qcloudimg.com/raw/3512423349a1672dea8cc89383715a78.png)


<span id = "manual-backup"></span>
## 手动备份 MySQL 数据
手动备份功能允许用户自助发起备份任务。
>?
>- 手动备份支持全量物理备份、全量逻辑备份和单库单表逻辑备份。
>- 频繁手动备份会增加备份空间总量，请合理使用，后续备份空间收费将另行通知。
>- 手动备份可以通过主动删除释放掉备份空间，避免空间浪费和占用。
>
1. 在实例列表页，单击实例名进入管理页面，选择【备份恢复】>【手动备份】页签。
2. 在弹出的备份设置对话框，选择备份方式和对象，单击【确定】。
![](https://main.qcloudimg.com/raw/8a1361c70fc2aaf8d260e8d45fe2fbc0.png)
>?如果是逻辑备份下的单库备份或单表备份，请在左侧【选择库表】里勾选要备份的数据库或数据表，将数据库或表加入右侧列表。若您还没有数据库，请先创建数据库或表。
>
![](https://main.qcloudimg.com/raw/617cc91e5df28c6f1bffbd87519625a0.png)

