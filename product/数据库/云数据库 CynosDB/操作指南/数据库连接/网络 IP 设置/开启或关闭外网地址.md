除了通过内网地址连接集群，在开启外网后，您也可以在外网通过系统分配的域名和端口访问 TDSQL-C MySQL 版，生效时间大概需要5分钟，TDSQL-C MySQL 版外网访问仅用于开发或辅助管理数据库，业务方面的访问请使用内网访问。

本文为您介绍如何通过控制台开启或关闭集群下的读写外网地址和只读外网地址。

## 操作场景
TDSQL-C MySQL 版集群下包含读写实例和只读实例，均支持内网和外网两种地址类型，默认提供内网地址供您内部访问实例，如果需要通过外网地址访问，您需要先开启外网地址，开启后也可根据需要关闭，外网地址为系统自动分配，暂不支持自定义修改。

>! 
>- TDSQL-C MySQL 版外网访问开通后将受到 [安全组](https://cloud.tencent.com/document/product/1003/62745) 网络访问策略的控制，请提前配置好相应策略。
>- 访问外网需要开通并配置安全组策略，**放通内网访问端口**，否则通过外网连接集群时会失败。
>- 目前外网功能暂时免费提供，不保证外网带宽和流量稳定。
>- 仅当您的集群下有只读实例时，在集群详情页**连接信息**处才会显示只读外网地址的开启按钮。

## 支持地域
广州、上海、北京、成都、重庆、南京、中国香港、新加坡、首尔、东京、硅谷、法兰克福、弗吉尼亚地域的集群，将支持开启外网地址。部分地域陆续开放中，已开放地域请以控制台实际支持为准。

## 开启集群读写/只读外网地址
在集群的管理页面，根据实际使用的视图模式进行操作：
<dx-tabs>
::: 页签视图
1. 登录 [TDSQL-C MySQL 版控制台](https://console.cloud.tencent.com/cynosdb)，在左侧集群列表，单击目标集群，进入集群管理页。
2. 在集群详情下，找到需要开启外网的实例，在读写/只读地址的外网后单击**开启**。
![](https://qcloudimg.tencent-cloud.cn/raw/a609924e270418ac3cbfc592362c6e95.png)
3. 单击开启后，系统会根据实例绑定安全组的情况分如下几种操作情形。
**情形一：当前安全组配置未放通端口**
如需开启外网，您需要单击**授权并创建**（系统将申请您的授权自动为本集群绑定已放通内网端口的安全组（当前端口：3306） 方便您进行外网连接，后续您可进入安全组界面进行后续设置或换绑新的安全组）。
>!
>- 开通外网需在安全组放通内网策略，方可进行访问，检测到您当前安全组配置未放通端口，为保证连接成功， 系统将自动为本集群放通端口策略并允许0.0.0.0/0和::/0访问，为了您的网络安全，建议后续手动修改为固定 IP 访问。
>- 启用后，您可以在外网通过系统分配的域名和端口访问 TDSQL-C MySQL 版，生效时间大概需要5分钟。
>- 外网访问仅用于开发或辅助管理数据库，业务访问请使用内网访问。
>
![](https://qcloudimg.tencent-cloud.cn/raw/7f7224b04b4d5c2a404706a3ac21529c.png)
**情形二：当前安全组配置已放通端口**
在弹窗下，阅读提示并单击**确定**即可开启外网。
![](https://qcloudimg.tencent-cloud.cn/raw/57ee36bb33a07592dcd0dfa01c49c86a.png)
4. 成功开启后，您可在对应实例外网地址处查看外网的主机和端口，外网主机和端口不支持修改。
![](https://qcloudimg.tencent-cloud.cn/raw/0ac1c4d0743f4214e8e0d70d2864cf46.png)
:::
::: 列表视图
1. 登录 [TDSQL-C MySQL 版控制台](https://console.cloud.tencent.com/cynosdb)，在集群列表中，找到需要的集群，单击集群 ID，进入集群管理页面。
2. 在集群管理页>实例列表页，选择需要开启外网的实例（读写实例或只读实例），单击其**实例 ID** 或操作列的**管理**进入实例详情页。
![](https://qcloudimg.tencent-cloud.cn/raw/b3dd77cb594ebfa6dbce49dc4c4c021d.png)
3. 在实例详情页>连接信息>外网地址后单击**开启**。
![](https://qcloudimg.tencent-cloud.cn/raw/d8620bf4924e4c9a3f8d8ab8b3921432.png)
4. 单击开启后，系统会根据实例绑定安全组的情况分如下几种操作情形。
**情形一：当前安全组配置未放通端口**
如需开启外网，您需要单击**授权并创建**（系统将申请您的授权自动为本集群绑定已放通内网端口的安全组（当前端口：3306） 方便您进行外网连接，后续您可进入安全组界面进行后续设置或换绑新的安全组）。
>!
>- 开通外网需在安全组放通内网策略，方可进行访问，检测到您当前安全组配置未放通端口，为保证连接成功， 系统将自动为本集群放通端口策略并允许0.0.0.0/0和::/0访问，为了您的网络安全，建议后续手动修改为固定IP访问。
>- 启用后，您可以在外网通过系统分配的域名和端口访问 TDSQL-C MySQL 版，生效时间大概需要5分钟。
>- 外网访问仅用于开发或辅助管理数据库，业务访问请使用内网访问。
>
![](https://qcloudimg.tencent-cloud.cn/raw/7f7224b04b4d5c2a404706a3ac21529c.png)
**情形二：当前安全组配置已放通端口**
在弹窗下，单击阅读提示并单击**确定**即可开启外网。
![](https://qcloudimg.tencent-cloud.cn/raw/57ee36bb33a07592dcd0dfa01c49c86a.png)
5. 成功开启后，您可连接信息下的外网地址处查看外网的主机和端口，外网主机和端口不支持修改。
:::
</dx-tabs>

## 关闭集群读写/只读外网地址
>!关闭外网地址后，您将无法通过外网域名和端口访问 TDSQL-C MySQL 集群，请确认您的系统没有使用外网访问地址，以免给您带来不必要的损失。
>
在集群的管理页面，根据实际使用的视图模式进行操作：
<dx-tabs>
::: 页签视图
1. 登录 [TDSQL-C MySQL 版控制台](https://console.cloud.tencent.com/cynosdb)，在左侧集群列表，单击目标集群，进入集群管理页。
2. 在集群详情下，找到需要关闭外网的实例，在外网地址后单击**关闭**。
![](https://qcloudimg.tencent-cloud.cn/raw/c6079a393792caa11ec4996ba22155a2.png)
3. 在弹出的对话框，确认关闭外网的注意事项后，单击**确定**。
![](https://qcloudimg.tencent-cloud.cn/raw/3eec95aa36b4dea63f8c48fc4a70321e.png)
:::
::: 列表视图
1. 登录 [TDSQL-C MySQL 版控制台](https://console.cloud.tencent.com/cynosdb)，在集群列表中，找到需要的集群，单击集群 ID，进入集群管理页面。
2. 在集群管理页>实例列表页，选择需要关闭外网的实例（读写实例或只读实例），单击其**实例 ID** 或操作列的**管理**进入实例详情页。
![](https://qcloudimg.tencent-cloud.cn/raw/b3dd77cb594ebfa6dbce49dc4c4c021d.png)
3. 在实例详情页>连接信息>外网地址后单击**关闭**。
4. 在弹出的对话框，确认关闭外网的注意事项后，单击**确定**。
![](https://qcloudimg.tencent-cloud.cn/raw/18a0d145ba81791edd20c84a4e1240fc.png)
:::
</dx-tabs>

