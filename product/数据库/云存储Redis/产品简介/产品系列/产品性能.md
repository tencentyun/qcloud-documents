## 规格系列
### Redis 社区版引擎
<table>
<thead>
<tr>
<th align="center">功能</th>
<th colspan="2" >标准版</th>
<th align="center">集群版</th>
</tr>
</thead>
<tbody><tr>
<td align="center">兼容 Redis 版本</td>
<td align="center">2.8</td>
<td align="center">4.0</td>
<td align="center">4.0</td>
</tr>
<tr>
<td align="center">内存规格</td>
<td align="center">1GB - 60GB</td>
<td align="center">1GB - 60GB</td>
<td align="center">12GB - 4TB</td>
</tr>
<tr>
<td align="center">分片数</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">3 – 128</td>
</tr>
<tr>
<td align="center">QPS</td>
<td align="center">8万 - 10万</td>
<td align="center">8万 - 10万</td>
<td align="center">千万级</td>
</tr>
<tr>
<td align="center">链接数</td>
<td align="center">10000</td>
<td align="center">10000</td>
<td align="center">10000/分片</td>
</tr>
<tr>
<td align="center">流量限制</td>
<td align="center">10MB/S - 64MB/S</td>
<td align="center">10MB/S - 64MB/S</td>
<td align="center">72MB/S - 5GB/S</td>
</tr>
<tr>
<td align="center">多 DB</td>
<td align="center">支持</td>
<td align="center">支持</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">Mget、Mset</td>
<td align="center">支持</td>
<td align="center">支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">lua</td>
<td align="center">支持</td>
<td align="center">支持</td>
<td align="center">支持（不支持跨 Slot 访问）</td>
</tr>
<tr>
<td align="center">水平扩容</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">垂直扩容</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">读写分离</td>
<td align="center">不支持</td>
<td align="center">支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">支持 GEO</td>
<td align="center">不支持</td>
<td align="center">支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">副本数</td>
<td align="center">0 - 1</td>
<td align="center">1 - 5</td>
<td align="center">1 - 5</td>
</tr>
</tbody></table>



### CKV 引擎

|功能        | 标准版 | 集群版        |   
| :-------------: | :---------: | :-----------: | 
| 兼容 Redis 版本 | 3.2       | 3.2         |
| 内存规格          | 4GB - 384GB | 12GB - 48TB |
| 分片数        | -         | 3 - 128     |
| QPS           |  8万 - 12万    | 千万级      |
| 链接数           |  12000 - 24000    | 12000/分片 - 24000/分片      |
| 流量限制           |  16MB/S - 256MB/S    | 72MB/S - 32GB/S      |
|多 DB       |      支持        |       支持        |
|Mget、Mset |     支持     |      支持      |
|lua          |      支持     |     有限支持     |
|水平扩容|    -      |       支持       |
|垂直扩容|    -       |    不支持      |
|读写分离|    不支持      |    不支持      |
|支持 GEO|      支持      |     支持     |



### 实例规格对应连接数和流量
**Redis 社区版引擎**

| 规格（GB） | 最大连接数 | 最大吞吐量（MB/s） |
|  :----------: |  :----------: |  :-------------------: |
| 0.25          | 3000       | 10                  |
| 1          | 10000       | 16                  |
| 2          | 10000       | 24                  | 
| 4          | 10000       | 24                  |
| 8          | 10000       | 24                  |
| 12         | 10000       | 32                  | 
| 16         | 10000       | 32                  | 
| 20         | 10000       | 48                  |
| 24         | 10000       | 48                  | 
| 32         | 10000       | 48                  | 
| 40         | 10000       | 64                  | 
| 48         | 10000       | 64                  | 
| 60         | 10000       | 64                  | 

**CKV 引擎**

| 规格（GB） | 最大连接数 | 最大吞吐量（MB/s） | 
|  :----------: |  :----------: |  :-------------------: |
| 4          | 10000       | 24                  |
| 8          | 10000       | 24                  |
| 16         | 10000       | 32                  | 
| 24         | 10000       | 32                  | 
| 32         | 10000       | 32                  | 
| 48         | 18000      | 64                  | 
| 64         | 18000      | 64                  | 
| 80         | 18000      | 64                  |
| 96         | 18000      | 64                  | 
| 128        | 24000      | 128                 | 
| 160        | 24000      | 128                 | 
| 192        | 24000      | 128                 | 
| 256        | 24000      | 256                 | 
| 320        | 24000      | 256                 | 
| 384        | 24000      | 256                 | 

集群版连接数 = 分片连接数 * 分片数
集群版吞吐量 = 分片吞吐量 * 分片数
>!9000连接数的老实例，经过扩容或降配后连接数会自动变成10000。

## 性能数据
### 性能参考值
因 Redis 命令的执行耗时各不相同，在生产环境中，不同业务对数据库操作命令不同，所以对应性能也会有差别，本文给出的测试数据是在指定参数下的一个参考值，仅作为一个参考依据，实际情况需要业务真实的测试。

 - 单节点测试性能
  
|  Redis 实例规格 | 连接数 | QPS 值 |
|:---------:|:---------:|:--------:|
| 标准版 8GB | 10000 | 8万 - 10万 |
| 集群版 8GB（单分片） | 10000 | 8万 - 10万 |
| CKV 标准版 8GB|  12000    |   8万 - 12万  |

 
 - 集群版测试性能
   集群版性能 = 标准版性能 * 分片数
   集群版（CKV）性能 = 标准版（CKV）性能 * 分片数


### 测试方法

 - 测试环境
 
| 压测客户端 CVM 数量 | CVM 核数 | CVM 内存 | 区域 | Redis 实例大小 |
|:---------:|:---------:|:---------:|:---------:|:---------:|
| 3 | 2核 |8GB | 广州二区 |Redis 标准版8GB | 
| 3 | 2核 |8GB | 广州二区 |CKV 标准版8GB|


 - 测试参数
 ```
redis-benchmark -h 10.66.187.x -p 6379 -a crs-1znib6aw:chen2016 -t set -c 3500 -d 128 -n 25000000 -r 5000000
redis-benchmark -h 10.66.187.x -p 6379 -a crs-1z5536aw:chen2016 -t set -c 3500 -d 128 -n 25000000 -r 5000000
redis-benchmark -h 10.66.187.x -p 6379 -a crs-090rjlih:1234567 -t set -c 3500 -d 128 -n 25000000 -r 5000000
```
 - QPS 计算
汇总3台压测客户端 redis-benchmark 的 QPS 之和。


