云数据库 Redis 支持标准架构和集群架构，为应对业务数据的持续增长，Redis 提供了标准架构升级至集群架构的功能，以满足标准架构在性能和容量不足时向集群架构升级。

## 升级说明
- Redis 4.0 及以上的版本，支持相同版本的实例从标准架构升级至集群架构，例如，支持 Redis 4.0 标准架构升级至 Redis 4.0 集群架构。
- 不支持跨版本架构升级，例如，Redis 4.0 标准架构升级至 Redis 5.0 集群架构。
- 不支持 Redis 2.8 版本升级架构。
- 不支持从集群架构降级至标准架构。
- 按量计费实例暂不支持架构升级。
- 标准架构升级至集群架构后，会按照集群架构计费，费用会增加，具体费用请参见 [产品定价](https://cloud.tencent.com/document/product/239/9894)。

## 升级原理
- Redis 标准架构支持直接升级为集群架构（单分片），无需数据搬迁，3分钟内完成升级。
- Redis 4.0 及以上版本开始，从标准架构升级为集群架构，仅是将实例的运行模式从无 Slot（槽位）限制升级为有 Slot 限制，不涉及数据搬迁。

## 升级准备（兼容性检查）
由于兼容性问题，为避免迁移至集群架构导致业务故障，请在升级之前确认好兼容性：
- 集群架构数据是分布式存储的，和标准架构命令支持的最大差异在于单个命令是否支持多 Key 访问，集群架构命令支持情况分为支持、自定义命令、不支持，详细命令兼容性列表请参见 [命令兼容性](https://cloud.tencent.com/document/product/239/36152)。
- 兼容性检查方案，请参见 [标准架构迁移集群架构检查](https://cloud.tencent.com/document/product/239/43697)。

## 升级影响
- 升级通常流程通常在3分钟内可以完成。
- 升级过程中，存量连接会断开（闪断），业务需要有重连机制。

## 升级操作
1. 登录 [Redis 控制台](https://console.cloud.tencent.com/redis)，在实例列表选择地域后，单击实例名，进入实例详情页面。
2. 在实例详情页面，单击【架构升级】。
![](https://main.qcloudimg.com/raw/145122e4cdaadcc047744a10e8690993.png)
3. 在弹出的对话框，选择架构和切换时间，确认兼容风险后，单击【确定】。
架构升级支持【立即切换】和【维护时间窗切换】，维护时间可在实例详情页的“维护时间窗”处修改。
![](https://main.qcloudimg.com/raw/b8fc25e215303a59831e5df2bcf34507.png)
4. 支付完成后，返回实例列表，待实例状态变为“运行中”，即可正常使用。
