## 操作场景

多可用区实例默认是1个副本的架构， 推荐采用一主两副本，主 AZ（Available Zone）一主一副本，副本 AZ 一个副本，这种部署模式可以最大限度保障业务的可用性，极大降低主机故障带来的延迟影响。如果主节点故障，主可用区有一个副本可以优先选主，保障主可用区的访问延迟不会因为主节点切换到备可用区而受到影响。具体信息，请参见 [多可用区部署](https://cloud.tencent.com/document/product/239/51090)，请您根据业务需求选择副本数量。

## 费用说明

- 包年包月：新增副本，系统将计算实例规格间的差价，并在云账户中扣除差价，后续将按照新的规格计费。
- 按量计费：系统按照第一阶梯在下一个整点按照实例新的配置规格进行计费， 每个整点（北京时间）进行一次结算。具体计费价格，请参见 [产品定价](https://cloud.tencent.com/document/product/239/9894)。

## 使用须知

- 多可用区实例不支持减少副本。
- 增加副本将会按照新的规格计费。
- 增加副本过程中，不会出现闪断，不会导致命令执行失败，也不影响现有连接。

## 前提条件

- 实例已 [配置多可用区部署](https://cloud.tencent.com/document/product/239/51113)。
- 数据库版本要求：4.0及其以上。
- 实例状态**运行中**。

## 操作步骤

1. 登录 [Redis 控制台](https://console.cloud.tencent.com/redis)。
2. 在右侧**实例列表**页面上方，选择地域。
3. 在实例列表中，找到需增加副本的多可用区的实例。
4. 在目标实例所在**操作**列，选择**配置变更** > **增加副本**。
5. 在**云数据库 Redis 配置变更**对话框， 在**增加副本数量**的下拉列表中选择所需新增的副本数量，在**可用区**的新增副本的下拉列表给副本指定可用区。具体参数解释，请见下表。
<table>
<thead><tr><th>参数名称</th><th>参数解释</th></tr></thead>
<tbody><tr>
<td><strong>已使用容量</strong></td>
<td>当前实例已使用的容量。</td></tr>
<tr>
<td><strong>最小内存规格</strong></td>
<td>当前实例最小的内存规格要求，防止磁盘被写满。</td></tr>
<tr>
<td><strong>增加副本数量</strong></td>
<td>选择需新增副本的数量，请根据业务数据的安全要求级别选择副本数量。</td></tr>
<tr>
<td><strong>可用区</strong></td>
<td>给新增副本指定具体的可用区。如何配置，请参见 <a href="https://cloud.tencent.com/document/product/239/51090">多可用区部署</a> 推荐。</td></tr>
<tr>
<td><strong>对比</strong></td>
<td>新增副本前后规格的对比信息，请确认是否符合预期。</td></tr>
<tr>
<td><strong>配置变更费用</strong></td>
<td>请您了解配置变更之后的计费信息。包年包月指新配置每月的费用，按量计费将显示新配置每小时的计费单价。</td></tr>
</tbody></table>
<img src="https://qcloudimg.tencent-cloud.cn/raw/168dac427ded225c7191ff0dbe139fb0.png"  style="zoom: 50%;" />
6. 配置完成，单击确定。**实例状态**变更为 **处理中**，等待状态为**运行中**，即已完成操作。

## 相关 API

| API 接口名称                                                 | API 接口功能描述                                 |
| :----------------------------------------------------------- | :----------------------------------------------- |
| [UpgradeInstance](https://cloud.tencent.com/document/api/239/20013) | 升级实例的规格，包括：分片大小、分片数量、副本。 |

