## 操作场景
[安全组](https://cloud.tencent.com/doc/product/213/500) 是一种有状态的包含过滤功能的虚拟防火墙，用于设置单台或多台云数据库的网络访问控制，是腾讯云提供的重要的网络安全隔离手段。安全组是一个逻辑上的分组，您可以将同一地域内具有相同网络安全隔离需求的云数据库实例加到同一个安全组内。云数据库与云服务器等共享安全组列表，安全组内基于规则匹配，具体规则与限制请参见 [安全组详细说明](https://cloud.tencent.com/document/product/215/20089)。您可以在购买实例时绑定安全组，也可以购买实例后在控制台绑定安全组。

>?
>- 云数据库 Redis 安全组目前仅支持私有网络 VPC 内网访问和外网访问的网络控制，暂不支持对基础网络的网络控制。
> - 由于云数据库没有主动出站流量，因此出站规则对云数据库不生效。
> - 云数据库 Redis 安全组支持主实例、只读实例与灾备实例。

## 为云数据库配置安全组
### 步骤一：创建安全组
1. 登录 [云服务器控制台](https://console.cloud.tencent.com/cvm/securitygroup)。
2. 在左侧导航选择**安全组**页，在右侧页面上方选择地域，单击**新建**。
3. 在弹出来的对话框中，完成如下配置，确认后单击**确定**。
   - **模板**：在下拉列表选择安全组模板。
     - **放通全部端口**：默认放通全部端口到公网和内网，具有一定安全风险。安全组规则已默认添加。单击下方的显示模板规则，可查看该安全组模板的**出站规则**与**入站规则**。
     - **放通22，80，443，3389端口和ICMP协议**：默认放通22，80，443，3389端口和 ICMP 协议，内网全放通。安全组规则已默认添加。云数据库 Redis 端口默认为6379，无需关注此模板。
     - **自定义**：安全组创建成功后，按需添加安全组规则。
   - **名称**：自定义设置安全组名称。
   - **所属项目**：默认选择“默认项目”，可指定为其他项目，便于后期管理。
   - **备注**：自定义，简短地描述安全组，便于后期管理。
   - **高级配置**：给安全组添加标签。
4. 如果**模板**为**自定义**，在**提醒**对话框，单击**立即设置规则**，执行以下步骤。

### [步骤二：设置安全组入站规则](id:Step2)

1. 在**安全组规则**页面，选择**入站规则**页签， 单击 **添加规则**。
2. 在弹出**添加入站规则**的对话框中，设置规则。
   - **类型**：请选择默认类型**自定义**。
   - **来源**：设置访问数据库的源，即入站来源。支持以下格式定义来源。
     <table>
     <tr><th>来源格式</th><th>格式说明</th></tr>
         <tr><td>CIDR 表示</td>
             <td><ul><li>单个 IPv4 地址或 IPv4 地址范围用 CIDR 表示法（如<code>203.0.113.0</code>、<code>203.0.113.0/24</code>或者<code>0.0.0.0/0</code>，其中<code>0.0.0.0/0</code>代表匹配所有 IPv4 地址）。</li><li>单个 IPv6 地址或 IPv6 地址范围用 CIDR 表示法（如<code>FF05::B5</code>、<code>FF05:B5::/60</code>、<code>::/0</code>或者<code>0::0/0</code>，其中<code>::/0</code>或者<code>0::0/0</code>代表匹配所有 IPv6 地址）。</li></ul></td></tr>
     <tr>
         <td>安全组 ID</ul>
     </td>
         <td>引用安全组ID来匹配安全组关联的服务器的IP地址。
     </td></tr>
     <tr>
         <td>参数模板</td>
         <td>引用 <a href="https://cloud.tencent.com/document/product/215/20090">参数模板</a> 中的 IP 地址对象或 IP 地址组对象。</td></tr>
     </table>
   - **协议端口**：填写客户端访问云数据量 Redis 的协议类型和端口。您可在 [实例详情](https://console.cloud.tencent.com/redis) 页面的**网络信息**区域的**内网IPv4地址**中查看端口信息，默认为6379。访问协议为 TCP，则可设置为 TCP:6379。
    - **策略**：默认选择**允许**。
      - **允许**：放行该端口相应的访问请求。
      - **拒绝**：直接丢弃数据包，不返回任何回应信息。
    - **备注**：自定义，简短地描述规则，便于后期管理。
4. 单击**完成**，完成安全组入站规则的添加。
   

### 步骤三：给数据库实例绑定安全组

>!目前云数据库 Redis 安全组仅支持**私有网络云数据库**配置。

1. 登录 [Redis 控制台](https://console.cloud.tencent.com/redis)。
2. 在右侧**实例列表**页面上方，选择地域。
3. 在实例列表中，找到目标实例。
4. 在实例列表，单击实例 ID，进入实例管理页面。
5. 在实例管理页面，选择**安全组**页，单击**配置安全组**。
6. 在弹出的**配置安全组**的对话框，选择已创建的安全组，可根据项目名称搜索过滤安全组。
	 ![](https://qcloudimg.tencent-cloud.cn/raw/7b2c4e94292cc4e2b8c98c7b52c67509.png)
7. 单击**确定**，即可完成安全组绑定云数据库的操作。 
   - 在**已加入安全组**区域，可查看数据库实例所绑定的安全组列表。
     - 在**优先级**列，可查看安全组放通的优先级。
     - 单击安全组 ID，可跳转至**安全组规则**页面，重新编辑安全组规则。具体操作，请参见 [修改安全组规则](https://cloud.tencent.com/document/product/215/39799)。更多操作，请参见 [管理安全组规则](https://cloud.tencent.com/document/product/215/39798)。
     - **安全组名称**：显示安全组的名称，便于识别安全组放通的信息。
     - **操作**：单击列表上方的**编辑**， 单击![img](https://qcloudimg.tencent-cloud.cn/raw/b407f850a15a1362a1ac89a4b13ce955.png)或者![img](https://qcloudimg.tencent-cloud.cn/raw/3efb762c31ec14fa16813748183eb520.png)，可调整安全组放通的优先级。 单击<img src="https://qcloudimg.tencent-cloud.cn/raw/ef650a132e219e69f4792ce463e69fe0.png" style="zoom: 67%;" />，可删除已绑定的安全组。
     ![](https://qcloudimg.tencent-cloud.cn/raw/65ed391b636db5e291788e3ded62444f.png)
   - 在**规则预览**区域，在**入站规则**页签可查看安全组的入站来源信息。
![](https://qcloudimg.tencent-cloud.cn/raw/5aa33af7522d3ec444a337af28c11c20.png)

## 更多操作

- 更多安全组相关操作，请参见 [管理安全组](https://cloud.tencent.com/document/product/215/39794)。
- 更多安全组规则相关操作，请参见 [管理安全组规则](https://cloud.tencent.com/document/product/215/39798)。
- 安全组相关 API 接口，请参见 [安全组相关接口](https://cloud.tencent.com/document/product/215/15803)。
