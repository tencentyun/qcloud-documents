三维城市组件属于专业版组件。本文主要介绍三维城市组件的基本参数配置。

## 概述
三维城市是基于腾讯地图的位置服务能力，为服务数字孪生城市打造的高性能轻量级 Web3D 组件。三维城市组件以腾讯地图为底座，在其表面承载多源时空数据（包括城市建筑模型、空间热力、位置迁移等时空数据）。
用户能够依托三维城市，一键添加三维模型层、经典热力层、动态散点层、动态轨迹层、区域高亮层、区域填充层、文字标签层、辐射扩散层、地理围栏层、图标标签层和相机控制器等子组件效果，和三维场景编辑器相比更适合搭建城市级三维场景，能够通过编辑丰富的配置项实时调整城市级3D渲染效果。

相关大屏模板示例参看以下链接：
[智慧城市](https://v.yuntus.com/tcv/ee67d0a6db4b827f3c7245c73049e32161788c9dcdd893c81db61f2e0e9fceed)

## 参数配置
### 位置大小
- **大小**：组件的尺寸，包括组件的宽高，单位为 px，可以单击![](https://qcloudimg.tencent-cloud.cn/raw/14cfc795c5e4cd68e6ea34d30b3ca65d.png)锁定组件的宽高比，此时必须按照固定宽高比修改组件的尺寸。

- **位置**：组件的横纵坐标，单位为 px，横坐标是组件左上角距离页面左边界的距离，纵坐标是组件左上角距离页面上边界的距离。

- **旋转**：以组件中心点为中心进行旋转，单位为角度。单击拖动![](https://qcloudimg.tencent-cloud.cn/raw/98f69c15dbaa4133b0db8090e8332322.png)可控制组件旋转角度；单击拖动![](https://qcloudimg.tencent-cloud.cn/raw/a381c38863e98d18e46033e76e380251.png)可分别控制组件的上下旋转和左右旋转角度。

![](https://qcloudimg.tencent-cloud.cn/raw/0005e8e2ad223f6a3650324120a66767.png)

### 子组件管理
三维城市组件默认开启三维模型层子组件，还默认展示在主界面的还包括相机控制器子组件，用户仅能通过![](https://qcloudimg.tencent-cloud.cn/raw/51dd260b24aa2db7f67426009b376ce9.png)控件选择上述组件的可视状态，无法直接删除或添加上述子组件。用户可以下拉列表添加三维模型层、经典热力层、动态散点层、动态轨迹层、区域高亮层、区域填充层、文字标签层、辐射扩散层、动态飞线层、地理围栏层、图标标签层等子组件，可多次重复添加上述子组件叠加效果，能通过![](https://qcloudimg.tencent-cloud.cn/raw/51dd260b24aa2db7f67426009b376ce9.png)控件选择该组件的可视状态，能通过![](https://qcloudimg.tencent-cloud.cn/raw/94a0e25b3580187a00af528b65f63236.png)控件删除该组件,通过![](https://qcloudimg.tencent-cloud.cn/raw/85fad3c0ae8506f0c6c398898f5cf843.png)控件修改该组件名称，通过![](https://qcloudimg.tencent-cloud.cn/raw/f7b5597b228ef2e59f1b4cfe1876959f.png)复制该组件 ID。

![](https://qcloudimg.tencent-cloud.cn/raw/b59d1667b44958d41f55b7aa19be7a41.jpg)

### 参数设置
| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| **主题** | 三维城市整体主题风格 | 浅色风格 |
| **缩放** | 地图底图的缩放层级 | 16.5 |
| **俯仰角度** | 以右手坐标系 Y 轴方向为0俯仰角的场景相机俯仰角 | 85 |
| **方位角度** | 以正北方向为0方位角的场景相机逆时针方位角 | 300 |
| **中心经纬度** | 相机视点中心经纬度，通常先调整默认区域省市区，再调整中心经纬度至目标经纬度 | 121.499377/31.243105 |
| **默认区域省/市/区** | 相机视点默认所在省市区，可联动中心经纬度，通常先调整默认区域省市区，再调整中心经纬度至目标经纬度 |上海市/黄浦区 |
| **鼠标拖拽** | 开启后，预览模式下能用鼠标拖拽场景进行交互 | 开启 |
| **滚轮缩放** | 开启后，预览模式下能用鼠标滚轮缩放场景 | 开启 |
| **实时路况** | 开启后，会渲染当前城市的实时路况 |不开启|
| **双击放大** | 开启后，预览模式下能用鼠标双击放大场景 | 不开启|
| **缩放控件** | 开启后，右上角会显示缩放控件 | 不开启|
| **旋转控件** | 开启后，右上角会显示旋转控件 |不开启|

三维城市组件初始化场景包含了基础地图瓦片、三维建筑白模、天空盒、水体、树木等基础三维城市对象和通过三维模型层加载替换建筑白模的精细建筑模型，效果如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/c7f2761758e08bb52ff1861d7f83278b.jpg)

![](https://qcloudimg.tencent-cloud.cn/raw/fe6b5c6962914253543c0b14243ea98b.jpg)

## 数据配置
暂无数据配置。

## 逻辑编辑器配置
动作配置如下所示：

| 动作名称 | 传入参数说明 |
| --- | --- |
| **选中动态散点层散点** | 目标选中散点的状态、经纬度和索引序号 |
| **下钻场景** | 目标下钻场景所在行政区的 adcode | 
| **上钻场景** | 目标上钻场景所在行政区的 adcode | 
| **场景变化** | 目标场景所在行政区的 adcode，包含上钻和下钻场景 | 

事件配置如下所示：

| 动作名称 | 传出参数说明 |
| --- | --- |
| **当动态散点层选中变更时** | 选中散点时，散点的状态、经纬度和索引序号 |
| **当场景下钻时** | 下钻时，当前场景所在行政区的 adcode | 
| **当场景上钻时** | 上钻时，当前场景所在行政区的 adcode | 
| **场景变更时** | 当前场景所在行政区的 adcode，包含上钻和下钻场景 | 

