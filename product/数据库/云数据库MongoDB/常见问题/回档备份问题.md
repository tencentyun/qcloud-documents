
### MongoDB 每日自动备份和手动备份如何操作？
云数据库 MongoDB 支持两种备份方式，一种是每日自动备份，一种是手动备份。备份数据默认保留7天。
- **自动备份**
实例可提供每天一次的自动备份，您可以在腾讯云 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb) 单击实例 ID 进入管理页面，在**回档与备份**页中查看。
- **手动备份**
在**回档与备份**页中，单击右上角的**手动备份**，在弹框中输入备份的备注，提交后即可完成手动备份。

### MongoDB 回档的时间取决于什么？
回档是基于最近的一次全量备份的镜像 +oplog 进行的，回档的时间取决于回放 oplog 的量。
如果全量备份的时间点距离回档的时间很久，就需要较长的时间进行 oplog 的回放。

### MongoDB 如何完成副本集实例的备份回档？
副本集实例目前支持实例级别和库表级别的备份和回档。
- **备份**
在 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb) 单击实例 ID 进入管理页面，单击**手动备份**，或在备份与回档页进行自动备份设置。
- **回档**
在回档操作过程中，需要输入需要回档到的日期，目前支持5日内的任意时间回档，但前提是只能选择两次备份（成功且非 oplog 写满状态）之间的时间点进行回档，如果没有满足的备份请执行一次 [手动备份](https://cloud.tencent.com/document/product/240/7108) 。

### MongoDB 如何完成分片集群实例的备份回档？
分片集群实例目前支持实例级别的备份和回档。
- **备份**
在 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb) 单击实例 ID 进入管理页面，单击**手动备份**，或在备份与回档页进行自动备份设置。
- **回档**
实例的 oplog 空间为固定集合（Capped Collection），当集合空间用完后，再插入的元素就会覆盖最初始的头部的元素。为了避免 oplog 空间被覆盖导致备份和恢复失败，请根据业务详情合理设置 oplog 空间大小。当业务写入、删除和更新操作频繁时，为了防止两次备份时间点之间的 oplog 被覆盖，可以设置每天备份多次。两次备份时间点之间的 oplog 空间被覆盖，可能无法保证数据恢复的时间点。

### 如何优化实例备份过程中出现的抖动现象？
云数据库 MongoDB 默认凌晨会定期对集群数据做全量备份和增量备份，并支持默认7天内的任意时间点回档。但是，随着集群数据量逐渐增加，开始出现集群定期抖动的现象，主要现象包括：
1. 访问时延增加
2. 慢日志增加
3. CPU 使用率增加

通过分析，发现问题和数据备份时间点一致，由于物理备份和逻辑备份期间需要对整个实例进行数据备份，系统资源负载增加，最终影响业务查询服务。

**优化方式**：数据备份期间隐藏节点，确保该节点对客户端不可见。具体信息，请您 [提交工单](https://console.cloud.tencent.com/workorder/category) 咨询。

