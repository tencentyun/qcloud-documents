
### MongoDB 每日自动备份和手动备份如何操作？
云数据库 MongoDB 支持两种备份方式，一种是每日自动备份，一种是手动备份。备份数据默认保留7天。
- **自动备份**
实例可提供每天一次的自动备份，您可以在腾讯云 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb) 实例详情页的【回档与备份】中查看。
- **手动备份**
在实例详情页的【回档与备份】中，单击右上角的【手动备份】，在弹框中输入备份的备注，提交后即可完成手动备份。

### 是否支持备份文件下载？
目前暂不支持。

### 回档后进行了替换操作，是否还可以再次进行回档？
不可以，替换后原备份文件已经不再适用于替换后实例，无法再次进行回档，用户选择替换操作前务必确认。

### MongoDB 回档的时间取决于什么？
回档是基于最近的一次全量备份的镜像 +oplog 进行的，回档的时间取决于回放 oplog 的量。
如果全量备份的时间点距离回档的时间很久，就需要较长的时间进行 oplog 的回放。

### MongoDB 回档后，转正操作和替换操作的区别？
转正是把回档后的临时实例转化为一个全新的实例运行，该实例与原实例无任何对应关系。默认会为临时实例设置2天的有效期，请及时续费。
替换是用临时实例数据覆盖当前实例的数据，替换后实例的备份文件会删除，不可再次回档到替换之前，请谨慎操作。

### MongoDB 回档后进行了替换操作，是否会删除备份文件？
替换后，原备份文件已经不再适用于替换后实例，因此回档过程会删除备份文件。
 
### MongoDB 如何完成副本集实例的备份回档？
分片集群实例目前只支持实例级别的备份和回档。
- **备份**
在 [控制台](https://console.cloud.tencent.com/mongodb) 实例详情页单击【手动备份】，输入备注信息后，单击【提交】进行实例备份。
- **回档**
在回档操作过程中，需要输入需要回档到的日期，目前支持5日内的任意时间回档，但前提是只能选择两次备份（成功且非 oplog 写满状态）之间的时间点进行回档，如果没有满足的备份请执行一次 [手动备份](https://cloud.tencent.com/document/product/240/7108) 。

### MongoDB 如何完成分片集群实例的备份和回档？
分片集群实例的备份回档和副本集实例的备份回档操作相同，目前只支持实例级别的备份和回档。
- **备份**
在 [控制台](https://console.cloud.tencent.com/mongodb) 实例详情页单击【手动备份】，输入备注信息后，单击【提交】进行实例备份。
- **回档**
实例的 oplog 空间为固定集合（Capped Collection），当集合空间用完后，再插入的元素就会覆盖最初始的头部的元素。为了避免 oplog 空间被覆盖导致备份和恢复失败，请根据业务详情合理设置 oplog 空间大小。当业务写入、删除和更新操作频繁时，为了防止两次备份时间点之间的 oplog 被覆盖，可以设置每天备份多次。两次备份时间点之间的 oplog 空间被覆盖，可能无法保证数据恢复的时间点。
