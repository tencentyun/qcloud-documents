云数据库 MongoDB 支持副本集与分片集群实例，本文介绍副本集和分片集群支持的规格范围，帮助您选择适合自身业务的规格。

## 副本集
### 副本数量
默认支持1主2从， 3个存储节点组成1主2从的架构，暂不可自定义副本数量。

### mongod 规格

| 每节点 CPU | 每节点内存（GB） | 每节点磁盘容量（GB）         | 最大连接数（个） |
| ------------- | ---------------- | ---------------------------- | ---------------- |
| 2核           | 4GB              | 默认250GB，范围【10,1500】   | 3000             |
| 4核           | 8GB              | 默认500GB，范围【20,3000】   | 6000             |
| 6核           | 16GB             | 默认750GB，范围【50,6000】   | 9000             |
| 12核          | 32GB             | 默认1500GB，范围【100,6000】 | 12000            |
| 24核          | 64GB             | 默认2500GB，范围【100,6000】 | 15000            |
| 24核          | 128GB            | 默认3000GB，范围【100,6000】 | 18000            |
| 32核          | 240GB            | 默认4000GB，范围【100,6000】 | 18000            |
| 48核          | 512GB            | 默认4000GB，范围【100,6000】 | 18000            |


## 分片集群
### 分片数量
分片数量取值范围：[2,20] 。

### 每片节点数量
系统默认每个分片是1主2从的3节点架构，暂不支持自定义节点数量。 

### mongos 规格
mongos 计算规格支持**2核4GB**、**4核8GB**、**8核16GB**、**16核32GB**。其数量范围为【3,32】。实例的连接数与 mongos 的规格有关。

| Mongos规格  | 单个mongos连接数（个） |
| ----------- | ---------------------- |
| 2核4GB   | 1000                   |
| 4核8GB   | 2000                   |
| 8核16GB  | 3000                   |
| 16核32GB | 9000                   |

### configServer 规格 
configServer 默认规格为**1核2GB**，存储**20GB**，默认**3副本**不可修改。 

### mongod 规格

| 每节点 CPU | 每分片内存（GB） | 每分片磁盘容量（GB）         |
| ------------- | ---------------- | ---------------------------- |
| 2核           | 4GB              | 默认250GB，范围【10,1500】   |
| 4核           | 8GB              | 默认500GB，范围【20,3000】   |
| 6核           | 16GB             | 默认750GB，范围【50,6000】   |
| 12核          | 32GB             | 默认1500GB，范围【100,6000】 |
| 24核          | 64GB             | 默认2500GB，范围【100,6000】 |
| 24核          | 128GB            | 默认3000GB，范围【100,6000】 |
| 32核          | 240GB            | 默认4000GB，范围【100,6000】 |
| 48核          | 512GB            | 默认4000GB，范围【100,6000】 |

## 连接用户名
- 云数据库 MongoDB 內建了 默认用户 mongouser，mongouser 采用 SCRAM-SHA-1 认证方式，角色为 [readWriteAnyDatabase+dbAdmin](https://docs.mongodb.org/v3.0/reference/built-in-roles/)，您可以用此用户读写任意数据库，但是不具备高危操作的权限。

- 3.2版本的实例支持另外一个内建用户 rwuser，采用 MONGODB-CR 认证方式，该认证方式已被官方废弃，建议您优先使用 mongouser 连接数据库。

- 您也可以使用 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb) 进行帐号和权限管理以满足您的业务需要。

## 避免写满磁盘
实例磁盘被写满100%后，会被禁止执行写操作，请根据业务情况及时调整实例配置，调整实例配置请参见 [调整实例规格](https://cloud.tencent.com/document/product/240/19911)，如果出现磁盘写满封禁情况，请 [联系我们](https://cloud.tencent.com/about/connect) 寻求相应的帮助。

