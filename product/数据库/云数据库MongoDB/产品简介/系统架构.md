
## 副本集
云数据库 MongoDB 副本集架构通过部署多个服务器存储数据副本来达到高可用的能力，每一个副本集实例由一个 Primary 节点和一个或多个 Secondary 节点组成。

- Primary 节点：负责处理客户端的读写请求。每个副本集架构实例中只能有一个 Primary 节点。
- Secondary 节点：通过定期轮询 Primary 节点的 oplog（操作日志）复制 Primary 节点的数据，保证数据与 Primary 节点一致。在 Primary 节点故障时，多个 Secondary 节点通过选举成为新的 Primary 节点，保障高可用。

副本集的系统架构图如下：
![](https://qcloudimg.tencent-cloud.cn/raw/b736f3db997ed56b7609889d78460ad6.png)

副本集4.0版本简化了架构，去掉了 proxy set 组件，用户可以直接访问到每个节点，提高了性能。
![](https://qcloudimg.tencent-cloud.cn/raw/57826733ce38e14c866697e8d80f89e9.png)

## 分片集群
云数据库 MongoDB 分片集群（Sharded Cluster）架构在副本集的基础上，通过多组复制集群的组合，实现数据的横向扩展。每一个分片集群实例由 mongos 节点、config server、shard 节点等组件组成。

- **mongos 节点**：负责接收所有客户端应用程序的连接查询请求，并将请求路由到集群内部对应的分片上，同时会把接收到的响应拼装起来返回到客户端。您可以购买多个 mongos 节点实现负载均衡及故障迁移。每一个分片集群实例可支持 3个 - 48个 mongos 节点。

- **config server 节点**：负责存储集群和 Shard 节点的元数据信息，如集群的节点信息、分片数据的路由信息等。ConfigServer 节点规格固定为1核2GB，磁盘空间为20GB，默认3副本集，不可变更配置。 

- **shard 节点**：负责将数据分片存储在多个服务器上。 您可以购买多个 Shard 节点来横向扩展实例的数据存储和读写并发能力。每一个分片集群实例可支持 2个 - 20个 Shard 节点。

![](https://qcloudimg.tencent-cloud.cn/raw/0a2a9805fccb368b431acfb7e66ed300.png)

## 单节点
云数据库 MongoDB 单节点是腾讯云打造的一款高性价比数据库服务，在保障性能的同时，运营成本仅为集群版本1/3，适用于个人或企业学习、业务内部测试环境、对可用性要求不高的业务如内部系统、个人开发者开发的小程序或 App 等非高可用场景。
>?
>- 单节点目前仅支持4.0版本。
>- 单节点目前不支持备份回档功能，对数据可靠性有较高要求的客户请选购其他版本。
>- 单节点不支持慢日志查询、连接数管理功能。
>- 单节点架构中，仅保留主节点，因此无法提供高可用服务，无法保障服务 [SLA](https://cloud.tencent.com/document/product/301/35530)。
>- 单节点仅支持1核2GB存储和150GB磁盘固定规格，暂不支持配置变更。
>- 单节点目前支持售卖的区域：广州三区、上海四区、北京四区、成都一区。
