云数据库 MongoDB 控制台支持查看当前数据库客户端的连接信息，包括 IP 和连接数量统计信息，帮助您实时调整配置，满足业务量扩展需求。 

## 背景信息
云数据库 MongoDB 会记录连接当前实例的客户端 IP 和对应的连接数。当业务存在大量并发应用程序请求时，数据库当前的规格无法满足当前需求量，连接数配置不足，您可以在控制台直接提升连接数。

## 版本说明
当前 MongoDB 4.2、4.0、3.6和3.2版本均支持对连接数进行管理。

## 使用须知
- 系统会记录连接当前实例的客户端 IP 和对应的连接数，您可选择手动释放对应的连接请求。
- 若您的连接数达到80%或以上，影响到新连接的建立，可通过控制台一键**提升连接数**功能，在6小时内提升连接数的上限至150%。
- 若提升连接数至150%还不能解决您的问题，请联系售后或 [提交工单](https://console.cloud.tencent.com/workorder/category) 处理。

## 前提条件
- 已 [申请云数据库 MongoDB 实例](https://cloud.tencent.com/document/product/240/3551)。
- 云数据库 MongoDB 副本集实例或分片实例的状态为**运行中**。

## 操作步骤
### 查看连接数
1. 登录 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb)。
2. 在左侧导航栏 **MongoDB** 的下拉列表中，选择**副本集实例**或者**分片实例**。副本集实例与分片实例操作类似。
3. 在右侧实例列表页面上方，选择地域。
4. 在实例列表中，找到目标实例。
5. 单击目标实例 ID，进入**实例详情**页面。
6. 选择**数据库管理**页签，再选择**连接数管理**页签。
7. 查看当前数据库所有客户端的连接统计信息。
<table>
<thead><tr><th>参数名称</th><th>参数解释</th></tr></thead>
<tbody><tr>
<td>实时连接数</td><td>当前数据库的所有连接数统计数量。</td></tr>
<tr>
<td>连接数占比</td><td>当前数据库所有客户端连接数量在最大连接总数中所占的比例。</td></tr>
<tr>
<td>最大连接数</td><td>连接数的最大上限。</td></tr>
<tr>
<td>当前剩余</td><td>提升连接数的剩余使用时间。</td></tr>
<tr>
<td>客户端 IP</td><td>连接数据库的客户端 IP 地址。</td></tr>
<tr>
<td>连接数</td><td>连接数量统计信息。</td></tr>
</tbody></table>

### 提升连接数
1. 在**连接数管理**页面，单击**提升连接数**。
2. 在**提示**对话框，确认提示信息，并单击**确定**。
> ?提升连接数后，连接数限制会上调为20000，如影响业务，请在该时段内尽快排查处理。

## 相关 API
| API 名称                   | API 接口                                                      |
| ------------------------- | ------------------------------------------------------------ |
| DescribeClientConnections | [查询实例客户端连接信息](https://cloud.tencent.com/document/product/240/38569) |

