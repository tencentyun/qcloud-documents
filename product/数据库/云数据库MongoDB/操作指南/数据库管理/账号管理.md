
云数据库 MongoDB 控制台支持创建账号、设置账号权限、更改账号密码信息，方便您管理数据库的访问权限。 

## 背景信息
- 云数据库 MongoDB 包含 rwuser 和 mongouser 两个默认用户。3.2版本系统默认支持 rwuser 和 mongouser 用户，而3.6、4.0、4.2版本系统默认为 mongouser 用户。
  - **rwuser** 是唯一使用 MONGODB-CR 认证的用户。
  - **mongouser** 以及在 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb) 创建的用户均是使用 SCRAM-SHA-1 认证的用户。
- 设置多个账号，并赋予每个账号访问不同数据库的读写权限，可以更细粒度地访问数据库，保证数据的安全性。

## 版本说明
当前 MongoDB 4.2、4.0、3.6和3.2版本均支持对数据库账号进行管理。

## 使用须知
-  创建账号并给账号赋予访问权限，系统需要2分钟进行后台配置才能生效。
-  数据库密码建议定期更换，最长间隔不超过3个月。

## 前提条件
- 已 [申请云数据库 MongoDB 实例](https://cloud.tencent.com/document/product/240/3551)。
- 云数据库 MongoDB 副本集实例或分片实例的状态为**运行中**。

## 操作步骤
### 查看账号信息
1. 登录 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb)。
2. 在左侧导航栏 **MongoDB** 的下拉列表中，选择**副本集实例**或者**分片实例**。副本集实例与分片实例操作类似。
3. 在右侧实例列表页面上方，选择地域。
4. 在实例列表中，找到目标实例。
5. 单击目标实例 ID，进入**实例详情**页面。
6. 选择**数据库管理**页签，进去**账号管理**页面。您可以查看当前数据库所有账号信息。

### 创建账号
1. 在**账号管理**页面，单击**创建账号**。
2. 在**设置权限**对话框的**创建账号**页签，根据下表配置账号信息，并单击**确定**。
<table>
<thead><tr><th>参数名称</th><th>是否必选</th><th>参数解释</th><th>参数取值</th><th>参数示例</th></tr></thead>
<tbody>
<tr>
<td>账号名称</td>
<td>是</td>
<td>设置新账号的名称</td>
<td>新账号名称设置要求如下：<ul><li>字符范围[1,32]。</li><li>可输入[A,Z]、[a,z]、[1,9]范围的字符以及下划线“_”与短划线“-”。</li></ul></td>
<td>test</td></tr>
<tr>
<td>账号密码</td>
<td>是</td>
<td>设置新账号的密码</td>
<td>密码复杂度要求如下：<ul><li>字符范围[8,32]。</li><li>至少包含字母、数字和字符（叹号“!”、at"@"、警号“#”、百分号“%”、插入符“^”、星号“*”、小括号“()”、下划线“_”）中的两种。</li></ul></td>
<td>test@123</td></tr>
<tr>
<td>确认密码</td>
<td>是</td>
<td>确认新账号的密码</td>
<td>密码复杂度要求如下：<ul><li>字符范围[8,32]。</li><li>至少包含字母、数字和字符（叹号“!”、at"@"、警号“#”、百分号“%”、插入符“^”、星号“*”、小括号“()”、下划线“_”）中的两种。</li></ul></td>
<td>test@123</td></tr>
<tr>
<td>备注</td>
<td>否</td>
<td>备注信息</td>
<td>任意字符</td>
<td>test</td></tr>
<tr>
<td>mongouser 密码</td>
<td>是</td>
<td>输入 mongouser 用户密码</td>
<td>mongouser 用户的密码。密码复杂度要求：<ul><li>字符个数为[8,32]。</li><li>可输入[A,Z]、[a,z]、[0,9]范围内的字符。</li><li>可输入的特殊字符包括：感叹号“!”，at“@”，警号“#“、百分号”%”、插入号“^”、星号“*”、括号“()”、下划线“_”。</li><li>不能设置单一的字母或者数字。</li></ul></td>
<td>test@123</td></tr>
</tbody></table>
3. 在**设置权限**页面，设置该账号访问数据库的权限。
<table>
<thead><tr><th>参数名称</th><th>参数解释</th><th>参数取值</th></tr></thead>
<tbody>
<tr>
<td>全局权限</td>
<td>设置该账号访问所有数据库的全局权限。</td>
<td><ul><li>无权：无读写数据的权限。</li><li>只读：仅有读数据权限。</li><li>读写：具有读写数据的权限。</li></ul></td></tr>
<tr>
<td>实例详情</td>
<td>设置该账号访问具体数据库的权限。</td>
<td><ul><li>继承全局：使用全局权限。</li><li>无权：无读写数据的权限。</li><li>只读：仅有读数据权限。</li><li>读写：具有读写数据的权限。</li></ul></td></tr>
</tbody></table>
4. （可选）单击**创建新库**，在数据库列表中，将新增一条数据库，在其输入框输入新数据库名，单击后面的**确定**保存，并设置该数据库的访问权限。
>?创建新库并不是真实的数据库，只是预设此数据库的访问权限。
5. 单击**确定**，完成设置。等待2分钟，系统配置生效后，您便可以使用该账号访问数据库。

### 修改账号权限
1. 在**账号管理**页签的账号列表中，找到目标需修改的账号。
2. 在其**操作**列，单击**查看/设置**。
3. 在**设置权限**对话框，可以重新设置此账号的权限。
4. 单击**确定**，完成修改。

### 修改账号密码
1. 在**账号管理**页签的账号列表中，找到目标需修改的账号。
2. 在其**操作**列，单击**修改密码**。
3. 在**修改密码**对话框，重新设置**新密码**并**确认密码**。
   密码复杂度要求如下：
   - 字符范围[1,32]。
   - 至少包含字母、数字和字符（叹号“!”、at"@"、警号“#”、百分号“%”、插入符“^”、星号“*”、小括号“()”、下划线“_”）中的两种。
4. 单击**确定**。

## 相关操作
### 查看账号的 URI
1. 在**账号管理**页签的账号列表中，找到目标需查看的账号。
2. 在其**操作**列，单击**连接URI**。
3. 在**连接帮助**对话框，查看账户连接的 URI 信息。
更多关于连接实例的帮助请参考 [连接 MongoDB 实例](https://cloud.tencent.com/document/product/240/7092)。
4. 单击**确定**，关闭对话框。

### 删除账号
1. 在**账号管理**页签的账号列表中，找到目标需删除的账号。
2. 在其**操作**列，单击**删除**。
3. 在**删除用户**对话框，确认删除的账号信息。
4. 单击**确定**，完成清理。

## 相关 API
| API 名称                 | API 接口                                                      |
| ----------------------- | ------------------------------------------------------------ |
| ResetDBInstancePassword | [修改实例用户的密码](https://cloud.tencent.com/document/product/240/46598) |

