云数据库 MongoDB 支持在控制台直接切换网络，帮助您及时调整网络状态。

## 背景信息
腾讯云网络分为 [基础网络和私有网络 VPC](https://cloud.tencent.com/document/product/215/20083)，给用户带来不同的优质服务。在此基础之上，我们提供如下更灵活的服务，方便您管理网络。
- 基础网络切换为私有网络：支持单台云数据库主实例的基础网络切换至私有网络。
- 私有网络 A 切换为私有网络 B：支持单台云数据库主实例的私有网络 A 切换至私有网络 B。

## 版本说明
当前 MongoDB 4.4、4.2、4.0、3.6和3.2版本均支持更换实例网络。

## 计费说明
数据库切换实例网络，并不会产品额外的费用。

## 注意事项
- 切换网络会导致该实例内网 IP 变化，超出释放时间后，旧的访问 IP 会失效，请及时修改客户端程序。
- 基础网络切换私有网络后不可逆，云数据库切换至私有网络后与其他私有网络及基础网络的云服务不互通。
- 若切换的云数据库为主实例，有挂载只读实例或灾备实例，当主实例切换网络后，挂载的只读实例或灾备实例不会随主实例自动切换网络，需手动进行网络切换。

## 前提条件
- 已 [创建云数据库 MongoDB 实例](https://cloud.tencent.com/document/product/240/3551)。
- 云数据库 MongoDB 副本集实例或分片实例的状态为**运行中**。

## 操作步骤
1. 登录 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb)。
2. 在左侧导航栏 **MongoDB** 的下拉列表中，选择**副本集实例**或者**分片实例**。副本集实例与分片实例操作类似。
3. 在右侧实例列表页面上方，选择地域。
4. 在实例列表中，找到目标实例。
5. 单击目标实例 ID，进入**实例详情**页面，单击**所属网络**右侧的**更换网络**。
6. 在弹出**更换网络**对话框，在**网络**后面的下拉列表中，选择该地域的私有网络以及对应的子网。
  如果当前的网络不满足您的需求，您可以单击**新建私有网络**或者**新建子网**重新创建后再选择网络。
  ![](https://main.qcloudimg.com/raw/2f12d8c24356cd6b02ffa855b085e53c.png)
 - **新IP分配方式**：选择**自动分配**或者**指定地址**。
    - **自动分配**：系统将根据当前选择的网络环境，自动分配可用的 IP 地址。
    - **指定地址**：您可以在**新IPV4地址**的输入框指定具体的 IP 地址。指定 IP 地址，请查看该私有网络的网段，指定网段内并未被占用的 IP 地址。
> ?
> - 目的 VPC 只能选择 MongoDB 所在地域的 VPC 网络。
> - 建议选择云服务器所在的 VPC，否则云服务器无法通过内网访问 MongoDB（除非在两个 VPC 之间创建 [云联网](https://cloud.tencent.com/document/product/877/18675)）。
 - **旧IP地址**：副本集实例支持立即释放；分片实例可在后面的下拉列表中，选择旧 IP 地址的释放时间，支持立即释放、1天后释放、2天后释放、3天后释放、7天后释放。保留时间过后将释放该 IP 地址。
>!选择**立即释放**将会立即断开旧地址上所有的网络连接，请谨慎选择释放时间。
>
7. 确认切换网络，单击**确定**。返回实例详情页，可查看到实例的所属网络。

