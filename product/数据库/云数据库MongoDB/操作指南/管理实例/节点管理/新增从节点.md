## 操作场景

实例的所有副本节点都会参与系统高可用支持，在主节点故障时，每个从节点均有可能被选举为新的主节点来执行数据写入请求，因此副本数越多可用性越高。在读多写少的并发场景，开启读写分离，可通过副本节点扩展读性能，极大降低主节点的读压力。 

云数据库 MongoDB 集群主从节点总数量支持选择3个、5个或7个，即满足1主2从的3节点、1主4从的5节点、1主6从的7节点，您可以根据业务并发突增的实际情况，适当提升从节点的数量。在业务量降低时，再缩减从节点数量，从而更好地满足资源的充分利用和成本实时优化。

## 版本说明

- MongoDB 4.2 版本副本集实例不支持变更实例的节点数。
- MongoDB 4.2 版本分片实例不支持调整实例的单分片节点数。

## 计费说明

调整实例配置，将按照新配置开始计费，请保证腾讯云账号余额充足。具体信息，请参见 [变配计费说明](https://cloud.tencent.com/document/product/240/64503)。

## 注意事项
- 新增节点加入集群开始同步数据，业务不受影响。
- 务必做好容灾处理，建议在维护时间内发起变配任务。维护时间的更多信息，请参见 [设置实例维护时间](https://cloud.tencent.com/document/product/240/19910)。
- 切勿同时发起调整节点数、调整节点计算规格与存储的任务。
- 节点数调整后，将按照新规格开始计费。
- 调整节点数量后实例的名称、内网地址与端口均不发生变化。
- 调整配置任务一旦发起，无法中途取消本次操作。

## 前提条件

- 已 [创建云数据库 MongoDB 实例](https://cloud.tencent.com/document/product/240/3551)。
- 如果为按量计费实例，请确保您的腾讯云账号余额充足。
- 实例及其所关联的实例处于正常状态下（运行中），并且当前没有任何任务执行。

## 新增从节点（副本集）

1. 登录 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb)。
2. 在左侧导航栏 **MongoDB** 的下拉列表中，选择**副本集实例**。
3. 在右侧实例列表页面上方，选择地域。
4. 在实例列表中，找到目标实例。
5. 单击实例 ID，进入**实例详情**页面，单击**节点管理**页签。
6. 在**节点管理**页面的 **Mongod 节点**页签，单击**新增从节点**。
7. 在**调整节点数**对话框，了解调整节点数的注意事项，根据如下表格的参数解释，确认并配置参数。
<img src="https://qcloudimg.tencent-cloud.cn/raw/e5169f699f2dfe0c5d15f61f301022ea.png" style="zoom:60%;" />
<table class="table-striped">
<tbody>
<thead><tr><th>参数名称</th><th>参数解释</th></tr></thead>
<tr>
<td>实例 ID /名称</td>
<td>当前待调整节点数的实例名称。</td></tr>	
<tr>
<td>到期时间</td>
<td>实例的到期时间，针对包年包月计费提醒实例到期时间。</td></tr>
<tr>
<td>实例配置</td>
<td>请了解实例当前的配置规格，包括 CPU 核数、内存、磁盘容量、节点数量。节点数量包含主从节点的总节点数。请根据当前配置评估需新增的节点数。</td>    </tr>	
<tr>
<td>新增节点数</td>
<td>在下拉列表中，选择需新增的从节点数量。</td>   </tr>
<tr>
<td>部署可用区</td>
<td>实例在同一可用区的场景，显示该参数，指实例所有节点所部署的可用区。</td>    </tr>
<tr>
<td>从节点-n</td>
<td>实例在不同可用区的场景，显示该参数，指实例不同节点对应的不同可用区，n 的取值范围为0 - 6。请在下拉列表为新增的从节点配置可用区。</td>    </tr>
<tr>
<td>费用</td>
<td><ul><li><b>按量计费</b>：实例调整配置后每小时的计费单价。单击<b>计费详情</b>，可查看计费项目、计费公式，确认费用。</li><li><b>包年包月</b>：实例调整配置后，到期时间内的总费用。</li></ul>调整配置后的计费详情，请参见 <a href="https://cloud.tencent.com/document/product/240/64503">变配计费说明</a>。</td></tr>
</tbody></table>
8. 确认费用信息，单击**确定**，完成操作。
9. 在左侧导航栏，选择**任务管理**，可查看到正在进行的任务，等待**任务执行进度**为**100%**，**任务执行状态**为**完成**。

## 新增单分片节点数（分片实例）

1. 登录 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb)。
2. 在左侧导航栏 **MongoDB** 的下拉列表中，选择**分片实例**。
3. 在右侧实例列表页面上方，选择地域。
4. 在实例列表中，找到目标实例。
5. 单击实例 ID，进入**实例详情**页面，单击**节点管理**页签。
6. 在**节点管理**页面的 **Mongod 节点**页签，单击**新增从节点**。
7. 在**调整单分片节点数**对话框，了解调整节点数的注意事项，根据如下表格的参数解释，确认并配置参数。
 - **实例部署在同一可用区**
   <img src="https://qcloudimg.tencent-cloud.cn/raw/b195d35bc4b469e24f200399b707b2ce.png" style="zoom: 50%;" />
 - **实例部署在不同的可用区**<br>
   <img src="https://qcloudimg.tencent-cloud.cn/raw/5b98a4a78e638d9e02b1b18bf2f558ef.png" style="zoom: 50%;" />
<table>
<thead><tr><th>界面参数</th><th>参数解释</th></tr></thead>
<tbody><tr>
<td>实例 ID/名称</td>
<td>请确认待调整单个分片节点数的实例名称。</td></tr>
<tr>
<td>实例配置</td>
<td>请了解实例当前的配置规格，包括 CPU 核数、内存、磁盘容量、节点数量。节点数量包含主从节点的总节点数。单分片的节点数量，按照分片数量均分，例如是2分片，8节点，则单个分片节点数量为4。请根据当前配置评估需新增的节点数。</td></tr>
<tr>
<td>新增节点数</td>
<td>在下拉列表中，选择单个分片需新增的从节点数量。</td></tr>
<tr>
<td>部署可用区</td>
<td>实例在同一可用区的场景，显示该参数，指实例所有节点所部署的可用区。</td>
</tr>
<tr>
<td>从节点-n</td>
<td>实例在不同可用区的场景，显示该参数，指实例不同分片节点的不同可用区，n 的取值范围为0 - 6。请在下拉列表为新增的从节点配置相应的可用区。</td></tr>
<tr>
<td>费用</td>
<td><ul><li>按量计费：实例调整配置后每小时的计费单价。单击计费详情，可查看计费项目、计费公式，确认费用。</li><li>包年包月：实例调整配置后的到期时间内的总费用。调整配置后的计费详情，请参见 <a href="https://cloud.tencent.com/document/product/240/64503">变配计费说明</a>。</li></ul></td></tr>
</tbody></table>
7. 确认费用信息，单击**确定**，完成操作。
8. 在左侧导航栏，选择**任务管理**，可查看到正在进行的任务，等待**任务执行进度**为**100%**，**任务执行状态**为**完成**。

## 相关 API

| 接口名称                                                 | 接口功能描述     |
| ------------------------------------------------------------ | -------------------- |
| [ModifyDBInstanceSpec](https://cloud.tencent.com/document/product/240/38565) | 调整云数据库实例配置 |
