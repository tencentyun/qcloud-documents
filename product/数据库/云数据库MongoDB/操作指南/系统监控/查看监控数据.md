云数据库 MongoDB 支持查看各个监控指标的变化趋势图形，帮助您及时了解数据库资源的运行情况和性能，提前做出预判，预防风险。

## 背景信息
- 腾讯云云监控（Cloud Monitor，CM）是一项可对云产品资源实时监控和告警的服务，采集云产品各种监控指标数据，通过可视化图表展示，帮助您直观了解云产品的运行状况和性能。 更多信息，请参见  [云监控](https://cloud.tencent.com/document/product/248/13466)。
- 云数据库 MongoDB 通过云监控可以新建 Dashboard，创建丰富多样的图表，对比多个实例的指标数据，有助于您高效分析监控指标的变化情况。同时，还可以通过云监控配置告警信息，帮助您第一时间掌握数据库运行的异常信息，及时消除风险。

## 版本说明
当前 MongoDB 4.2、4.0、3.6和3.2版本均支持对实例进行监控。

## 计费说明
- 云监控服务基础功能免费，包括告警、采集监控数据等。
- 目前只针对**告警短信、电话告警**服务收费。

## 使用须知
- 监控数据保存时间为30天，您无法查看30天之前的监控信息。
- 收到腾讯云上报的告警信息，您需要根据告警信息排查异常。

## 前提条件
- 已开通云监控（Cloud Monitor，CM）服务。
- 已 [申请云数据库 MongoDB 实例](https://cloud.tencent.com/document/product/240/3551)。

## 操作步骤
### 快速查看实例监控数据
1. 登录 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb)。
2. 在左侧导航栏 **MongoDB** 的下拉列表中，选择**副本集实例**或者**分片实例**。副本集实例与分片实例操作类似。
3. 在右侧实例列表页面上方，选择地域。
4. 在实例列表中，找到目标实例。
5. 在目标实例的**监控/状态**列，单击<img src="https://qcloudimg.tencent-cloud.cn/raw/e7563e7cc13faab92822ca56af11cf19.png" style="zoom:50%;" />，在实例监控面板，可快速查看实例的监控数据。![](https://qcloudimg.tencent-cloud.cn/raw/bf17d8370ab778a399f097671b71ff52.png)
   - 选择**实时**、**近24小时**、**近7天**或者任意时间段，您可以查看对应时间段内的监控数据。
   - 在**请求**、**连接数**、**容量和QPS**或**时延**页签，您还可以结合监控指标的不同分类查看对应的监控数据。
   - 在**时间粒度**的下拉列表中，您可以设置监控数据的采集粒度，获取细粒度的监控数据。
   - 单击**多实例对比监控**，进入云监控 **Dashboard 列表**页面， [新建 Dashboard](https://cloud.tencent.com/document/product/248/46747)，选择需监控的相关实例，并设置  [监控图表](https://cloud.tencent.com/document/product/248/46761)，您就可以在同一图表中对比多个实例的监控数据。如下图所示。
![](https://qcloudimg.tencent-cloud.cn/raw/253e0023a9443a9ba011b2287d4f7de0.png)
   - 单击**配置告警**，进入云监控的**新建告警策略**页面。设置**策略类型**为**云数据库 / MongoDB / 实例**，选择**告警对象**，并设置监控指标的**触发条件**，配置告警通知方式， 帮助您第一时间了解业务异常，并及时预防风险、避免故障发生。具体操作，请参见 [新建告警策略](https://cloud.tencent.com/document/product/248/50398)。

### 大屏展示监控数据
在目标实例的**监控/状态**列，单击<img src="https://qcloudimg.tencent-cloud.cn/raw/9f09fd5be10ed038087abe183892a3ef.png" style="zoom:50%;" />，大屏展示监控数据。如下图所示。
![](https://qcloudimg.tencent-cloud.cn/raw/e16710abdd44d4915c49bdeac38add6d.png)

### 查看监控详情
1. 在 [实例列表](https://console.cloud.tencent.com/mongodb) 中，找到目标实例。
2. 单击目标实例 ID，进入**实例详情**页面。
3. 单击**系统监控**页签，查看实例整个集群各个监控指标的变化趋势。如下图（以副本集为例）所示。
![](https://qcloudimg.tencent-cloud.cn/raw/d611824d790c70d9ad177f522f1c3b9a.png)

### 更多操作
**根据监控对象查看监控数据**
- 副本集：在实例监控页面左侧，**集群总览**级联导航节点下，选择具体的实例名称、主节点、从节点，可以查看不同监控对象的监控指标数据。
- 分片实例：在实例监控页面左侧，**集群总览**级联导航节点下，选择具体的分片名称、主节点、从节点，可以查看不同监控对象的监控指标数据。

**根据时间段查看监控数据**
在实例监控页面右侧上方，您可以选择**实时**、**近24小时**、**近7天**或者任意时间段，查看对应时间段内的监控数据。

**根据不同时间精度查看监控数据**
在实例监控页面右侧上方，在**时间粒度**后面的下拉列表，您可以选择**5秒**、**1分钟**、**5分钟**或者**1天**，查看不同时间精度的监控数据。

**放大单个指标的变化图形**
在实例监控页面右侧的监控指标列表中，找到需查看的指标，单击<img src="https://qcloudimg.tencent-cloud.cn/raw/02851df41e781aa36044fc5b84d6c44e.png" style="zoom:45%;" />，可以放大该指标的变化图形，选择时间段，设置时间粒度，更细致的分析指标的变化情况。

**导出监控图表**
- 导出单个监控指标图表：在监控指标列表中，选择需导出的指标，单击<img src="https://qcloudimg.tencent-cloud.cn/raw/d26c4e16aced2043172ab6a4f2529273.png" style="zoom:45%;" />，选择**导出图片**，既可以导出指标的变化图形；选择**导出数据**，即可以在本地使用Excel查看并分析监控数据。
- 批量导出监控数据：在监控指标列表上方，单击**导出数据**，在**导出数据**对话框，选择需导出的指标，单击**导出**，即可在本地使用 Excel 查看并分析监控数据。

**设置告警**
在实例监控页面右侧上方，单击**设置告警**，进入云监控的 **新建告警策略** 页面。设置**策略类型**为**云数据库 / MongoDB / 实例**，选择**告警对象**，并设置监控指标的**触发条件**，配置告警通知方式， 帮助您第一时间了解指标发生的异常，及时预防风险、避免故障发生。具体操作，请参见 [新建告警策略](https://cloud.tencent.com/document/product/248/50398)。

**数据对比**
在实例监控页面右侧上方，您可以单击**数据对比**，设置对比的开始时间，默认对比1分钟前后的指标变化趋势。如下图所示。
<img src="https://qcloudimg.tencent-cloud.cn/raw/a5601b54aebeaf0389b972988a926923.png" style="zoom:80%;" />

