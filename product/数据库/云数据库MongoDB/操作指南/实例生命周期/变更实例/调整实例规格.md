云数据库 MongoDB 支持快捷调整实例的规格，提供灵活的扩缩容操作。用户可根据其业务所处的实际情况（业务初期、业务快速发展期、业务高峰期、业务低谷期等）灵活的调整其 MongoDB 实例的规格，从而更好满足用户的资源充分利用和成本实时优化等需求。

<span id="guize"></span>
## 配置规则
1. 云数据库 MongoDB 实例及其所关联的实例处于正常状态下（运行中）并且当前没有任务执行时才能够发起调整配置操作。
2. 调整配置过程中，不允许取消本次调整配置操作。
3. 调整配置前后实例的名称、访问 IP、访问端口均不发生变化。
4. 调整配置过程中，可能会涉及到数据的搬迁，期间云数据库 MongoDB 实例可正常访问，业务不受影响。
5. 调整配置完毕时可能会涉及实例切换，建议程序有自动重连功能，并且强烈建议选择实例可维护时间内做切换。有关维护时间请参见 [设置实例维护时间](https://cloud.tencent.com/document/product/240/19910)。

## 调整配置
1. 登录 [MongoDB 控制台](https://console.cloud.tencent.com/mongodb/ )，进入实例列表。
2. 选择需要调整的实例，在【操作】列，单击【调整配置】。
3. 在弹出页，选择调整后的配置，单击【确认】即可。

## 计算费用
### 升级实例
1. 对包年包月实例，用户自助升级数据库实例时，系统将计算实例规格间的差价，并从用户的账户中扣除差价，若账户余额不足则需要先进行充值。升级后将按照新的实例规格进行计费。
2. 对按量计费实例，升级后下一个计费周期将按照新的实例规格进行计费。

### 降级示例
1. 对包年包月实例，用户自助降级数据库实例时，系统将按照以下公式计算差价：
 **退还金额 = 原配置剩余价值 - 新配置购买价值**
金额价值说明如下：
 - 原配置剩余价值：指原配置有效订单金额 - 原配置已使用价值。
 - 原配置有效订单金额：指生效中订单的付款金额，不包含折扣和代金券。
 - 原配置已使用价值按照如下策略计算：
    - 已使用部分，发起降配当天，已满整月的，按已使用整月的包年包月价格及对应的官网折扣进行扣除；不满整月的，按已使用时长的按量计费价格进行扣除。
    - 已使用部分精确到秒。
 -  新配置购买价值：指新配置当前官方价格 * 剩余使用时长。

>!
> - 单价和折扣按照系统当前的优惠为准。
> - 抵扣或代金券不予以退还。
> - 退还金额将以按购买使用的现金和赠送金支付比例的方式返还到您的账户。
> -  退款金额 ≤ 0，按0计算，即退款金额为0。

2. 对按量计费实例，用户自助降级数据库实例时，系统采用新配置第一梯度按量计费的方式重新计费。

### 降配费用示例
**背景**：
2019年3月1日，购买广州三区高IO万兆型、2核4GB、内存200GB副本集 MongoDB，包年包月单价880元/月购买1年，包年享83折。

支付价为 880元/月 * 12个月 * 0.83 = 8764.8元

**示例一**：
2019年5月1日，需要将已使用2个月的高IO万兆型、2核4GB、内存200GB副本集 MongoDB，降配到2核4GB、内存100GB（单价670元/月）。

适用折扣：按照包年包月计费规则，包月时长为2个月不打折，包月时长为6个 - 11个月可享受88折。
原实例退货费用 = 8764.8元 - 880元/月 * 2个月 = 7004.82元
新购费用 = 670元/月 * 10个月 * 0.88 = 5896元
实例降配退款金额 = 7004.82元 - 5896元 = 1108.82元

**示例二**：
2019年11月1日，需要将已经使用8个月的高IO万兆型、2核4GB、内存200GB副本集 MongoDB，降配到2核4GB、内存100GB（单价670元/月）。

适用折扣：按照包年包月计费规则，包月时长为6个 - 11个月可享受88折。
原实例退货费用 = 8764.8元 - 880元/月 * 8个月 * 0.88 = 8764.8元 - 6195.2元 = 2569.6元
新购费用 = 670元/月 * 4个月 = 2680元
实例降配退款金额 = 2569.6元 - 2680元 = -110.4元 < 0，不退费。
