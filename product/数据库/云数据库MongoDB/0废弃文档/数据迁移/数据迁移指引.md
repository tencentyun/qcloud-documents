
腾讯云数据传输服务（Data Transmission Service，DTS）是提供数据迁移、数据同步、数据订阅于一体的数据库数据传输服务。帮助您在业务不停服的前提下轻松完成数据库迁移，利用实时同步通道轻松构建异地容灾的高可用数据库架构，利用数据订阅提供的云数据库实时增量更新数据，用户可根据自身业务需求自由消费增量数据。 DTS for MongoDB 目前支持多种网络场景、多种版本的 MongoDB 数据迁移。

| 术语     | 说明                                               |
| -------- | -------------------------------------------------- |
| 源实例   | 迁移的源实例。                                     |
| 目标实例 | 迁移的目标实例，即用户购买的腾讯云数据库 MongoDB。 |
| CVM 自建 | 用户在腾讯云服务器上部署的 MongoDB 服务。          |
| 公网自建 | 用户在外网环境下部署的 MongoDB 服务。                 |

## 迁移支持说明
**支持功能**
- 数据迁移：通过 DTS 迁移服务实现一次性数据迁移上云。
- 数据同步：通过 DTS 迁移服务实现全量迁移 + 增量实时同步。
- 库表迁移：支持库表级别迁移。
- 迁移可用性：支持自动重试机制 + 断点续传。
- 时延显示：支持增量同步时延显示。
- 跨架构：支持副本集、分片集群之间的异构迁移。

**支持版本**
- DTS 支持的版本包括 MongoDB 3.0、3.2、3.4、3.6、4.0。
- 支持源端、目标端架构为副本集 - 副本集、副本集 - 分片集群、分片集群 - 副本集、分片集群 - 分片集群的4种场景。

**支持网络**
DTS 迁移服务支持常见的网络迁移，包括公网、CVM 自建、专线接入、VPN 接入、云联网场景下的数据迁移与数据同步。

**支持场景**
- 上云迁移：支持将您在传统 IDC 的 MongoDB 迁移到云数据库 MongoDB，帮助您的业务高效、便捷的完成上云迁移。
- 云上自建迁移：支持将您在腾讯云或者其他云上，通过虚拟机自建的 MongoDB 服务迁移到腾讯云数据库 MongoDB。
- 其他云厂商 MongoDB 服务迁移：支持将其他云厂商提供的 MongoDB 数据迁移到腾讯云数据库 MongoDB。
- 云实例间迁移：支持在云实例间进行数据迁移或者实时同步。

**迁移注意事项**
- 为保障迁移效率，CVM 自建实例迁移不支持跨地域迁移。
- 外网实例迁移时，请确保源实例服务在外网环境下可访问。
- 在迁移发起前，请在源实例创建一个只读账号供迁移使用，否则迁移前校验步骤将不通过。
- 迁移成功时，由业务侧验证数据后，可断开源实例连接，将连接切换到目标实例。
- 由于单节点无 oplog，所以自建实例是单节点时，不支持在线迁移。

## 迁移步骤
1. 登录 [DTS 控制台](https://console.cloud.tencent.com/dts )，在数据迁移页，单击【新建迁移任务】，在“链路地域”选择对应地域，单击【0元购买】。
>?
>- MongoDB 数据迁移目前免费。
>- 迁移任务订购后不支持更换地域，请谨慎选择。
>
2. 在设置源和目标数据库页面，源库类型选择 MongoDB，配置实例和对应的帐号密码信息。
>?请在源实例创建一个只读账号供迁移使用，否则迁移前校验步骤将不通过。
>
![](https://main.qcloudimg.com/raw/342bd2764ddea97d3897fb9b731ff342.png)
3. 测试源实例和目标实例的连通性。
![](https://main.qcloudimg.com/raw/43d1d1717e76331a9d2048428515cf75.png)
4. 在设置迁移选项及选择迁移对象页面，设置迁移选项和迁移对象（可选择部分库表）。
![](https://main.qcloudimg.com/raw/0392c50e0aa030d890c20f119e714579.png)
5. 在校验任务页面，完成迁移前校验工作，单击【启动任务】。
![](https://main.qcloudimg.com/raw/6ab71b2393b4a99f305d139614a0d398.png)
6. 返回迁移任务列表，待增量同步完成100%，在“操作”列单击【完成】，即可完成迁移任务。
![](https://main.qcloudimg.com/raw/2a14237df7258733a5c14ff68fc19cf3.png)

