## 1. 数据库回档说明
通过数据库回档能力，可以最大程度地减少系统损失；MariaDB可以根据备份和日志保持情况，回档到30天内的任意时刻。
MariaDB的回档功能不会影响现网生产实例，MariaDB的回档可以直接回档到腾讯云创建的一个临时实例。临时实例可以支持读写，这样可以更灵活的对回档实例进行修改（如清理脏数据）；临时实例数据修正完毕后，可以通过“实例切换”将临时实例切换到现网生产实例。

回档过程中有以下限制条件：
- 在进行回档并创建临时实例的过程中，实例切换过程中，现网生产实例的部分管理功能将不可用，操作完成即可恢复数据库管理操作；
- 回档操作有可能会对二进制日志（BINLOG）进行强行分片，即未达到100M 也会被备份为一个独立文件；
- 回档后的临时实例具备现网生产实例的参数信息（例如账户、数据库参数等），但不能修改。

具体回档方法请见下：
![](https://main.qcloudimg.com/raw/5c48260e669c43c575fc9a2aaa526dd2.png)

## 2. 临时实例
临时实例是MariaDB基于备份生产的一个仅用于临时调整的实例，有效期仅有48小时。临时实例具备以下特性：
- 具备读写特性；
- 生命周期仅有48小时，48小时后删除；
- 一个实例同时只具备一个临时实例；
- 临时实例可以随意删除。

临时实例查看的位置：
![](https://main.qcloudimg.com/raw/0a84705b241434d89d3466ddcca64431.png)

## 3. 实例切换
实例切换是将临时实例切换为现网生产环境。当用户检查临时实例数据回档OK，可以对临时实例进行切换，此时会更换源实例和临时实例的内网链接。
- 切换过程中，现网生产实例可能闪断1秒；
- 切换完成后，原生产实例会被删除；
- 切换完成后，临时实例被替换为现网生产实例，而原临时实例也会被删除。 

切换操作见下图：
![](https://main.qcloudimg.com/raw/e1b879f76e9eba99b0906aa07255906d.png)

