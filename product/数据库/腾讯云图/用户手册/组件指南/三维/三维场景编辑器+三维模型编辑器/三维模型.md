三维模型是三维场景编辑器和三维模型编辑器的核心子组件，用户能够在该子组件中上传符合规范的模型，并调整配置模型材质特效、移动和动画等在内的渲染效果。
同时支持基于视点位置动态调度模型，在保证渲染效果的基础上，提升渲染效率；动态调度效果在预览或发布页面生效，编辑模式不生效。
三维场景编辑器默认开启模型动态调度，三维模型编辑器默认不开启模型动态调度。

## 模型基础设置参数配置
| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| **模型地址** | 可上传模型至个人三维模型库（上传前请先完成命名），或进入公共三维模型库选取相应资源，支持用户上传 gltf 和 glb 格式的模型，可在上传模型前使用在线 glTFViewer 查看模型是否能正确渲染，尽量使用建模软件（推荐 blender）将模型处理成 draco 压缩后的 glb 格式以提高渲染效率| 三维场景编辑器：东方明珠塔<br /> 三维模型编辑器：汽车 |
| **模型尺寸** | 模型的尺寸 | 1 |
| **模型位置 X/Y/Z** | 模型在右手坐标系下的空间位置 |0/0/0 |
| **绕 X/Y/Z 轴旋转** | 模型绕 X/Y/Z 轴的旋转角度 | 0/0/0 |
| **绕中心自转** | 开启后，模型会绕中心轴开始自转，通常建模时会将模型中心设置在模型底面中心 |不开启 |
| **自转速度** | 开启自转后，调整模型自转速度 | 1 |
| **批量渲染** | 对模型进行实例化渲染，能够大幅降低多个相同模型的渲染开销，常应用于树木/路灯等需要在三维场景中重复渲染多个的模型 |不开启 |

<img src="https://qcloudimg.tencent-cloud.cn/raw/5a0fb38023521e78809bcc8dc400aa65.png"  style="zoom:50%;">

公共三维模型库，其中的三维模型均是经过 draco 压缩后的 glb 模型，且建模时均以模型底面中心点为坐标原点(0,0,0)：

<img src="https://qcloudimg.tencent-cloud.cn/raw/4530dda6d3ba7d1a71339af12eb60a8c.png"  style="zoom:50%;">

开启批量渲染前后，多个相同三维模型的渲染效果及帧率对比如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/f5286cbf63339c296ede468d972adfc4.jpg)
![](https://qcloudimg.tencent-cloud.cn/raw/1ef72f4711943393849223fef5196277.jpg)

## 模型渲染设置参数配置
| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| **透明度** | 模型材质的透明度 |1 |
| **自发光颜色** | 模型材质的自发光颜色 | #000000 |
| **光照模型** | 光照模型模拟了各种光源照射到模型上时，材质对光的反射、折射等效果，可选项有：PBR 模型、Phong 模型和 Lambert 模型 | PBR 模型 |
| **金属度** | 光照模型选择为 PBR 模型时，可调整模型 PBR 材质的金属度，体现了模型的金属感 |三维场景编辑器：0.2 <br /> 三维模型编辑器：0.8|
| **光滑度** | 光照模型选择为 PBR 模型时，可调整模型 PBR 材质的光滑程度 | 三维场景编辑器：0.8 <br /> 三维模型编辑器：0.8 |
| **贴图效果** | 模型的贴图，可选项有：原生贴图、环境贴图，环境贴图选项需要在三维场景参数设置界面中开启环境贴图选项，此时模型材质能够实时呈现出对环境的反射 | 原生贴图|
| **AO 贴图** | 写入适配当前模型的环境遮蔽（AO）贴图 URL 链接，能够模拟环境光在模型材质上的遮蔽阴影 |- |
| **法线贴图** | 由写入适配当前模型的法线贴图 URL 链接，能够模拟光照在模型材质上漫反射形成的凹凸感 | - |
| **投射阴影** | 开启后，对该模型光照形成的阴影将被渲染，需开启目标主光照或辅助光照中的投射阴影才会生效 | 不开启|
| **接收阴影** | 开启后，会渲染出其他模型被光照投射到该模型上的阴影 |不开启 |
| **开启辉光** | 开启后，模型会产生辉光的效果，需开启后处理中的辉光效果才会生效，具体效果参数项在后处理中的辉光效果内调整 | 开启 |
| **边界高亮** | 开启后，模型会产生边界高亮的效果，需开启后处理中的边界高亮效果才会生效，具体效果参数项在后处理中的边界高亮效果内调整 | 开启|
| **自定义线框** | 当模型开启线框模式渲染后，开启此选项能够调整线框颜色、透明度和材质颜色、透明度等参数，不开启则线框模型默认为原生贴图颜色和透明度 |不开启 |
| **线框颜色** | 线框模型的线框颜色，开启自定义线框时生效 | #FFFFFF |
| **线框透明度** | 线框模型的线框透明度，开启自定义线框时生效 | 0.5 |
| **材质颜色** | 线框模型的材质颜色，开启自定义线框时生效 | #5C5D5D|
| **材质透明度** | 线框模型的材质透明度，开启自定义线框时生效 |0.1 |

<img src="https://qcloudimg.tencent-cloud.cn/raw/95f9d6e80660ef1a688bd3a56ae85eed.jpg"  style="zoom:50%;">

开启线框渲染模式后，渲染效果如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/c4c943e5559a2147d5b6d8ac10d9a38a.jpg)


## 模型运动设置参数配置
| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| **往返移动** | 开启后，模型会按照数据标签下定义的路径反复运动 |开启 |
| **模型运动的速度** | 模型运动的速度 | 1 |

## 模型动画设置参数配置
| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| **动画速度** | 若模型本身具有一系列动画，则可调整动画的速度 |1|

## 模型动态调度设置参数配置
| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| **可视距离** | 通过设置统一的可视距离，计算相机到模型中心的距离，若在可视距离范围内，则渲染该模型，否则不渲染即不可视 |三维场景编辑器：1000 <br /> 三维模型编辑器：100|
| **可视区渲染** | 开启后会实时判断并调度中心在当前视口中的模型，不在当前视口中的模型会被剔除即不可视 | 不开启 |

<img src="https://qcloudimg.tencent-cloud.cn/raw/419fa208af5b8501c2714f5bdd0005cc.png"  style="zoom:50%;">

## 数据配置
| 关键字段 | 说明 |
| --- | --- |
| **path** | 模型运动轨迹的三维坐标 |
| **light** | 跟随模型运动的灯光属性参数，常用于跟随车辆移动的聚光灯，其光照相关参数参考辅助灯光中的对应灯光类型参数 |
| **instance** | 开启批量渲染后每个实例化模型的空间位置和朝向 |

## 逻辑编辑器配置
暂无逻辑编辑器配置。
