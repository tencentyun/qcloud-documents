
## MySQL/TDSQL-C 检查详情
如下参数需要按照要求配置，否则校验时系统会发出警告，警告不影响迁移任务的进行，但是会对业务造成一定的影响，请用户评估后自行决定是否修改。
- 建议目标库 `max_allowed_packet` 的取值大于源库。 
  - 业务影响：目标库的 `max_allowed_packet` 参数设置小于源库，会导致目标库数据无法写入，从而造成全量迁移失败。  
  - 处理建议：修改目标库的 `max_allowed_packet` 参数，大于源库取值。

- 建议目标库的 `max_allowed_packet` 设置大于1GB。
  - 业务影响：`max_allowed_packet` 设置太大，会使用更多内存导致丢包，无法捕捉异常大事物包SQL；设置太小，可能会导致程序报错，备份失败，也会导致频繁的收发网络报，影响系统性能。
  - 处理建议：参考如下命令修改 `max_allowed_packet` 参数。
```
set global max_allowed_packet = 1GB
```

- 建议源库和目标库的字符集保持一致。
  - 业务影响：源库和目标库的字符集不一致可能会导致乱码。
  - 处理建议：参考如下命令将源库和目标库字符集修改为一致。
```
set character_set_server = 'utf8';
```

- 建议使用2CPU，4G Mem以上规格的实例。

- 如果仅执行全量数据迁移，请勿在迁移过程中向源实例中写入新的数据，否则会导致源和目标数据不一致。针对有数据写入的场景，为实时保持数据一致性，建议选择全量+增量数据迁移。

- 有锁导出时：源实例需要使用 Flush Table With Read Lock 短暂加锁，其中的 MyISAM 表会锁定到全量数据导出完成。当前等待加锁超时时间设置为60秒, 该时间内无法获取锁将导致任务失败。

- 无锁导出时：对没有主键或非空唯一键的表会加读锁。

## TDSQL MySQL 检查详情

如下参数需要按照要求配置，否则校验时系统会发出警告，警告不影响迁移任务的进行，但是会对业务造成一定的影响，请用户评估后自行决定是否修改。

- 建议目标库 `max_allowed_packet` 的取值大于源库。 
  - 业务影响：目标库的 `max_allowed_packet` 参数设置小于源库，会导致目标库数据无法写入，从而造成全量迁移失败。  
  - 处理建议：修改目标库的 `max_allowed_packet` 参数，大于源库取值。

- 建议目标库的 `max_allowed_packet` 设置大于1GB。
  - 业务影响：`max_allowed_packet` 设置太大，会使用更多内存导致丢包，无法捕捉异常大事物包SQL；设置太小，可能会导致程序报错，备份失败，也会导致频繁的收发网络报，影响系统性能。
  - 处理建议：参考如下命令修改 `max_allowed_packet` 参数。
```
set global max_allowed_packet = 1GB
```

- 建议源库和目标库的字符集保持一致。
  - 业务影响：源库和目标库的字符集不一致可能会导致乱码。
  - 处理建议：参考如下命令将源库和目标库字符集修改为一致。
```
set character_set_server = 'utf8';
```

- 建议使用2CPU，4G Mem以上规格的实例。

- 如果仅执行全量数据迁移，请勿在迁移过程中向源实例中写入新的数据，否则会导致源和目标数据不一致。针对有数据写入的场景，为实时保持数据一致性，建议选择全量+增量数据迁移。

- 有锁导出时：源实例需要使用 Flush Table With Read Lock 短暂加锁，其中的 MyISAM 表会锁定到全量数据导出完成。当前等待加锁超时时间设置为60秒, 该时间内无法获取锁将导致任务失败。

- 无锁导出时：对没有主键或非空唯一键的表会加读锁。

- 源数据库实例为分布式数据库时，需要提前在目标库建立分表，否则这些表被迁移后都将是单表。

