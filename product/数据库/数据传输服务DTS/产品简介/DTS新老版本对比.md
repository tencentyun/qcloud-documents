## 概述
老版本 DTS 通过云原生复制的方式做数据增量同步，需要强依赖于源数据库的内核形态，并且功能限制较多，如不支持库表名映射、数据库多合一等高级功能。

新版本 DTS 采用全新自研内核，对产品能力进行了全面升级，提供了更高稳定性、可用性、灵活性和安全性的数据传输能力，更方便用户使用。新版本 DTS 围绕数据的传输进行能力打磨，支持了异构数据库的迁移、跨账号数据迁移等高级功能。 

新版本 DTS 将逐步取代老版本 DTS，老版本 DTS 的维护时间预计到2021年底，请使用老版本 DTS 的用户尽快升级到新版本 DTS。 

## 功能对比
### 数据迁移功能对比
新老版本 DTS 的关键功能对比如下：

| **对比项**     | **老版本数据迁移**                       | **新版本数据迁移**                     |
| -------------- | --------------------------------- | --------------------------------- |
| 数据库类型     | <li>不支持异构数据库的迁移。<br><li>支持源库为阿里云数据库的迁移。 | <li>支持异构数据库的迁移。<br><li>支持源库为阿里云和 AWS 的迁移。 |
| 跨账号迁移     | 不支持跨账号迁移。          | 支持跨账号迁移。                                             |
| 支持的版本     | 不支持跨版本迁移。         | 支持大部分数据库的跨版本迁移，支持的版本详情请参见 [数据迁移支持的数据库](https://cloud.tencent.com/document/product/571/58686)。 |
| 迁移对象       | 迁移维度比较泛，支持迁移基础表和视图，部分数据库部分版本也支持同步用户信息。 | 数据迁移更专注数据内容本身，迁移对象为基础表和视图，对用户信息、数据库实例参数等不做迁移。后续会陆续支持触发器、函数等数据库对象的迁移。 |
| 任务可视化     | 不支持任务进度可视化。      | 支持任务进度可视化。                   |
| 监控告警       | <li>不支持指标监控。<li>不支持默认告警策略。 | <li>支持指标监控。<li>支持默认告警策略，对迁移异常事件自动触发告警。 |
| 操作体验增强   | -                                     | <li>对有主键或者非空唯一键的表，支持无锁迁移。<br><li>支持库表映射。<br><li>增量迁移过程中，支持实例重启或者升级。<br><li>迁移任务与实例解耦，增量阶段即释放锁。 |
| 高可用性（HA） | HA 切换限制条件较严格。  | <li>开启 GTID 的前提下，支持源实例 HA 切换。<li>支持目标实例 HA 切换。</li> |
| 数据校验       | 操作用户需要具备源实例账号的 Super 权限。  | 操作用户不需要具备源实例账号的 Super 权限（部分数据库已支持）。 |

### 数据同步功能对比
新老版本 DTS 的关键功能对比如下：

| **对比项**   | **老版本数据同步**                 | **新版本数据同步**            |
| -------------- | ---------------------------- | ------------------------------------- |
| 同步类型       | 支持单向、一对一同步。     | 支持双向同步、环形同步、多对一同步。                         |
| 支持的版本     | 不支持跨版本同步。          | 支持跨版本同步，支持的版本详情请参见 [数据同步支持的数据库](https://cloud.tencent.com/document/product/571/58672)。 |
| 同步对象       | 同步维度比较泛，支持同步基础表和视图，部分数据库部分版本也支持同步用户信息。 | 数据同步更专注数据内容本身，同步对象为基础表和视图，对用户信息、数据库实例参数等不做同步。后续会陆续支持触发器、函数等数据库对象的同步。 |
| 内容冲突       | 不支持内容冲突检查。                         | 提供库表冲突检查策略，并支持库表重命名。                     |
| 主键冲突       | 不支持主键冲突策略。                          | 提供主键冲突处理策略：<br><li>冲突报错：在同步时发现表主键冲突，报错并暂停数据同步任务。<br/> <li>冲突忽略：在同步时发现表主键冲突，保留目标库主键记录。<br/> <li>冲突覆盖：在同步时发现表主键冲突，用源库主键记录覆盖目标库主键记录。 |
| 任务可视化     | 不支持任务进度可视化。                                 | 支持任务进度可视化。                                         |
| 监控告警       | <li>不支持指标监控。<li>不支持默认告警策略。 | <li>支持指标监控。<li>支持默认告警策略，对同步异常事件自动触发告警。 |
| 操作体验增强   | -                                   | <li>支持库表映射。<br> <li>同步增量过程中，支持实例重启或者升级。 |
| 高可用性（HA） | HA 切换限制条件较严格。  | <li>开启 GTID 的前提下，支持源实例 HA 切换。<br><li>支持目标实例 HA 切换。</li> |

### 数据订阅功能对比
新老版本 DTS 的关键功能对比如下：

| **对比项**       | **老版本数据订阅**                | **新版本数据订阅**                                           |
| ---------------- | --------------------------------- | -------------------------------------------------- |
| 数据库类型       | 仅支持云数据库 MySQL。 | 支持云数据库 MySQL 、云数据库 MariaDB 或 TDSQL MySQL版。 |
| 订阅数据存放方式 | 数据存放在物理机上，主备存储。    | 数据储存在 Kafka 中间件，支持单 Topic 数据分区存储（用户可选择分区策略），提升消费效率。 |
| 支持的协议       | 专有协议，只支持 Java SDK。       | Kafka 协议，支持各种语言 Kafka Client SDK。           |
| 监控告警 | <li>支持指标监控。<li>不支持默认告警策略。 | <li>支持监控的指标更丰富。<li>支持默认告警策略，对订阅异常事件自动触发告警。 |
| 数据通道         | 单个实例仅支持创建一个数据通道。  | 单个实例支持创建多个数据通道，通过创建消费组实现多个通道同时消费。   |
| 消费方式         | 仅支持串行处理。                  | 单 Topic 数据支持分区存储，多个分区的数据并发消费，提升消费效率。 |

