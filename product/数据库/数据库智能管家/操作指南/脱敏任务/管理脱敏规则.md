
DBbrain 数据脱敏功能支持自定义脱敏规则，用户可通过正则表达式自定义数据内容格式并制定脱敏算法，也支持按照主外键/非主外键方式设置脱敏规则，同一数据内容在字段属性不同时可引用不同规则，确保脱敏应用的灵活性，同时支持用户配置个性化脱敏规则模板，方便不同任务在使用时进行不同规则的引用。

<span id = "jrtmgzglym"></span>
## 进入脱敏规则管理页面
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/desensitization)，在左侧导航选择【数据库安全】>【数据脱敏】，进入数据脱敏页面。
2. 在数据脱敏页面，单击【添加任务】，进入添加任务页面。
3. 在添加脱敏任务的【选择库表和规则】步骤页面中，单击“预定义规则”后的【规则管理】，进入脱敏规则管理页面。
![](https://main.qcloudimg.com/raw/868d174dab486cd24be467b94d74710f.png)

## 脱敏规则管理页面
DBbrain 数据脱敏功能针对每种类型的数据都有定制化的脱敏方案，这种方案即为规则。考虑每次脱敏任务会有多种数据类型，一次脱敏也就会用到多个规则，故将常见脱敏任务的规则进行整合，即为规则集。

[规则管理页面](#jrtmgzglym) 展示了用户所创建的脱敏规则集详情，每行配置为一个规则集，均包含了多条规则。列表包含规则集名称、字段规则数（启用/总数）、最后编辑时间、备注和操作，用户也可在此对脱敏规则集进行添加、查看、编辑、删除及批量删除等操作。
![](https://main.qcloudimg.com/raw/281d04eda515e9f91c076a7e2e503d07.png)

## 添加脱敏规则
1. 在 [添加脱敏任务](https://console.cloud.tencent.com/dbbrain/desensitization/add) 的【选择库表和规则】步骤页面中，单击“预定义规则”后的【规则管理】，进入脱敏规则管理页面。
2. 在规则管理页面，单击左上角的【添加规则】。
![](https://main.qcloudimg.com/raw/e1136caa02acaef4ce8647c36c30cadc.png)
3. 在弹出的对话框，修改自定义规则配置和默认规则后，单击【保存】，即可完成新规则集的配置。
>?
>- 每个规则集在新建时默认配置20个字段规则，分别是手机号、银行卡号、中国姓名、性别、车牌号、IP 地址、电子邮箱、身份证号、xml、url、标准日期、标准地址、公司名、宗教信仰、军官证、mac 地址、GPS 地址、工商注册号、纳税识别号、组织机构代码。
>- 由于预设规则正则表达式复杂，删除后还原困难。因此预设默认规则不可删除，但可以停用，如您停用或修改默认规则过多，又需要还原，可单击下方的【默认字段还原】，将默认规则还原为初始状态。
>- 当您需要新增自定义敏感字段的脱敏规则时，可单击下方的【新增】添加规则。
>
 - **敏感字段类型**：用于给敏感字段命名，名字在一个规则集内不可重复。
 - **正则表达式**：通过正则为敏感字段配置发现规则。
 - **主外键脱敏算法**：当需要脱敏的敏感数据为主键或者外键时，所采用的脱敏算法。仅提供令牌化、格式保留、全保留三种脱敏算法。
 - **非主外键脱敏算法**：当需要脱敏的敏感数据不是主键或者外键时，所采用的脱敏算法。可使用系统内置的任意脱敏算法，包括 AES 加密、K 匿名、加星、屏蔽、洗牌、全保留、格式保留、令牌化，也可以在下拉菜单中，单击【新增】，[建立自定义脱敏算法](https://cloud.tencent.com/document/product/1130/48559)。
![](https://main.qcloudimg.com/raw/b1d4d44626a344e4654fc52a2aefe981.png)

