异常告警展示了用户账号下，支持 DBbrain 接入的数据库实例所产生的异常告警（由“7 * 24小时异常诊断”发现的异常项）信息汇总。

>?异常告警目前支持云数据库 MySQL（不含单节点 - 基础型）、云原生数据库 TDSQL-C（TDSQL-C for MySQL）、自建数据库 MySQL、云数据库 Redis、云数据库 MongoDB。

## 异常告警列表
登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/event)，在左侧导航选择【监控告警】>【异常告警】页，在上方选择对应数据库。

在异常告警列表中，展示了数据库实例基本信息、风险等级、诊断项、持续时长及操作等。在搜索栏，用户可根据实例 ID、实例名、诊断项等进行搜索，同时也支持按地域及时间进行筛选。
- “风险等级”包括：提示、告警、严重、致命，用户可进行按字段筛选、聚合和搜索，单击【详情】查看异常的具体信息和优化建议。
- “诊断项”包括：慢 SQL、主从切换、死锁、事务未提交、内存超限等30项异常诊断的项目，用户可进行按字段筛选、聚合和搜索，也支持按诊断项的持续时长进行排序。
![](https://main.qcloudimg.com/raw/143daafadd8f5f32b5b54ca25e4bf7c1.png)

## 忽略/取消忽略告警
忽略、取消忽略功能用于辅助用户筛选查看异常告警信息，该功能仅针对诊断项为非“健康巡检”的异常告警。

- 在异常告警列表的“操作”列，单击【忽略】可忽略此实例该条诊断项的告警，且该实例下由相同根因产生的诊断项也将被忽略。
![](https://main.qcloudimg.com/raw/922d6825b35614b4071de6d287096d82.png)
- 对于已被忽略的异常告警，将会被置为灰色，单击【取消忽略】可取消该忽略，且该实例下由相同根因产生的诊断项也将被取消忽略。
![](https://main.qcloudimg.com/raw/efd72649bbae3439c7471889a719a284.png)


## 诊断项详细说明
诊断项为智能诊断的项目，其类别包括性能、可用性、可靠性、可维护性四类，每个诊断项仅属于一个类别。

| 诊断项名称                                    | 诊断项类 | 说明                                                         |
| :-------------------------------------------- | :------- | :----------------------------------------------------------- |
| 连接性检查                                    | 可用性   | 无法与数据库建立连接                                         |
| 插入、更新、删除慢                            | 性能     | 存在长时间未结束的线程                              |
| 慢 SQL                                         | 性能     | 存在一直处于创建临时表、拷贝临时表、排序结果等状态的线程     |
| 等待行锁                                      | 性能     | 存在等待锁的事务                                             |
| 事务未提交                                    | 性能     | 存在长时间处于 Sleep 状态的线程                                |
| DDL 语句等待 Metadata Lock      | 性能     | 存在等待 Metadata Lock 的线程，且其在执行 DDL 语句               |
| insert、update、delete 语句等待 Metadata Lock | 性能 |存在等待 Metadata Lock 的线程，且其在执行 IUD 语句   |
| select 语句等待 Metadata Lock  | 性能     | 存在等待 Metadata Lock 的线程，且其在执行 SELECT 语句            |
| 死锁                                          | 可靠性   | 监控数据发现死锁，并且 INNODB STATUS 中存在死锁信息            |
| 只读锁                                        | 性能     | 存在等待全局只读锁的线程                                     |
| SQL 语句等待 Metadata Lock          | 性能     |  存在等待 Metadata Lock 的线程，且其在执行 DDL 语句          |
| Waiting for flush tables           |  性能    | 存在等待 flush table 状态的线程                                    |
| 活跃会话高                                    | 性能     | 活跃会话数大于三倍的数据库实例 CPU 规格                        |
| 磁盘空间利用率                                | 可靠性   | 磁盘利用率过高                                               |
| 内存利用率                                    | 可靠性   | 内存利用率过高                                               |
| CPU 利用率                                     | 性能     | CPU 利用率过高                                                |
| Table open cache 命中率低                      | 性能     | Table open cache 命中率低                                     |
| 高危账号                                      | 可维护性 | 存在匿名账户、无密码账户等情况                               |
| 大表                                          | 可维护性 | 单表大于10%的实例磁盘规格                                    |
| 复制 IO 线程中断  | 可靠性   | 复制相关的监控指标异常触发诊断，且 SHOW SLAVE STUTAS 存在 IO 线程异常 |
| 复制 SQL 线程中断   | 可靠性   | 复制相关的监控指标异常触发诊断，且 SHOW SLAVE STUTAS 存在 SQL 线程异常 |
| DDL导致复制延迟    | 可靠性   | 复制相关的监控指标异常触发诊断，且存在执行 DDL 的等待 Metadata Lock 的线程 |
| 事务导致复制延迟          | 可靠性   | 复制相关的监控指标异常触发诊断，且存在 Sleep 的等待 Metadata Lock 的线程 |
| 只读锁导致复制延迟     | 可靠性   | 复制相关的监控指标异常触发诊断，且存在等待全局只读锁的线程   |
| 主从切换                                      | 可用性   | 主从切换监控指标异常                                         |
| 服务器故障导致实例迁移                        | 可用性   | 服务器故障导致实例迁移监控指标异常                           |
| 只读实例剔除                                  | 可用性   | 只读实例剔除监控指标异常                                     |
| 磁盘超限                                      | 可用性   | 磁盘超限监控指标异常                                         |
| 内存超限                                      | 可用性   | 内存超限监控指标异常                                         |
| 内存 OOM | 可用性 | 数据库内存使用过载 |
| 错误命令 ErrCmd | 可维护性 | 存在命令执行错误，当前错误数目%d（Redis 特有） |
| 高危命令 RiskCmd | 可维护性 | 检测到使用了命令 KEYS（Redis 特有） |
| proxy 负载/流入/流出/均衡情况 | 可维护性 | proxy 负载/流量/均衡异常（Redis 特有） |
>?
>- agent 接入方式接入的自建数据库实例暂无主备复制相关的诊断项。
>- 直连接入方式接入的自建数据库实例无主机资源相关的诊断项和主备复制相关的诊断项。
>

## 查看告警

异常告警消息历史列表中存放了所有被推送过的异常告警消息，便于用户快速查阅历史推送过的异常诊断问题。

#### 方式一

登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，如果实例在当前时间出现了异常诊断问题，在控制台的右上角会为您实时弹窗推送异常告警消息通知，消息通知包含数据库实例的实例ID/名称、诊断项、开始时间等，方便您快速了解数据库实例的诊断问题。

- 单击消息通知中的**查看异常诊断详情**，可以查看该实例具体的诊断详情及优化建议。
- 勾选消息通知中的**今日不再提醒**，则当天您账号下的数据库实例发生异常诊断问题时，将不会弹窗为您推送异常告警消息。

![](https://main.qcloudimg.com/raw/8aedba28bff5c9517fe14da58cd2d01f.png)

#### 方式二

登录 [MySQL控制台](https://console.cloud.tencent.com/cdb)，在左侧导航选择**实例列表**、**任务列表**、**参数模板**、**回收站**或**置放群组**页，在右上角单击**异常告警**，可展开异常告警历史消息列表，按钮旁边展示了用户账号下实例所产生的告警问题数量。
![](https://main.qcloudimg.com/raw/eb5495d3f2fe0637be90e7cdcfe1ceb2.png)

在展开的异常告警历史消息列表，可以查看到所有被推送过的异常告警历史消息，支持切换地域查看，单击每条告警消息，可查看各异常告警事件的异常诊断详情。
![](https://main.qcloudimg.com/raw/6662918aa55d925ab8af0d42353f3760.png)