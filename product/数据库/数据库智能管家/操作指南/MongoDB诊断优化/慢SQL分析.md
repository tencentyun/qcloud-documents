
## 功能描述
慢日志分析对实例中慢日志的记录和执行信息（来源信息、次数、执行时间、返回集合、扫描集合等）进行统计、聚合。

## 整体概览
![](https://qcloudimg.tencent-cloud.cn/raw/b9d9abd64dc63d0f13c457e0827a9882.png)

## 查看慢 SQL 分析
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/slow-sql)，在左侧导航选择**诊断优化**，在上方选择对应数据库，然后选择**慢 SQL 分析**页签。
**慢日志统计**栏展示实例的慢查询数和集群最大 CPU 使用率，可调整时间范围查看任意时间段的慢 SQL 视图。若实例中有慢 SQL，视图中会显示慢 SQL 产生的时间点和个数。
  - 支持快捷设置统计时间维度：近5分钟、近10分钟、近1小时、近3小时、近24小时、近3天。
  - 支持选择统计范围：实例、指定 mongod 节点。
2. 单击（选择单一时间段）或拉选（选择多个时间段）慢日志统计图表的慢查询（柱形图），下方会显示聚合慢日志模板以及执行信息（包括执行次数、总耗时执行时间、扫描行数、返回行数等），各列数据均支持正序或逆序排序。
  右侧的耗时分布中会展示所选时间段内的慢日志总体耗时分布情况。
  ![](https://qcloudimg.tencent-cloud.cn/raw/72bab20e3c3bc865345b0d92cd17e295.png)
3. 单击某条聚合的慢日志记录，右侧边会弹出慢日志的统计分析和明细数据。
 - 在统计页，您可查看耗时分布图、总耗时占比、扫描行数占比、平均扫描行数信息。
  ![](https://qcloudimg.tencent-cloud.cn/raw/235fab6999bed8b5b17cdd2130bed503.png)
 - 在明细页，可以查看该命令模板对应的明细记录，包括 SQL 语句、命名空间、执行时间、扫描索引数、返回行数、扫描行数等。同时支持根据时间、命名空间、耗时等进行筛选，查询历史 SQL 明细信息。
  明细页可以向左侧拉取，进行横向扩展，也可在首页的明细页签查看放大统计表。
  ![](https://qcloudimg.tencent-cloud.cn/raw/8c8c403c325f4f4e5f6c4a87d8e69c11.png)
4. 导出慢日志数据。
   在慢日志列表的右侧，单击**导出**，可将慢日志分析数据以 CSV 格式导出到本地，方便用户查看。
![](https://qcloudimg.tencent-cloud.cn/raw/feb84853c63580554a79af5743505c4b.png)
