## 功能描述

健康报告功能定期对数据库实例进行健康巡检，并根据用户自定义时间范围输出对应的健康报告，帮助用户深入了解数据库实例健康情况、发生的故障以及存在的隐患，同时给出专业的优化建议供用户参考。
>?健康报告目前支持云数据库 MySQL（不含单节点 - 基础型）、云原生数据库 TDSQL-C（TDSQL-C for MySQL）、自建数据库 MySQL、云数据库 Redis、云数据库 MongoDB。
>
## 创建健康报告
登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/analysis)，在左侧导航选择**诊断优化**，在上方选择对应数据库，然后选择**健康报告**页，可查看选择时间段的健康得分趋势以及问题概要。
- 单击**创建健康报告**，可创建一个任务，任务完成后可以查看或下载该时段的健康报告。如需将健康报告推送至指定的联系人邮箱，请参见 [手动触发健康报告邮件推送](https://cloud.tencent.com/document/product/1130/50390#sdcfjkbgyjts)。
>?健康报告的时间与左侧所选时间范围一致。
- 单击**定期生成设置**，可配置自动生成健康报告的时间周期。如需将健康报告推送至指定的联系人邮箱，请参见 [计划任务健康报告邮件推送](https://cloud.tencent.com/document/product/1130/50390#jhrwjkbgyjts)。
![](https://main.qcloudimg.com/raw/2551a4c7010fd3b6849d2ba93eb33ce8.png)

## 批量生成健康报告

DBbrain 支持对多个实例进行批量健康报告设置，方便用户对名下的多个实例进行统一管理。

1. 在**实例管理**页面，勾选需要生成健康报告的多个实例，然后单击**健康报告**。
   ![](https://qcloudimg.tencent-cloud.cn/raw/4af9c43e6217aba7fbe323d3c47864b5.png)
2. 在弹出的对话框中，设置健康报告生成的时间、发送时间、联系人、是否覆盖原配置等，然后单击**确定**。
   ![](https://qcloudimg.tencent-cloud.cn/raw/fd4f43f61b54b43101ef03fed6ebc056.png)

## 设置健康报告

在左侧导航选择**诊断优化**，在上方选择对应数据库，然后选择**报告设置**页，可根据需要定制周期性健康报告的发送与接收。
![](https://main.qcloudimg.com/raw/700a3524ee26396d3a199f2af064f8b8.png)
- 目前云数据库 MySQL/TDSQL-C for MySQL/Redis 支持诊断优化健康报告及 KILL 操作报告两种类型，自建 MySQL/云数据库 MongoDB 仅支持诊断优化健康报告。
![](https://main.qcloudimg.com/raw/4b4c5a33655c4d6a72b81f3062e49d80.png)
- 首次开启周期性健康报告，需要配置生成周期和接收时间、接收人、安全级别 相关信息如下图所示：
![](https://main.qcloudimg.com/raw/b8b62d9ed84a86c59da0f5dfb32db4fa.png)

## 查看/下载健康报告

健康报告得分详情栏展示了数据库实例的健康得分状况，其诊断项包括可用性、可维护性、性能及可靠性，详见 [异常告警](https://cloud.tencent.com/document/product/1130/44957)。

- 任务列表中，展示每个健康报告任务的类型、健康等级、创建时间、起止时间、进度以及操作。
 - **类型**列展示健康报告的生成方式，包括数据库巡检、手动触发和计划执行。
 - **健康等级**列展示通过诊断所得到的健康等级，等级包括健康、亚健康、危险、高危。
- 单击**操作**列的**查看**，可查看健康报告详情和下载 PDF 文件。
- 单击**操作**列的**邮件**，或者选取多条健康报告记录后单击**批量发送**，可将健康报告推送至指定的联系人邮箱，具体请参见 [历史健康报告邮件推送](https://cloud.tencent.com/document/product/1130/50390#jkbgymts)。
- 选择**操作**列的**更多** > **扣分详情**，可查看该健康报告任务扣分原因。
- 选择**操作**列的**更多** > **删除**，可删除该健康报告任务。
![](https://main.qcloudimg.com/raw/40830f43b6ccbd04a3f400402eaeb02b.gif)

## 健康报告解读
健康报告展示了 DBbrain 对用户所选的数据库实例，在指定时间范围内整体运行情况的评价，主要包括数据库存在问题汇总和分析，并给出相关建议。报告用于让用户全面了解所选数据库实例的整体运行情况，及协调相关人员对问题状态达成统一的认识。

报告主要包括介绍、基本信息、健康、实例状态、异常诊断、慢 SQL 分析、大表、大 KEY 分析以及性能曲线等章节。
![](https://main.qcloudimg.com/raw/dd12f046335294fda6a1459ed0dc7aa2.png)

#### 附录：
#### 报告异常等级定义
| 序号 | 类型 | 说明   |
| ---- | ---- | ------ |
| 1    | 致命 | 值为 1 |
| 2    | 严重 | 值为 2 |
| 3    | 告警 | 值为 3 |
| 4    | 提示 | 值为 4 |
| 5    | 健康 | 值为 5 |

#### 报告健康程度定义
| 序号 | 类型   | 说明                  |
| ---- | ------ | --------------------- |
| 1    | 健康   | 分数范围 ≥ 95         |
| 2    | 亚健康 |80 ≤ 分数范围 < 95 |
| 3    | 危险   | 60 ≤ 分数范围 < 80 |
| 4    | 高危   | 分数范围 < 60         |

