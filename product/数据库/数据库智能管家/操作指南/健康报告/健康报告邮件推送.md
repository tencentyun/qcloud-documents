DBbrain 支持健康报告邮件推送功能，用户在无需登录控制台的情况下，即能便捷地了解到数据库实例的健康状况。
为方便业务线中更多的相关人员能够及时了解到数据库实例的健康状况，用户也可以根据自己的需求个性化设置想要推送的健康报告及接收人员。

当前由手动触发、计划任务及数据库巡检三种方式生成的健康报告，均支持通过邮件进行推送，用户可以选择在创建报告的同时立即推送到指定的接收人邮箱，也可以选择将历史生成的报告推送到指定的接收人邮箱。

>?健康报告邮件推送目前仅支持云数据库 MySQL（不含单节点 - 基础型）、云数据库 Redis、云原生数据库 TDSQL-C（TDSQL-C for MySQL）、云数据库 MongoDB。

## [手动触发健康报告邮件推送](id:sdcfjkbgyjts)
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/analysis)，在左侧导航选择【诊断优化】，在上方选择对应数据库，然后选择【健康报告】页，单击【创建健康报告】。
2. 在弹出的对话框，开启“发送至指定邮箱”，选择联系人或联系组后，单击【确定】，生成的健康报告将会发送至指定的联系人或联系组邮箱。
>?
>
>- 联系人和联系组不能同时选择。
>- 健康报告单次最多可以选择发送给30个联系人。
>- 健康报告邮件推送会通过所选的邮件地址进行推送，如遇到邮箱拦截，请提前增加邮箱白名单策略：dbbrain@qcloudmail.com。
>
![](https://main.qcloudimg.com/raw/b37660fc512d364960b1562c7c9e2e40.png)

## [计划任务健康报告邮件推送](id:jhrwjkbgyjts)
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/analysis)，在左侧导航选择【诊断优化】，在上方选择对应数据库，然后选择【健康报告】页，单击【定期生成设置】。
2. 在弹出的对话框，配置自动生成健康报告的时间周期，开启“发送至指定邮箱”，配置健康等级，选择联系人或联系组后，单击【确定】，生成的健康报告将会定期发送至指定的联系人或联系组邮箱。
>?
>- 联系人和联系组不能同时选择。
>- 定期生成设置，最多可以选择发送给30个联系人。
>- 健康报告邮件推送会通过所选的邮件地址进行推送，如遇到邮箱拦截，请提前增加邮箱白名单策略：dbbrain@qcloudmail.com。
> 
![](https://main.qcloudimg.com/raw/56bdd933369e136bd1ebff2848089e76.png)

## [数据库巡检报告邮件推送](id:sjkxjjkbgyjts)
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/patrol)，在左侧导航选择【数据库巡检】，单击右上角的【邮件设置】。
2. 在弹出的对话框，开启“发送至指定邮箱”，选择已创建的邮件发送模板或新建模板，单击【确定】，数据库巡检产生的健康报告将会根据选择的模板，发送至各模板中指定的联系人或联系组邮箱。
>?
>- 单次最多5个数据库巡检邮件推送模板同时生效。
>- “最后编辑”列展示模板的最后编辑人信息，将会根据最后编辑人所拥有的实例权限，发送实例生成的健康报告。
>- 健康报告邮件推送会通过所选的邮件地址进行推送，如遇到邮箱拦截，请提前增加邮箱白名单策略：dbbrain@qcloudmail.com。
>
![](https://main.qcloudimg.com/raw/371157844bc7cc2d2fe43897f3fe9c75.png)

### 新建模板
1. 在 [数据库巡检邮件设置弹窗](#sjkxjjkbgyjts) 中，单击【新建模板】。
![](https://main.qcloudimg.com/raw/93d07b5e14b3913678d681d3fa9655e3.png)
2. 在弹出的对话框，填写模板名称、地域、健康等级，选择联系人或联系组后，单击【确定】，即完成模板的创建。
>?
>- 选择地域和健康等级后，会根据所选地域和健康等级发送生成的健康报告。
>- 数据库巡检健康报告发送的前提为该地域的实例已开启数据库巡检。
>- 健康报告邮件推送会通过所选的邮件地址进行推送，如遇到邮箱拦截，请提前增加邮箱白名单策略：dbbrain@qcloudmail.com。
>
![](https://main.qcloudimg.com/raw/95c9877ce54b9f188358258ab1cda81b.png)

## [历史健康报告邮件推送](id:lsjkbgyjts)
### [数据库巡检页面推送](id:sjkxjymts)
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/patrol)，在左侧导航选择【数据库巡检】。
2. 在数据库巡检列表，单击巡检记录“操作”列的【邮件】，或选择多条数据库巡检记录，单击【批量发送】。
3. 在弹出的对话框，选择联系人或联系组后，单击【确定】，会将所生成的健康报告发送至联系人或联系组的邮箱。
![](https://main.qcloudimg.com/raw/5bba5e80fc67f47dfbbd9ada0dcdd94e.png)

### [健康报告页面推送](id:jkbgymts)
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/performance/health)，在左侧导航选择【诊断优化】，在上方选择对应数据库，然后选择【健康报告】页。
2. 在健康报告列表，单击报告记录“操作”列的【邮件】，或选择多条健康报告记录，单击【批量发送】。
3. 在弹出的对话框，选择联系人或联系组后，单击【确定】，会将所选健康报告发送至指定的联系人或联系组的邮箱。
![](https://main.qcloudimg.com/raw/d103097ceac62710cef5aea327048bb1.png)

## 邮件推送记录
1. 登录 [DBbrain 控制台](https://console.cloud.tencent.com/dbbrain/analysis)，单击右上方的【邮件记录】，可查看历史发送过的健康报告邮件记录。
![](https://main.qcloudimg.com/raw/02c484ece54dea336625b42c9112c271.png)
2. 在邮件记录中，可查看邮件接收人、实例基本信息以及邮件的发送状态。
 - 邮件接收人信息包括：接收人、邮箱、发送时间，当接收人为联系组时，单击“人数”，可查看该组中联系人的详情。
 - 实例基本信息包括：实例ID/名称、报告起止时间。
 - 邮件状态包括：全部成功、部分失败、全部失败三种，当状态为部分失败及全部失败时，请检查填写的邮箱是否正确。
![](https://main.qcloudimg.com/raw/4d54eadb6eddb6bea3abaebdda8510d0.png)

## 邮件推送正文
报告邮件推送成功后，用户邮箱中将会收到如下邮件，信息包括实例 ID、实例名称、健康等级、类型、起止时间、操作等，单击“操作”的【查看】，可以通过邮箱直接下载该实例的健康报告 PDF 文件。
>!健康报告的有效期为3天，请及时下载。
>
![](https://main.qcloudimg.com/raw/efed614e697f0de638a287242cce2a95.png)

