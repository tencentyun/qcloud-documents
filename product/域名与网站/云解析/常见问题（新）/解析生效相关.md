### 域名解析不生效怎么办？

您可以使用 [域名自助检测](https://domaintool.cloud.tencent.com/) 工具对您的域名进行检测，根据检测结果进行相关排查。
1. **确认域名状态：**通过检测工具查询，如域名状态为 Clienthold 或 Serverhold ，会导致解析无法生效。该状态一般是表明域名**未实名认证**或**命名审核不通过**，具体原因需要前往域名注册商处确认。
2. **确认域名有效期：**域名过期会导致域名解析失效，需前往域名注册商处确认域名到期时间。如果已经到期，请尽快续费，续费成功后解析将在0 - 72小时内恢复正常。
3. **确认域名 DNS 服务器：**请在域名注册商处确认 DNS 服务器已更改为腾讯云指定的 [DNS](https://cloud.tencent.com/document/product/302/9070)，否则影响解析生效。如 DNS 已修改为腾讯云 DNS 服务器，因解析在全球生效时间是0 - 72小时，这期间也有可能影响解析生效，请耐心等待。 
4. **确认解析记录配置：**需要您确认是否已在解析商处配置好相关的解析记录，如常用的 A 记录、CNAME 记录等，否则，解析无法生效。腾讯云 DNS 解析请参考 [各种记录类型的设置方法](https://cloud.tencent.com/document/product/302/3449)。

>?
>- 部分用户解析未生效，请确认是否在配置中选择了默认线路（一定要配置），否则会导致部分地区用户访问不了。
>- 如您的域名只配置了电信线路的记录，那么这样只有电信的用户才能访问您的域名，电信以外的其他所有用户将无法访问。详情请参考 [解析线路说明](https://cloud.tencent.com/document/product/302/8643)。

 
### 如何测试解析是否生效？

1. 您可以使用 [域名自助检测](https://domaintool.cloud.tencent.com/) 工具进行排查。
2. 您还可以使用相关命令进行排查。在确认解析已经配置完成，且修改 DNS 已经超过72小时后，在 Windows 电脑下左下角单击【开始】-【搜索】- 输入 CMD，进入命令提示符页面。

**执行 ping 命令来验证解析是否生效**
- 1. 输入 `ping + 空格 + 您的域名`（这里以 `cloud.tencent.com` 为例）。
- 2. 回车后结果显示的 IP 若和您设置的解析记录中的 IP 保持一致，则表明解析已经生效。如下图所示：
![](https://main.qcloudimg.com/raw/47ad75ff9b8a631172e8bf4c92c17eb9.png)

**执行 nslookup 命令查询解析相关的信息**
- 1. 查询本机 DNS 返回的域名解析结果：`nslookup 域名`
 ![](https://main.qcloudimg.com/raw/43abe768902971623b05d8878233f31b.png)
- 2. 查询域名的 CNAME 解析记录（需配置 CNAME 记录）：`nslookup -q = cname 域名`
![](https://main.qcloudimg.com/raw/05d9062f60e64566df2d1877c9bafa49.png)
- 3. 查询域名的 MX 解析记录（需配置，MX 解析记录是用于指定邮箱服务器的地址）：`nslookup -q = mx 域名`
![](https://main.qcloudimg.com/raw/bd0addd187b1117cd82d3ed8e396c1f5.png)
- 4. 查询域名的 NS 解析记录（需配置，NS 解析记录是用于指定邮箱服务器的地址）：`nslookup -q = ns 域名`
![](https://main.qcloudimg.com/raw/28b2828ee1304761d0fed0f5dff928ee.png)
- 5. 查询域名是否被劫持，分别进行以下测试：
	` nslookup 域名`
	 `nslookup 域名 119.29.29.29`
>?如果指定119.29.29.29测试解析正常，不指定119.29.29.29解析到错误 IP，基本可以判断域名被劫持，需要您联系劫持指向运营商进行处理。

### 域名解析转入到腾讯云的过程中，为什么网站打不开或者部分地区打不开？

在解析转入的过程中，不同顶级域对 DNS 服务器的 TTL 设置的不同，所以导致新修改 DNS 解析在全球的生效时间是0 - 72小时，如果您的 DNS 地址修改并未超过72小时，请确认以下信息：
1. 确保您在腾讯云设置的解析记录和原解析商保持一致，如果不一致，就可能导致此问题。
2. 如果在此过程中，您需要对解析记录进行相关操作（新增、修改、删除），需要在两边同时操作，确保解析记录的一致性。

### 域名已经在腾讯云解析，没有做任何变更，为什么突然之间不能访问了？

1. 请确认您的域名是否到期，具体可以联系您的域名注册商咨询。如您的域名在腾讯云注册，可以进入 [域名管理](https://console.cloud.tencent.com/domain/mydomain) 控制台查询域名到期时间。
2. 如果您的域名购买 DNS 解析套餐，请确认该 DNS 解析套餐是否到期，如解析套餐已经到期且 DNS 地址未修改为免费套餐对应的 DNS 地址（[各个套餐对应的 DNS 地址](https://cloud.tencent.com/document/product/302/9070)），您的解析将逐步失效，建议您尽快升级到原等级的 DNS 解析套餐或者提前3天修改 DNS 服务器地址为免费 DNS 服务器地址。
3. 如果您访问网站提示您网站未备案，请联系主机服务商确认是否备案等信息。若您购买了腾讯云的境内服务器，可参考 [备案流程](https://cloud.tencent.com/document/product/243/18909)。

### 域名解析已经生效，为什么还是无法打开网站？
 如果域名解析已经生效，但还无法打开网站可能原因如下：
1. 解析记录配置是否正确：
 - 主机记录是否配置有误。例如，把 aaa 写成了 aas。
 - 如果没有设置默认线路，建议先配置默认线路，再配置其他线路类型，否则将导致部分用户无法访问。详情参考 [解析线路说明](https://cloud.tencent.com/document/product/302/8643)。
 - 记录值是否写错了 IP 地址，例如，`11.1.1.1` 写成 `11.1.1.11.`，这个需要您联系您的服务器提供商确认。
2. 本机电脑 DNS 缓存问题：
为了提高网站访问速度，系统会自动将已经访问过并获取 IP 地址的网站存入本机电脑 DNS 缓存里，一旦再对这个网站进行访问，则不再通过 DNS 服务器而直接从本机电脑 DNS 缓存取出该网站的 IP 地址进行访问。所以，如果本机电脑 DNS 缓存出现了问题，会导致网站无法访问。可以在 “运行” 中输入 CMD，然后执行命令 `ipconfig /flushdns` 来刷新本机电脑 DNS 缓存。
![](https://main.qcloudimg.com/raw/b82129476f552291afae335f0fce81b7.png)
3. 主机服务配置问题：
一般这种情况，可能未按照主机服务商的要求，在其配置中绑定域名，或配置文件错误，可以联系对应主机服务商寻求帮助确认。如果您使用了腾讯云服务器，可参考 [网站无法访问](https://cloud.tencent.com/document/product/213/14633)。
4. 网站打开有具体报错，例如502、403等，联系您的网站服务商或制作网站的技术人员，根据报错检查网站程序。可参考 [HTTP 状态码](https://cloud.tencent.com/document/product/302/19903)。
5. 域名未完成备案。如果您的主机服务器在境内，根据工信部要求，网站必须备案后才能开通；如果您使用了腾讯云境内服务器，虽然在其他主机服务商已备案，但是未在腾讯云备案，需要您在腾讯云进行接入备案。详情了解 [接入备案](https://cloud.tencent.com/document/product/243/19024)。

### 为什么执行命令连接域名得不到 IP？
执行命令 `ping 域名` 得不到 IP 主要有如下几个原因：
1. 解析记录线路类型没有正确选择：线路类型如果没有选择默认，将导致部分用户无法访问。详情参考 [解析线路说明](https://cloud.tencent.com/document/product/302/8643)。 
2. 域名修改 DNS 还没有生效：修改 DNS 是全球生效时间是0 - 72小时，只修改几个小时是不可能全部生效的。如果当地 ISP 的 DNS 服务器没有完全刷新您的域名记录，就会出现得不到 IP 的情况。
3. 域名的 DNS 记录被缓存： 
 - 如果 Windows 直接拨号上网，可以在 “运行” 中输入 CMD，然后执行命令 `ipconfig /flushdns` 来刷新本机电脑 DNS 缓存。
![](https://main.qcloudimg.com/raw/83a982b19f8322fb2eda1c1eb824e5ae.png)
 - 如果通过路由上网，需要清空路由的 DNS 缓存。清空的方法可以通过重启路由解决。如果不能重启路由，需要更换 Windows 的 DNS 服务器为其他地址。
>!
>- 通过本方法清空路由后，同样需要执行命令 `ipconfig /flushdns`。
>- Linux、Unix 系统不会缓存 DNS 记录。Mac OS X 系统可以通过执行命令 `killall lookupd` 来清空 DNS 缓存。
4. 如果确认上述没有问题，请确认服务器配置是否有问题。如果您的服务器是在腾讯云购买的，可参考 [实例 IP 地址 ping 不通](https://cloud.tencent.com/document/product/213/14639)。

>?操作过程中如果出现问题，请您 [联系我们](https://cloud.tencent.com/document/product/302/33949)。

### 域名检测工具提示未检测到 A 记录如何处理？
1. 首先请您确认是否已在对应域名的解析记录中添加了 A 记录，具体可参考 [A 记录](https://cloud.tencent.com/document/product/302/3449)。
2. 其次请您确认检测的域名是否正确：
 - 若您的域名是 `abc.com` ，您在添加 A 记录时的主机记录填写的是 “@”，则您要检测的是域名是 `abc.com`。
 - 若您添加 A 记录时的主机记录填写的是 “www”，则您要检测的域名是 `www.abc.com`。
 
>!主域名和子域名的检测结果是不同的。
