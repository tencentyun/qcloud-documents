本文将帮助您解决添加 DNS 解析 DNSPod 的 URL 转发记录后出现的问题。

## 现象描述
- 添加 URL 转发记录后，执行 `dig 域名` 命令查询域名返回的解析结果与控制台设置不一致。
- 添加 URL 转发记录后，使用域名访问页面显示 `HTTP ERROR 502` 错误。
- 添加隐性 URL 转发记录后，使用域名访问页面显示为空白页。
- 添加隐性 URL 转发记录后，页面可以正常打开，但 URL 上显示了转发目标地址。
- 添加 URL 转发记录后，操作页面刷新，直接跳转到了非目标地址的页面。

## 可能原因
#### 添加 URL 转发记录后，执行 `dig 域名` 命令查询域名返回的解析结果与控制台设置不一致
添加 URL 转发记录时，DNS 解析 DNSPod 会自动为您添加 CNAME 记录，而 CNAME 记录指向的地址则是 DNS 解析 DNSPod 提供的 URL 转发服务器地址，因此，控制台添加的记录值是 URL，而执行 `dig 域名` 命令显示的是 CNAME 记录，属于正常现象。

#### 添加 URL 转发记录后，使用域名访问页面显示 `HTTP ERROR 502` 错误
- 在添加 URL 转发记录时，提示未备案，不允许添加。
- 备案失效导致502错误。

#### 添加隐性 URL 转发记录后，使用域名访问页面显示为空白页
转发的站点 header 中设置为 X-Frame-Options，如转发站点不允许做嵌套，则需要联系您的网站技术人员，在转发后站点中去掉 X-Frame-Options 的配置即可。

#### 添加隐性 URL 转发记录后，页面可以正常打开，但是 URL 上显示了转发目标地址
URL 转发站点禁止 frame 引用。

#### 添加 URL 转发记录后，操作页面刷新，直接跳转到了非目标地址的页面
目标页面（转发后的 URL 站点）中有 JS 代码设置了跳转。

## 解决办法
#### 添加 URL 转发记录后，执行 `dig 域名` 命令查询域名返回的解析结果与控制台设置不一致
请检查执行 `dig 域名` 命令显示的是 CNAME 记录指向的地址，如正确，则属于正常现象，无需进行处理。如下图所示：
![](https://main.qcloudimg.com/raw/b89ecc0a27f50513de72ad9a6db5a524.png)

#### 在添加 URL 转发记录时，提示未备案，不允许添加
请检查转发前的域名和转发后的域名是否完成备案，如未完成，则请联系您的云服务商完成备案。

#### 备案失效导致502错误
已添加过 URL 转发记录，出现502错误，请联系您的备案接入商进行排查。

#### 转发的站点 header 中设置为 X-Frame-Options
请检查转发站点 `header` 中是否设置为 `X-Frame-Options`，如果转发站点不允许做嵌套，则需要联系您的网站技术人员在转发后站点中去掉 `X-Frame-Options` 配置。

#### URL 转发站点禁止 frame 引用
请去掉转发站点中相关限制。如 js 代码：`if (window.top!==window.self ) {window.top.location=window.location};`

#### 目标页面（转发后的 URL 站点）中有 JS 代码设置了跳转
该问题需要联系您的网站技术人员进行排查。



