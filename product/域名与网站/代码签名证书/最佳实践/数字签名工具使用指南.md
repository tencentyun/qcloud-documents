## 操作场景
本文档将指导您在申请并购买代码数字签名证书成功之后，如何使用腾讯云提供的 **数字签名工具** 为您的应用进行签名。

## 前提条件
已拥有代码数字签名证书。

## 操作指南

### [步骤1：导入证书](id:lead)
1. 请 [单击此处](https://www.trustasia.com/signtools/setup.exe) 下载并安装数字签名工具。
2. 打开**数字签名工具专业版**，并单击**证书管理 > 导入**。如下图所示：
![](https://main.qcloudimg.com/raw/2fa2f8ba2be59a821e0cc095fab9b3d4.png)
3. 在弹出的 “证书导入” 窗口中，选择您的证书文件。如下图所示：
![](https://main.qcloudimg.com/raw/7ebc3d08541300cd01ed27aae1c3a515.png)
 - **证书格式**：选择导入的数字证书格式，若您是在腾讯云申请的代码数字签名证书，可选择 PFX。
 - **证书**：选择导入该证书的路径。
 - **私钥**：选择导入该证书私钥文件路径。
>? “证书格式” 为 PFX 时，**私钥**选项不可用。
>
 - **密码**：该证书的 “有效密码”。
 - **标记私钥可导出**： 可勾选。
>!若您导入的证书不需要再导出备份，请勿勾选 “标记私钥可导出”。
>
4. 导入成功后，即可在证书管理列表中查看和管理导入的证书。如下图所示：
![](https://main.qcloudimg.com/raw/3299dbcd3e39ebc15bf54d9e82c42fcf.png)

### 步骤2：添加签名规则
1. 单击**签名规则 > 添加**，添加签名规则。如下图所示：
![](https://main.qcloudimg.com/raw/a937416464e44266846c6412322e96e9.png)
2. 在弹出的 “添加规则” 窗口中，填写相关规则信息。如下图所示：
![](https://main.qcloudimg.com/raw/79ece90dfd69c98cdd59ff892911fe28.png)
 - **签名选项**
    - **规则名**：请填写规则名，用来区分不同规则。
    - **证书**：请选择数字签名证书。如若没有安装证书，请先 [导入证书](#lead)。
    - **SHA2 证书**：请选择 `Tencent Test Code Sign`。
    - **文件扩展名**：默认即可。
    - **包含子目录**：请勾选，批量签名时允许遍历子目录。
    - **跳过有效签名文件**：请勾选，签名时跳过已经包含有效签名的文件，避免了其他有效签名被覆盖。
 - **签名信息（可选）**
    - **内容描述**：主要用于 ActiveX 签名。
    - **信息 URL**：主要用于 ActiveX 签名。
    - **时间戳服务**：确保证书过期后，签名不过期。TrustAsia 为 VeriSign 在国内的代理服务器，速度可能会快一些。
3. 单击**确定**，进入 “步骤3” 操作。


### 步骤3：模式选择
>!
>- 请确保已添加**签名规则**，添加后才可进行**数字签名**、**签名验证**等操作。
>- 若已存在签名规则，默认情况下会自动选中第一条规则，以方便进行数字签名操作。

1. 单击**数字签名 > 数字签名**。如下图所示：
![](https://main.qcloudimg.com/raw/bc562ea8f4c9cfd239c5023dadb89715.png)
2. 在弹出的“ 模式选择” 窗口中，选择相关内容。如下图所示：
![](https://main.qcloudimg.com/raw/545e46a0130bc077e5eb1f9715382c89.png)
 - **签名规则**：选择您已有的签名规则。
 - **签名方案**：为了兼容新旧系统，推荐使用 “双签名” 方案。
    - **双签名**：使用 `SHA1` 与 `MS Authenticode` 时间戳 和 `SHA256` 与 `RFC3161` 时间戳同时进行签名，前者兼容 XP 等老系统，后者支持新系统并消除安全警告。
    - **SHA256 追加签名**：不覆盖第一个签名并进行追加签名，使用 `SHA256 + RFC3161` 时间戳。
    - **SHA1/SH256 单签名**：会覆盖第一个签名。
    - **时间戳**：单独进行时间戳补签，支持给双签名分别采用不同的时间戳进行补签，解决漏签时间戳的情况。
 - **模式选择**：请根据文件类型选择相应模式。
    - **应用模式**：一般用于应用程序、ActiveX 控件等非驱动程序的签名和验证。
    - **驱动模式**：用于对驱动的签名和验证，会自动加入微软的交叉证书。
3. 模式选择后则可进入 “步骤4” 操作，

### 步骤4：数字签名
1. 单击**数字签名 > 添加文件**，选择需要添加签名的 “文件” 或直接拖入 “文件” 至列表。
3. 选择相应 “签名方案” 和 “模式”，单击**签名验证**，即可开始签名。如下图所示：
![](https://main.qcloudimg.com/raw/484412fdbb3a3cccc94a0110b2b21ebc.png)




