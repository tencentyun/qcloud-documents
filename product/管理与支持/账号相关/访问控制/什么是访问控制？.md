## 1、CAM概述

CAM是腾讯云提供的一套Web服务，它主要用于帮助客户安全管理腾讯云账户下的资源的访问权限。通过CAM，您可以创建、管理和销毁用户(组)，并通过身份管理和策略管理控制哪些人可以使用哪些腾讯云资源。

## 2、CAM术语

### 2.1根账号

根账号又被称为开发商。创建腾讯云账号时，会创建一个用于登陆腾讯云服务的根账号身份。根账号是腾讯云资源归属、资源使用计量计费的基本主体。根账号默认拥有其名下所拥有的资源的完全访问权限，包括访问该账号的账单信息，修改用户密码，创建用户和用户组以及访问其他云服务资源等。默认情况下，资源只能被根账号所访问，任何其他用户访问都需要获得根账号的授权。

### 2.2子账号和用户组

子账号是由根账号创建的实体，有确定的身份ID和身份凭证，且能登录到腾讯云控制台。根账号可以创建多个子账号(用户)。子账号默认不拥有资源，必须由所属根账号进行授权。一个子账号可以归属于多个根账号，分别协助多个根账号管理各自的云资源，但同一时刻，一个子账号只能登录到一个根账号下，管理该根账号的云资源。子账号可以通过控制台切换开发商从一个根账号切换到另外一个根账号。子账号在控制台登陆时会自动切换到默认根账号上，并拥有该根账号所授予的访问权限。当切换开发商之后，会拥有切换后根账号授权的访问权限，而切换前根账号授予的访问权限会立即失效。
	
有相同职能的用户可以被添加在同一用户组，为该用户组关联适当的策略，以分配不同权限。

### 2.3身份凭证

身份凭证是用于证明用户真实身份的凭据，用户必须要确保身份凭证的安全。它包括登陆凭证和访问证书两种。
    
登陆凭证是指用户登陆名和密码。通过使用登录名和密码登入腾讯云控制台，便可以通过控制台进行权限范围内的访问。
    
访问证书是指云API密钥(SecretId和SecretKey)，包括个人API密钥和项目密钥。大多数业务使用个人API密钥访问腾讯云API。少数业务使用项目密钥访问腾讯云API，包括万象优图、优图人脸识别、COS等服务。
    
多因素认证多因素认证（Multi-Factor Authentication, MFA）是在上述身份凭证的基础上增加的一项安全保护功能。当安全信息设置里绑定了MFA设备后，可以选择开启登陆保护和操作保护。当开启 MFA登陆保护后，用户登陆腾讯云网站时，系统在用户输入的用户名和密码验证通过后还要求输入来自其MFA设备的动态安全码进行二次验证。当开启MFA操作保护后，用户在一些敏感操作时必须要通过输入MFA设备的动态安全码完成二次验证。

### 2.4资源

资源是云服务中被操作的对象，如COS存储桶或对象，VPCID，消息队列等。根账号、子账号甚至策略也是一种资源。

### 2.5权限和策略

权限是指允许或拒绝某些用户执行某些操作，访问某些资源。。默认情况下，根账号拥有其名下所有资源的访问权限，而子账号没有所属根账号下任何资源的访问权限。
	
策略是定义和描述一条或多条权限的语法规范。根账号通过将策略关联到用户或用户组完成授权。超级管理员或者被授权拥有策略管理权限的子账号也可以创建、更新、删除策略以及进行策略的授权。
	
策略都可以在控制台的用户和权限页面进行操作。部分业务支持在业务控制台相关页面定义策略，如COS控制台等。

## 3、产品功能

CAM提供以下功能支持：
	
1)根账号资源的授权访问
	
可以将根账号的资源授权给其他人员，包括子账号或者是其他根账号，而不需要分享根账号相关的身份凭证。
	
2)精细化的权限管理
    
可以针对不同的资源授权给不同的人员不同的访问权限。例如可以允许某些子账号拥有某个COS存储桶的读权限，而另外一些子账号或者根账号可以用户某个COS存储对象的写权限等。这里的资源、访问权限、用户都可以批量打包。
	
3)身份认证
	
对访问者的身份进行确认。
	
4)最终一致性
	
CAM目前支持腾讯云的多个地域，通过复制策略数据实现在跨地域的数据同步，虽然CAM策略的修改会及时提交，不过跨地域的策略同步会导致策略生效的延迟；同时CAM使用缓存来提高性能（目前是一分钟缓存），更新需要在缓存过期后生效。

## 4、应用场景

###4.1企业子账号权限管理

企业内不同岗位的员工需要拥有该企业云资源的最小化访问权限。

场景：某个企业拥有很多云资源，包括CVM、VPC实例、CDN实例、COS存储桶和对象等。该企业拥有很多员工，包括开发人员、测试人员、运维人员等。部分开发人员需要拥有其所在项目相关的开发机云资源的读写权限，测试人员需要拥有其所在项目的测试机云资源的读写权限，运维人员负责机器的购买和日常运营。当企业员工职责或参与项目发生变更，将终止对应的权限。

###4.2不同企业之间的权限管理

不同企业间需要进行云资源的共享。

场景：某企业拥有很多云资源，该企业希望能专注产品研发，而将云资源运维工作授权给其他运营企业来实施。当运营企业的合同终止时，将收回对应的管理权限。

## 5、支持CAM的云服务列表

支持CAM的云服务列表如下：

| 服务 | 策略语法 | 云API |授权粒度 | 条件 |
|---------|---------|---------|---------|---------|
| CDN | 不支持 | 	支持 | 操作级 | 不支持 |
|消息队列CMQ|支持|支持|资源级|不支持|
| 互动直播 | 支持 | 不支持 | 服务级 | 不支持 |
| 云点播 | 支持 | 不支持 | 服务级 | 不支持 |
| 云直播 | 支持 | 不支持 | 服务级 | 不支持 |
| 短信 |支持 | 不支持 | 服务级 | 不支持 |
| 对象存储COS | 支持 | 不支持 | 资源级 | 不支持 |
| 私有网络VPC | 支持 | 支持  | 资源级 | 支持 |

说明：

1)部分业务还不支持策略语法方式描述策略，仅支持通过交互方式描述策略。

2)授权粒度按照粒度粗细分为服务级、操作级和资源级三个级别。服务级粒度下仅支持定义某个服务是否拥有访问权限；操作级粒度下支持某个服务下的某个操作是否拥有访问权限；资源级粒度下支持针对某个资源是否拥有访问权限，是最细粒度的授权。

3)部分业务支持自定义条件。