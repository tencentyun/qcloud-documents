### 评测模式详细说明
腾讯云智聆口语评测（Smart Oral Evaluation，SOE）目前支持共计8种评测模式，每种模式的适用场景和参数限制如下表所示：
**使用方法：**入参时将 EvalMode 参数设置为对应的模式，并根据对应的评测模式要求进行 RefText 的设置。

| **模式代码** | **评测模式**    | **支持语言** | **是否支持实<br>时返回结果** | **适用场景** | **支持评测维度**  | **评测文本要求（RefText 文本要求）** |
| ------------ | ------------------ | ------------ | --- | ------------------- | -------------| ------- |
| 0            | 单词/单字评测      | 中英文       | 否      | 针对一个单词或汉字的发音进行评测                             | 1. 单词发音的准确度、流畅度、时间。<br>2. 音素的准确度、重音、时间。      |1个单词或1个汉字，总时长小于等于60秒。                                          |
| 1            | 句子评测           | 中英文       | 是                       | 针对一句话的发音进行评测。                                    | 1. 句子发音的准确度、完整度、流畅度。<br>2. 单词发音的准确度、流畅度、时间。<br>3. 音素的准确度、时间。 | 不超过30个单词或汉字的句子或词组，总时长小于等于60秒。                                  |
| 2            | 段落评测           | 中英文       | 是                       | 针对一段话的发音进行评测。                                     | 1. 段落发音的准确度、完整度、流畅度。<br>2. 单词发音的准确度、流畅度、时间。 | 不超过120个单词或汉字的段落，总时长小于等于300秒。                                  |
| 3            | 自由说评测         | 中英文       | 是                       | 在无指定参考文本的情况下，对用户自由的发言进行评测评测。 适用场景：看图说话，围绕一个主题展开话题等。 | 1. 句子发音的准确度、流畅度。<br>2. 单词发音的准确度、流畅度。           | 字数不限，总时长小于等于300秒。<br>RefText 可以不填。                                                 |
| 4            | 单词音素纠错模式   | 英文         | 否                       | 针对单词发音进行音素级的诊断，精确定位到单词中发音不好的音素。 | 1. 单词标准音标的音素序列。<br>2. 用户真实发音的音素序列。<br>3. 音素准确度、音素序列完整度、时间。 | 一个单词，总时长小于等于60秒。  |
| 6            | 句子多分支评测模式 | 中英文       | 否                       | 可预设多组句子作为参考文本，输出与参考文本最大匹配句子的评测结果（发音结果）。 适用场景：答案相对固定的半封闭对话系统。 | 1. 输出与参考文本最大匹配句子发音的准确度、完整度、流畅度。<br>2. 单词发音的准确度、流畅度、时间。<br>3. 音素的准确度、时间。 | 不超过30个单词或汉字的句子，总时长小于等于60秒；<br>用"\|"分隔的多个句子，每个句子不超过30个单词或汉字，例如："yes i do \| no i don't"（不建议填写超过3组句子）。|
| 7            | 单词实时评测模式   | 中英文       | 是       | 针对单词或汉字发音进行评测，支持在 RefText 预设多个单词或汉字，每次请求可实时返回用户已说的参考文本中的结果。 | 1. 单词发音的准确度、流畅度、时间。<br>2. 音素的准确度、时间。<br>3. 用户发音相对预设参考文本的完整度。 | 1个单词或1个汉字，总时长小于等于60秒；<br>用"\|"分隔的多个单词或汉字，例如"hello \| sorry"（不建议填写超过6个单词）。<br><strong>单词实时模式对比模式0的优势是评测速度快，不需要等待语音结束再获取结果，且在传参时支持同时录入多个单词/汉字，每次返回的结果是语音从开始到当前时刻的最优评测结果。</strong>  |
| 8            | 拼音评测模式       | 中文         | 否                       | 评测声母、韵母和完整拼音，评测内容不超过30个拼音。             | 1. 拼音序列发音的准确度、完整度、流畅度。<br>2. 拼音发音的准确度、流畅度、时间。<br>3. 音素的准确度、时间。 | 不超过30个拼音（<strong>如果开启了声调检测模式，拼音评测参考文本上限变为4个拼音或汉字</strong> ），总时长小于等于60秒；<br>采用数字拼音的标注方式，拼音之间用空格区分，例如：sh an1 shan1 算作3个拼音。<br>支持声母、韵母、韵母+音调、声母+韵母+音调。韵母ü用v代替。<br>拼音标注时用1、2、3、4标识一声、二声、三声、四声，目前不支持轻声。 |

- **RefText 文本录入说明**：
（1） 评测文本组成
评测头部主体由**单词/汉字或者单词/汉字+发音块**的序列组成。此外，亦可包含**可选的命令块与发音块**。**命令块**可在部分模式下实现附加功能的开关，以此来拓展评测返回的参数。**发音块**可用于自定义单词/汉字的发音。除上述字符之外其他所有字符、标点均会被过滤（过滤规则见下文“RefText 文本过滤规则”）。评测文本均不区分大小写。

不同评测模式的评测文本格式如下：

|        **类型**    |               **格式**                          |                       **说明**                                         |
| -------- | ------------------------------------- | ------------------------------------------------------------ |
| 单词     | <命令块>一个单词/汉字<发音块>组成 | 描述块用来描述单词/汉字的某些评测信息，例如自定义发音或者其他 |
| 句子     | <命令块>多个单词/汉字<发音块>组成 | 描述块用来描述单词/汉字的某些评测信息，例如自定义发音或者其他 |
| 段落     | <命令块>多个单词/汉字组成         |                                                              |
 
 | 描述块类型 | 语法格式                                                     | 说明                                                         |
| ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 命令块     | {::cmd{f1},{f2}}<br>具体应用：<br>（1）开启音素到字母的映射功能：使用控制命令“F_P2L=true”，可在<strong>单词模式、单词实时模式、单词音素纠错模式</strong>下开启该功能。<br>（2）开启拼音声调检测功能：使用控制命令“F_TDET=true”可在<strong>拼音模式</strong>下开启该功能。 | 定义控制内容，可以包含一个或者多个控制命令，需要用户传递评测文本时在文本头部加入完整的命令描述块。 |
| 发音块     | 单词/汉字{::pron {p1,p2..},{p3,p4..}..}<br>具体应用：<br>（1）指定汉字发音："RefText":'{"wordlist": [{"word": "钢","pron": [["gang1"]]},{"word": "镚","pron": [["beng4"]]}]}'<br>（2）指定单词发音："RefText":'{"wordList":[{"word":"spout","pron":[["s","p","ao","t"]]}]}' | 定义单词的发音，可以包含一个或者多个发音单元为音素，用户需要将指定发音的 IPA（英语国际音标）通过 IPA-音素映射表进行转换（映射表请查看：[音素标注](https://cloud.tencent.com/document/product/884/33698)）。定义汉字的发音，仅可以指定一个有效拼音。 |

**请求示例**
- 示例1 - 指定中文汉字发音
```
curl -H "Content-Type:application/json" -X POST -d '{"AppId":251****70,"Version":"2018-07-24","Action":"TransmitOralProcessWithInit","Uin":"20*****025","SessionId":"s_15966110*****_28168392","RefText":'{"wordlist": [{"word": "钢","pron": [["gang1"]]},{"word": "镚","pron": [["beng4"]]}]}',"WorkMode":1,"RequestId":"17c1a0ba-0***-4***-8***-f24*****f548","EvalMode":1,"ScoreCoeff":1.0,"ServerType":1,"isEnd": 1,"seqId": 1,"textMode": 0,"userVoiceData": "base64","voiceEncodeType": 1,"voiceFileType": 3,}' https://soetest.qcloud.com
```

- 示例2 - 用命令块开启音素映射字母的功能
```
curl -H "Content-Type:application/json" -X POST -d '{"AppId":251****70,"Action":"TransmitOralProcessWithInit","Uin":"20*****025","SessionId":"s_1596*****8609_28168392","RefText":"{::cmd{F_P2L=true}}newspaper","WorkMode":0,"RequestId":"17c1a0ba-0***-4***-8***-f24*****f672","EvalMode":4,"ScoreCoeff":1.0,"ServerType":0,"isEnd": 0,"seqId": 1,"userVoiceData": "base64","voiceEncodeType": 1,"voiceFileType": 3}' https://soetest.qcloud.com
```


- 示例3 - 用命令块开启拼音声调检测功能
```
curl -H "Content-Type:application/json" -X POST -d '{"AppId":251****70,"Action":"TransmitOralProcessWithInit","Uin":"20*****025","SessionId":"s_1596*****8609_28168392","RefText":"{::cmd{F_TDET=true}}yun2","WorkMode":0,"RequestId":"17c1a0ba-0***-4***-8***-f24*****f672","EvalMode":8,"ScoreCoeff":1.0,"ServerType":1}' https://soetest.qcloud.com
```


（2）RefText 转换标准（英语）

| **单词类型** | **组成元素**          | **内部转换**                                                 | **示例**                                            |
| ------------ | --------------------- | ------------------------------------------------------------ | --------------------------------------------------- |
| 普通单词     | a-z,0-9的组合         | 不转换                                                       | apple                                               |
| 单词缩写     | 包含一个"'"的单词     | 不转换                                                       | it's                                                |
| 常见组合词   | 由"-"连接的两个单词   | 对常见组合词不转换；对 OOV 组合词，单词模式不转换，其他模式拆分为两个单词 | bye-bye                                             |
| 整数         | 数字序列              | 0 - 99 转换为对应单词，其他转换为数字序列                    | 23→twenty three<br>123→one two three                    |
| 浮点数       | 包含一个"."的数字序列 | 分别将整数和小数部分转换为数字序列，小数点转换为"point"      | 1.23→one point two three                            |
| 数字组合词   | 包含"-"的数字序列     | 去除"-"转换为纯数字序列                                      | 86-130→eight six one three zero                     |
| 序数词       | 1st - 99th            | 转换为对应的单词                                             | 1st→first                                           |
| 时间         | 小时+":"+分钟         | 按照英语顺序读法转换                                         | 09:00→nine o'clock<br>09:05→nine o five<br>09:40→nine forty |

（3）RefText文本过滤规则

1. 我们支持 GBK 编码集内的所有文本，并对下述符号进行了过滤（即 RefText 中可以出现下述符号，且不会影响评测结果）：
～﹜﹚＇＝＋″々°ˇ〕＆─℃﹩＂`】﹙/〖’﹨[=﹣﹟′”＊『#』%‖〔￥:¨〈—－「〉」＃*〗( 〃＞+﹝【‘“·^.&﹦…＄﹤﹞％]<>)(（）~_——-$"﹪﹥﹢﹡﹠﹑﹛ˉ＜／'、。？！，；：?!,;﹐﹒﹔﹕﹖﹗．》《
注：个别评测模式下，上述符号可能会影响评测结果。当出现冲突时，以上方表格“评测文本要求”一列中的描述为准。
2. 不支持当前评测模式以外的语言（如日、韩语等），不支持填写开发语言（如前端语言）。
3. {}大括号只用于指定发音的情况，所以出现{}大括号时，一定要保证指定发音格式完整。

（4）RefText 字符限制说明

对于长期合作的大客户，我们可以根据实际情况放宽每个模式的评测字符限制和收音时长限制，如有需要请联系 [在线客服](https://cloud.tencent.com/online-service?from=doc_884) 进行申请。



