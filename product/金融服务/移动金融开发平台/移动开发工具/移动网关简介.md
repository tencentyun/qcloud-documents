移动网关是连接客户端与服务端 API 接口的组件产品，他简化了 API 接口的数据协议和通讯协议，能够显著提升开发效率和网络通讯效率。

## 产品优势

### 效率：
- 接入简单高效：无需关心组包、发包、解包的过程，只需专注自己的业务逻辑。
- 统一标准的 API 接口管控平台，实现联网策略支持云端管控，降低管理成本，及时发现风险。

### 性能及稳定性：
- 极致优化的通信协议，确保接入后通信效率无影响。
  - 协议优化：cmd 化，扁平化，编码性能提升30%以上。
  - 心跳包：每个包151B减小到10B，节省比例93.3%。
  - 数据传输智能压缩，降低传输流量（根据压缩后是否可有效降低流量自动选择是否进行压缩）。
- 4c8g单机支撑100w+长连接，超强的单机性能。
- 应用于亿级日活 App， 99.9999+%高可用率。
  - 稳定可靠的长连接通道：实际验证上报业务通道切换，用户漏报率由6%降到1.1%，数据漏报率由4%降到1.4%。
  - 支持重连机制，自动探测 Wi- Fi 和数据网络。
  - 支持动态降级和熔断机制，保护后端服务访问正常。

### 安全：
- 请求加密：支持对称加密与非对称加密结合的方案对客户端到移动网关的请求进行加密，确保数据在传输过程中的安全性，支持 RSA 、国密等加密算法。 
- 高安全级别加密机制：动态密钥 + Session Key 机制。
- 支持 IP 直连，防止域名劫持。
- 身份验签：提供验签服务以验证调用者身份保证安全。

## 应用场景
- **服务能力移动化对外开放：**随着移动互联网迅速发展，金融企业越来越希望将已有的成熟服务能力实现移动化并且对外开放。接入网关管理，只需要简单的操作，就可以形成移动服务能力。
- **一套服务，多端输出：**在移动互联网时代，多平台多形态多版本的终端频出，这对企业的后台服务系统增加了复杂性要求。网关服务提供各种服务的定义，支持多平台接入。
-  **多种服务，统一接入：**企业服务多种多样，对应的预研和结构也会千差万别。网关管理提供标准化的服务接入方法，更好地支持对外统一开放。

## 系统架构及技术原理

### 基础模块：
- 流量接入：收敛后端所有 API 的入口，统一管理流量，支持 TCP、HTTP、HTTPS 网络协议。
- IP 调度：通过下发 iplist 控制流量在云端的哪些网关服务器上接入。
- 动态密钥交换和管理：通过非对称密钥协商对称加密密钥，使用对称密钥加密数据。
- GUID 注册管理：为每个用户生成一个唯一 ID，管理用户数据。
- Session 管理：网关为每个 TCP 连接都生成一个 session，连接建立的时候数据一次准备，在后面的多次调用中支持被多次复用。
- Profile 存储维护：维护每个用户的基础信息，包括产品，硬件等，由接入层统一维护，可输送到业务，帮忙业务方便快速获取用户基础信息。

### 公共功能模块：
- API 路由：支持多后端 API 接入；支持多后端权重配置；支持按轮询，hash 两种方式进行后端请求路由。
- 签名校验：由移动网关统一加签，业务服务验签，保证所有请求均来自网关，避免数据内部泄漏。
- API 结果缓存 ：保证相同请求结果幂等，提高响应效率；支持设置缓存时间；配置缓存键值的来源。
- 超时设置 ：每个 API 超时时间支持自定义，根据业务特性设置时间。
- API 限流 ：支持 API 级别频控限流，不正常流量情况下，保证服务可用。
- API Mock：API 级别 mock 服务，支持服务端开发未完成情况下，仍然可以给终端返回接口数据。
- API 授权 ：支持指定鉴权接口，鉴权失败情况下直接拒绝服务，为后端服务过滤无效请求；根据 API 接口不同，定义授权方接口，并将授权规则应用到 API 中。配置授权规则包括：支持配置授权方名称，授权方接口，授权缓存，缓存存活时间，身份来源等限制，并且 API 授权功能可单独开关。
- API 熔断：网关具备熔断，及恢复能力。支持熔断阈值，熔断恢复检测时间设置；当后端服务接口出现故障时，熔断机制触发，快速拒绝前端请求，避免影响其他业务接口。
- API 测试 ：在 Web 上实现了终端网络通道功能，可以在页面上模拟客户端请求。

<img src="https://qcloudimg.tencent-cloud.cn/raw/c569470a377652ea0f7642f0617ebf9e.png" width="80%"/> 

