应用发布组件终端 SDK 用于实现终端 App 的版本升级过程，当云端发布新版本的时候，SDK 可实现实时监控云端下发的升级单，对监听到的升级单做出判断和处理，完成从监听、接收、判断、到升级回调的过程。

应用发布控制台包含母包管理、发布管理功能，可以清晰管理各版本应用安装包的上传及下载，同时可对已添加的应用包进行发布并管理各发布任务。

组件提供了客户端 SDK，您可以轻松将应用版本升级的能力集成到客户端。在 TMF 控制台上传应用包，进行版本管理，同时可根据不同的发布策略进行测试发布、灰度发布、正式发布等。客户端收到推送信息再去拉取新的发布包进行升级。

## 应用场景
应用发布组件可应用于发布 App 新版本供终端进行升级，可通过下发测试任务、灰度任务依次进行功能验证后正式发布升级任务，终端 SDK 自动检测或在用户手动检测到新版本后可完成应用升级并回传数据进行任务闭环。
- 测试任务：用于测试阶段验证应用升级发布流程是否正常。
- 灰度发布：当测试验证完成后，可以通过自定义部分用户下发规则来做小规模发布（例如内部员工）以验证新包的功能是否达到预期。
- 正式发布：当测试与灰度发布流程均正常完成时，可进行正式任务发布，发布任务可以选择有效时间窗，选择定向发布人群，符合预期情况下可进行全量推送。                         

## 产品优势
- 应用发布组件提供从控制台配单到终端回调 APK 升级的全过程，从升级策略、推送策略到发布策略，均实现可按需自定义配置，实现了新版本发布功能的高灵活性。
- 发布策略可选择发布测试任务、灰度任务、正式任务，满足开发测试过程、小范围灰度检验的需求，可在测试通过且灰度发布正常之后发布正式任务，实现发布功能的高稳定性。
- 依赖云推系统的统一推送配置，实现高到达率和高及时性，同时统一实现统一回收数据，实现对升级单下发情况和终端执行情况的数据监控。
- 终端 SDK 通过实时监控 + 定期检测的方式实现对升级单的高执行率，通过对升级单的二次检测，确保升级单的有效性，即云端停单后，终端缓存的升级单也同时失效。

## 系统架构及技术原理
应用发布系统架构分为三个部分：控制台、云推系统、终端 SDK。
- 控制台：指 Web 端页面，用于上传新版本应用 APK 包，并配置升级规则和下发范围。
- 云推系统：指后台推送服务，用于将配置好的升级单下发到对应终端，同时回收终端升级流程上报数据。
- 终端 SDK：指提供的升级组件 aar 包，将该组件集成到客户端后进行简单配置，即可在客户端实现版本升级流程，同时上报终端升级流程数据。

具体架构流程图如下：
<img src="https://qcloudimg.tencent-cloud.cn/raw/3df96a32d6212e73a639d2289b72abcd.png" width="70%">
