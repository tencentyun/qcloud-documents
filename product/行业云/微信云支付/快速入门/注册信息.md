## 总体流程
![](https://mc.qcloudimg.com/static/img/da229877b12d736b8b3415fdab20a64d/image.png)

## 注册服务商和子商户
- 在[微信支付服务商注册页面](https://pay.weixin.qq.com)上操作。
## 注册腾讯云
- 登入[腾讯云](https://www.qcloud.com)，注册腾讯云的账户，请使用QQ注册。 
- 注册成功后，进入腾讯云的页面，点击”云产品”，选择金融云下的微信云支付。
## 添加微信支付服务商
- 服务商须先通过微信支付服务商申请，然后登录腾讯云，在云支付服务里的添加服务商页面，点击添加服务商，按要求填入相关信息，具体如下：

![](https://mc.qcloudimg.com/static/img/9c9580c7df092f748431e0c58c6e63e6/image.png)

参数说明：

- 服务商帐号：微信支付分配给服务商的id 
- 服务商公司：在微信支付上注册的服务商企业名称
- 微信公众号：微信分配给服务商的公众账号id（可选）
- 公司备注：描述信息等
- 认证key：请求微信支付时的签名key
- CA证书：微信支付给服务商的商户证书，用于退款和撤单接口
- 返回结果：是否成功，成功则提示成功，失败则提示失败原因
## 添加子服务商并配置权限
- 在子服务商管理页面，点击添加子服务商，配置服务商的子服务商（渠道商、代理等）相关信息，具体如下：

 ![](https://mc.qcloudimg.com/static/img/82d5ff1ecd59af665a319f2f45d9a312/image.png)

参数说明：

- 腾讯云帐号：子服务商登录腾讯云的帐号，必须是QQ号
- 公司：子服务商公司名称
- 返佣比例：服务商给子服务商的返佣分成比例
- 备注：描述信息等
- 返回结果：是否成功，成功则提示成功，失败则提示失败原因

## 添加微信支付子商户
- 服务商需先完成微信支付子商户申请，然后子商户管理页面，点击添加子商户，按要求填入相关信息，具体如下：
- 添加子商户基本信息

 ![](https://mc.qcloudimg.com/static/img/38a960114a3fe1c86a820f79f8c11ac4/image.png)

参数说明：

- 服务商帐号：微信支付分配给服务商的**微信支付商户号**
- 子商户帐号：微信支付分配给子商户的**微信支付商户号**
- 子商户名称：在微信支付上注册的子商户的**企业全称**
- 微信公众号：微信分配给服务商子商户的**公众账号**（可选）
- 子商户备注：描述信息（可选）

- 添加完成后，点击下一步

 ![](https://mc.qcloudimg.com/static/img/47c6136e2a3e6a86777331e0bd3bcd07/image.png)

参数说明：

- 认证类型：认证码生成算法
- 认证密钥：用于交易请求时对参数生成认证码
- 签名类型：签名算法
- 签名私钥：用于撤单和退款时客户端签名
- 验签公钥：用户撤单和退款时服务端验签
- 返回结果：是否成功，成功则提示成功，失败则提示失败原因

- 点击签名私钥后的复制，保存认证密钥和签名私钥到本地。

## 商户配置门店信息
- 商户可以调用SDK完成门店信息配置，包括门店编号，门店内终端编号，门店内店员编号, 然后全量或增量同步到云支付。
