腾讯登录服务（Tencent Login Service，TLS）是腾讯为开发者快速完成帐号集成接入音视频或即时通讯云服务（后面简称云服务）而提供的一套通用帐号登录组件。
![](//avc.qcloud.com/wiki2.0/im/imgs/20151117034741_42845.png)
帐号体系集成位于云服务接入流程的第四步。在帐号体系集成前，您需要首先注册腾讯云账号，开通服务和创建应用，具体方法请单击『[应用接入指引](/doc/product/269/应用接入指引)』。 本文后续将重点讲解如何进行帐号集成。另外我们针对这里提到的内容录制了视频，可以在帐号 [集成示例](https://cloud.tencent.com/course/detail/133) 进行观看。

## 两种模式介绍

1. 如果您的应用已经发布，用户较多，[独立模式](/doc/product/268/7654) 可以帮您快速集成云服务（**温馨提醒：帐号的独立模式并不影响资料、关系链和群组的托管**）；
2. 如果您不想维护复杂的用户帐号系统，[托管模式](/doc/product/268/7655) 可以帮您方便快速地搭建安全的应用自有帐号体系。

## 附录

### 集成模式

根据开发者使用场景，我们为开发者提供了两种不同的帐号集成方式，开发者可根据自身情况选择。

* [独立模式](/doc/product/268/7654)：用户帐号信息由开发者保存，用户身份验证（比如注册与验密）也由开发者负责；
* [托管模式](/doc/product/268/7655)：由腾讯为开发者提供帐号的密码注册、存储和密码验证，以及第三方 `openid` 和 `token` 的托管验证服务。

>! 帐号集成模式只能选择一次，后续无法变更，请谨慎选择。如果想改变集成模式，请创建新的应用重新走帐号集成流程。

### 公私钥

公私钥是密码学中非对称加密算法中的概念。非对称加密算法中，公钥与私钥是成对出现的，私钥需要保密，公钥是公开的。用公钥加密的数据，只有私钥才能解开；用私钥加密的数据，也只有公钥才能解开。在帐号集成中，公私钥用于鉴别开发者用户的身份合法性，使用场景如下：

* [独立模式](/doc/product/268/7654)：私钥由开发者保存，公钥由腾讯保存。开发者使用私钥生成用户签名 UserSig，腾讯使用公钥对签名 UserSig 进行校验。
* [托管模式](/doc/product/268/7655)：私钥由腾讯保存，公钥由开发者保存。腾讯使用私钥生成用户签名 UserSig，开发者可以使用公钥对签名 UserSig 进行校验，注意，对于第三方开放帐号，此时不需要公私钥。

对于独立模式，为了方便开发者快速开发，开发者进行帐号集成后，可以在应用列表的应用配置中 [下载公私钥](/doc/product/268/7657)。同时我们也提供了工具供开发者调试使用，详情请参见 [TLS 后台 API 开发指引](/doc/product/268/7656#.E6.A6.82.E8.BF.B0)。

>? 关于非对称算法，请访问 [公开密钥加密](https://zh.wikipedia.org/wiki/%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86) 进一步了解。

### 如何生成公私钥

详见『[TLS 后台 API 开发指引](/doc/product/268/7656)』中的『[工具使用](/doc/product/268/7656#.E5.B7.A5.E5.85.B7.E4.BD.BF.E7.94.A8)』章节。

### App 管理员
对外的开放接口中，有些操作是管理员身份才能调用的，例如解散群，给用户发 C2C 消息等。因此在开发者的帐号体系中，可以标识一些帐号为管理员，在腾讯验证管理员身份后，管理员可以对自己的业务进行一些特殊操作。App 管理员是对 App 具有最高管理权限的角色，与普通帐号相比，其区别如下。

* 读取权限更高。例如获取 App 内部的所有群组、获取任意群组的任意资料。
* 操作权限更高。例如给任意用户发消息、在任意群组中增删成员。

App 在调用 REST API 进行服务端集成时，应当使用 App 管理员帐号作为 `identifier` 进行调用。App 可以在帐号体系中将数个帐号设置为 App 管理员，设置方法参见 [设置 App 管理员](https://cloud.tencent.com/document/product/268/7657#.E8.AE.BE.E7.BD.AE-app-.E7.AE.A1.E7.90.86.E5.91.98) 文档。

### 短信验证码内容

开发者选择托管模式集成自有帐号后，由腾讯为开发者提供帐号的注册和登录服务。在开发注册和功能时，开发者可以选择让用户通过 [短信验证](/doc/product/269/添加短信签名) 的方式进行注册和登录。验证码短信格式如下。

```
1234 （XXXX短信验证码），请勿转发，否则会导致帐号被盗。【腾讯云】
```

* 以上内容开发者只能更改『XXXX』部分，可填写公司名称或者 App 名称，长度 30 个字符以内。
* 『1234』为随机的四位数字，实际使用时会随机生成。
* 【腾讯云】为默认短信签名（应运营商要求，下发短信必须要有短信签名）。如果您的月短信量超过 1 万条，可以联系客服给您定制短信签名。
* 如果开发者没有填写『XXXX』部分，则使用默认的短信验证码，格式如下。
```
1234 （短信验证码），请勿转发，否则会导致帐号被盗。【腾讯云】
```

### identifier 格式说明

`identifier` 即用户帐号标识，以下是对此参数的格式说明。
- **独立模式下**，`identifier` 长度建议不超过 32 字节 。
- **托管模式下**，字符串类型的 `identifier` 长度为4 - 24个字节，请使用英文字符和下划线，不能全为数字，大小写不敏感。

## 联系我们

如果遇到问题您可以先到 [腾讯云论坛](http://bbs.qcloud.com/thread-8287-1-1.html)  中查找解决方法，如仍需支持，请 @TLS 帐号支持，QQ 3268519604，电子邮箱 tls_assistant@tencent.com。
