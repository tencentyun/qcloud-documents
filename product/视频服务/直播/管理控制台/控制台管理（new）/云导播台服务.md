## 操作场景
直播控制台内提供了云导播系统。本文主要指导您在申请开通云导播功能后，通过控制台直接配置、使用和管理导播台服务。

### 名词解释
* PVW：指预监画面，主要用于在切换到直播和录制前，调整和确认效果。
* PGM：主监画面，指已经处在直播或录制状态的画面，正常情况下为观众看到的画面。

###  导播台功能
<table>
    <tr>
		<td><strong>类别</strong></td> 
        <td><strong>功能</strong></td>
        <td><strong>说明</strong></td> 
   </tr>
   <tr>
        <td rowspan="3">输入源，最多支持六输入</td>
        <td >RTMP 推流</td>
        <td >RTMP 推流，是指媒体文件以 RTMP 协议推送到导播台系统。</td>
   </tr>
   <tr>
        <td >点播 URL</td>
        <td >1. 点播 URL，既支持腾讯云 COS 储存的媒体文件，也支持存储在其他厂家的媒体文件。格式支持 MP4、HLS 和 FLV。<br>2. 点播 URL 支持多个 URL 组成播放列表循环播放。</br></td>
    </tr>
   <tr>
        <td>直播 URL</td> 
        <td>直播转拉流，支持将正在直播的流 URL 配置到导播台系统中，支持 RTMP、HLS 和 HTTP-FLV 三种协议。</td> 
   </tr>
    <tr>
        <td rowspan="3">输出</td>
        <td >输出为直播流</td>
        <td >输出流协议支持 RTMP、HLS 和 HTTP-FLV。</td>
   </tr>
   <tr>
        <td >直播转推</td>
        <td >支持将输出流以 RTMP 协议推送至其他厂家。</td>
    </tr>
   <tr>
        <td>录制</td> 
        <td>支持直播录制的全部能力（MP4、HLS 和 FLV 格式录制，自定义录制时长等）。</td> 
   </tr>
   <tr>
        <td rowspan="4">音视频处理</td>
        <td >视频布局</td>
        <td >可自定义视频布局，画面单元可填充任意输入源画面。</td>
   </tr>
   <tr>
        <td >垫片</td>
        <td >支持在输入出问题时，自动切换至垫片。</td>
    </tr>
   <tr>
        <td>组件叠加</td> 
        <td>支持叠加图片水印、文字水印。</td> 
   </tr>
   <tr>
        <td>音频处理</td> 
        <td>支持调整输出流中，每个输入流的音量。</td> 
   </tr>
      <tr>
        <td rowspan="2">导播处理</td>
        <td >预监、主监</td>
        <td >支持预监画面布局、预监切换至主监。</td>
   </tr>
   <tr>
        <td >延时播放</td>
        <td >支持30s以内的延时播放，即输出流比主监最多延时30s。</td>
    </tr>
</table>

### 应用场景
云导播台主要有以下几个应用场景：
* **多视角直播：**
在大型会议、演出、节目等场景中，通过云导播台实现多视角切换播出。
* **赛事活动的实时比分：**
云导播台在线制作，控制图、文元素在固定的时间点，时间区间同步直播，无需广电设备，就能实现广电级直播的效果。
* **跨地域同屏直播：**
相比于实体导播台，云导播台无需走线传输视频信号，可以低成本实现远距离的视频画面组合。在跨地域的直播活动中，集合多地画面整合编排输出，云导播台可以实现更佳的观看体验。
* **宣传片、广告片、演示的无缝切换：**
在直播开始前，循环播放宣传片可以很好的帮助暖场，通过云导播台的无缝切换，可以很好地控制直播的播出节奏。同样的，在直播的过程中，云导播台可以适时地切入宣传片、广告片，或者进行演示的切换。

## 前提条件
云导播台属于腾讯云直播的一部分，开通云导播前请先开通直播服务。

## 使用限制
- 每个客户可以创建1个导播台实例。
- 点播输入播放列表，最多支持5个点播文件。
- 第三方转推，最多支持转推3路其他厂家。

## 操作步骤
使用云导播台主要有以下几步：
步骤1：[开通云导播台](#step1)。
步骤2：[了解功能区](#step2)。
步骤3：[管理云导播台](#step3)。
步骤4：[设置输入源](#step4)。
步骤5：[配置布局](#step5)。
步骤6：[启动预监](#step6)。
步骤7：[启动输出](#step7)。
步骤8：[获取输出播放 URL](#step8)。
步骤9：[录制](#step9)。
步骤10：[转推](#step10)。
步骤11：[监测输出流质量](#step11)。

### <span id="step1">开通云导播台</span>
单击 [开通云导播台](https://console.cloud.tencent.com/live/productionstudios)，在开通页面勾选“同意[《腾讯云服务协议》](https://cloud.tencent.com/document/product/301/1967)”，并单击 【立即申请】申请开通云导播台。
![申请开通](https://main.qcloudimg.com/raw/89c3c91580aa26a494c026066fe7f02c.png)

>?云导播台目前处于内测阶段，请首先 [申请使用云导播台](https://console.cloud.tencent.com/live/productionstudios) ，我们将在收到您的申请后为您开通云导播功能。

### <span id="step2">了解功能区</span>
云导播台具有实例管理区和功能区。
在实例管理区页面可以新增导播台，也可以对已有导播台进行修改、删除及释放，同时还可以查看导播台的详细信息等。
![实例管理页面](https://main.qcloudimg.com/raw/713ca265781f4e7ff575ce104a0340b4.png)
导播台的功能分别有输入区、预监区、主监区、布局组件区和输出质量监控区。
![导播台功能区](https://main.qcloudimg.com/raw/a34c5446863a222154cf552a8f4dce18.png)

### <span id="step3">管理云导播台</span>
1. 新建导播台。
单击【新增导播台】，在弹框中设置导播台的基础信息，并单击【确定】，即可创建一个新导播台。
![新建导播台](https://main.qcloudimg.com/raw/9124256f320a12eedf1914ee8267f4e0.png)

>!导播台到达过期时间后，将会执行释放操作，导播台的预监、输出、录制及转推等功能将会关闭。

2. 修改导播台信息。
在创建好的导播台后，可在控制台看到云导播台的相关信息，如需修改导播台信息，可单击【修改】进行操作。
![修改](https://main.qcloudimg.com/raw/b29545f6c0ea8919d79e9f4f47a86a64.png)
3. 释放导播台。
若使用结束，请及时释放云导播台。释放操作将停止预监、输出、录制和转推，但是将会保持所有的云导播台配置，包括输入配置、布局配置、输出及转推配置等。
在云导播台中单击【释放】进行释放操作。
![释放](https://main.qcloudimg.com/raw/f80540f64e54d175a433d9c86c9eef76.png)
在弹出框中单击【确定】，即可释放导播台。
![释放确认](https://main.qcloudimg.com/raw/d0bca3a7898f99e16885da8f37254535.png)
释放成功后，可以看到导播台状态将由“**活跃**”变为“**空闲**”。
![状态变化](https://main.qcloudimg.com/raw/cfe7df772ae5c9b4e90da6bc7d2dc599.png)
4. 删除导播台
如果您不希望保留某个指定的导播台，可将其进行删除。删除导播台后，该导播台所有的配置都将被删除，预监、输出、录制及转推也将结束。
在您想删除的导播台中的【操作】列中单击【删除】，即可进行删除导播台操作。
![删除](https://main.qcloudimg.com/raw/3f23e2153fb3da302cb23dddd450bd1a.png)
在弹出框中单击【确认】，即可成功删除导播台，在实例管理区页面将不能看到该导播台。
![删除确认](https://main.qcloudimg.com/raw/19b7d70cd51c166c1aa3babe317d645e.png)

### <span id="step4">设置输入源</span>
1. 添加输入源
您需要到功能区添加您的输入源。在实例管理区页面，单击【导播台ID】或【操作】列中的【详情】，即可进入功能区。
![进入](https://main.qcloudimg.com/raw/1f3adc8b22d44849b2431b8794dc0702.png)
进入功能区后，您需要单击【添加视频】进行添加视频操作。
![添加](https://main.qcloudimg.com/raw/d2adc5a4c10c418b4110a3d1f358c017.png)
在弹出框中选择视频输入类型和 URL 地址，并单击【确定】，即可成功添加视频。这里有三种视频类型，将为您举例说明。
![选择输入类型](https://main.qcloudimg.com/raw/0b9c97ff2a6f7c35820de8b9bc12af46.png)
 - **选择推流 URL**
![推流](https://main.qcloudimg.com/raw/6922b280f439c763c66f507fdd883012.png)
请将视频流以 RTMP 协议推到该推流地址。
 - **选择点播 URL**
![点播url](https://main.qcloudimg.com/raw/7996c7ca5b25f3483313d8a54a0f16af.png)
将点播文件的 URL 填入该区。如果填入多个，将自动以列表方式循环播放列表内的文件。
>!请保证填入的 URL 可以正常访问。如果不能正常访问，该输入将无法播放。

  - **选择直播 URL**
 ![直播](https://main.qcloudimg.com/raw/047f526ba7cba2d0b02a0322c1c42508.png)
 填入正在直播的 URL，系统将自动播放直播流。

>!请保证填入的 URL 可以正常访问。如果不能正常访问，该输入将无法播放。

 如果您成功添加输入后，系统将自动播放。
 ![输入播放](https://main.qcloudimg.com/raw/94edbb42634ed76260d2c88a31b3de23.png)

2. 修改输入源
如果您需要修改输入源，您可以单击输入下方的设置图标进行设置，如下图所示。
![修改输入](https://main.qcloudimg.com/raw/5f131deb36794006df6954815eeb2099.png)

>!修改输入时，该输入不能预监或主监布局所使用。

3. 删除输入源
如果您需要删除输入源，您可以单击输入右上方的删除图表删除输入，如下图所示。
![删除输入](https://main.qcloudimg.com/raw/13bcbd83ab3d1f671ddf404e3b19a31b.png)

>!删除输入时，该输入不能预监或主监布局所使用。

### <span id="step5">配置布局</span>
1. 新建布局
在功能区的布局组建区中单击【创建布局】，即可创建一个布局，如下图所示。
![创建布局](https://main.qcloudimg.com/raw/cea5aa611e509a1374aab403bc5b93c9.png)
在弹出框中选择您需要的布局模板及输入，并单击【确定】，即可成功创建一个布局。创建成功后可在布局组件区看到相应的布局模板。
![选择模板](https://main.qcloudimg.com/raw/51aae299dd8be2dd3815585f024c2f35.png)
目前云导播内置了从1输入到4输入的6种模板，请根据需要选择合适的模板。
2. 修改布局
如果您需要修改已创建好的布局模板，您可以单击相应的布局上右下方的设置图标进行修改操作，如下图所示。
![设置布局](https://main.qcloudimg.com/raw/415653441ce831f1edd4dc4e28b3717e.png)
3. 删除布局
如果您需要删除布局模板，您可以单击布局右上方的“垃圾桶”图标进行删除操作，如下图所示。
![删除布局](https://main.qcloudimg.com/raw/94f98d3587448842dd453a548e2e6237.png)

>!设置布局时不能被预监或输出使用，即布局上不能有黄色或橙色的点。

### <span id="step6">启动预监</span>
在布局组件区单击您的布局模板，并在预监区的左下方单击【预监(PVW)】右侧的滑动控件，即可看到预监输出情况，即启动预监成功。
![预监输出](https://main.qcloudimg.com/raw/c817d7a496a28c1f290c6f8009cd2b11.png)

>!预监使用的布局出现黄点状的预监状态提示。如果您需要删除该布局，请到实例管理区进行【释放】操作。

### <span id="step7">启动输出</span>
如果预监效果满足您的要求，您可以单击【推送到直播】启动输出。启动输出后，您可以在主监区看到推送的画面，如下图所示。
![启动输出效果](https://main.qcloudimg.com/raw/edfd6fe197eb1200cc853da0f03b3d59.jpg)
同时，输出使用的布局上将出现橙点状的主监状态提示，如下图所示。
![主监状态提示](https://main.qcloudimg.com/raw/87ebaa4c090a69f4f353cdc3ab7abf45.png)

### <span id="step8">获取输出播放 URL</span>
在执行完推送到直播的操作后，如果您需要获取输出播放 URL，您可以单击【详情】进行查看，如下图所示。
![点击详情](https://main.qcloudimg.com/raw/50fb9f476b60478e11359902a0405f64.png)
在详情页您可以获取到输出的 CDN 播放地址，如下图所示。
![播放地址](https://main.qcloudimg.com/raw/970094d67f60943077189d7cb5be3daa.png)

>!
- 如果您未配置直播播放域名，该区域将显示为空，您将无法从腾讯云 CDN 播放该流。
- 请确认您的播放域名 CNAME 已经成功。
- 如果您有多个域名，导播系统将随机选取一个域名计算播放链接进行展示。如果该域名不符合您的需要，请到直播系统自行生成播放链接。

### <span id="step9">录制</span>
1. 使用录制
使用录制前，请确认是否配置了录制模板，如果您未配置，请先到【功能模板】>【录制模板】进行配置。详情请参见 [录制配置](https://cloud.tencent.com/document/product/267/20384)。
配置完成录制模板后，单击【开始录制】进行录制设置。
![开始录制](https://main.qcloudimg.com/raw/387448189ef76dd4525cd2a152305c77.png)
在弹出框中选择您的录制模板，并单击【确定】即可开始进行录制。
![选择模板](https://main.qcloudimg.com/raw/4a3639833bd8354dcd55a95d871c34b9.png)
开始录制后，录制按钮将变为【停止录制】，如下图所示。
![状态](https://main.qcloudimg.com/raw/7eb33db1fd98d083980c1603e14fe947.png)
2. 查询录制文件
当您录制完成后，单击【停止录制】，录制系统将录制好的文件传送到云点播系统中，请在云点播中查看录制文件。单击【详情】获取您的录制文件前缀，如下图所示。
![录制前缀](https://main.qcloudimg.com/raw/bb777665accd321df6c954ba816f52fc.png)
并在【[云点播](https://console.cloud.tencent.com/vod)】>【媒资管理】>【视频管理】中输入您的录制文件前缀进行查询，如下图所示。
![查询录制](https://main.qcloudimg.com/raw/98c94048d54db7a8b7ce680b9ea0b078.png)

### <span id="step10">转推</span>
如果您需要将直播流推送到第三方云商，请先配置转推。
1. 单击预监区左上方的“设置”图表，进行设置操作，如下图所示。
![点击设置](https://main.qcloudimg.com/raw/9d9dde98da3d0df5ac9c279f17b0b180.png)
2. 在弹出的“设置推流”页面填写【腾讯云直播流名称】，单击【新增输出】填写配置您的第三方转推地址，然后单击【确定】，即可配置完成。
![转推配置](https://main.qcloudimg.com/raw/b6890bf904f676027d8f9ab2ecf2af80.png)

>!
>- 三方转推，只支持 RTMP 协议转推。
- 若使用第三方转推，必须使用腾讯云直播。

### <span id="step11">监测输出流质量</span>
导播台的流输出后，如果您需要查看推流的情况，可在输出质量监控区查看推流的帧率曲线，如下图所示。
![监测质量](https://main.qcloudimg.com/raw/e7004588c515a8f71f9dfe57e5d81e8e.png)

