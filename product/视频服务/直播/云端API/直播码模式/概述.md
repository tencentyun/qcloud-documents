您的服务器与腾讯云服务器的信息同步可以通过两种方式组合实现：
- **API 调用：**腾讯云提供了一组直播码管理 API，包括状态查询和状态管理等功能，供您的后台服务器调用；
- **消息通知：**腾讯云在直播流状态变更、录制文件生成等一系列事件发生时，能够以事件消息（JSON）的形式主动通知您的后台服务器，您只需要在腾讯云注册接收事件通知的回调 URL 即可实现。
![](//mc.qcloudimg.com/static/img/bb38ba7d007910df41b2775a63c6e0d3/image.png)

### 调用方法
在您的服务端采用 HTTP 协议的 GET 请求方式（即调用参数拼接在 URL 中）进行调用即可，详细的调用方法在每个 API 的说明文档中都有示例参考。
### 安全机制
由于对 API 的调用采用的是普通的 HTTP 协议（出于性能考虑），这就需要一套行之有效的办法来确保您的服务器与腾讯云后台之间的通讯安全。

所有直播码相关的云端 API 都采用了同一种安全检查机制， t + sign 校验，具体如下：
- **t（过期时间）：**如果一个 API 请求或者通知中的 t 值所规定的时间已经过期，则可以判定这个请求或者通知为无效的，这样做可以防止网络重放攻击。t 的格式为 UNIX 时间戳，即从 1970 年 1 月 1 日（UTC/GMT 的午夜）开始所经过的秒数。
- **sign（安全签名）：**sign = MD5(key + t)，即把加密 key 和 t 进行字符串拼接后计算一下 md5 值，这里的 key 即 CGI 调用 key，您在腾讯云直播管理 [控制台](https://console.cloud.tencent.com/live/livecodemanage) 中可以进行设置：
![](//mc.qcloudimg.com/static/img/c38d9a1d5eb2c290a8116c94dd54d15a/image.png)
- **安全原理**
由于 MD5 是不可逆的 HASH 算法，所以只要确保 KEY 不泄露，即使攻击者拿到很多对 t 和 sign 也无法反算出 KEY 值，进而无法进行伪装攻击。
- **计算示例**
   比如我们现在的时间是 2016-08-22 15:16:27， 我们希望有效期是 1 分钟，也就是 2016-08-22 15:17:27 以后再收到携带这个 t 的请求或者通知即判定为非法的：
```
	t = "2016-08-22 15:17:27" = 1471850247
```
   假设我们的 key 是 **5d41402abc4b2a76b9719d911017c592**，那么我们计算的签名结果就是：
```
	sign = MD5(5d41402abc4b2a76b9719d911017c5921471850187) = b17971b51ba0fe5916ddcd96692e9fb3
```

### 消息通知
详情参考腾讯云事件 [消息通知](https://cloud.tencent.com/document/product/267/5957) 服务。
