
## 1. API Description

- **API**
  - **Live_Queue_Get**: This API is used to query the screenshot files generated in a channel during LVB.

- **URL**
  - URL for calling API: `http://<font color='red'>fcgi.</font>video.qcloud.com/common_access`

- **Purpose**
  - Tencent Cloud provides scheduled screenshot service for LVB. If you enable this service, you will receive a screenshot file of the LVB stream every several seconds.
  - Our customers often use this service for porn detection and LVB game customers use this service to periodically update the LVB cover image on the webpage.

- **Note**
  - Screenshot files are generated frequently and the file quantity is large, especially when there are many LVB channels. Therefore, Tencent Cloud provides query service for customers in the form of message queue.
  - The **message queue** is a screenshot file queue. When a new screenshot image is generated in the LVB channel, the image ID and corresponding LVB Code are placed in the dedicated message queue in a message. You can periodically call the API to retrieve the latest screenshot messages.
  - <font color='red'>The screenshot service is not a completely open service</font>. It provides API support only for key customers. The API is invalid for customers who haven't activated screenshot-related services.

- **History**
  - Live_Queue_Get was designed to be used to retrieve various types of messages. As the [notification mechanism](https://cloud.tencent.com/doc/api/258/5957) becomes accepted by more customers, this service is not widely applied. It is now mainly used to provide service for high-frequency events such as screenshot capture.


## 2. Input Parameters

| Parameter Name | Description | Type | Note | Required |
|---------|---------|---------|---------|---------|
| appid                       | Customer ID | int       | LVB APPID used for identifying customers |  Y          | 
| interface                 | API name | string | For example: Get_LivePushStat |  Y          | 
| t | [Validity period](https://cloud.tencent.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5) | int  | UNIX timestamp (decimal) |  Y | 
| sign | [Security signature](https://cloud.tencent.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5) | string | MD5(key+t) | Y | 
| Param.n.bid   | Message queue ID  | int  | 100: ID of the dedicated screenshot queue | Y |
| Param.n.count | Number of messages obtained at a time | int   |Value range: 1-100. Default is 1. | N |

## 3. Output Parameters
| Parameter Name | Description | Type | Note |
|---------|---------|---------|------------------|
| ret      | Error code |   int  | 0: Successful; other values: Failed. |
| message | Error message |   string  | Error message |
| output | Message content |   array  | For more information, please see the description below. |

"output" is composed as follows:

| Field Name | Description | Type | Note |
|---------|---------|---------|------------------|
| count | Quantity |   int      |    |
| data    | Screenshot URL list |   array  | For more information, please see the description below. |

"data" is composed as follows:

| Field Name | Description | Type | Note |
|---------|---------|---------|------------------|
| stream_id | LVB Code |   string      |            |
| pic_full_url   | Screenshot URL |   string  |   |
| create_time | Screenshot generation time |   int  | The time cannot be accurate to seconds due to interference of the I frame position |

## 4. Example

Purpose: To query new screenshot files generated by all LVB channels under your current account.

| Component |   Example      |
|-------------|------------------|
| API URL | http://fcgi.video.qcloud.com/common_access? |
|appid     | 1234 |
|interface       | Live_Queue_Get |
|Param.n.bid | 100 |
|Param.n.count | 10 |
|t |1471850187 |
|sign | b17971b51ba0fe5916ddcd96692e9fb3 |

```
//When copying them, remove the invisible line breaks used for improving layout. Otherwise, URL construction errors may occur, such as "appid is invalid".
URL = http://fcgi.video.qcloud.com/common_access?
			appid=1234&interface=Live_Queue_Get
			&Param.n.bid=100
			&Param.n.count=10
			&t=1471850187&sign=b17971b51ba0fe5916ddcd96692e9fb3
```
			
			







