近年来，随着音视频底层技术的逐渐成熟，直播行业在全球呈现爆发式的增长，国内互联网平台出海也变得较为平常，国内服务型产品的出海经验也为直播行业试水海外提供了坚实的基础。已经在国内建立非凡影响力的视频直播企业，为了扩大竞争优势，进行产品全球化发展计划；一部分小直播平台在国内无法获得生存空间，另辟蹊径到海外市场寻找出路。同时，国外的直播平台战场也硝烟弥漫，YouTube、Periscope 与 Facebook 三大巨头攻城略地之余，也留下了许多还未好好开发的蓝海市场给中小直播平台。基于此，腾讯云在海外直播方面持续加大资源储备，不断优化直播加速性能，助力直播平台拓展海外市场。
![](https://main.qcloudimg.com/raw/3fad6f738790bf8762cf3cf5d0d38366.png)

完整的直播服务除了推流与观看之外，还应包括鉴权，转码，截图，录制，回调、鉴黄、DRM 等功能，下图是腾讯云海外直播解决方案的基础功能模块。  
![](https://main.qcloudimg.com/raw/b45ea57858e15294ba7ba01f486a5a69.png)

从基础功能上来说，海外直播和国内直播需求一致，但海外存在更多挑战，这主要在于海外地域广，海外国家内部网络杂，海外国家跨国网络质量不一。为了降低时延，减少卡顿，提供稳定可靠的服务，对于海外直播场景，腾讯云从**架构、网络、安全、资源**等方面针对性地进行了优化。

### 多中心点部署
**腾讯云在中国香港，泰国，新加坡，德国，多伦多，硅谷，俄罗斯，南非，韩国等地都已完成多个中心机房建设，并在逐渐扩大中心机房建设覆盖国家区域。**中心机房包括了海外直播需要的所有模块，同时为服务全球用户，保证任何数据中心异常都可以进行切换，要求整体架构做到去中心化。考虑到跨国网络质量和稳定对直播时延和卡顿的影响，海外建设的中心节点都通过专线互联，国内和海外通过中国香港中心中转节点专线互联，整体的缩略架构如下所示。
![](https://main.qcloudimg.com/raw/888a5ffd93256d7750e51a0dd0058a02.svg)
为直观展现海外中心节点的加速效果，对国内用户观看美国的主播视频进行统计对比，效果如下图所示， 明显可以看出专线加速卡顿率低，且网络稳定。
![](https://main.qcloudimg.com/raw/5d23ef97b3ef391937a874e5859fdd88.png)

### 边缘区域加速
中心节点能够完美地覆盖本地区用户需求，但是很多客户在非中心区域的国家需求也不可或缺。由于条件限制，这些地区国家未建设中心节点，需要增加加速点。一般这些地区跨国网络质量比较差，跨地域拉流卡顿率相当高，我们称之为边缘区域，例如马来西亚，印度尼西亚、中东、印度、非洲、南美等国家。对于这些边缘区域，腾讯云对服务的模块进行一个优先级舍取，优先保证本地合法用户的观看，保证本地域数据无需跨国即可完成。对于其他模块的服务，由边缘节点向中心节点转推，最终在中心节点完成。**从下图可以看出，在对边缘地区启用本地区的节点加速之后，卡顿率明显降低，明显优于业内其他厂商加速水平**。
![](https://main.qcloudimg.com/raw/d836c30476769796e59e542f00df7af3.png)

### 最优接入与容灾切换
海外很多国家其实和大陆类似，一个地区有多个运营商，多个运营商之间的访问受带宽和资源影响会有一定限制。例如泰国的 DTAC，AIS，TURE；中国台湾的中华电信，大哥大、so-net，印尼的 Telkomsel，XL，INDOSAT 等。为了提高这些运营商用户访问体验，必须在调度系统解决各运营商尽量同 ISP 访问的问题，同时我们在当地建设的加速点也会尽量 BGP 接入以及和当地相关运营商 peering link。
下面以泰国为例说明，针对三个不同（DTAC，AIS，TURE）的用户，中心调度系统收录海量的国外 IP 以及运营商，并根据用户的 IP 自动调度就近 CDN 节点，识别的精度可以达到**99.5%**以上。同时支持机房异常切换，当监控探测节点发现某个区域异常，系统自动选择最优的机房进行切换。
![](https://main.qcloudimg.com/raw/740fedc398982c96ddf085874ee5c2b7.png)

### 网络传输优化
海外跨地域外网传输的时候，传统的 TCP 传输无法保证传输时延，由于海外传输距离长，国际出口带宽限制，网络质量波动比较频繁，TCP 在这种场景下因为其协议的特点，存在升级优化周期长，高丢包场景表现欠佳等问题，腾讯云采用 QUIC（基于 UDP 实现可靠数据传输）进行海外网络传输优化。通过 QUIC 来进行上层数据代理加速，由于是在应用层实现，调整参数或调整拥塞算法可以即刻生效，可以调整算法参数有效应对高延时和高丢包场景，同时可以避免对头阻塞问题及减少 RTT 时间消耗。**通过实际的数据计算，对比传统 TCP，优化方案连接时间平均降低40%，卡顿率平均降低20%。**
![](https://main.qcloudimg.com/raw/81fd4032eca444312c3f57620b1036c3.png)

下图为阿联酋主播推流到阿联酋加速点，拨测全球用户观看该主播卡顿率对比，从对比数据看，走 QUIC 加速流卡顿率非常稳定。
![](https://main.qcloudimg.com/raw/c5671dc2a84590f74f89610802a078df.png)

### 海量资源储备
直播除了拼技术架构和方案，更重要的一点是资源储备，如果没有相应的海外资源作为底层支撑，所有的技术都是纸上谈兵。如文章开头的腾讯云全球节点分布图中提到，**依托于腾讯云的出海战略和长期在海外的投入，在全球50多个国家和地区建设超过1300个传输节点，总带宽储备超100T，与超过50家全球运营商合作，海外加速点200+**。同时腾讯云在同一地区和多个运营商进行合作，每一处出口至少三份容灾，保证服务的稳定可靠。

### 开通方式
海外直播服务可通过  [云直播控制台](https://console.cloud.tencent.com/live) 直接开启
- 如果您还没有注册腾讯云账号，您需要注册一个腾讯云账号，注册操作参考 [注册腾讯云](https://cloud.tencent.com/document/product/378/9603) 文档，并 [申请开通直播服务](https://cloud.tencent.com/document/product/267/2819)。
- 如果您已有腾讯云账号并已申请开通直播服务，可直接进行下一步操作。

进入云直播控制台，在左侧导航栏中选择[【域名管理】](https://console.cloud.tencent.com/live/domainmanage)，然后单击【添加域名】。
![](https://main.qcloudimg.com/raw/3f2ddcc1868b2179c4d395871fa81cee.png)

在弹出的添加域名框里选择类型【播放域名】，再选择对应的【加速区域】，最后填上需要加速的【域名】即可。
