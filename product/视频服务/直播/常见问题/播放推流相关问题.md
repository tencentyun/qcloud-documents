[](id:que1)
### 直播的在线人数是否有上限？   
腾讯云直播默认不限制观看直播的在线人数，只要网络等条件允许都可以观看直播。如果用户配置了带宽限制，当观看人数过多、超出了限制带宽时新的用户无法观看，此情况下在线人数是有限制的。

[](id:que2)
### 如何使用播放转码？
考虑到不同的网络因素，满足您使用不同码率不同分辨率的需求，您可以前往 [转码配置](https://console.cloud.tencent.com/live/config/transcode) 设置不同码率不同分辨率的转码模板，更多转码相关信息请参见 [直播转封装及转码](https://cloud.tencent.com/document/product/267/32736)。

[](id:multirate)
#### 原始、高清、标清场景
在业务播放场景中，一般会用到三个码率：原始、高清、标清。
 - 原始流与推流码率分辨率一致。
 - 高清流建议使用码率：2000kbps，分辨率：1080p。
 - 标清流建议使用码率：1000kbps，分辨率：720p。

[](id:que3)
### 如何使用时移回看？
若您想回看过去某段时间的精彩内容，您可以使用时移功能，时移功能目前仅支持 HLS 协议。具体时移的相关介绍以及开通方法请参考 [直播时移](https://cloud.tencent.com/document/product/267/32742)。

[](id:que4)
### 如何使用 HTTPS 播放？
若您的播放域名需要支持 HTTPS，您需要准备好有效的证书内容、有效私钥内容前往 [域名管理](https://console.cloud.tencent.com/live/domainmanage)，选择 **播放域名管理** > **高级配置** > **HTTPS配置** 添加配置，添加成功之后会有个生效时间（2小时），在生效后您的直播流就可以支持 HTTPS 协议播放。

[](id:que5)
### 如何使用海外加速节点播放？
云直播 CDN 节点不仅遍布中国大陆区域，同样在全世界各个大洲也有节点覆盖，覆盖广并且稳定。假如您的用户分布在中国香港、中国澳门、中国台湾或境外其他地区，您可以通过在 [域名管理](https://console.cloud.tencent.com/live/domainmanage) 中配置域名时候加速区域选择 **全球加速** 或 **中国港澳台地区及海外地区**，来获得海外节点覆盖的支持。


[](id:que6)
### 如何开启播放防盗链？
为防止非法用户盗取您的播放 URL 在别处播放，造成流量损失，强烈建议您给播放地址加上播放防盗链，防止因盗链产生不必要的损失。云直播的播放防盗链主要由四个参数值控制：txTime、key（哈希密钥）、txSecret、有效时间。

| 防盗链参数 | 描述 | 补充说明 |
|---------|---------|---------|
| txTime | 播放 URL 的有效时间 |格式为16进制 UNIX 时间。<br> 如果当前 txTime 的值大于当前请求的时间则可以正常播放，否则播放会被后台拒绝。|
| key | MD5 计算方式的密钥 | 可以自定义，并可以设置主备两个 key。<br> 当您的主 key 意外泄露的时候，您可以使用备用 key 进行拼接播放 URL，并同时更改主 key 的值。|
| txSecret | 播放 URL 中的加密参数 | 值是通过将 key，StreamName，txTime 依次拼接的字符串进行 MD5 加密算法得出。<br>txSecret = MD5（key+StreamName+txTime）。 |
| 有效时间 | 地址有效时间 | 有效时间设置必须大于0。<br> 假设 txTime 设置为当前时间，有效时间设置为300s，则播放 URL 过期时间为当前时间 + 300s。|

[](id:calculate)
#### 防盗链计算
防盗链计算需要三个参数，key（随机字符串）、StreamName（流名称） ，txTime（16进制格式）。
假设您设置的 key 为 **somestring**，流名称（StreamName）为 **test**，txTime 为 **5c2acacc**（2019-01-01 10:05:00）。高清码率为：**900kbps**，转码模板名称为：**900**。
原始流播放地址：
```
txSecret = MD5(somestringtest5c2acacc) = b77e812107e1d8b8f247885a46e1bd34
http://domain/live/test.flv?txTime=5c2acacc&txSecret=b77e812107e1d8b8f247885a46e1bd34
http://domain/live/test.m3u8?txTime=5c2acacc&txSecret=b77e812107e1d8b8f247885a46e1bd34
```
高清流播放地址：
```
txSecret = MD5(somestringtest_9005c2acacc) = 4beae959b16c77da6a65c7edda1dfefe
http://domain/live/test_900.flv?txTime=5c2acacc&txSecret=4beae959b16c77da6a65c7edda1dfefe
http://domain/live/test_900.m3u8?txTime=5c2acacc&txSecret=4beae959b16c77da6a65c7edda1dfefe
```

[](id:open)
#### 开启播放防盗链
1. 选择 [域名管理](https://console.cloud.tencent.com/live/domainmanage)，单击需做鉴权配置的播放域名或管理进入域名管理页。
2. 在**访问控制** > **Key鉴权**，单击开关，开启 Key 鉴权。
3. 在鉴权配置页进行设置。
4. 单击 **保存**，即可保存配置。

>!
>- 播放鉴权的设置成功后需要**30分钟**后生效 。
>-  HTTP-FLV：正在播放的 URL 在 txTime 过期后依然能正常播放，在 txTime 过期后重新请求播放则会拒绝。
>- HLS：由于 HLS 是短链接，会不断的请求 m3u8 获取最新的 ts 分片。假设您设置 txTime 的值为当前时间 + 10分钟，则在10分钟之后 HLS 播放 URL 请求会被拒绝。针对这个问题您可在业务端动态更新 HLS 的请求地址，或者将 HLS 的播放地址过期时间设置久一点。

[](id:que7)
### 播放鉴权配置中主 Key 的格式有什么要求？有效时间时长有没有限制？
鉴权配置中主 Key 值仅支持大写字母，小写字母和数字，最大长度256位。字母数字随机组合搭配即可。更多详情，请参见 [播放鉴权配置](https://cloud.tencent.com/document/product/267/32463)。
有效时间时长建议设置为一场直播的时间长度。


[](id:que8)
### 可以创建固定的直播推流地址吗？地址有效时长最多可以设置为多久？
推流地址设置有效时间主要是为了防盗鉴权，若创建固定的推流地址，可能会出现盗推现象并对当前业务造成损失。
直播推流地址有效时长没有限制，可根据个人业务需求设置地址过期时间。同时，也可以通过拼接规则生成有效期更长的推流地址，具体拼装方式请参见 [自主拼装直播 URL 相关问题](https://cloud.tencent.com/document/product/267/32720) 。

>? 推流地址有效期不建议设置太长，否则该推流地址在使用过程中会报错，并提醒鉴权失败。

[](id:que9)
###  直播服务中的视频是否会显示腾讯云 Logo？ 
直播服务中的视频不会显示腾讯云 Logo。 

[](id:que10)
###  直播延迟多少？ 
正常情况下，使用 RTMP 协议推流并通过 FLV 协议播放，延迟在2秒 - 3秒左右，如果太长一般是有问题的。如果您发现直播延迟时间特别长，具体排查思路请参见 [直播延迟问题排查](https://cloud.tencent.com/document/product/267/7971 )。

[](id:que11)
###  直播时是否可以设置最高码率?
 不可以的，这是推流端自行设置的，但是推流端设置最高码率也要根据您网络的上传速度来决定。码率（或称最大比特率）上限就是您的网络上传速度，如果设太高就会使直播画面丢帧卡顿。 

[](id:que12)
###   腾讯云直播不用的直播房间怎么删除？ 
云直播目前是通过直播流id来关联直播推流和播放，无需进行删除操作；若您使用了即时通信 IM 服务，想要删除 IM 的房间避免达到上限，可参考 [解散群组](https://cloud.tencent.com/document/product/269/1624) 进行操作。
如果您使用的是频道模式的话，可以调用 [DeleteLVBChannel-删除直播频道](https://cloud.tencent.com/document/product/267/4722) 接口进行删除，输入待删除的直播频道的 ID 号（支持批量）。

> ! 频道模式为旧版方案，目前已不在更新维护。
 
[](id:que13)
 ### 直播开启关闭推流接口有什么用？ 
直播开启关闭推流接口主要用于鉴黄时的禁播场景，例如后台发现某个主播有涉黄或者反动内容，可以随时断流或者禁用这条流。具体调用方法请参见 [禁推直播流](https://cloud.tencent.com/document/api/267/20468)。


[](id:que14)
### 如何实现后台播放？
后台播放是终端功能，需要根据客户实际业务逻辑进行开发，只要直播流未中断，可以支持后台播放音频。


[](id:que15)
### 修改 HTTPS 配置时，添加证书信息后提醒“证书不正确”，怎么办？ 
 云直播的加密服务使用 Nginx，因此证书类型必须为 Nginx，请确认您当前证书类型是否正确。

[](id:que16)
###  播放域名关闭鉴权后，原来生成的播放地址无法播放了？ 
 播放鉴权可以设置有效期，在有效期内即使关闭了访问鉴权，原始地址仍然无法播放。 

[](id:que17)
###  接口限定访问次数如何理解？
云直播对帐号下所有 SecretId 发送的请求总数有访问次数限制，超过限制的请求不会正常响应。
例如，1秒内不超过200次。指您帐号下所有 SecretId 发送的这类请求在1秒内腾讯云服务器只接收200次，至于这200个是 1个客户发200次、还是200个客户每人1次、查询多个还是一个流，这边是不限制的，只算总请求数。 

[](id:que18)
###  推流过程中显示“RTMP close”并推流失败，但日志提醒推流成功是什么情况？ 
可能是您当前推流地址有问题，建议使用 [小程序 Demo](https://cloud.tencent.com/document/product/454/6555#.E5.B0.8F.E7.A8.8B.E5.BA.8F-demo) 测试推流地址是否能正常推流。更多问题排查方法请参见 [推流失败问题排查](https://cloud.tencent.com/document/product/267/7972) 。

[](id:que19)
###  修改帧率后无法正常推流，需要本地多次重启服务，并经常断开，如何处理？ 
可能是当前设置帧率过高。15帧以上即可保证视频流畅播放，建议调低帧率。  

[](id:que20)
###  什么情况下会出现系统主动断开长时间无数据的推流？ 
在推流时设备出现问题的情况下会出现该类问题。
例如：App 闪退，手机关机等其他非主观原因出现的异常，导致后台在70s内无法采集到数据推流，系统会主动断开。

[](id:que21)
### 新版控制台如何配置 API 密钥？
API KEY 为旧版 API 接口鉴权，目前官网 API 接口已升级为3.0版本，您可以通过 **[API 密钥管理](https://console.cloud.tencent.com/cam/capi)** 获取 SecretId 和 Secretkey 使用最新的 API 3.0 接口。

[](id:que21)
### 为什么播放时 H.265 编码无法播放？
由于 H.265 兼容性不及 H.264，若遇到播放器不支持 H.265 编码，出现播放失败的情况，可配置 [转码模板](https://cloud.tencent.com/document/product/267/20385) 转成 H.264 编码进行播放。

[](id:que22)
### m3u8 的文件能否支持中文名称？
m3u8 的文件命名也是根据直播的流名称去自动命名的，流名称**不支持**中文名称。

[](id:que23)
### 怎么获取直播在线观看人数？
可以通过 [查询流的播放信息列表](https://cloud.tencent.com/document/product/267/33850) 接口去请求获取实时在线人数，但是这个在线人数不是特别精确，如果是3个用户同时观看并使用同一个 IP 的话，这里只记录为一个在线人数，此接口返回数据只针对播放协议为 RTMP 和 FLV 的时候做参考，若播放协议为 HLS，此数据不可作为在线人数的参考。

[](id:que24)
### 云直播支持主备流吗？
云直播是有提供主备流功能的，用户如果同时向一个流名称中推两路流的话，拉流的时候只能看到第一个推流的内容，第二个推流的作为备用流，只有当第一个推流断流后才能看到。主备流功能默认开启。

[](id:que25)
### 云直播同一推流地址是否支持添加不同水印?
直播同一推流地址不支持添加不同水印，一个推流地址只能绑定一个水印模板。

[](id:que26)
### 云直播如何查看用户观看时长?
云直播暂时不支持查询用户观看时长。

[](id:que27)
### 云直播不转码用户是否能看直播?
云直播依靠播放地址进行播放，不进行转码也是可以正常播放的（直播流地址有效的情况下）。

[](id:que28)
### 云直播首屏耗时主要由哪几个方面组成？
首屏耗时主要还是看直播流观看的人是否较多，如果流比较热，就会命中 oc 缓存，首屏耗时就低些。

[](id:que9)
### 可以设定直播收看方黑白名单么？
可以通过 IP 黑白名单配置自定义 IP 黑/白名单及规则和内容，通过请求 IP 对请求进行过滤，实现访问限制，保护直播内容。具体操作步骤请参见 [配置 IP 黑白名单](https://cloud.tencent.com/document/product/267/66693#.E9.85.8D.E7.BD.AE-ip-.E9.BB.91.E7.99.BD.E5.90.8D.E5.8D.95)。
- **配置 IP 白名单**：只有配置的 IP 地址能够访问当前直播内容。
- **配置 IP 黑名单**：只有配置的 IP 地址无法访问当前直播内容。

[](id:que30)
### 云直播鉴黄，一定时间内会截取多少张图片？
云直播鉴黄，是在截图的基础上操作的，在截图的时候启用了鉴黄功能一定时间段内截图的数量与截图间隔的时间相关联，您可进入云直播控制台的 [**直播截图&鉴黄**](https://console.cloud.tencent.com/live/config/jtjh)，根据自身需求设置截图间隔的时间。
>?推流过程中自动截图间隔时间，默认为2秒，取值范围：2秒 - 300秒。

[](id:que31)
### 云直播如何查询计费带宽和流量数据？
[直播计费带宽和流量数据查询](https://cloud.tencent.com/document/product/267/35971) 可以通过 DescribeBillBandwidthAndFluxList 接口进行查询。

[](id:que32)
### 云直播如何查看推流是否成功?
- 如果您推流成功，会在控制台生成对应的流，您可以在**云直播控制台** > [**流管理**](https://console.cloud.tencent.com/live/streammanage) > **在线流**进行查看。
- 也可以通过调用 API 接口 [查询流的状态信息](https://cloud.tencent.com/document/product/267/20470)。

>? 若推流播放失败可前往 [云直播控制台](https://console.cloud.tencent.com/live/tools/selfcheck) 使用自助诊断功能，快速诊断常见直播推流/播放问题，详情请参见 [自助诊断](https://cloud.tencent.com/document/product/267/51517)。

[](id:que33)
### 云直播是否支持纯音频推流？
云直播支持纯音频推流（需要配合终端推流工具），也支持纯音频转码功能，可以在转码模板中配置，详情请参考：
- [OBS 纯音频推流](https://cloud.tencent.com/document/product/267/32726#.E7.BA.AF.E9.9F.B3.E9.A2.91.E6.8E.A8.E6.B5.81)
- [iOS 端直播 SDK](https://cloud.tencent.com/document/product/454/7879#6.-.E7.BA.AF.E9.9F.B3.E9.A2.91.E6.8E.A8.E6.B5.81)
- [Android 端直播 SDK](https://cloud.tencent.com/document/product/454/7885#6.-.E7.BA.AF.E9.9F.B3.E9.A2.91.E6.8E.A8.E6.B5.81)
- [云直播创建转码模板](https://cloud.tencent.com/document/product/267/32646)

[](id:que34)
### 云直播如何统计直播时长？
您可以使用 REST API 接口查询统计信息，详情请参见 [查询流的播放信息列表](https://cloud.tencent.com/document/product/267/33850) 。

[](id:que35)
### 云直播如何查询直播流在线时长？
云直播目前没有接口可以查询直播流在线时长，您可以调取推流回调和断流回调的时间来计算直播流的在线时长。

[](id:que36)
### 快直播是否支持使用小程序进行拉流观看？
暂时不支持，云直播 WebRTC 协议目前仅提供了 Web 端、iOS 端、Android 端的播放器，关于小程序云直播也仅支持 FLV 和  RTMP  格式拉流。
>! 在小程序端进行播放，是需要有相关资质证明的，播放器小程序插件是自带《信息网络传播视听节目许可证》的资质证书备案的，如果您不想使用这个插件，您也可以去完善相关的材料和资质，更多详情请参见 [短视频播放器小程序插件](https://cloud.tencent.com/document/product/266/36849)。

[](id:que37)
### 云直播如何查询直播观看人数？
您可以通过以下两种方案查询观看人数：
- 进入**云直播控制台** > **数据中心** > [**流数据查询**](https://console.cloud.tencent.com/live/analysis/stream) > **并发连接数**查看。
>? 若播放协议为 RTMP 和FLV，并发连接数即在线人数，若播放协议为 HLS，此数据不可作为在线人数的参考。
- 建议通过调用云直播 API 3.0 的 查询流的播放信息列表接口 [获取在线流观看人数](https://cloud.tencent.com/document/product/267/33850)。

[](id:que38)
### 云直播推流后断网会下发断流回调吗？
需要先配置断流回调，断网的直播流，一般是自动恢复的。如果70s内能推上数据，会自动恢复。（不会下发推、断流回调）。如果超出70s，会被我们这边断开连接，再推流上来是重新推流的。（会下发推、断流回调）

[](id:que39)
### 云直播推流协议是否需要跟拉流协议保持一致？
不需要的，例如推流为 RTMP 协议，拉流可以为 RTMP 协议、FLV 协议、 HLS 协议、UDP 协议等。

[](id:que40)
### 云直播使用无线网络从 CDN 不能拉流的原因？
云直播使用无线网络从 CDN 不能拉流的原因，您可根据下述方法进行排查：
- 检查当前的无线网络是否对腾讯云 IP 设置了限制。
- 若当前手机为苹果手机，检查 App 是否已获取 Wi-Fi 授权。

若以上方法无法解决您的问题，请联系腾讯云技术顾问，会有专人对接。

[](id:que41)
### 云直播域名配置 HTTPS，无法播放？
出现该情况，请根据以下进行排查：
- 检查是否上传了证书。
- 核查证书上传时间（提交证书后约2小时生效），请2小时左右后访问该域名。

>? 若仍不能解决您的问题，前往 [云直播控制台](https://console.cloud.tencent.com/live/tools/selfcheck) 使用自助诊断功能，可快速诊断常见直播推流/播放问题，详情请参见 [自助诊断](https://cloud.tencent.com/document/product/267/51517)。



[](id:que42)
### 快直播如何实现动态调整主播端的分辨率？
快直播负责播放环节，主播端负责推流环节。如果您需要调整分辨率，可在拉流前先配置关联 [直播转码模板](https://cloud.tencent.com/document/product/267/20385)。

[](id:que43)
### 云直播如何使用 Flash 播放 MU38?
可参考 [HTML 嵌套 Flash 播放视频](https://cloud.tencent.com/developer/article/1392961) 实现。

