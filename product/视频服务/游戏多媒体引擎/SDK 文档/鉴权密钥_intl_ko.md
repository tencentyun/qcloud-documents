## 소개

Tencent Cloud 게임 멀티미디어 엔진 SDK의 사용을 환영합니다. 개발자가 Tencent Cloud 게임 멀티미디어 엔진 제품을 디버깅하고 연결하는 데 도움이 되도록 여기에 모든 플랫폼에 적합한 인증 키 관련 기술 문서를 소개합니다.

## 음성 채팅 키
Tencent Cloud 게임 멀티미디어 엔진은 해당 기능의 암호화와 인증에 사용되는 인증 키를 제공합니다. 인증에서 사용한 서명의 생성 과정은 일반 텍스트, 키 및 알고리즘과 관련이 있습니다.

일반 텍스트는 다음 필드의 네트워크 오더로 구성됩니다.

|필드 설명    		| 유형/길이			| 값 정의/비고|
| ---------------- |-------------------|--------------|
| cVer				|unsigned char/1	|버전 번호, 입력 수치: 0|
| wAccountLen		|unsigned short/2	|제3자 자체 보유 계정 길이	|
| buffAccount		|wAccountLen		|제3자 자체 보유 계정 문자	|
| dwSdkAppid		|unsigned short/4	|제3자 자체 보유 AppID		|
| dwAuthid			|unsigned int/4		|그룹 번호	|
| dwExpTime		|unsigned int/4		|만료 시간(현재 시간 + 유효기간[단위: 초, 300초를 권장])|
| dwPriviegeMap	|unsigned int/4		|ITMG_AUTH_BITS_DEFAULT는 전체 권한을 나타냄|
| dwReserved		|unsigned int/4		|입력 수치: 0		|

### 1. 키
Tencent Cloud GME 콘솔이 관련 권한 키를 획득합니다.

![](https://main.qcloudimg.com/raw/9afa07c629e37b66cd223bf39fe17abf.png)

### 2. 알고리즘
TEA 대칭 암호화 알고리즘.
전반적으로는 액세스 초기 단계에서 클라이언트 배포 솔루션을 사용하며, 이후에 게임 앱 백 엔드에 배포로 최적화하는 것이 좋습니다.

|솔루션       		| 장점        		| 단점																																|
| ------------- |-------------|-------------| 
| 백 엔드 배포    		|안전성 높음	|백 엔드 개발 공동 테스트 필수
| 클라이언트 배포      	|신속한 액세스	|안전성 낮음|

#### 백 엔드 배포 사용방법
백 엔드에서 암호화 열을 생성한 후 클라이언트에 발행하여 클라이언트에서는 다음의 시나리오에 사용할 수 있습니다. API enterRoom을 호출하여 방 입장 조작을 수행하면 암호화 열을 방 입장 매개변수의 authBuffer 필드에 전송합니다.




### 3. 알고리즘 암호화 세부 정보
- 키: AppID는 인증 키의 md5 값에 해당하며, 길이는 16바이트입니다
- 암호화 알고리즘: TEA 암호화
- 암호화 라이브러리 및 예: 첨부 파일 [authbuffer.zip](https://main.qcloudimg.com/raw/eac8e36ca4a24edf9414dfe7f58a764a.zip)

>**주의:**
> 콘솔에서 키를 수정한 후, 15분 ~ 1시간 내에 적용되며 자주 변경하지 않는 것이 좋습니다.


#### 암호화 방법	
- 암호 텍스트 중의 숫자는 네트워크 바이트 오더로 변환(빅 엔디안 바이트 오더)
- 암호 텍스트를 하나의 문자열로 구성합니다.
-  tea를 사용해 문자열을 암호화하고 symmetry_encrypt 함수가 출력한 문자열은 권한 암호열입니다.

>**주의:**
>이진 열을 16진으로 전환할 필요가 없습니다.



## 오프라인 음성 키
개요: 오프라인 음성의 업로드 및 다운로드는 Tencent Cloud의 COS 플랫폼에 의해 수행되며 개별적으로 인증해야 합니다. 인증에서 사용한 서명의 생성 과정은 일반 텍스트, 키 및 알고리즘과 관련이 있습니다.
### 1. 일반 텍스트
일반 텍스트는 AppID와 OPENID입니다.

### 2. 키 획득
응용프로그램 설정 인터페이스의 인증 정보 모듈에서 [개인 및 공개 키 다운로드]를 클릭하면, 이 응용프로그램의 오프라인 음성에 해당하는 공개 및 개인 키를 다운로드할 수 있습니다.
![](https://main.qcloudimg.com/raw/9afa07c629e37b66cd223bf39fe17abf.png)

다운로드한 zip 파일을 압축 해제한 후 다음과 같은 두 개의 파일을 볼 수 있습니다.

|파일 이름       |역할    |
| :-----------: | ------------- |
|public_key |공개 키|
|private_key |개인 키|

필요에 따라 노트패드로 해당 파일을 열고 그 안의 키를 복사해 매개변수로 상응하는 함수에 입력합니다.

>**주의:**
>다운로드할 때마다 획득하는 공개 키/개인 키 쌍은 1시간을 대기해야 정상적으로 사용할 수 있습니다.

### 3. 알고리즘 배포
전반적으로는 액세스 초기 단계에서 클라이언트 배포 솔루션을 사용하며, 이후에 앱 백 엔드에 배포로 최적화하는 것이 좋습니다.

|방안       | 단점        |세부 정보 |
| ------------- |:-------------:| ------------- 
| 백 엔드 배포   		|작업량 큼				|[TLS 백 엔드 API 사용 설명서](https://cloud.tencent.com/document/product/269/1510#1-.E6.A6.82.E8.BF.B0)					|
| 클라이언트 배포      	| 설치 패키지 크기, 안정성 		|프로젝트에 libqav_tlssig.so(Android)와 QAVSDKTlsSig.framework(iOS) 2개 라이브러리 파일을 별도로 도입하고 QAVSig.cs도 별도로 도입합니다.  	|  

사용에 대한 세부정보는 각 플랫폼의 문서를 참조하십시오.

