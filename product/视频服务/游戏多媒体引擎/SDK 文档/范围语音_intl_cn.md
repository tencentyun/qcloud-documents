## 简介
欢迎使用腾讯云游戏多媒体引擎 SDK 。为方便开发者调试和接入腾讯云游戏多媒体引擎产品 API，这里向您介绍 GME 小队语音的接入技术文档。

### 加入房间
用生成的鉴权数据进房。


### 实时语音房间
#### 函数原型
```
ITMGContext EnterRoom(string roomId, ITMG_ROOM_TYPE roomType, byte[] authBuffer)
```

|参数     | 类型         |意义|
| ------------- |:-------------:|-------------
| roomId		|string    		|房间号，最大支持127字符|
| roomType 			|ITMG_ROOM_TYPE	|房间音频类型				|
| authBuffer    	|Byte[]  		|鉴权数据					|

|音频类型     	|含义|参数|适用场景|音量类型|控制台推荐采样率设置|
| ------------- |------------ | ---- |---- |---- |---- |
| ITMG_ROOM_TYPE_FLUENCY			|流畅音质	|1|流畅优先、超低延迟实时语音，应用在游戏内开黑场景，适用于FPS、MOBA等类型的游戏；								|扬声器：通话音量；耳机：媒体音量	|如对音质无特殊需求，16K 采样率即可；					|
| ITMG_ROOM_TYPE_STANDARD			|标准音质	|2|音质较好，延时适中，适用于狼人杀、棋牌等休闲游戏的实时通话场景；													|扬声器：通话音量；耳机：媒体音量	|根据对音质的需求，可以选择 16k/48k 采样率				|
| ITMG_ROOM_TYPE_HIGHQUALITY		|高清音质	|3|超高音质，延时相对大一些，适用于音乐舞蹈类游戏以及语音社交类APP；适用于播放音乐、线上K歌等有高音质要求的场景；	|扬声器：媒体音量；耳机：媒体音量	|为了保证最佳效果，建议控制台设置 48k 采样率的高音质配置	|

- 如对音量类型或场景有特殊需求，请联系一线客服反馈；
- 控制台采样率设置会直接影响游戏语音效果，请在 [控制台](https://console.cloud.tencent.com/gamegme) 上再次确认采样率设置是否符合项目使用场景。


### 小队语音房间
#### 小队语音简介：
小队语音：玩家在游戏开始前组队，小队语音仅队友可以听到；
全体语音：玩家在游戏开始前和游戏过程中可设置全体语音模式，设置后玩家附近一定范围的人都能听到该玩家讲话。
游戏过程中可随时切换语音模式。（全体语音模式与普通进房语音模式不互通）

#### 假设 A 玩家状态为全局语音，对应 B 玩家在不同的语音情况下声音的模式：

|是否同一小队	|是否范围内	|语音状态	|A 能不能听到 B 的声音	|B 能不能听到 A 的声音	|
| -----------------	| ------------ | ------------ |--------------------------	|--------------------------	|
|同一小队		|是		 	|全局语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|同一小队		|是		 	|小队语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|同一小队		|否		 	|全局语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|同一小队		|否		 	|小队语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|不同小队		|是		 	|全局语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|不同小队		|是			|小队语音	|A 不可以听到 B 的声音	|B 不可以听到 A 的声音	|
|不同小队		|否		 	|全局语音	|A 不可以听到 B 的声音	|B 不可以听到 A 的声音	|
|不同小队		|否			|小队语音	|A 不可以听到 B 的声音	|B 不可以听到 A 的声音	|

#### 假设 A 玩家状态为小队语音，对应 B 玩家在不同的语音情况下声音的模式：

|是否同一小队	|是否范围内	|语音状态	|A 能不能听到 B 的声音	|B 能不能听到 A 的声音	|
| -----------------	| ------------ | ------------ |--------------------------	|--------------------------	|
|同一小队		|是		 	|全局语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|同一小队		|是		 	|小队语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|同一小队		|否		 	|全局语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|同一小队		|否		 	|小队语音	|A 可以听到 B 的声音		|B 可以听到 A 的声音		|
|不同小队		|是		 	|全局语音	|A 不可以听到 B 的声音	|B 不可以听到 A 的声音	|
|不同小队		|是			|小队语音	|A 不可以听到 B 的声音	|B 不可以听到 A 的声音	|
|不同小队		|否		 	|全局语音	|A 不可以听到 B 的声音	|B 不可以听到 A 的声音	|
|不同小队		|否			|小队语音	|A 不可以听到 B 的声音	|B 不可以听到 A 的声音	|

### 对语音距离范围的补充
**注意：**
>- 是否在语音距离范围内，不影响同一小队成员互相通话。
>- 设置接收语音距离范围参考 API：SetGameAudioRecvRange。

#### 函数原型
```
ITMGContext  EnterTeamRoom(string roomId,ITMG_ROOM_TYPE roomType, byte[] authBuffer,int teamId, int audioMode)
```
|参数     | 类型         |意义|
| ------------- |:-------------:|-------------
| roomId		|string    		|房间号，最大支持127字符	|
| roomType 			|ITMG_ROOM_TYPE	|房间音频类型（参数只能为1）|
| authBuffer    	|Byte[] 		|鉴权数据								|
| teamId    		|int    		|加入的小队语音队伍标识码（不能为 0 ）	|
| audioMode    		|int    		|0 代表全局语音，1 代表小队语音			|






### 修改小队语音通话模式
通过此函数修改小队语音通话模式。
#### 函数原型  
```
ITMGRoom int ChangeGameAudioMode(Type_AudioMode gameAudioMode)
```
|参数     | 类型         |意义|
| ------------- |:-------------:|-------------
| Type_AudioMode    |int     |0 代表全局语音，1 代表小队语音|

#### 示例代码  
```
ITMGContext.GetInstance().GetRoom().ChangeGameAudioMode(1);
```

### 设置接收语音距离范围
此函数用于设置接收的语音范围（距离以游戏引擎为准）。

#### 函数原型  
```
ITMGRoom int SetGameAudioRecvRange(int range)
```
|参数     | 类型         |意义|
| ------------- |-------------|-------------
| range    |int         | 最大可以接收音频的范围				|


#### 示例代码  
```
ITMGContext.GetInstance().GetRoom().SetGameAudioRecvRange(300);
```


### 更新声源方位（包含朝向）
此函数用于更新声源方位角信息，每帧调用便可实现 3D 音效效果。
```
public abstract int UpdateSelfPosition(int position[3], float axisForward[3], float axisRight[3], float axisUp[3])
```
|参数     | 类型         |意义|
| ------------- |-------------|-------------
| position   	|int[]		|自身在世界坐标系中的坐标，顺序是前、右、上|
| axisForward   |float[]  	|自身坐标系前轴的单位向量|
| axisRight    	|float[]  	|自身坐标系右轴的单位向量|
| axisUp    	|float[]  	|自身坐标系上轴的单位向量|

