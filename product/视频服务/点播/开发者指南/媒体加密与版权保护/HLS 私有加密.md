HLS 私有加密是云点播独创的视频内容加密方案，使用私有协议保护内容密钥，可有效防范多种浏览器插件和灰产工具的破解。

## 原理架构

HLS 私有加密和解密播放的整体架构流程如下：
<img src="https://qcloudimg.tencent-cloud.cn/raw/81b0a7d51b5f7321fde45e32e3e725b9.png" width="700" />
1. <b>服务端上传</b>：业务后台通过控制台、服务端 API 等方式，将视频上传到云点播。
2. <b>触发视频处理</b>：上传视频的同时，指定带加密的转自适应码流。上传后，视频开始加密过程。
3. <b>获取密钥</b>：转自适应码流并加密，点播从 KMS 模块获取加密视频时使用的密钥。
4. <b>加密并写入存储</b>：视频转自适应码流并加密后，输出的视频内容被写入到点播的存储中。
5. <b>更新媒资</b>：加密后的视频信息，被写入到媒资管理模块。
6. <b>获取播放器签名</b>：业务终端集成点播超级播放器，播放器向业务服务器请求播放器签名。
7. <b>请求下载地址</b>：超级播放器会从点播的播放服务获取视频的下载地址。
8. <b>下载内容</b>：超级播放器通过下载地址，从点播 CDN 下载被加密的内容。
9. <b>获取密钥</b>：超级播放器携带播放器签名请求内容密钥，此时内容密钥本身被云点播的私有协议保护，防止密钥被盗取。
10. <b>解密播放</b>：超级播放器使用私有协议得到内容密钥，解密播放。



## 接入参考

为了帮助您快速接入点播的加密能力，我们为您提供了视频加密 [接入指引](https://cloud.tencent.com/document/product/266/43633)，以示例的方式为您讲解接入步骤。

## 常见问题

1. 如何对上传的视频进行 HLS 私有加密？
云点播的 [转自适应码流](https://cloud.tencent.com/document/product/266/34071) 功能，可以将视频转成多种分辨率并加密。具体实践方式，请您参见 [接入指引](https://cloud.tencent.com/document/product/266/43633)。
2. 终端如何播放加密后的视频？
播放点播加密的视频，您需要在终端集成超级播放器 SDK。同时，您还需要搭建一个签名派发服务。具体实践方式，请您参见 [接入指引](https://cloud.tencent.com/document/product/266/43633)。

