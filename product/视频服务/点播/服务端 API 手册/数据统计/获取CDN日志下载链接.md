## 接口名称
GetCdnLogList

## 功能说明
获取指定时间段内点播 CDN 的日志下载链接。

1. 默认情况下 CDN 每小时生成一个日志文件，如果某一个小时没有 CDN 访问，不会生成日志文件。
2. 只能查询到最近30天内的 CDN 日志下载链接。
3. CDN 日志下载链接的有效期为24小时。

### 请求域名
vod.api.qcloud.com

### 最高调用频率
100次/分钟

### 参数说明
| 参数名称      | 必填 | 类型    | 说明                                                                                                                                |
| ------------- | ---- | ------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| startTime     | 是   | Integer | 起始时间，Unix 时间戳，如北京时间2018-03-01 00:00:00的 Unix 时间戳为1519833600                                                      |
| endTime       | 是   | Integer | 结束时间，Unix 时间戳，如北京时间2018-03-02 00:00:00的 Unix 时间戳为1519920000                                                      |
| hosts         | 否   | Array   | 域名列表，查询指定域名的 CDN 日志下载链接，如果请求不带 hosts 参数，返回所有域名的 CDN 日志下载链接，最多返回20个域名的数据 |
| COMMON_PARAMS | 是   |         | 参见[公共参数](/document/product/266/7782#.E5.85.AC.E5.85.B1.E5.8F.82.E6.95.B0)                                                     |

## 接口应答

### 参数说明
| 参数名称             | 类型    | 说明                                                                                                     |
| -------------------- | ------- | -------------------------------------------------------------------------------------------------------- |
| code                 | Integer | 错误码，0：成功；其他值：失败                                                                            |
| message              | String  | 错误信息                                                                                                 |
| data                 | Array   | 结果数据                                                                                                 |
| data.host            | String  | 域名                                                                                                     |
| data.domesticLogList | Array   | 国内 CDN 节点产生的 CDN 日志下载链接列表，字段信息参见 LogInfo                                           |
| data.overseaLogList  | Array   | 海外 CDN 节点产生的 CDN 日志下载链接列表，字段信息参见 LogInfo，如果域名没有开通海外加速，不会返回该数据 |

#### LogInfo日志下载链接信息
| 参数名称 | 类型   | 说明                                                                                     |
| -------- | ------ | ---------------------------------------------------------------------------------------- |
| date     | String | 日志所属日期， 格式为：yyyy-MM-dd ，如2018-03-01                                         |
| name     | String | 日志名称，格式为：yyyyMMddHH-host ， 即日期小时-域名，如2018030112-123.vod2.myqcloud.com |
| link     | String | 日志下载链接，24小时内下载有效，日志文件内容参见[日志文件说明](#logfile)                 |

### 错误码说明
| 错误码    | 含义说明                                     |
| --------- | -------------------------------------------- |
| 4000-7000 | 参见[公共错误码](/document/product/266/7783) |
| 1000      | 无效参数                                     |
| 17010     | hosts 参数错误                               |
| 17011     | 域名列表数据超过20个                         |
| 17013     | startTime 参数错误                                |

## 示例
### 请求实例
```
https://vod.api.qcloud.com/v2/index.php?Action=GetCdnLogList
&startTime=1519833600
&endTime=1519920000
&hosts.0=123.vod2.myqcloud.com
&COMMON_PARAMS
```

### 应答示例

```javascript
{
	"code": 0,
	"message": "",
	"data": [{
		"host": "123.vod2.myqcloud.com",
		"domesticLogList": [{
			"date": "2018-03-01",
			"name": "2018030112-123.vod2.myqcloud.com",
			"link: ": "http: //log-download.cdn.qcloud.com/20180301/12/2018030112-123.vod2.myqcloud.com.gz?st=LZi3oQXkjkeBe1xTFTGPFQ&e=1501743762"
		}]
	}]
}
```

## <span id="logfile">日志文件说明</span>
日志文件的压缩格式为 gzip ，日志文件里面每条日志内容的各个字段以空格隔开，字段顺序（从左到右）及含义如下表所示：

| 字段顺序 | 字段内容                                    |
| -------- | ------------------------------------------- |
| 1        | 请求时间                                    |
| 2        | 访问域名的客户端 IP                         |
| 3        | 被访问的域名                                |
| 4        | 文件请求路径                                |
| 5        | 本次访问字节数大小                          |
| 6        | 省份编号，见下文[省份编号映射](#provdef)    |
| 7        | 运营商编号，见下文[运营商编号映射](#ispdef) |
| 8        | HTTP 状态码                                 |
| 9        | Referer 信息                                |
| 10       | 响应时间（毫秒）                            |
| 11       | User-Agent 信息                             |
| 12       | Range 参数                                  |
| 13       | HTTP Method                                 |
| 14       | HTTP 协议标识                                |
| 15       | 缓存 HIT/MISS                               |

#### <span id="provdef">省份编号映射</span>
| 编号 | 省份   |
| ---- | ------ |
| 22   | 北京   |
| 86   | 内蒙古 |
| 146  | 山西   |
| 1069 | 河北   |
| 1177 | 天津   |
| 119  | 宁夏   |
| 152  | 陕西   |
| 1208 | 甘肃   |
| 1467 | 青海   |
| 1468 | 新疆   |
| 145  | 黑龙江  |
| 1445 | 吉林   |
| 1464 | 辽宁   |
| 2    | 福建   |
| 120  | 江苏   |
| 121  | 安徽   |
| 122  | 山东   |
| 1050 | 上海   |
| 1442 | 浙江   |
| 182  | 河南   |
| 1135 | 湖北   |
| 1465 | 江西   |
| 1466 | 湖南   |
| 118  | 贵州   |
| 153  | 云南   |
| 1051 | 重庆   |
| 1068 | 四川   |
| 1155 | 西藏   |
| 4    | 广东   |
| 173  | 广西   |
| 1441 | 海南   |
| 0    | 其他   |
| 1    | 港澳台 |
| -1   | 海外   |

#### <span id="ispdef">运营商编号映射 </span>
| 编号 | 运营商     |
| ---- | ---------- |
| 2    | 中国电信   |
| 26   | 中国联通   |
| 38   | 教育网     |
| 43   | 长城宽带   |
| 1046 | 中国移动   |
| 3947 | 中国铁通   |
| -1   | 海外运营商 |
| 0    | 其他运营商 |

#### 海外地区编号映射
海外 CDN 节点日志文件中的省份编号字段表示海外地区编号

| 编号 | 海外地区     |
| ---- | ------------ |
| 73   | 印度         |
| 1195 | 印度尼西亚   |
| 1176 | 新加坡       |
| 57   | 泰国         |
| 144  | 越南         |
| 3701 | 马来西亚     |
| 2588 | 菲律宾       |
| 2026 | 台湾         |
| 1044 | 日本         |
| 3379 | 韩国         |
| 1200 | 香港         |
| 3839 | 加拿大       |
| 669  | 美国         |
| -2   | 海外其他地区 |
| -3   | 未知         |

#### 海外运营商映射
| 编号 | 海外地区   |
| ---- | ---------- |
| -1   | 海外运营商 |
