云转推是轻量级的直播工具，提供高效的直播转推服务，支持定时开播，定时停播，轮播列表等能力。 
本文主要指导您了解云转推功能，并快速跑通云转推。

## 前提条件
1. 进入多媒体创作引擎用户端平台，并进入**云直播** > **云转推**。
2. 单击**创建转推项目**，创建新的云转推项目并进入操作台。

[](id:step1)
## 一、管理输入源
云转推支持主、备输入源进行切换，支持添加 [直播 URL](#live)、[轮播文件](#rotation)、[本地推流](#push) 3种输入类型。

[](id:live)
### 添加直播 URL
在转推控制台的视频输入源区域单击**添加主/备输入源视频**，在添加视频页面中，选择输入类型为**直播 URL**。

<dx-tabs>
::: 直播拉流 URL

1. 选择**直播拉流URL**，将正在直播的流 URL 填写到输入框中，支持 RTMP、HLS 和 HTTP-FLV 三种协议。
2. 单击**确定**开始拉取直播流。
![](https://qcloudimg.tencent-cloud.cn/raw/9ecb6e3611945ea0781100c31e371f5b.png)
:::
::: 直播推流 URL
1. 选择**直播推流URL**，云导播会自动生成 RTMP 推流地址，单击**确定**，即可生成一个推流输入源。
2. 将此地址复制到推流软件中，开始推流。

![](https://qcloudimg.tencent-cloud.cn/raw/dd16a6162c328f1557c52f7330f73a80.png)
:::
</dx-tabs>

[](id:rotation)
### 添加轮播文件
在转推控制台的视频输入源区域单击**添加主/备输入源视频**，在添加视频页面中，选择输入类型为**轮播文件**。
>! 
>- 输入类型为轮播情况下：
>	- 支持添加**100个**云媒资文件或者点播文件地址。
>	- 若播放次数选择**播放一次**，则列表中的文件播放完毕时转推任务将会结束。
>	- 若播放次数选择**循环播放**，则列表中的文件将会循环播放 。
>- 请保证填入的点播 URL 地址可以正常访问。如果不能正常访问，该输入将无法播放。如果输入源中间断流，输出信号会显示黑色画面。
>- 未清洗的视频可能会导致直播卡顿，建议您单击**清洗**按钮进行视频清洗。 若视频文件较大，清洗可能会需要几分钟的时间，您可以先保存轮播列表，等待清洗完成之后再开启直播。清洗完成的视频，会显示已清洗标志![](https://qcloudimg.tencent-cloud.cn/raw/c3c77de055c20d891ac305a7bb48fa89.png)。

<dx-tabs> 
::: 云媒资导入
支持导入**云创网盘**中的视频文件作为输入源，支持选择多个视频。

1. 选择**网盘导入**，单击**添加文件**选择视频文件，单击**确定**即确认选择。
2. 在状态栏查看当前视频的清洗状态，按实际需求单击**清洗**按钮进行视频清洗。
3. 选择播放次数，单击**保存**即可添加到输入源。

![](https://qcloudimg.tencent-cloud.cn/raw/5ebc64307d6872c1231c5947eb3aac9c.png)
:::
::: 点播 URL
支持 MP4、HLS 和 FLV 格式的点播 URL，可添加多个视频。

1. 选择**点播URL**，单击**添加URL**，填写点播 URL 地址。
2. 在状态栏查看当前视频的清洗状态，按实际需求单击**清洗**按钮进行视频清洗。
3.  选择播放次数，单击**保存**即可添加到输入源。

![](https://qcloudimg.tencent-cloud.cn/raw/d8183c9994928c5a2d46c0627e13595c.png)
:::
</dx-tabs>

[](id:push)
### 添加本地推流
在转推控制台的视频输入源区域单击**添加主/备输入源视频**，在添加视频页面中，选择输入类型为**本地推流**。

>! 
>- 使用时请允许摄像头和麦克风权限。
>- 本地摄像头和屏幕共享输入源属于本地推流，一旦刷新或关闭云转推窗口就会停止推流。

<dx-tabs>
::: 摄像头推流
支持使用本地摄像头作为输入源 。

1. 选择**摄像头推流**，调整视频分辨率为1920×1080、1280×720、640×480 或 480×360。
2. 选择本地摄像头设备，单击**确定**并授权启用摄像头权限，即可发起本地摄像头推流。

![](https://qcloudimg.tencent-cloud.cn/raw/1b2bd7bc5e02e3ee20d7b8c877704a61.png)
:::
::: 屏幕共享
支持屏幕共享，支持选择应用窗口或桌面。
1. 选择**屏幕共享**，调整视频分辨率为1920×1080、1280×720、640×480 或 480×360，单击**保存**即可发起本地屏幕共享推流。
![](https://qcloudimg.tencent-cloud.cn/raw/73b48c675a51a8bb041b8f845aa63956.png)
2. 在弹框中选中您需分享的屏幕界面，单击**分享**即可。
![](https://qcloudimg.tencent-cloud.cn/raw/aad3d70b61a241447b31f8da50f8e724.png)
:::
</dx-tabs>

[](id:edit)
### 编辑输入源
输入源添加成功后，若您需要修改，可单击输入源框中的![](https://main.qcloudimg.com/raw/ae8ac5a2f2008f56f705d0d93c4ea3e5.png)设置按钮，单击**编辑输入源**，进入视频源编辑页，重新编辑输入视频源。

>! 直播开始后不能修改输入源。

![](https://main.qcloudimg.com/raw/8f0d23680adce6243e01e49d58c47d4d.png)

[](id:delete)
### 删除输入源
1. 输入源添加成功后，若您需要删除输入源，可单击输入源框中的![](https://main.qcloudimg.com/raw/ae8ac5a2f2008f56f705d0d93c4ea3e5.png)设置按钮，单击**删除**。
   ![](https://main.qcloudimg.com/raw/089201fa3f20d62f386e8a6ce5fb3929.png)
2. 在删除输入源确认弹框中，单击**确认**，即可清空已添加的输入源。
   ![](https://main.qcloudimg.com/raw/6240ea98540c801f38d7a8a9fe52cabe.png)

[](id:step2)
## 二、设置输出尺寸
云转推台内置了720P、1080P、视频号的输出尺寸供您选择，也按照视频原始尺寸输出。同时支持横屏或竖屏的输出尺寸，以满足 PC、移动端或特定直播平台的输出尺寸。
您可在右上角的**输出尺寸设置**区域，根据实际情况进行配置。
![](https://qcloudimg.tencent-cloud.cn/raw/e9fc30b9be1f6329cf178fcd32f8444c.png)

[](id:step3)

## 三、设置输出地址
开始直播前，请先设置转推地址或选择直播平台。

[](id:add_url)
### 添加输出地址
支持添加多个输出地址，转推开始后，可以实现多平台同步直播。
1. 在右侧的输出地址列表中，单击**添加输出地址**。
2. 在弹框中选择地址输出厂商，支持选择自定义。单击**确定**即可成功添加输出地址。
 - 若选择厂商为**视频号**、**微视**、**斗鱼**、**虎牙直播**或**bilibilii**，则直接填写转推地址。
![](https://main.qcloudimg.com/raw/93343c2fda9d49275a777c973749dab6.png)
 - 若选择厂商为**快手**，则需上传直播封面，单击**一键授权推流地址**前往快手网站进行授权。
![](https://main.qcloudimg.com/raw/b01fa6a5233d0cc8a4f19bb074e39c1a.png)
 - 若选择厂商为**自定义**，则输入输出名称及转推地址。
 ![](https://main.qcloudimg.com/raw/4c1c0d7ba28b52011c06770c226a39ff.png)
>? 支持将输出流以 RTMP 协议推送至其他厂家：
>- 推流地址需满足如下格式：`rtmp://domain/app/stream?arg1=xxx`。
>- 若转推到 B 站，支持以下特殊推流域名地址：`txy.live-send.acg.tv``tx-delay.live-send.acg.tv`。

[](id:change_url)
### 修改输出地址
>! 直播开始后不能修改或删除输出地址。

选择已添加的输出源，单击其右侧的![](https://main.qcloudimg.com/raw/c3d21abbcac0eb1ec362c12b25597775.png)，进入修改输出源的推流地址，单击**确定**即可成功修改推流地址。
![](https://main.qcloudimg.com/raw/6480722515033c0c14d1ed6b21a240ff.png)

[](id:delete_url)

### 删除输出地址

选择已添加的输出源，单击其右侧的![](https://main.qcloudimg.com/raw/6318fa2b692cf79190d82ec0aeb60c97.png)，在删除确认弹框中，单击**确定**即可成功删除。
>! 转推中无法修改输出地址。

![](https://main.qcloudimg.com/raw/9a2b501959bbc849fe07ef8e60517065.png)

[](id:step4)

## 四、启动转推
添加主输入源和输出地址后，即可启动转推。目前支持 [立即转推](#now) 和 [定时转推](#set_time) 两种转推方式。

>! 转推开启后，将不支持编辑和删除输入源。

[](id:set_time)

### 定时转推

1. 单击**定时转推**，在定时转推弹窗中选择开始时间及转推的持续时间。
2. 单击**确定**即可，定制转推将按照用户设置的开始时间自动开启转推任务。
>? 
>- 定时转推任务开始时间需要需要在当前时间的5分钟后。
>- 转推任务结束时间最短设置10分钟，最长为30天。

![](https://main.qcloudimg.com/raw/4f54323e7e8c242950165c7aae0e3b20.png)

[](id:now)

### 立即转推
1. 在**直播窗口**中，单击**立即转推**。
2. 进入转推结束时间设置弹框，选择结束时间。**转推任务结束时间最短设置10分钟，最长为30天**。
![](https://main.qcloudimg.com/raw/1455d6001e2773dae4ea1efddb0fcb7d.png) 
3. 单击**确定**，即可开始转推。
![](https://main.qcloudimg.com/raw/a444abd0f471575c632bef280ea55e60.png)
>? 
>- 若您需停止转推，具体操作请参见 [停止转推](#step8)。
>- 若您需修改结束时间，具体操作请参见 [修改结束时间](#step6)。

[](id:step5)

## 五、切换输入源
当转推启动后，若您需切换视频源，可单击未被使用的主/备输入源右侧的![](https://main.qcloudimg.com/raw/ae8ac5a2f2008f56f705d0d93c4ea3e5.png)设置按钮，单击**切换为当前输入源**，即可快速切换主/备输入源的画面。

![](https://main.qcloudimg.com/raw/e5face29d0ea607fb96d859db6d7b49a.png)

[](id:step6)
## 六、修改结束时间

对于 [进行中](#step4) 的转推项目，如您需修改转推的结束时间，可通过以下两种方式进行操作：

- 在云转推任务列表栏中，单击对应任务操作栏中的**修改结束时间**。在修改弹框中可修改开始时间和结束时间，单击**确定**即可。
  ![](https://main.qcloudimg.com/raw/5d5c646fd19f790fbc5268214607ea6b.png)
- 单击需管理的任务，进入操作台，单击直播窗口中的**修改结束时间**。在修改弹框中修改结束时间，单击**确定**即可。
  ![](https://main.qcloudimg.com/raw/5801200a4a9e31f9461ca5bcfcdda0a6.png)

[](id:step7)

## 七、取消定时

对于 [定时转推](#set_time) 的项目，若您需取消定时转推，可单击对应转推任务操作栏中的**取消定时**，即可快速取消定时转推任务。
![](https://main.qcloudimg.com/raw/bd9668bf081b0c2ed22113153d5ec896.png)



[](id:step8)

## 八、停止转推

针对 [进行中](#step4) 的转推项目，如您需停止转推，可通过以下两种方式进行操作：

- 在云转推任务列表栏中，单击对应任务操作栏中的**停止转推**。在确认弹框中单击**确认**，即可快速停止转推。
  ![](https://main.qcloudimg.com/raw/94c72eccf792eb5004846aeca5c1eee0.png)
- 单击需管理的任务，进入操作台，单击直播窗口中的**停止转推**，在确认弹框中单击**确认**即可停止转推。
  ![](https://main.qcloudimg.com/raw/e98815c05aecfb1e100b7400143fe3de.png)


## 总结

学习完本教程后，您已经全面地了解了如何使用云转推的进阶功能。

## 相关文档

除此之外，我们也为您提供了更多的直播工具，如您希望：

- 专业的直播导播功能，请参见 [使用云导播开启一场直播](https://cloud.tencent.com/document/product/1156/64150)。
- 直播录制及回放，请参见 [使用直播回放录制并重播](https://cloud.tencent.com/document/product/1156/64155)。
- 更加轻量的直播转推功能，请参见 [使用直播转推实现多平台同步直播](https://cloud.tencent.com/document/product/1156/64165)。

