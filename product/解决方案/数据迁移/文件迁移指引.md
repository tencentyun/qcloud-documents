数据迁移支持多种场景的文件迁移，并且提供灵活的迁移工具和可靠的合作伙伴帮助用户完成迁移。腾讯云提供了多种文件存储服务：COS（对象存储）、CFS（文件存储）、CAS（归档存储），其中数据迁移在 COS 的应用相对比较广泛。本文将主要介绍 COS 的迁移，关于 CFS 和 CAS 的迁移需求，请您联系我们的合作伙伴。

## COS 的迁移场景
1、本地文件迁移至腾讯云 COS。
2、第三方云对象存储迁移至腾讯云 COS。

## COS 的迁移方式
结合用户的迁移场景，综合考虑用户的业务需求和迁移的时间成本（网络速度和存储容量）可以选择在线迁移或者离线迁移两种方式。
- 如果用户的存储容量不是很大（10 TB 以下），而且业务场景不太允许停服，可以考虑在线的迁移方式。
- 如果用户的存储容量很大（TB～PB 级别），或者带宽有限，在线迁移时间成本较高，业务场景允许停服，则可以考虑离线的迁移方式。

具体的使用的迁移方式需根据用户的实际情况选择。可参考下面的建议：

| 带宽 | 每天上行 | 每月上行 | 迁移 100 TB 耗时 | 建议考虑线下迁移 |
|---------|---------|---------|---------|---------|
| 10 Mbps | 85 GB | 2.5 TB | 40 个月 | 数据量>1 TB |
| 100 Mbps | 0.85 GB | 25 TB | 4 个月 | 数据量>10 TB |
| 1 Gbps | 8.5 GB | 250 TB | 12 天 | 数据量>100 TB |
| 10 Gbps | 85 GB | 2.5 PB | 1.2 天 | 数据量>1 PB |

### 在线迁移
通过腾讯云提供的 COS 相关的迁移工具进行迁移，包括本地文件上云迁移工具和第三方云迁移上云工具。为真正达到不停服迁移，用户可以参考以下的迁移流程：
1. 配置好迁移工具，指定源和目标。如果是第三方云迁移至腾讯云，如 oss、七牛或者 aws 的 s3，配置项略有不同，请严格按照工具指引操作。
2. 启动迁移工具。
3. 配置 CDN 和 COS 配置。
  i. 已经迁移完的文件直接提供访问
  ii.  配置镜像回源，未迁移过来的文件通过回源的方式提供访问。主要适用于小文件
  iii. 配置重定向回源，未迁移过来的文件通过配置重定向的方式，访问到源站。（腾讯云提供的回源方式同时支持镜像回源和重定向回源）
4. 完整性校验，完成迁移。

![](//mc.qcloudimg.com/static/img/84f93468ead64f3d568f30652c892b09/image.png)

### 离线迁移	
针对大容量的 TB～PB 级别的迁移需求，腾讯云提供了离线的迁移工具 CDM。可参考如下方式操作：
1. 根据迁移容量确定迁移设备型号和所需数量并提交在线申请。
2. 收到由腾讯云寄出的专用迁移设备后，将数据拷贝至设备中。
3. 在控制台提交设备回寄申请。
4. 设备回寄之后，由腾讯云负责把数据拷贝至云端存储。
5. 验证，完成数据迁移。

![](//mc.qcloudimg.com/static/img/92b71616351aef744a8a7a60f4440998/image.png)
腾讯云提供两种离线迁移设备，用户可根据自己的实际情况自行选择。

| 设备型号 | 支持接口 | 接口数量 | 适用环境 | 总容量 | 理论速度 | 理论每天迁移 |
|---------|---------|---------|---------|---------|---------|---------|
| M30 | USB 3.0 | 1×5 Gbps | 办公区 | 30 TB | 120 MB/s | 10 TB |
| L80 | 电口以太网 | 2×10 Gbps | 机房 | 80 TB | 500 MB/s | 40 TB |
