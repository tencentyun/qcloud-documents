本节主要介绍扫码支付相关接口使用场景。

整个扫码支付场景序列图如下：
![](https://main.qcloudimg.com/raw/225c28c86443e68c97d271cf2d9dd1b8.png)

**主要步骤：**
1. 第1步收银员根据订单确定收款金额，并与顾客确定使用的第三方支付平台。
2. 第2步收银客户端根据收款金额、第三方支付平台、生成订单号以及 [商户其它信息](https://cloud.tencent.com/document/product/569/32387#.E6.8E.A5.E5.85.A5.E6.B5.81.E7.A8.8B)，调用 [扫码支付](https://cloud.tencent.com/document/product/569/37672) 接口`scan_code_pay`请求收款二维码。
3. 第3 - 5步收银客户端根据上一步的请求结果提取`code_url`。
4. 第6步在面向顾客的屏幕上将`code_url`转化成收款二维码。
5. 第7 - 8步顾客打开第三方支付 App 扫描收款二维码并支付。
6. 第9 - 12步轮询调用 [查询订单](https://cloud.tencent.com/document/product/569/37674) 接口`query_order`，直到第三方支付平台返回支付成功或支付失败。如果2分钟内没有轮询到支付结果，请收银员去云支付公众号平台确认支付结果。
7. 第13步收银客户端给收银员展示支付结果。

>!
>1. 接口调用方要保证订单号在商户下唯一。
>2. 第9 - 12步可以在生成二维码之后就开始轮询。

