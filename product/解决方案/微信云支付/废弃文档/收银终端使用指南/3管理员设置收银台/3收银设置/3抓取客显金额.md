## 配置客显抓取金额
安装包含客显功能的云支付收银台后，使用管理员帐号登录，验证密钥完成后，切换到“收银配置页面”，找到“金额识别方式”配置项，选择“客显”，并填写客显串口（即收银软件中，配置的客显串口），就可以发现屏幕左上角会出现“客显金额”小窗口。点击测试按钮，如果客显小窗口里能够正确获取金额，则表明收银台客显工作正常。此时，操作收银软件中的订单，总金额变化时，小窗口金额会跟着变化，拉起“支付小窗口”时，支付金额就是小窗口对应的金额。
客显配置

客显窗口/触屏窗口

## 客显不生效处理方法
**常见问题一**
1）如果测试客显按钮工作正常，说明收银台客显功能工作正常。确认收银台客显配置串口是否为收银软件配置的客显串口，如果不一致，则修改收银台客显串口为收银软件配置的客显串口，重试即可。如果客显串口和收银台一致，检查客显设备上是否能够正确显示总金额，如果可以，将如下“忽略亮灯信号配置”置为“是”尝试下，如果还不行，说明收银软件不支持客显功能，收银台客显功能也不能使用，请使用其他的金额识别方式。
**常见问题二**
如果出现如下“打开过滤设备失败”的错误

则关闭收银软件，然后以管理员身份打开C:\Windows\System32\cmd.exe，按照下图提示进入到云支付安装目录，执行“install_dirver.bat”即可。

正常情况下，会成功，重启云支付收银台，收银软件，重新测试下客显功能即可。
如果出现如下“拒绝访问”或者“没有权限”的错误，请使用电脑管理员登录重试上述步骤即可。

**常见问题三** - 机器没有串口处理方法
1. 安装虚拟串口工具，添加虚拟串口，重启电脑。然后配置收银软件客显串口，再配置云支付收银台客显串口，重试客显功能。（虚拟串口推荐：Virtual Serial Port Driver，搜索下载即可，下载链接：https://virtual-serial-port-driver.en.softonic.com）

## 虚拟串口获取金额
在机器没有串口的情况下，并且1.2.3节所用的抓取方式在按照文档操作后，仍然不能正常工作的情况下（如下图），才推荐使用这种方式获取客显金额。

则可以尝试使用虚拟串口的方式，使用客显抓取金额。具体操作如下：
1） 安装虚拟串口工具（虚拟串口推荐：Virtual Serial Port Driver，下载链接：https://virtual-serial-port-driver.en.softonic.com）
2）打开虚拟串口工具，然后创建一对虚拟串口，如下所示（串口名字可以自己选择）


3）将刚刚创建的虚拟串口，其中一个串口，如COM7，设置为收银软件的客显串口，


4）然后配置收银台，选择收银配置页面，选择虚拟串口，将创建的一对虚拟串口的另一个串口COM8，配置为收银软，客显串口配置为客显设备所接的物理串口，此处我的机器为COM1（注意：客显串口不能填成和之前创建的一对串口一样，如果机器没有物理串口，可以再创建一对虚拟串口，随便填新创建串口中的其中一个即可。）

5）此时，如果收银软件能够正确发送客显数据，收银台即能正确拿到客显金额。