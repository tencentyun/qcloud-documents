## 1. 准备

要开通云支付的子商户，服务商必须先在[微信支付商户平台](https://pay.weixin.qq.com)给子商户完成微信支付子商户申请。具体开通过程参考微信支付官方文档。

如果要支持支付宝支付的话，服务商还需要在支付宝那完成子商户申请。具体开通过程参考支付宝的官方文档。

## 2. 添加子商户

### 2.1 登录云支付进行添加

服务商登录[云支付](https://console.cloud.tencent.com/cpay) ，在【子商户管理(旧)】页面点击【添加子商户】。

![](https://main.qcloudimg.com/raw/7d3127db3aae3b32afe7a308c6589bb8.png)

### 2.2 填写子商户信息

#### 2.2.1 填写基本信息

参数说明：

| 参数类型 | 参数说明 | 备注 |
|---------|---------|---------|
| 云支付服务商账号 | 选择要添加子商户的服务商 | - |
| 子商户名称 | 微信支付商户平台上的商户名称 | - |
| 子商户简称 | 微信支付商户平台上的商家简称 | - |
| 子商户管理员姓名 | 子商户管理员姓名 | - |
| 子商户管理员邮箱 | 子商户管理员邮箱 | - |
| 子商户 logo | 在二维码支付的支付页面等地方展示 | - |
| 广告 URL | 单击广告图片后跳转到的页面链接 | - |
| 广告图片 | 在二维码支付的支付完成页展示 | - |
| 备注 | 子商户备注信息 | - |

![](https://main.qcloudimg.com/raw/514746871d61b4dadc467c5c2eb01ae9.png)

#### 2.2.2 填写子商户第三方支付相关信息

![](https://main.qcloudimg.com/raw/6ea9ee2bc9d33c5e0f1d4e0973cea42b.png)

#### 2.2.3 保存认证密钥和签名私钥

**一定要妥善保管子商户的认证密钥和签名私钥**；如果不慎丢失，后续将只能通过重置操作来找回；而重置操作会废弃之前的认证密钥或签名私钥，可能影响支付。

页面显示字段说明：

| 字段名   | 字段说明 |
|---------|---------|
| 认证类型 | 认证算法 |
| 认证密钥 | 用于交易请求时对参数生成认证码 |
| 签名类型 | 签名算法 |
| 验签公钥 | 用户撤单和退款时服务端验签 |
| 签名私钥 | 用于撤单和退款时客户端签名 |

![](https://main.qcloudimg.com/raw/5b40fe53bcd35bfb153784f7fc020e2f.png)

#### 2.2.4 可能出现的错误

点击【添加】按钮后，页面可能报以下错误：

- 页面显示以下错误提示，则表示2.2.2节填写的子商户号有误；需要填写正确的微信支付子商户号

![](https://main.qcloudimg.com/raw/12d26360914a99cecfdf99c8e7311d30.png)

- 页面显示以下错误提示，则表示之前创建服务商时，填写的服务商信息有错误；需要改好服务商信息后再创建子商户

![](https://main.qcloudimg.com/raw/11c3b1cfbc9e95a714ae0657678ddfca.png)

### 2.3 激活子商户的支付宝功能

> 注：这一步是可选操作；如果子商户不需要支付宝付款功能，则跳过这一步即可。

如果要为子商户开通支付宝付款的功能，需要子商户用他的支付宝APP进行扫码授权。具体操作如下：

#### 2.3.1 查看子商户的支付宝授权码

在子商户列表中点击要操作的子商户，然后会跳到子商户详细页面：

![](https://main.qcloudimg.com/raw/107ff914bad7a9f9f96bc056f78c1155.png)

在详情页面中可以看到支付宝服授权二维码:

![](https://main.qcloudimg.com/raw/dbd404cfaf8a0ee172f4dee3559a184d.png)

#### 2.3.2 子商户扫码授权

让子商户（需要有支付宝子商户管理权限）使用支付宝APP进行扫码授权。 授权成功显示如下:

![](https://mc.qcloudimg.com/static/img/ca933b53912055a67c3bb52019df0b0c/image.png)

> 注意：授权成功后，请等一分钟再测试支付

#### 2.3.3 可能出现的错误

- 扫码后出现如下错误页面，可能有两种情况：
  - 如果您想绑定新的支付宝账户，则需要先删除原来的授权信息(删除方法：编辑>删除“支付宝用户 ID”>保存)，然后重新授权；
  - 如果您就想使用原有的支付宝账户进行授权，请确定，您使用了正确的商户支付宝。如果确认完成之后依然不对。请参见第 1 步，删除原有授权之后重新授权。
![](https://mc.qcloudimg.com/static/img/fa17cd2c7352450156d65d3363da072c/image.png)

### 3. 激活第一个子商户管理员

### 3.1 获取激活二维码

添加完子商户后，在子商户列表中找到刚添加的子商户；点击【二维码】按钮，可得到子商户管理员身份激活二维码和子商户管理二维码:

![](https://main.qcloudimg.com/raw/3e1af1a098715f2d6a917ffbc2f34fa0.png)

![](https://main.qcloudimg.com/raw/ff8e30c157de353116cf3cbe3bcb2b0e.png)

### 3.2 激活管理员

服务商将激活二维码发送给商户，让商户扫激活管理员二维码来激活管理员身份。


### 3.3 可能出现的错误

扫子商户管理员激活码的时候，可能会出现以下错误页面：

- 页面显示如下错误提示，表明创建服务商时填写的 AppID 对应的微信公众号没有通过认证，请到微信公众平台认证。
![](https://mc.qcloudimg.com/static/img/610a55beb2c1add93b3d0fb827ba38e6/image.jpg)

- 页面显示如下错误提示，表明服务商的微信公众号未将网页服务权限授权给腾讯云支付，请完成授权后，再扫码激活管理员身份。
![](https://mc.qcloudimg.com/static/img/65505957a2cfbc0bade6b3afba1e7115/image.png)

- 页面显示如下错误提示，直接忽略即可，是微信自带浏览器兼容性问题，实际已经激活成功
![](https://mc.qcloudimg.com/static/img/4c8b31a331bb6c26c68e630fa9b4e1f6/image.png)

## 4. 进入手机端的商户管理后台

激活管理员身份一分钟后，子商户管理员就能进入云支付的商户管理后台。

![](https://main.qcloudimg.com/raw/32df0dd71d97b2a9b97078f6659754cc.png)

![](https://main.qcloudimg.com/raw/f94a4592343093a362f3db81d968c447.png)

## 5. 添加新的子商户管理员

### 5.1 进入添加子商户管理员界面

![](https://main.qcloudimg.com/raw/3cdbc5eb69ede3ed5a67692d3fa39ff4.png)

![](https://main.qcloudimg.com/raw/87b12e8cad195977b625e6838aae0b66.png)

### 5.2 输入子商户管理员信息

![](https://main.qcloudimg.com/raw/27bc389e13a189ebb182a1b8f5398c0d.png)

> 这里要特别注意**退款权限**：只有本身具有退款权限的管理员，在创建其他管理员时，才能给他们赋予退款权限！
> 在删除子商户管理员时，或者子商户管理员交接的时候，一定要确认有其他的管理员有退款权限，以免删除管理员之后，没有任何管理员有退款权限，导致退款权限“丢失”！

### 5.3 激活子商户管理员

点击弹出子商户管理员激活码，然后用微信扫码激活管理员：

![](https://main.qcloudimg.com/raw/e1bdb2b98c903a1de1949959d471bd82.png)

![](https://main.qcloudimg.com/raw/1f407eb47fa864096be61943d067943a.png)

## 6. 编辑和删除管理员

单击管理员列表页面底部的【编辑管理员】进行管理员的编辑和删除操作

>!云支付不支持管理员删除自己；如果需要将自己从管理员中删除，则需执行以下操作：
> 1. 添加另外一个人为管理员并授权其 “管理员添加和删除权限”。
> 2. 让新添加的管理员将您从管理员中删除。