在插件模式下，为了方便收银人员获取收银软件的金额，减去手动输入的麻烦，设置了图像识别获取金额、窗口获取金额、客显获取金额。客显获取金额请参考 [客显获取金额](https://cloud.tencent.com/document/product/569/39142)。

## 图像识别获取金额
![](https://main.qcloudimg.com/raw/34089dfca65db39c1163dcc6288eb095.png)
1. 选择**金额获取设置 > 金额识别方式**中的“图像识别1”或“图像识别4”，然后选择**抓取金额位置 > 确定金额位置**，选中金额区域。如下图，金额位置需要选择准确，不要截取其他无关的东西。
![](https://main.qcloudimg.com/raw/af85c43d1f77ab377f9271cd1874fd3f.png)
2. 通过扫码/快捷键拉起支付窗口测试金额是否正确，多测试数据，尽量涵盖0 - 9和小数点逗号等。

>!图像金额获取不保证能够百分之百正确，再加上可能的误操作，所以请服务商一定要交代收银员人工确认金额，否则使用金额获取造成资金损失的，云支付概不负责。

## 窗口获取金额
![](https://main.qcloudimg.com/raw/95a8e0dbd3dd4a0424d305c5859531f4.png)
1. 选择**金额获取设置 > 金额识别方式**中的“窗口获取”。截取想要获取的金额位置步骤同 [图像识别获取金额](#.E5.9B.BE.E5.83.8F.E8.AF.86.E5.88.AB.E8.8E.B7.E5.8F.96.E9.87.91.E9.A2.9D)，此时弹框提示获取的金额是否正确，如果正确单击**确定**，不正确单击**取消**。按照窗口提示操作，金额显示正确时更换金额多试几下。同时重启收银软件，重新拉起支付窗口，测试是否正确。
![](https://main.qcloudimg.com/raw/8602584b5e2d9f8fd00601f0e4d2546c.png)
2. 通过扫码/快捷键拉起支付窗口测试金额是否正确，多测试数据，尽量涵盖0 - 9和小数点逗号等。

## 其他字段参考
- 扫码抓取金额：扫付款码拉起窗口是否抓取金额的选项。
- 快捷键抓取金额：通过快捷键是否抓取金额的选项。
- 使用相同的抓取金额位置：扫码和快捷键是否使用同一个抓取金额位置，相同的话只需要截取一次即可。如果不同，需要扫码和快捷键分别截取金额位置。
- 检查抓取金额窗口正确性：为了减少收银员误操作，开启该功能，然后重新截取金额位置。在进行扫码和快捷键获取金额的时候，如果支付窗口显示的时候截取的不是以前截取金额位置的窗口，则会给出提示报错，这样避免了识别错误窗口造成的支付错误。

**检查抓取金额窗口正确性，示例如下：**
1. 首先开启该功能，重新截取金额位置。
![](https://main.qcloudimg.com/raw/8602584b5e2d9f8fd00601f0e4d2546c.png)
2. 在该窗口获取拉起支付窗口，金额识别正确没有提示异常。
![](https://main.qcloudimg.com/raw/40bd4b0c3f2857eb4ee0f285fdab4ca9.png)
3. 隐藏收款窗口，重新拉起支付窗口，就会给出错误提示。
![](https://main.qcloudimg.com/raw/d61509a22dcba6cd0953caaec24ebdf7.png)
4. 检查窗口正确性，受收银软件的影响很大，使用该功能需要充分测试。
 - 多次支付测试判断对应支付窗口检查金额正确性是否生效。
 - 关闭收银软件进行重启，再次支付测试。
 - 测试在收银软件其他窗口是否报错。
 - 重启电脑进行测试。

 如果以上几种情况中存在一种未通过，请关闭该功能。**软件升级需要重新设置和测试。**
