> !本篇文档适用于云开发新版控制台。

## 操作步骤

### 步骤1：选择环境

登录 [云托管独立控制台](https://console.cloud.tencent.com/tcbr)，在服务概览页顶部选择对应的环境。单击**创建服务**，填写表单并准备好需要部署的服务代码。表单字段信息详解，请参见 [服务配置](https://cloud.tencent.com/document/product/1243/77197)。

>!**已经创建好的服务，不支持更换所在环境。**

### 步骤2：开始部署

查看部署进度及日志，等待部署完成。首次部署成功后，会自动全量发布。

### 可选步骤：取消部署
取消部署无法立刻终止底层的部署任务，但会拦截本次版本的最终上线，同时不阻塞立刻发起下一次更新服务。当前创建中的服务不会因为取消部署而被删除。

### 步骤3：验证服务

云托管为每个服务分配了一个默认公网域名，可用于测试和验证服务。**默认域名有性能限制，请勿用于线上生产，不保证 SLA 及相关补偿。**

在服务概览页中的服务卡片/服务详情页的基本信息中，单击默认域名，即可访问服务并进行测试。也可以使用 POSTMAN 等工具进行接口测试。

### 步骤4：设置日志服务

因为容器无法持久化存储文件，且实例因为弹性伸缩处在不断变化之中，登录具体容器实例去查看日志极为繁琐不便。云托管采取的是将日志通过 Loglistener 组件采集出来，投递到腾讯云日志服务 CLS 中持久保存并查看。

在**服务详情页** > **服务设置** > **运行配置** > **日志采集**类型中，修改为**自定义**，然后继续填写日志服务所需的日志集、日志主题、日志格式，保存后将触发重新部署，成功后生效。日志采集类型为**无**则将不采集日志。

### 步骤5：绑定自定义域名

服务测试完毕需要上线生产前，前往**服务详情页** > **服务设置** > **访问管理**中，单击**添加域名**。
- 域名：目标自定义网域名称（Domain Name），由一串用点分隔的字符组成。域名在云托管内用于访问服务，一个域名只能绑定一个服务，**域名一定需要完成域名备案，否则无法访问；**云托管绑定域名也支持在其他云服务厂商中注册的域名。
- HTTPS：访问方式目前支持 HTTP、HTTPS 2种方式，默认使用 HTTPS。
- 证书：HTTPS 访问需要上传证书，可前往购买证书的平台下载证书签名及私钥，证书文件分证书和私钥，一般建议传 `nginx` 等类型的文本证书，不支持二进制可执行证书。

单击**确定**，即可将自定义域名绑定到目标服务上，并在列表中生成一条绑定信息，提供**编辑**及**解绑**能力。

绑定自定义域名后，域名列表中会返回 CNAME 信息;可前往 DNS 服务提供商（例如 [DNSPod](https://dnspod.cloud.tencent.com/)）添加 CNAME 记录，将域名指向云托管返回的服务 CNAME 域名；如在 DNSPod 中配置，可查看 [CNAME 配置指引](https://cloud.tencent.com/document/product/302/3450)。

>?证书过期更新，直接**编辑**重新上传证书，不需要删除重新配置。

### 步骤6：配置监控 Dashboard 及告警（可选）

在**服务详情页** > **监控**中，云托管提供了一定的基础监控视图。如需更高阶的监控功能，请前往 [腾讯云可观测平台控制台 Dashboard 列表](https://console.cloud.tencent.com/monitor/dashboard2/dashboards)。

如需根据某个监控指标配置告警，请前往 [腾讯云可观测平台控制台告警配置](https://console.cloud.tencent.com/monitor/alarm2/policy)。

