
> !本篇文档适用于云开发新版控制台。

## 代码更新操作步骤

### 步骤1：进入服务详情页面

登录 [云托管独立控制台](https://console.cloud.tencent.com/tcbr)，单击需要更新的服务，进入服务详情页。

### 步骤2：开始更新

> !同一个服务无法有多个更新操作并行（代码更新/配置更新）。

单击**更新服务**，填写表单。支持全量更新/灰度发布两种更新策略。更多字段详细信息，请参见 [服务设置](https://cloud.tencent.com/document/product/1243/77197)。

- 全量更新：部署成功后，立刻将全部流量切换到新版本。半小时后，旧版本因无流量访问而下线。此过程中用户感知是平滑的，服务不会中断。
- 灰度发布：部署成功后，回到服务详情页-概览，在服务部署卡片或部署记录中，单击**配置流量**，手动调节新旧版本之间的流量百分比，将用户请求按比例随机分配至新旧版本。此配置流量过程可以反复多次，过程中用户感知是平滑的，服务不会中断。

>?通过监控和日志观测新版本的运行情况，确认新版本一切就绪，在**配置流量**中选择100%，结束灰度过程，半小时后，旧版本因无流量访问而下线。如果新版本有问题，单击**放弃灰度**，新版本下线。

### 步骤3：验证服务

云托管为每个服务分配了一个默认公网域名，可用于测试和验证服务。**默认域名有性能限制，请勿用于线上生产，不保证 SLA 及相关补偿。**

在服务概览页中的服务卡片/服务详情页的基本信息中，单击默认域名，即可访问服务并进行测试。也可以使用 POSTMAN 等工具进行接口测试。

### 可选步骤：取消部署
取消部署无法立刻终止底层的部署任务，但会拦截本次版本的最终上线，同时不阻塞立刻发起下一次更新服务。

## 配置更新操作步骤

### 步骤1：进入服务详情页面

登录 [云托管独立控制台](https://console.cloud.tencent.com/tcbr)，单击需要更新的服务，进入服务详情页。

### 步骤2：编辑服务设置

> !服务正在更新中时，无法编辑配置。

进入服务设置页面，编辑代码配置/运行配置/自动伸缩配置。保存后会用新的配置触发一次部署，部署成功后，立刻将全部流量切换到新版本。半小时后，旧版本因无流量访问而下线。此过程中用户感知是平滑的，服务不会中断。

### 步骤3：验证服务

云托管为每个服务分配了一个默认公网域名，可用于测试和验证服务。**默认域名有性能限制，请勿用于线上生产，不保证 SLA 及相关补偿。**

在服务概览页中的服务卡片/服务详情页的基本信息中，单击默认域名，即可访问服务并进行测试。也可以使用 POSTMAN 等工具进行接口测试。

### 可选步骤：取消部署
取消部署无法立刻终止底层的部署任务，但会拦截本次版本的最终上线，同时不阻塞立刻发起下一次更新服务。
