## 背景介绍
- LoRaWAN 联盟在 lorawan_regional_parameters_v1.x 版本的 CN470【470Mhz，510Mhz】40Mhz频宽中，定义了上行96个信道，下行48个信道。
- LoRaWAN 联盟在 lorawan_regional_parameters_v2.x 版本的 CN470【470Mhz，510Mhz】40Mhz频宽中，定义了26M TypeA 和 TypeB、20M TypeA 和 TypeB 共4种频谱计划。

|    频谱计划     | 上行信道数 | 下行信道数 | 总频宽 | 上行频点对应模式 |
| :-------------: | :--------: | :--------: | :----: | :--------------: |
|      RP1.0      |     96     |     48     |  40M   |       异频       |
| RP2.0 20M TypeA |     64     |     64     |  20M   |       异频       |
| RP2.0 20M TypeB |     64     |     64     |  20M   |       同频       |
| RP2.0 26M TypeA |     48     |     24     |  26M   |       异频       |
| RP2.0 26M TypeB |     48     |     24     |  26M   |       异频       |

## 自定义功能说明
- 自定义频点功能兼容 RP1.0、RP2.0 各个版本的频谱计划，同时也可以支持用户自定义频谱计划，已满足不同环境下的要求。
- 自定义频点功能支持 MACCommand 中大部分功能，除了 linkadr 中 MASK 参数，设备回复 linkadrans 应作出相应的策略。

| 功能           | 说明                                                    |
| -------------- | ------------------------------------------------------- |
| 单信道频谱要求 | 网关工作在单个信道                                  |
| 多信道频谱要求 | 网关工作在多个信道，支持2到64个信道，自由选择可用信道 |
| 全双工工作模式 | 网关上下行发送和接收数据同时工作                    |
| 上下同频       | 上下行共用同一组频点                                  |
| 上下异频       | 上下行使用不同组频点                                  |

## 操作步骤
### 新建频点计划
1. 登录 [物联网开发平台控制台](https://console.cloud.tencent.com/iotexplorer)，单击某一个已新建产品的项目。
2. 进入项目列表页，选择左侧菜单【网络管理】>【LoRa 网关管理】，在页面上方选择【用户自定义频点】后，单击【添加频点】，进入“添加用户自定义频点”页面。
 - 频点配置名称：支持英文、数字、下划线的组合，最多不超过48个字符。
 - 数据信道配置：分别填入上行信道，下行 RX1 信道，下行 RX2 信道，单位Hz，仅支持数字，范围为470000000-510000000。
 - 入网信道配置：分别填入上行信道，下行 RX1 信道，下行 RX2 信道，单位Hz，仅支持数字，范围为470000000-510000000，若未配置入网信道，则按照数据信道入网。

**示例**
以双信道频点计划为例，配置两个信道，同频工作模式的频点计划：
![双通道上下同频频点计划](https://main.qcloudimg.com/raw/35dfdcc22d58d765670e1c08dd975b43.png)  

### 网关关联频点计划
1. 登录 [物联网开发平台控制台](https://console.cloud.tencent.com/iotexplorer)，单击某一个已新建产品的项目。
2. 进入项目列表页，选择左侧菜单【网络管理】>【LoRa 网关管理】，在页面上方选择【用户网关】后，单击【添加网关】，进入新建或者编辑网关界面。
3. 在频点信息处选择用户自定义频点，关联与网关对应的频点计划。
>?缺省用户频点为 RP1.0 频点计划，可选支持RP2.0 20M TypeA & TypeB。

**示例**
以网关关联双芯片频点计划为例：
![网关关联频点计划](https://main.qcloudimg.com/raw/928c7e46248f90603292eb5baed6dcc7.png) 

### 设备关联频点计划
1. 登录 [物联网开发平台控制台](https://console.cloud.tencent.com/iotexplorer)，单击某一个已新建产品的项目。
2. 进入项目列表页，选择左侧菜单【产品开发】，选择需要打开的产品，在”数据模板“页面下方，单击【下一步】进入”设备开发“页面。
3. 在 LoRaWAN 参数配置界面中，选择用户自定义频点，关联与设备对应的频点计划。
>?同一个网络中，多个网关硬件使用相同的频点配置，若设备或者网关未关联对应的频点计划，则上行数据可以正常接收，下行数据发送只会选择关联频点计划的网关。

![设备关联频点计划](https://main.qcloudimg.com/raw/1b43a22ac93c340c2bff1a6b88c707e4.png) 
