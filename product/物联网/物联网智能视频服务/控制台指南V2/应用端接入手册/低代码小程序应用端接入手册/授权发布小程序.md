# 授权部署发布小程序
## 1. 注册登录
登录 [腾讯云官网](https://cloud.tencent.com/)。如果您之前未注册腾讯云账号，请参见 [账号注册教程](https://cloud.tencent.com/document/product/378/17985) 完成注册。
## 2. 创建产品和设备
登录 [物联网智能视频服务（消费版）](https://console.cloud.tencent.com/iot-video) 控制台（以下简称 Video 控制台），创建产品及设备，产品为一类真实设备的集合，创建的设备则对应真实设备。
![](https://qcloudimg.tencent-cloud.cn/raw/ab0d83f7cea0f05babb1b7c70f113e6b.png)
![](https://qcloudimg.tencent-cloud.cn/raw/d730402a113df2e3f9f9a855ece2eff0.png)

## 3. 创建应用
1. 点击 Video 控制台的**应用开发**，进入应用列表页面。
![](https://qcloudimg.tencent-cloud.cn/raw/c3e8eecf04305805d59c1db47b04d35a.png)
2. 关联在步骤2中创建的产品。**如不关联，则无法在小程序上成功手动添加设备**。
![](https://qcloudimg.tencent-cloud.cn/raw/d13349323ad550c19b3b75d223708a8b.png)

## 4. 授权小程序
点击小程序应用右侧的**去授权**，则可弹窗显示授权窗口，小程序管理员使用手机微信扫码后，选择授予权限给 IoT Video。支持将注册小程序重复授权和授权给其他应用，但仅对最新授权的应用生效。
![](https://qcloudimg.tencent-cloud.cn/raw/8dc65e1d4c0eabc04c6a6b6e105b0077.png)
![](https://qcloudimg.tencent-cloud.cn/raw/ccce062b3f03b962c174817ff3be766e.png)

## 5. 部署发布小程序
待授权完毕后，可单击**部署发布**，完成部署发布小程序

### 5.1 小程序配置
![](https://qcloudimg.tencent-cloud.cn/raw/109bf86ce5abcac1705199a90d96e3d7.png)
- 上方显示支持的小程序最新版本
- 基础配置
    - **家庭位置应用 key**：填写**准备工作**第4步**创建地图选点应用**时，获取得到的 Key 值。
- 强提醒消息配置
    - **产品品类**：目前支持摄像头、门锁，共2种品类，支持多选。
    - **默认产品 ID**：填写在第2步中，指定品类下已创建的产品 ID。
    - **model_id**：填写在小程序管理后台添加的指定品类的 model_id。
    - **消息模板**：填写小程序管理后台订阅的**消息模板 id**，注意检查是否填写正确，若填写错误，则小程序接收不到微信推送的强提醒消息。
- 售后与反馈
    - **售后电话（选填）**：配置在小程序售后反馈的电话，不填写则不会再小程序上显示相关内容。
    - **问题反馈指引（选填）**：配置问题反馈的文案内容。
    - **App下载二维码（选填）**：本地上传二维码图片，建议宽度不超过150px。
- 小程序使用说明配置
    - 小程序使用说明书（选填）：本地上传说明书的图片，建议宽度不超过370px。
- 产品使用说明配置（选填）：
    - 单击下方**添加产品使用说明**后，输入硬件产品的名称，以及上传对应的产品使用说明书，支持添加多个。

### 5.2 小程序 UI 配置
- **小程序主题配色选择**：显示小程序默认的配色和预览效果，支持对主色和配色进行修改和重置
- **首页底部图片**：支持替换首页底部的图片，可按照建议本地上传。
- **门锁顶部图片**：支持替换门锁设备页顶部的图片，可按照建议本地上传。
![](https://qcloudimg.tencent-cloud.cn/raw/7f3370ce98a1ddd659bcf39443c997dc.png)

### 5.3 生成体验小程序
1. 单击小程序配置页下方的**下一步：生成体验小程序**可跳到对应页面，如下：
![](https://qcloudimg.tencent-cloud.cn/raw/9b02242ee1db4df933b6db40b44b85f2.png)

2. 单击**立即构建**后，3分钟内生成体验二维码，通过手机扫描二维码进入体验版小程序进行功能体验并与设备端开启功能调试。在单击**取消部署发布**后，则可回到小程序配置步骤，进行重新的配置步骤。
![](https://qcloudimg.tencent-cloud.cn/raw/ddf65c83aa575c75d71395946e31de79.png)

### 5.4 微信审核
单击**下一步：微信审核**，则可进入微信审核页面，在单击**立即审核**后，则可等待微信审核，时间为1天 - 7天。期间可关闭弹窗，并可再次单击**部署发布**按钮进入弹窗查看审核结果，同时审核结果也会在审核完毕后第一时间以微信服务通知发送给小程序管理员。
![](https://qcloudimg.tencent-cloud.cn/raw/c459fca9ff77966af41728e01c4c2d29.png)

### 5.5 上线发布
待微信审核通过后，可单击**下一步：上线发布**进入上线发布页面。单击**发布**后，即可正式发布小程序，并支持微信中搜索发布的正式版小程序并开始使用。
