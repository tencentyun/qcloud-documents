## 操作场景
物联设备接入云平台前，需要在物联网通信控制台创建虚拟产品和设备，并与现实设备进行一一对应。物联网通信平台会为设备分配唯一接入认证标识。本文档指导您如何操作接入平台前的准备工作。


## 操作步骤
### 创建产品
1. 登录 [物联网通信控制台](https://console.cloud.tencent.com/iotcloud)，单击左侧菜单栏【[产品列表](https://console.cloud.tencent.com/iothub)】。
2. 进入产品列表页面，单击【创建新产品】，按照实际情况填写以下信息。
 - **节点类型**：
    - 设备：支持TCP/IP协议栈，可直连到物联网通信平台的设备；或仅支持局域网连接，需要通过网关代理上网的子设备。
    - 网关：用于代理子设备与 IoT Hub 进行数据交互。
 - **产品类型**：
    - 普通产品：使用 2G/3G/4G/Wi-Fi 无线通信或有线通信方式，用户可以二次开发通信模组创建。
    - LoRa 产品：使用 LoRa 无线通信方式，不能直接连 Internet，使用标准 LoRaWan 协议，需通过网关来代发设备的消息。
    - CLAA 产品：使用 LoRa 无线通信方式，不能直接连 Internet，使用 CLAA 协议（终端内置 CLAA 模组），需通过网关来代发设备的消息。
 - **产品名称**：1 - 32位中文、英文、数字、下划线的组合，可任意修改。
 - **认证方式**：
    - 证书认证：在创建设备时，平台将为设备生成一个证书文件和一个私钥文件，用于和物联云通信之前设备的认证。
    - 密钥认证：在创建设备时，可以使用自定义的 PSK 或是平台为设备随机生成的 PSK。
 - **数据格式**：JSON 格式支持根据数据进行规则匹配和内容提取，自定义格式不做任何数据解析。
 - **产品描述**：0 - 500个字符，可任意选择。
 ![](https://main.qcloudimg.com/raw/e302b3aa4f554902d62c59b67ddf3336.png)
3. 单击【确定】，即可生成产品。（产品相当于某一类设备的集合，用户通过产品管理其下的所有设备）
4. 创建完产品后，可开启产品的动态注册功能，则会生成产品密钥（ProductSecret）。
![](https://main.qcloudimg.com/raw/e2d0363f8c83ddcd97dfc2a9952a8aea.png)
>?同一产品下的所有设备在生产过程可以烧录统一的产品信息，即产品 ID（ProductId）、产品密钥（ProductSecret）。设备出厂后，通过动态注册的方式获取设备身份信息并保存，然后用申请到的三元组或者四元组信息进行设备认证。若开启动态注册的同时选择自动创建设备，则设备名可自动生成，但必须保证同一产品 ID（ProductId）下的设备名不重复，一般取 IMEI 或者 MAC 地址。动态注册功能详情请参见 [设备接入](https://cloud.tencent.com/document/product/634/35270)。


### 删除产品
1. 完成新产品创建后，您可以在【产品设置】页面，查看产品的基本信息。
2. 当您无需该产品时，您可以在【产品列表】页面，单击右侧的【删除】即可。


### 创建设备
创建完产品后，可以为该产品添加设备。添加设备分为单个添加与批量添加两种方式：

#### 单个添加
1. 单击相应产品的【设备列表】标签。
2. 单击【添加新设备】。并填写设备相关信息。
  - 设备名称：支持英文、数字、下划线、"-"的组合，最多不超过48个字符。
  - 设备备注：支持中文、英文、数字、下划线、"-"的组合，最多不超过16个字符。
    ![](https://main.qcloudimg.com/raw/00afe7641c7d693cf3bf8025124f546e.png)

>!
- 设备名称新建后无法修改，请谨慎填写。
- 同一产品下设备名称不能重复。
- 当产品为密钥认证方式时，才会出现密钥选项；自定义密钥必须是 Base64 编码的字符串，可以在输入框中输入普通字符串后单击【转换成 Base64】按钮转换为 Base64 编码的字符串。
- 不同类型的产品新建设备时需要填写的参数有部分差异

如果选择的产品认证方式是证书认证，创建设备后设备私钥是设备用于连接物联网通信后台的唯一标识，后台不存储该设备私钥，请用户妥善保管，切勿泄漏。
![创建设备提示](https://main.qcloudimg.com/raw/bd17f818ebf4c3910324d3594eb9438d.png)

#### 批量添加
1. 在【设备列表】标签中单击【批量添加】
2. 批量添加的添加方式分为【自动生成】与【批量上传】
    - 自动生成：设置需生成的设备数量之后控制台会生成该数量的设备，设备的名称为18位大小写字母与数字的组合。
![](https://main.qcloudimg.com/raw/b136ebbbca0b080b831cd32c6b827b2d.png)
    - 批量上传：按照 CSV 模板格式上传设备名称的 CSV 文件后，云端会按照 CSV 文件中的设备名生成设备。
![](https://main.qcloudimg.com/raw/347ee929ec450821f250d29db5c055a8.png)
3. 添加成功之后可在【添加结果】页面查看执行状态，下载设备证书/密钥文件。或在【批次管理】中查看和下载相应的信息与文件。

>?
- 如果选择的产品认证方式是密钥认证，则【添加结果】与【批次管理】页面提供下载的文件为 CSV 文件，其中包含设备名，设备密钥，错误码，错误信息这些信息。
- 如果选择的产品认证方式是证书认证，则【添加结果】与【批次管理】页面提供下载的文件为 ZIP 压缩包文件，其中包含与设备数相等个数的文件夹和一个 CSV 文件。文件夹的名称为设备名称，内容为证书和私钥文件。CSV 文件中包含了设备名，错误码，错误信息以及设备证书和私钥的相对路径。








### 设备详情
**认证方式为证书认证**
设备详情包含单个设备的所有管理内容：设备名称、设备备注、在线状态、版本信息、设备证书（单击可下载）、设备私钥（单击可下载）、设备日志配置等信息。

**认证方式为密钥认证**
设备详情包含单个设备的所有管理内容：设备名称、设备备注、在线状态、版本信息、设备密钥 （单击显示查看）、设备日志配置等信息。

