### 设备端 SDK 占用的资源情况如何？
- MQTT + 证书 = 20K(Stack) + 81K(Heap) = 101K
- MQTT + PSK(TLS) = 20K(Stack) + 78K(Heap) = 98K
- MQTT + PSK(NOTLS) = 20K(Stack) + 72K(Heap) = 92K
- COAP + 证书= 20K(Stack) + 81K(Heap) = 101K
- COAP + PSK(TLS) = 20K(Stack) + 77K(Heap) = 97K
-  HTTPS = 24K(Stack) + 81K(Heap) = 105K

### 我的设备 RAM 比较低，有什么降低 SDK 运行内存的办法吗？
主要有两点优化建议：一个是我们在分析 SDK 内存使用情况过程中发现 getaddrinfo 系统函数分配了 64K 的 Heap 内存，这个内存分配用于 IPV6。如果 SDK 只用 IPV4，那么考虑去掉 getaddrinfo 中这个内存分配操作，依照连接方式的不同可以节省约 20～64K 运行 RAM。

另外一个建议点是使用 MQTT + PSK(NOTLS) 的方式，没有 TLS 数据加密情况下可以节省约 6K RAM。但这会牺牲部分数据安全，数据有被盗取和篡改的风险，谨慎修改。

### 设备接入对软件环境的要求是什么？
运行设备 SDK 对软件环境主要有两点要求：支持多任务切换操作系统以及支持 TCP / IP 协议栈。

TLS 连接失败一般有几类原因：
1、检查使用的证书和密钥是否正确。常见的错误是密钥多输了空格，或者证书文件名与代码中书写的文件名不一致等细微错误。
2、证书类连接，因为本地没有预先对时，导致 TLS 连接失败。需要本地安装 ntp client 对时软件。

### 设备连接超时如何处理？
先确认本地网络是否能够连接到物联网通信，下面是常用的一些工具：
- ping iotcloud-mqtt.gz.tencentdevices.com 检测主机是否可达情况；
- telnet iotcloud-mqtt.gz.tencentdevices.com 443检测端口连接情况；
- 如果执行上面命令的结果都是正常的，那可能还需要检查本地防火墙策略。
- 如果确认本地网络是OK的，还会出现超时情况，那么可能是默认的连接超时设置可能偏小，可以尝试修改src/sdk-impl/qcloud_iot_export.h文件中的宏定义的大小。
- #define QCLOUD_IOT_MQTT_COMMAND_TIMEOUT   (5 * 1000)
- #define QCLOUD_IOT_TLS_HANDSHAKE_TIMEOUT    (5 * 1000)

### 设备断网后没有自动重连怎么办？
如果是使用的物联网通信提供的设备 SDK，那么是有设备断网重连的逻辑。如果是使用的自己开发的 SDK，那么需要自行加上重连逻辑。

### 设备为什么一直上下线？
物联接入层有设备互踢的逻辑，如果是用同一个设备 ID 在不同地方登录，会导致其中一方被另一方踢下线。因此发现设备一直上下线是需要确认是否有不同的人或者多线程在使用同一个设备 ID 执行登录操作。

### 设备发送消息失败是什么原因？
设备发送消息失败一般有几类原因：
1、发送消息的 Topic 没有发布权限。可以去控制台查看设备的权限列表，确认设备是否有发布权限。

>特别说明：物联网 Demo 中的 data Topic 也是要去控制台添加发布权限才能订阅成功的。

2、Topic 书写有误。确认代码中书写的 Topic 没有包含多余字符或者漏写了字符，比如多输入了空格或者‘/’，或者某个单词少写了字母等。
3、连接断开。物联接入层有心跳机制，如果设备在指定时间内没有心跳包上来，就会导致设备连接断开。




