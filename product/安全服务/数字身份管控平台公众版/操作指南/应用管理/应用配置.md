## 操作场景
数字身份管控平台（公众版）支持管理员按照业务需求对创建的应用进行配置，包括基本信息配置（图标、名称等）、参数配置（重定向地址、登出地址等）、流程配置（注册、登录、找回密码、协议管理等）。


## 操作步骤
1. 登录 [数字身份管控平台（公众版）控制台](https://console.cloud.tencent.com/ciam)，在左侧导航栏选择**应用管理**，进入应用管理页面。
2. 在应用管理页面，单击操作列的**配置**，进入应用配置的基本信息页面。
![](https://qcloudimg.tencent-cloud.cn/raw/6f459faed85315fcfbab45c200286f4d.png)

### 基本信息
在基本信息页面，可以对应用图标、名称、类型、描述，所属行业进行变更，变更后单击**确定**保存。
![](https://main.qcloudimg.com/raw/1331f93795f3a5c237aec845ab6a1265.png)

### 参数配置
1. 在应用配置页面，单击**参数配置**，切换到应用配置的参数配置页面。
2. 在参数配置页面，根据要求填写相关信息后，单击**确定**保存。
![](https://main.qcloudimg.com/raw/70cec49c80d36b144b2211729da97fac.png)

参数说明：

| 参数                 | 描述                                                         | 示例值                                    |
| -------------------- | ------------------------------------------------------------ | ----------------------------------------- |
| Redirect  URI        | 填写以 http 或 https 开头的完整 URL 地址，用于接收 OAuth 协议的 authorization code，用户允许授权后，将会携带 code 重定向到该地址 | [https://www.qq.com](https://www.qq.com/) |
| Logout Redirect  URI | 填写以 http 或 https 开头的完整 URL 地址，为用户登出后的跳转地址 | https://www.qq.com/logout                 |
| access_token 有效期  | access_token 有效期，默认600秒                               | 600                                       |
| refresh_toke         | refresh token 是否启用                                       | -                                         |
| reflesh_token 有效期 | reflesh_token 有效期，需要刷新 token 时指定，默认为86400秒   | 86400                                     |



### 流程配置
流程配置主要包括注册流程、登录流程、MFA 流程、忘记用户名流程、忘记密码流程、协议管理的配置。通过配置不同的参数，自定义应用对注册、登录等流程的不同需求。

对于 Web、单页、移动 App 类型的应用，支持对注册流程、登录流程、MFA 流程、忘记用户名流程、忘记密码流程、协议管理流程的配置。对于小程序应用，仅需要配置注册/登录流程。

####  Web、单页和移动 App 应用配置
1. 在应用配置页面，单击**参数配置**，切换到流程配置的参数配置页面。
2. 在参数配置页面，包含注册流程、登录流程、MFA 流程、忘记用户名流程、忘记密码流程和协议管理等六大模块。
 - **注册流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
 ![](https://main.qcloudimg.com/raw/5dfa1428a517f0dcf495ed7578ee96b1.png)
**参数说明：**
    - 是否启用：默认启用，关闭后用户无法注册。
    - 认证属性：注册时需要用户填写，可以用作唯一用户标识。
    - 普通属性：注册时需要用户填写，不可用作唯一用户标识。
    - 所属用户组：用户注册成功后的归属分组。
    - 自动登录：勾选自动登录，用户注册成功后自动登录应用，否则跳转登录页，让用户手动登录。
 - **登录流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
![](https://main.qcloudimg.com/raw/8b9e32ce93c8b67eb6062588412baecd.png)
**参数说明：**
    - 是否启用：默认启用，关闭后用户无法登录。
    - 首选认证源：登录页显示的首选认证方式。
    - 关联认证源：登录页显示的备选认证方式。
    - claims：获取 Token 和获取用户信息接口返回的用户属性字段。
    - 记住密码：控制浏览器是否记住密码。
 - **协议管理**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
![](https://main.qcloudimg.com/raw/0d7946f559d8c84007c6fc54e7b9a79b.png)
**参数说明：**
    - 是否启用：默认启用，关闭后用户无法看到协议条款。
    - 隐私条款：输入隐私条款名称和链接，用于用户浏览和确认。
    - 服务协议：输入服务协议名称和链接，用于用户浏览和确认。
    - 补充协议：可新增其他协议，用于用户浏览和确认。
    - 注册开启：启用后，本协议条款在注册页显示。
    - 登录开启：启用后，本协议条款在登录页显示。
 - **MFA 流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
![](https://main.qcloudimg.com/raw/8132c909ec29bf2b035d3fac75b2aae5.png)
**参数说明：**
    - 是否启用：默认不启用，启用后将开启双因子认证。
    - 关联认证源：包括短信 OTP 认证源和邮箱 OTP 认证源两种认证方式。
 - **忘记用户名流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
![](https://main.qcloudimg.com/raw/c7687b2656bf59bf2a986d5b498091bf.png)
**参数说明：**
     - 是否启用：默认启用，关闭后用户无法找回用户名。
    - 找回方式：接收用户名的方式，如邮箱。
 - **忘记密码流程**：单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
![](https://main.qcloudimg.com/raw/6a45e8db8810e65520ca21f20d722ec9.png)
**参数说明：**
    - 是否启用：默认启用，关闭后用户无法重置密码。
    - 找回方式：接收验证码的方式，用于重置密码，如邮箱。

#### 小程序应用配置
1. 在应用配置页面，单击**参数配置**，切换到流程配置的参数配置页面。
2. 在参数配置页面，可配置注册/登录流程，单击模块右上角**编辑**，配置相关参数，单击**确定**保存配置。
![](https://main.qcloudimg.com/raw/cb8779e4022f111b117db7ddefc15b84.png)
**参数说明：**
 - 是否启用：默认启用，关闭后用户无法注册或登录。
 - 首选认证源：只能选择小程序认证源。
 - claims：获取 Token 和获取用户信息接口返回的用户属性字段。
 - 协议管理记录：开启时，用于记录用户签署的协议。

### 安全域 CORS
如需使用 JavaScript 调用 CIAM API，必须配置信任的 CORS 安全域才能成功调用，最多可配置10条。
1. 在应用配置页面，单击**安全域 CORS**，切换到应用配置的安全配置页面。
2. 在安全配置页面，单击**编辑**。
![](https://qcloudimg.tencent-cloud.cn/raw/61adc090f864e538856c3113acbf756c.png)
3. 根据要求填写相关信息后，单击确定**保存**配置。
![](https://qcloudimg.tencent-cloud.cn/raw/87a62ff867adfa73d2c736eb15339c75.png)


#### 注意事项
- 应用的 Redirect URI 已经默认添加到了 CORS 安全域中，无需在此处重复配置。
- 安全域需以 https:// 或 http:// 开头，格式为 <协议名> "://" <域名或IP地址> [ ":" <端口号> ]，例如 `https://sample.portal.tencentciam.com` 或 `http://127.0.0.1:8080`，不支持携带请求路径。
- 域名部分只允许包含小写字母、数字、半角.、半角*、半角-；域名的每一段中，-不能作为开头或结尾，也不能有连续的-；域名的第一段允许为 *，代表匹配任意子域，例如 `https://*.example.com`；域名的其他段不允许为 *。
