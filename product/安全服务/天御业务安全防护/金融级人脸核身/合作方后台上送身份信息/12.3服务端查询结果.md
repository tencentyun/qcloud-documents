
1.合作伙伴H5调用其服务端接口查询身份验证结果。
2.合作伙伴服务端生成签名，并调用远程身份认证服务端查询结果，远程身份认证服务端鉴权完成后返回结果（服务端上送 order_no和app_id查询）。
3.合作伙伴H5获取结果后继续后续流程。

### 一、合作方后台生成签名
合作方根据本次人脸验证的如下参数生成签名：

参数 | 说明 
---|---
app_id | 腾讯服务分配的app_id
order_no | 订单号，本次人脸验证合作伙伴上送的订单号，唯一标识。
version | 默认值：1.0.0
api ticket | 合作伙伴服务端缓存的tikcet,注意是sign 类型，具体见6.1获取规则
nonceStr | 32位随机字符串,字母和数字

生成一个 32 位的随机字符串(字母和数字) nonceStr，将app_id、order_no、version 连同ticket、nonceStr 共五个参数的值进行字典序排序再SHA1编码生成签名。具体签名算法见章节7。

### 二、活体识别查询接口
请求URL：https://idasc.webank.com/api/server/getLiveResult
请求方法:GET
请求参数：


参数|	说明|	类型	|长度	|是否必填
---|---
app_id	|腾讯服务分配的app_id	|字符串|	腾讯服务分配	|必填，腾讯服务分配的app_id
version|	版本号|	字符串|	20	|必填，默认值：1.0.0
nonce|	随机数	|字符串	|32|	必填
order_no	|订单号|	字符串	|32	|必填，合作方订单的唯一标识
sign	|签名值	|字符串|	40	|必填，使用上面生成的签名。
get_file	|是否需要获取活体识别的视频和文件	|字符串	|1	|非必填，值为1则返回文件；其他则不返回。

请求示例：

```
https://idasc.webank.com/api/server/getLiveResult?app_id=xxx&nonce=xxx&order_no=xxx&version=1.0.0&sign=xxx
```
返回参数：

参数|	类型	|说明
---|---
code	|string	|“0”说明活体成功
msg|	string	|返回结果描述
bizSeqNo	|string	|业务流水号
orderNo	|string	|订单编号
liveRate	|Base 64 string|	活体检测得分
occurredTime	|string	|进行活体识别的时间
photo|	string	|活体识别时的照片，base64位编码
video	|string	|活体识别时的视频，base64编码

> ** 注意：**
1)照片和视频信息作为存证，合作伙伴可以通过此接口拉取视频等文件，需要注意请求参数的get_file需要设置为1；如果不上送参数或者参数为空，默认不返回视频和照片信息。
2)由于照片和视频信息有可能超过1M，考虑传输的影响，建议合作伙伴在使用时注意，建议获取比对结果用于后续流程处理 和存证使用分开调用。避免网络传输带来的影响。
3)照片和视频均为base64位编码，其中照片解码后格式一般为jpg,png.视频格式解码后一般为mp4。












