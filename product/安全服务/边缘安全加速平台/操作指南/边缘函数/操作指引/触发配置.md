## 操作场景
本功能适用于站点下函数触发规则的如下操作：  
- 支持站点下函数触发规则的增删改查。  
- 支持快速调整触发规则的优先级，适用于请求 URL 匹配到多个触发规则的情况下快速调整执行位置的顺序，位置在前的触发规则将会执行，位置在后的触发规则将不会执行。  

## 操作介绍 
### 新建触发规则
1. 登录 [边缘安全加速平台](https://console.cloud.tencent.com/edgeone) 控制台，在左侧导航栏中，单击**边缘函数** > **触发配置**。
2. 在触发配置页面，单击规则列表右侧的![](https://qcloudimg.tencent-cloud.cn/raw/03f10b28b4a75b8cc534e433375ed0d2.png)，配置相关参数。<br><img src="https://qcloudimg.tencent-cloud.cn/raw/60475a2107b91bfd6dd5c220b8e2e17a.png" width=700px>
参数说明  
 - 站点：默认显示当前站点名称。  
 - 描述：非必填项，最多可支持60个字符。  
 - 触发条件：按需选择匹配类型、运算符和值，更多参数详情请参见 [规则引擎](https://cloud.tencent.com/document/product/1552/70901)。
 - 执行函数：下拉选择已创建的函数。  
3. 单击**确定**，即可完成触发规则的新建。    


### 编辑触发规则
1. 在触发配置页面，选择需要修改的规则，单击**编辑**。
![](https://qcloudimg.tencent-cloud.cn/raw/8a6f57e45c8fe3882d0d79522c4d0e68.png)
2. 在编辑触发规则对话框中，修改相关参数，单击**确定**即可完成触发规则的编辑。<br><img src="https://qcloudimg.tencent-cloud.cn/raw/1a89cd5697b0784759926338574cf2c1.png" width=700px>


### 查询触发规则
在触发配置页面，单击规则列表右侧的![](https://qcloudimg.tencent-cloud.cn/raw/cc51996cbb1a4eb77dfc9b452a88d7c0.png)，在搜索的输入框中填写规则 ID 的关键词即可完成查询。
![](https://qcloudimg.tencent-cloud.cn/raw/5aa34461128a9e43129e8f18e491f84e.png)


### 删除触发规则
1. 在触发配置页面，单击规则列表右侧的![](https://qcloudimg.tencent-cloud.cn/raw/341a70c7c6f3c3770463fa7a3ef7c101.png)图标。
2. 选择需要删除的规则，单击![](https://qcloudimg.tencent-cloud.cn/raw/00b18e737c0759a826082e59ea95d5ad.png)图标。
![](https://qcloudimg.tencent-cloud.cn/raw/6d86865dea1667ba79dc18085c444e93.png)
3. 在确认删除对话框中，单击**确认删除**，即可完成触发规则的删除。
![](https://qcloudimg.tencent-cloud.cn/raw/bc0fbe58fdb9617a44984655a50aec09.png)


### 触发规则优先级调整
1. 在触发配置页面，单击规则列表右侧的![](https://qcloudimg.tencent-cloud.cn/raw/341a70c7c6f3c3770463fa7a3ef7c101.png)图标。
2. 选择需要调整的规则，单击![](https://qcloudimg.tencent-cloud.cn/raw/d07f725689d5f191c101504e40bea070.png)上移规则或![](https://qcloudimg.tencent-cloud.cn/raw/993e3ac84f60d1bec83bbeb2d2161ab1.png)下移规则，单击**保存**即可完成优先级调整。
>?若请求 URL 匹配到多个触发规则的情况下（如x下图序号为01和02的触发规则）位置在前的触发规则将会执行（如下图序号01规则），位置在后的触发规则将不会执行（如下图序号02规则）。
>
![](https://qcloudimg.tencent-cloud.cn/raw/39f6fbba6f07648737e88a3eaa377a9e.png)

## 案例介绍
将为您介绍若请求 URL 匹配到多个触发规则的情况下，如何调整触发规则的执行顺序。
1. 在函数管理页面，已新建相同的触发条件的两个不同函数，如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/444b969edb979e7ebe621f5193f95922.png)
函数 test1的代码如下：
```typescript
const html = `
  <!DOCTYPE html>
  <body>
    <h1>The test 1, Hello World</h1>
    <p>This markup was generated by a TencentCloud Edge Functions.</p>
    <a href="https://cloud.tencent.com/product/teo">边缘安全加速平台 (TencentCloud EdgeOne)</a>
  </body>
`;

async function handleRequest(request) {
  return new Response(html, {
    headers: {
      'content-type': 'text/html; charset=UTF-8',
       'x-edgefunctions-test': 'Welcome to use Edge Functions.',
    },
  });
}

addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request));
});
```
函数 test2 的代码如下：
```typescript
const html = `
  <!DOCTYPE html>
  <body>
    <h1>The test 2, Hello World</h1>
    <p>This markup was generated by a TencentCloud Edge Functions.</p>
    <a href="https://cloud.tencent.com/product/teo">边缘安全加速平台 (TencentCloud EdgeOne)</a>
  </body>
`;

async function handleRequest(request) {
  return new Response(html, {
    headers: {
      'content-type': 'text/html; charset=UTF-8',
       'x-edgefunctions-test': 'Welcome to use Edge Functions.',
    },
  });
}

addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request));
});   
```

2. 在触发配置页面，可查看触发规则，如下图所示：
![](https://qcloudimg.tencent-cloud.cn/raw/761a354c8a1ce26d1bb8e435dbe37450.png)
![](https://qcloudimg.tencent-cloud.cn/raw/d18e0a74ed90e8ef0e934feef19ba1dd.png)
3. 函数 test1 的触发规则的顺序为01，函数 test2的触发规则的顺序为02，如下图所示：  
![](https://qcloudimg.tencent-cloud.cn/raw/229610464bede197121ab3a2ebf85bef.png)
4. 在浏览器中输入：触发规则 url 并按 Enter 键，响应内容如下：
![](https://qcloudimg.tencent-cloud.cn/raw/b9354284f44133615c2a1aabb5741894.png)
5. 函数 test2 单击![](https://qcloudimg.tencent-cloud.cn/raw/d07f725689d5f191c101504e40bea070.png)后，单击**保存**。
![](https://qcloudimg.tencent-cloud.cn/raw/c071a118707d13574e20956c9aab93d3.png)
函数 test2的触发规则的顺序为01，函数 test1的触发规则的顺序为02的顺序调整。  
![](https://qcloudimg.tencent-cloud.cn/raw/484f4f4441f14cc140f0669f32b0973a.png)
6. 再次在浏览器中输入：触发规则 url 并按 Enter 键，响应内容如下：
![](https://qcloudimg.tencent-cloud.cn/raw/99f17428b89a6dbcc50b51c2d0d21d0d.png)

以上为若请求 URL 匹配到多个触发规则的情况下，如何调整触发规则的执行顺序的操作过程。
