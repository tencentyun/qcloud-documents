## API Description

This API (ContentSecurity.Text.AntiSpam) is used to identify whether the texts generated by users contain any political, pornographic, advertising and malicious competition keywords, and further determine whether users have any malicious intent based on their behaviors.

Protocol: `HTTP/HTTPS` 

Domain name: `csec.api.qcloud.com` 

API name: `ContentSecurity.Text.AntiSpam`

## Request Parameters

>**Note:**
> All of the following parameters are very important to identify the malicious intent. Lack of any one may affect the identification result.

| Parameter Name | Required | Type | Description |
|---------|---------|---------|---------|
| accountType | Required | UInt | User account type</br>0: Other accounts</br>1: QQ open account</br>2: WeChat open account</br>4: Mobile account</br>6: Mobile dynamic code</br>7: Email account |
| appId | Optional | String | The parameter which is assigned to a website or an application by QQ or Wechat as a unique ID to identify this website or application. If accountType is a QQ or Wechat open account, this parameter is required. |
| uid | Required | String | User ID. A different accountType corresponds to a different user ID. For a QQ or WeChat user, enter the corresponding OpenID. |
| associateAccount | Optional | String | If accountType is a QQ or WeChat open account, associateAccount is used to identify the business-related account ID after this QQ or WeChat user has logged in. |
| toAccountType | Optional | UInt | Receiver's account type, which is similar to accountType. |
| toUid | Optional | String | Receiver's ID, which is similar to uid. |
| relationship | Optional | UInt | 1: C2C friend</br>2: Not C2C friend</br>3: Group</br>4: Open to the public</br>5: B2C</br>6: C2B |
| messageStruct | Required | String | Content generated by a user. For more information, please see [Message Structure](#jieshao) below. |
| messageId | Optional | String | ID of the content generated by a user. If this ID is specified, more information can be obtained through the malicious result query API. |
| postIp | Required | String | The public IP used for operation |
| postTime | Optional | UInt | The timestamp when content is generated (in sec) |
| nickName | Optional | String | Nickname, which is UTF-8-encoded |
| phoneNumber | Optional | String | Mobile number</br>Country code-Mobile number, such as 0086-15912345687</br>Note: `+` is not required in front of 0086. |
|emailAddress | Optional | String | User's email address (which is not automatically generated by the system) |
| registerTime | Optional | UInt | Timestamp of registration (in sec) |
| registerIp | Optional | String | The public IP used for registration |
|LoginSource | Optional | Int | Login source</br>0: Others</br>1: PC web page</br>2: Mobile page</br>3: App</br>4: WeChat official account |
| LoginType | Optional | Int | Login methods</br>0: Others</br>1: Enter the account and password manually</br>2: Log in to the account with the dynamic code sent via SMS</br>3: Log in to the account by scanning the QR code |
| macAddress | Optional | String | MAC address or the unique ID of a device |
| vendorId | Optional | String | Mobile manufacturer's ID. To register in a mobile, you need to provide this information. |
| imei | Optional | String | Mobile device number |
| businessId | Optional | UInt | Business ID, which is used to differentiate statistical data when this service is used in multiple businesses of a website or an application. |
| sceneId | Optional | UInt | Scenario ID, which is used to differentiate statistical data when this service is used in multiple scenarios of businesses of a website or an application. |

## Response Parameters

| Parameter Name | Type | Description |
|---------|---------|---------|
| postIp | String | Same with the request parameter |
| postTime | String | Same with the request parameter |
| messageId | String | Same with the request parameter |
| uid | String | Same with the request parameter |
| associateAccount | String | Same with the request parameter |
| level | Int | Level of malicious intent</br>0: No malicious intent, that is, the keyword is not matched</br>1-4: Levels of malicious intent sorted in ascending order. |
| type | Int | Types of keywords hit by the system</br>0: Others</br>1: Advertising</br>2: Pornographic</br>3: Sensitive</br>4: Spamming</br>5: Cross-site tracing</br>6: Personality |
| selfType | Int | User-defined keyword type |
| beatTips | String | Reason for defense, for example, a keyword is hit. |

<span id="jieshao"></span>
**Message Structure**

The message structure is used to store the texts, pictures, videos, and system emoticons entered by users in the TLV format. Both Type and Length are in the network byte order with a length of 4 bytes. Value is set depending on Length. All Chinese characters are UTF-8-encoded.
The available Types are as follows:

| Value | Type | Description |
|---------|---------|---------|
| 1 | Text | String content, which is UTF-8-encoded. |
| 2 | Image hyperlink | If the hyperlink is not provided, Length=0 indicates that an image exists. |
| 3 | Video hyperlink | If the hyperlink is not provided, Length=0 indicates that a video exists. |
| 4 | Audio hyperlink | If the hyperlink is not provided, Length=0 indicates that an audio exists. |
| 5 | Website hyperlink | If the hyperlink is not provided, Length=0 indicates that a website exists. |
| 6 | System emoticon | System emoticon encoding is not required. Length=0 indicates that a system emoticon exists. |
| 7 | Article title | String content, which is UTF-8-encoded. |
| 8 | Location | Location is not required. Length=0 indicates that a location exists. |
| 9 | Third-party custom content | Third-party content is not required. Length=0 indicates that third-party content exists. |
| 10 | File | File is not required. Length=0 indicates that a file exists. |
| 1000 | Others | Other contents are not required. Length=0 indicates that other contents exist. |

## Request Example

```
1. http://csec.api.qcloud.com/v2/index.php?Action=ContentSecurity.Text.AntiSpam
2. &accountType=1
3. &appId=100273020
4. &uid=00000000000000000000000033121475
5. &associateAccount=SpFsjpyvaJ27329
6. &nickName=%E6%B5%8B%E8%AF%95%E6%98%B5%E7%A7%B0
7. &phoneNumber=0086-186659115142
8. &emailAddress=testaccount@qq.com
9. &registerTime=1436665734
10. &registerIp=8.8.8.8
11. &loginSource=1
12. &loginType=1
13. &loginIp=8.8.8.8
14. &loginTime=1436674734
15. &postTime=1436675734
16. &passwordHash=f158abb2a762f7919846ee9bf8445c7f22a244c5
17. &referer=https%3A//ui.ptlogin2.qq.com/cgi-bin/login%3Fdaid%3D164%26target
18. %3Dself%26style%3D16%26mibao_css%3Dm_webqq%26appId%3D501004106%2
19. 6enable_qlogin%3D0%26no_verifyimg%3D1%26s_url%3Dhttp%253A%252F%252F
20. w.qq.com%252Fproxy.html%26f_url%3Dloginerroralert%26strong_login%3D1%26l
21. ogin_state%3D10%26t%3D20131024001
22. &jumUrl=web.qq.com
23. &cookieHash=0cc62d098effb4dd6c7835a28740f4542d190bdd
24. &userAgent=Mozilla/5.0%20%28Windows%20NT%205.1%29%20AppleWebKit/53
25. 7.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome/43.0.2357.132%20Safa
26. ri/537.36&mouseClickCount=10&keyboardClickCount=50&messageStruct=AAAA
27. AQAAAELmtYvor5Xlj5HluJbvvIzmnInkurrmiZPlh7vkuYjvvJ/og7bmsLTvvIzkvaDmmK
28. /ms5Xova7lip/niLHlpb3ogIUAAAADAAAAQWh0dHA6Ly9pbWcuemNvb2wuY24vY
29. 29tbXVuaXR5LzAzMzIwZGQ1NTRjNzVjNzAwMDAwMTU4ZmNlMTcyMDkuanBn
30. &messageId=UEBWM19590jbWPo19592
31. &macAddress=00-05-9A-3C-7A-00
32. &COMMON_PARAMS
```

## Response Example

```
1. {
2. "code": 0,
3. "message": "No Error",
4. "level": 0,
5. "messageId":"UEBWM19590jbWPo19592",
6. "postTime": 1436675734,
7. "uid": "00000000000000000000000033121475",
8. "associateAccount": "SpFsjpyvaJ27329"
9. }
```



