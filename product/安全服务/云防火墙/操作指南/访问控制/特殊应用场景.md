本文将为您介绍云防火墙的访问控制功能的特殊应用场景。
## 管理规则列表的执行顺序
互联网边界规则、NAT 边界规则及 VPC 间规则都支持管理规则列表的执行顺序，接下来将以“互联网边界规则”为例进行说明。
### 场景1：对列表内规则进行快速排序

1. 登录 [云防火墙控制台](https://console.cloud.tencent.com/cfw/ac/internet)，在左侧导航栏中，选择【访问控制】>【互联网边界规则】，进入互联网边界规则页面。
2. 在互联网边界规则页面的规则列表上方，单击【快速排序】，列表进入编辑模式。
3. 用户能够在当前页面范围内，批量移动规则的位置和顺序，通过拖动规则前方图标，对规则进行排序。
4. 移动完成后需单击【保存】即可生效。
&nbsp;
![](https://main.qcloudimg.com/raw/53acd9daa6a3f754e2403b52450b6ce2.png)
&nbsp;
**排序操作说明**：
	- 每次松开鼠标后，导致<strong>位置</strong>发生变化的规则落地，视为一次排序操作。
	- 松开鼠标后，<strong>位置</strong>没有发生变化，则不是一次排序操作。
	- 发生过一次排序操作后，【撤销】按钮亮起。
	- 单击一次【恢复】，列表回到上一次排序操作后的状态。
	- 单击【保存】，完成后，页面上方会出现<strong>排序完成</strong>提示。
	- 单击【取消】，列表会回到初始状态，所有排序操作不生效。

### 场景2：通过编辑将规则移动至指定位置
当需要大范围的移动某条规则时，快速排序功能不能高效的执行这一类操作，因此，通过编辑可以快速的将当前规则移动到指定的位置，与快速排序不同，编辑功能一次只能实现对一个规则执行顺序的修改。
1. 登录 [云防火墙控制台](https://console.cloud.tencent.com/cfw/ac/internet)，在左侧导航栏中，选择【访问控制】>【互联网边界规则】，进入互联网边界规则页面。
2. 在互联网边界规则页面的规则列表中，找到需要移动的规则，确定移动的期望位置。
2. 在规则右侧，单击【编辑】，进入规则编辑模式。
3. 修改执行顺序字段的值，修改为期望位置的执行顺序值。
>!由于执行顺序的不可重复原则与连续原则，通过编辑进行规则的移动时，执行顺序的合理输入最小值为1，最大值为当前列表中的规则数量。
>
![](https://main.qcloudimg.com/raw/0ac11a630840c3b6f162e3fd9aa71556.png)
&nbsp;
4. 单击【完成】，检查列表中的规则顺序是否符合预期。
>?通过编辑规则可以实现移动规则在列表中的位置，从而直接将该规则的执行顺序调整到期望的位置，其他所有规则也会自动移动调整。 

### 场景3：在现有列表中的指定位置插入一条规则
云防火墙支持在任意两条规则之间，插入一条规则，插入规则的执行顺序即为当前插入的位置。

规则采用**前插**的方式，若需要在执行顺序为“2”和“3”的规则之间，插入一条新的规则：
1. 登录 [云防火墙控制台](https://console.cloud.tencent.com/cfw/ac/internet)，在左侧导航栏中，选择【访问控制】>【互联网边界规则】，进入互联网边界规则页面。
2. 在互联网边界规则页面的规则列表中，找到执行顺序为“3”的规则，在规则右侧单击【插入】。
2. 将在执行顺序为“3”的规则上方，弹出规则编辑框。
3. 在规则编辑框中，填写规则字段，单击【完成】即可完成规则插入。
>?完成插入操作后，被插入的所有规则执行顺序自动“+1”。
>
![](https://main.qcloudimg.com/raw/2ab4d37807c6e66167a9f78bc1fbc0bf.png)

## 查看规则是否生效

- **方式1**：查看访问控制列表中的命中次数，若有命中次数，则表示规则生效。
>?若规则命中次数为零，只能说明暂时没有被命中，可以理解为暂时没有生效，但是不代表规则配置有误。
>
![](https://main.qcloudimg.com/raw/bbabe496cba03c9e49890e9ad48fabb0.png)
&nbsp;
- **方式2**：左侧导航栏中，选择【日志审计】>【[访问控制日志](https://console.cloud.tencent.com/cfw/log)】，查看访问控制日志（规则命中记录日志），若在访问控制日志中，查看到相关规则，则表示该规则生效。
&nbsp;
![](https://main.qcloudimg.com/raw/1d38de9920818addc5017dd90d5deb72.png)


## 操作锁

同一个 AppID 的同一张访问控制列表（VPC 使用防火墙 ID 来区分），在同一时间只允许一个用户执行【添加规则】、【导入规则】、【快速排序】、【编辑】、【插入】中的任意一个操作。

当用户对列表进行操作时，如在页面上方出现：“列表可能正在被其他人操作，已被锁定，请稍后重试”的提示时，则代表此时有其他的用户正在对该列表进行操作。
>?操作锁的有效期为5分钟，到时后自动释放。
>
![](https://main.qcloudimg.com/raw/41ba052cef64634011f069c5bc36f0f0.png)

## 相关信息
如遇到访问控制相关问题，可参见 [功能相关](https://cloud.tencent.com/document/product/1132/45764#.E8.AE.BF.E9.97.AE.E6.8E.A7.E5.88.B6) 文档。
