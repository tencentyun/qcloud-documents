棋牌盾是面向棋牌游戏等被频繁DDoS攻击的行业客户针对性产品，可帮助客户应对复杂的DDoS和CC攻击。

### 接入要求
1.客户具备一定的开发能力，可基于棋牌盾API开发游戏调度系统，以便在服务遭受攻击时灵活调度流量；

### 主要功能
1.防御DDoS攻击，如syn flood,udp flood,icmp flood；
2.防御CC攻击；

### 产品规格
单IP防护阈值：5Gbps
黑洞时长：30分钟

### 产品原理
棋牌盾的核心原理是通过将业务分散至一批棋牌盾IP，并配以灵活的用户和流量调度策略，保证在遭受大流量攻击时，核心业务不受影响。
棋牌盾典型的接入场景如下图所示：
![](https://mc.qcloudimg.com/static/img/7588fdc90b86eb7966b6af86b83211a4/image.png)
1.客户购买一组棋牌盾IP（BGP IP），建立自己的IP池，可在腾讯云控制台或通过云API，将池内IP进行分组并配置业务转发规则；

2.客户根据棋牌盾API指引文档，开发自己的游戏流量调度系统。调度系统通过 API与棋牌盾后台联动，可完成IP分组、转发规则编辑、IP状态查询等操作。同时，客户在调度系统上，根据自身业务情况，设置灵活的用户和流量调度策略，可包括但不限于以下策略：
2.1用户调度策略：
a）根据用户等级，分配不同的棋牌盾IP；
b）根据用户地域，分配不同的棋牌盾IP；
2.2 流量调度策略：
a）当某个棋牌盾IP因攻击被黑洞时，自动将该IP退出所在业务分组，并从后备池中调入一个新的IP，接管该IP业务；
b）当可用棋牌盾IP数量低于设定阈值时，将受影响的业务流量调度至BGP高防IP或其他高防；
c）当可用棋牌盾IP数量低于设定阈值时，暂时不再为受影响的业务流量提供新的IP；

3.客户调整其游戏client的登陆机制，在登陆时，client先向流量调度系统请求游戏服IP，该过程建议基于域名进行通信。流量调度系统收到client请求后，根据用户调度策略，返回一个棋牌盾IP给client。最终游戏client向调度系统返回的棋牌盾IP发起链接，棋牌盾IP将正常业务流量转发至后端对应的真实游戏服务器，完成整个游戏的连接；

4.当游戏client无法连接原来分配的棋牌盾IP时，client重新向流量调度系统请求新的IP。
