## 概述

工作流创建时都需要指定运行角色，工作流在运行角色已关联策略的权限范围内，为用户的工作流代码申请临时授权，便于工作流通过角色的授权机制实现权限打通和其他云上资源访问。

工作流创建时，运行角色可以选择两种方式：

1. **新建运行角色**：系统创建，授予工作流运行时需要使用的最小策略权限。
2. **使用已有角色**：用户自定义，权限策略完全由用户自行决策。

### 新建运行角色

根据创建工作流的代码语法来判断该工作流执行时需要调用的云产品资源，由系统创建一个运行角色，授予最小操作权限的策略。

![](https://main.qcloudimg.com/raw/18dc9da46d4c08e16e87530df7873520.png)

新建运行角色每次都只会针对当前工作流状态机的语法授予最小权限策略，如果后续工作流状态机有更新，增加了其他资源的调用，需要重新创建角色，否则工作流运行时会出现权限错误。

更新工作流状态机后，更新角色步骤如下：

1. 通过工作流列表，选择对应工作流，进入工作流详情页：

   ![](https://main.qcloudimg.com/raw/05a28a92ab95c604dc7ab8c4142385ab.png)

2. 单击基本信息中的【编辑】，弹出对话框：

   ![](https://main.qcloudimg.com/raw/eb35a227de7cdbed24435b8527f1e54f.png)

3. 选择【新建角色】后，单击【确认】。

### 使用已有角色

用户可以根据自己的业务诉求，自定义工作流运行时的权限策略。操作步骤如下：

1. 登录 [访问管理控制台](https://console.cloud.tencent.com/cam/role)，选择新建角色，角色载体为腾讯云产品服务。
   ![1608278445413](https://main.qcloudimg.com/raw/ee9eefec88e036b8cc9b4266b502a9e4.png)

2. 在“输入角色载体信息”步骤中勾选【应用与服务编排工作流（asw）】，并单击【下一步】：
   ![img](https://main.qcloudimg.com/raw/1f32176937ca50de047eac9266d08b0d.png)

3. 在“配置角色策略”步骤中，选择工作流所需策略并单击【下一步】。
   ![img](https://main.qcloudimg.com/raw/40b1fb7ae18f209ce1c1486e69ad5220.png)

   > 说明：
   >
   > 您可以直接选择 `QcloudSCFFullAccess` 云函数（SCF）全读写访问权限，如果需要更细粒度的权限配置，请根据实际情况配置选择。

4. 输入角色名称，完成创建角色及授权。

