## 安全性

应用性能监控 TAPM 使用应用内探针技术，通过用户的配置可以采集性能和业务等敏感数据，因此整个系统对安全有较高的要求。应用性能监控 TAPM 系统通过以下几方面来保证安全性。

- 采集安全
  在采集数据的探针上，通过配置选项，允许用户对采集到的敏感数据进行混淆处理。例如，对用户名、密码、手机号等敏感信息进行混淆处理。数据混淆在探针端完成，保证传输到 Agent Collector 的数据不包含敏感数据，从而保证数据的安全。
  探针同时提供审计模式，在审计模式运行时，探针将采集并上报的数据以日志的形式输出到本地文件中，以便用户对上报数据进行安全审计，发现有敏感信息上报即可通过修改混淆设置进行屏蔽。

- 传输安全
  在数据传输上，探针与 Collector、Collector 与 DC 端采用加密的 HTTPS 传输协议进行传输，保证数据在传输网络过程中的安全。

- 存储安全
  应用性能监控 TAPM 采用高可用的存储架构对数据进行存储，对每种类型的数据存储都提供高度冗余和分布式的高可用存储方案，并提供健全的自动备份、恢复和容灾措施，最大限度的保证数据存储的安全性和可靠性。

- 账号安全
  应用性能监控 TAPM 提供完整的角色和权限管理系统、可对每个功能模块和数据项设置特定的用户或角色访问权限，不同角色和用户只能访问被允许访问的功能和数据，特别是敏感的业务分析和业务数据，可以限定到特定的访问用户和角色上。
  同时 TAPM 使用安全的 HTTPS 加密访问和权限校验，保证用户账号与密码的安全。

## 可靠性

探针的可靠性保证机制如下：

-   当被监控的应用较繁忙或者已经资源不足，为保证被监控系统的稳定运行，探针将关闭部分功能以减少对应用资源的消耗：
	-   当内存使用率或者 Garbage Collection CPU 时间占比超过采样阈值时，探针将对 Trace 数据进行采样；
	-   当内存使用率或者 Garbage Collection CPU 时间占比超过停止采集数据阈值时，探针将不再采集 Trace 数据。

-   当网络出现异常时，探针和 Agent Collector 之间的缓冲区能够保存1024条 Trace 数据，最新采集的数据将不断覆盖旧数据，待网络恢复正常后，Agent Collector 会将缓冲区中的数据继续上传到应用性能监控 TAPM。

-   当部署多个 Agent Collector 时（推荐），即使其中一个 Agent Collector 出现故障不能正常上传数据，其他的 Agent Collector 将在5分钟内接替其工作继续上传，确保数据不会丢失。
