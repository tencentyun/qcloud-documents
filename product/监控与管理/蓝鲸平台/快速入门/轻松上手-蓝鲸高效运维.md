## 用户须知

蓝鲸平台提供运维体系解决方案，在 PaaS 平台上有众多 SaaS 产品供您使用，每个 SaaS 产品都具备专属的能力。本文讲解的是高效运维需要协同配合的 SaaS，主要涉及到以下几个产品：

- 配置平台：配置业务与服务器的关系。为什么要先操作配置平台呢？配置平台是一切操作的基础，可以配置业务，以及业务下有哪些服务器，业务的负责人，方便用户分权限和隔离来管理服务器。
- Agent ：Agent 占用空间小，不影响服务器使用，是命令执行、文件传输、数据上报的基础。
- 作业平台：通过 web 端，可以执行脚本，下发文件等。
- 标准运维：成熟的流程引擎，支持进行调度编排。
  以上几个产品，将帮助您完成自动化运维，下面依次介绍每个产品的基本操作步骤。

## 安装蓝鲸

安装蓝鲸社区版详情请参考：[安装指南](https://docs.bk.tencent.com/bkce_install_guide/) 

## 配置平台

在蓝鲸配置平台，通过**业务**、**集群**、**模块**来划分主机拓扑。
### 在蓝鲸配置平台里新建业务
1. 在左侧导航栏中，单击【我的收藏】> 【业务】，进入业务管理功能页。
2. 单击【立即创建】，创建业务。
![](https://main.qcloudimg.com/raw/4dc3eddfbca19715eaafd148604aaeb3.png)
>!初始状态下，业务只有配置平台管理员能够新增和管理业务。管理员可以根据实际企业需要，通过权限分组的方式，给指定用户组分配业务管理权限。

### 分配服务器
1. 在左侧导航栏中，单击【主机】，进入主机列表页面。
2. 勾选服务器，单击【分配到业务空闲机池】，下列选择指定业务，默认是放到业务的空闲机池。
![](https://main.qcloudimg.com/raw/38de68a9105814b936baeb5a93f4c933.png)

### 建立业务下的模块
1. 使用管理员帐号登录蓝鲸配置平台。
2. 在左侧导航栏中，单击【模型管理】>【模型】，进入模型管理页面。配置平台内置一些通用的模型，当现有的模型不能够满足需要的时候，可以通过新建的方式增加模型。
3. 在页面左上角，单击【新增模型】，系统将打开“新增模型”对话框，配置如下选项。
 - 模型图标：单击【点击切换】，选择模型图标（后续也可自定义图标）。
 - 所属分组：选择模型分组。
 - 唯一标识：输入模型唯一标识。
 - 名称：输入模型名称。
![](https://main.qcloudimg.com/raw/45739d5687ea3f87f94ed4cc4ebe3dd2.png)
4. 配置信息之后，单击【保存】，即可创建模型。
5. 模型创建成功，您可在模型所属的组查看到该模型。
![](https://main.qcloudimg.com/raw/68fd7d5617109c9e3b0c84b563ec34fb.png)




## 安装 Agent

Agent V2.0后续版本已支持跨云管理功能，为了同时满足跨云和非跨云的需求，蓝鲸智云团队提供了 Agent 安装工具来协助大家快速安装蓝鲸 Agent，蓝鲸智云团队提供了  [直连区域安装](#agent-setp1)、[自定义区域安装](https://docs.bk.tencent.com/bk_agent_setup/AgentInstall.html#custom) 和 [手动安装](https://docs.bk.tencent.com/bk_agent_setup/AgentInstall.html#manual) 方法安装 Agent。


<span id="agent-setp1"></span>
### 直连区域 Agent 安装
1. 配置 Agent 安装系统参数，统一填 server 的内网IP，单击【确定】 。
![](https://main.qcloudimg.com/raw/140a5da4979aaf1f018afb3bbc417355.png)
2. 选择您需要安装 Agent 的业务。
![](https://main.qcloudimg.com/raw/40b2ea74bc1c556fb49fc9dfc214f1d6.png)
3. 单击【直连区域】，弹出表单，填写安装信息。
![](https://main.qcloudimg.com/raw/12a8c80208d1dbad70f34a2bf124a693.png)
4. 单击【开始安装】进行 Agent 安装，如果安装失败，请根据错误信息和日志排查，如需要请联系蓝鲸智云团队，正确安装完成将展示如下界面。
![](https://main.qcloudimg.com/raw/327398b0272e2c9316b4aed4047e5195.png)







## 使用作业平台输出一个 HelloWorld

作业平台（Job）是一套基于蓝鲸智云管控平台 Agent 管道之上的基础操作平台，具备大并发处理能力；除了支持脚本执行、文件拉取/分发、定时任务等一系列可实现的基础运维场景以外，还运用流程化的理念很好的将零碎的单个任务组装成一个作业流程；而每个任务都可作为一个原子节点，提供给其它系统和平台调度，实现调度自动化。
1. 快速执行脚本，如下图所示。
![](https://main.qcloudimg.com/raw/c041fad877ba287b9c783b472674c8a2.png)
2. 快速分发文件，如下图所示。
![](https://main.qcloudimg.com/raw/99c108a0fd8e90ac6f8ca12b53493adf.png)
3. 快速 SQL 执行，如下图所示。
![](https://main.qcloudimg.com/raw/9e8c2432bc65fb9c6335c5357ad844ba.png)
4. 新建作业，如下图所示。
![](https://main.qcloudimg.com/raw/c32a85226b2e54cd1d95ea6a7244022a.png)
5. 定时作业，如下图所示。
![](https://main.qcloudimg.com/raw/7fda4533b3a4bb0201779703b7fc472b.png)
6. 脚本管理，如下图所示。
![](https://main.qcloudimg.com/raw/8ed76e635f2e3b9d9884fc413ba1056e.png)



## 标准运维
### 创建流程
1. 登录蓝鲸工作台，单击【标准运维】，进入标准运维管理页面。
2. 在上方菜单栏中，单击【流程模板】，进入流程模板管理页面。
3. 单击【新建流程】，进入流程配置页面。您可根据需求创建流程，其中流程名称是用户用来描述流程模板的，默认值是“new时间格式串”，用户可以自行修改，注意不能包含空格、括号等特殊字符。
![](https://main.qcloudimg.com/raw/678565c1fa9f9f6f32dbbbdf007246dd.png)
4.您可以从左边的工具栏，拖拽合适的节点到画布中，并通过连线，组成合法的流程模板。
![](https://main.qcloudimg.com/raw/01c7f0b439bfc0fa7179128c5a71bebf.png)


### 执行任务
1. 您可以在“流程模板”管理页面，单击流程模板的【新建任务】，创建一个任务。
![](https://main.qcloudimg.com/raw/ef10ac6af49b881ac914cf9361125a45.png)
2. 新建任务时，您需要选择要执行的任务节点（也可以通过单击执行方案快速选择要执行的任务节点）。
3. 单击【下一步】，进入第二步配置。
>!只有设置了可选节点属性为“ON”的任务节点，才能在节点选择阶段选择不执行，其他的任务节点必须执行。
4. 您需要填写任务名称和全局变量参数，如下图所示。
![](https://main.qcloudimg.com/raw/f81538342e77d9dbff7f88392867687b.png)
 在参数填写阶段，您可以单击【预览】，查看将要执行的任务流程图，这里会自动去掉在节点选择阶段选择不执行的任务节点。
 ![](https://main.qcloudimg.com/raw/e9f1d525f007bf862231107111759a34.png)
在最后一步，您可以单击【查看参数】确认变量替换后生成的每个任务节点的参数，如果不符合预期，可以单击【修改参数】，重新填写任务的全局变量参数。确认无误后，单击【执行】，就可以立即启动当前任务流程实例了。
5. 在任务执行过程中，您可以暂停任务，继续任务或者终止任务，任务执行到某个标准插件失败后也可以选择“跳过”或者修改参数后“重试”。


至此，您应该已经对腾讯蓝鲸有了一个初步的认识，更多的特性和功能，请到腾讯 [蓝鲸 ](https://bk.tencent.com/)官网里发现吧。


## 寻求帮助

当您遇到问题或有建议时，可以反馈到我们的 [论坛](http://bbs.qcloud.com/forum-100-1.html)。
