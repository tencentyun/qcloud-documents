 
## 自定义策略
本文档介绍如何通过不同的创建方式创建自定义策略，允许作细粒度的权限划分，可以灵活的满足用户的差异化权限管理需求。

## 前提条件
已登录访问管理控制台，进入 [策略](https://console.cloud.tencent.com/cam/policy) 管理页面。
## 按策略生成器创建

按策略生成器创建的策略，通过从策略向导中选择服务和操作，并定义资源，自动生成策略语法，简单灵活，优先推荐使用。

1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按策略生成器创建】，进入选择服务和操作页面。
3. 在选择服务和操作页面，补充以下信息。
  - 效果：必填项，选择"允许"。如选择"拒绝"，用户或组不能获取授权。
  - 服务：必填项，选择需要添加的产品。
  - 操作：必填项，根据您的需求勾选产品权限。
  - 资源：必填项，您可以参考 [资源描述方式](https://cloud.tencent.com/document/product/598/10606) 填写。
  - 条件：根据您的需求选择条件，输入 IP 地址。可以添加多条限制。例如，效果选择"允许"，仅限使用该 IP 地址的用户或组获取授权。支持限制 IP 的云服务可参考 [常见问题](https://cloud.tencent.com/document/product/598/18795#.E6.9C.89.E5.93.AA.E4.BA.9B.E4.BA.91.E6.9C.8D.E5.8A.A1.E6.94.AF.E6.8C.81.E9.99.90.E5.88.B6-ip-.E8.AE.BF.E9.97.AE.EF.BC.9F)。
  
>?  
- 部分服务的操作无需关联对象，则无需填写资源描述，可填 *。
- 一条策略中可以添加多条声明。

4. 单击【添加声明】>【下一步】，进入编辑策略页面。
5. 补充策略名称、策略备注信息，确认策略内容，其中策略名称和策略内容由控制台自动生成：
 - 策略名称默认为 "policygen" ，后缀数字根据创建日期生成。您可进行自定义。
 - 策略内容与第 3 步的服务和操作对应，您可根据实际需求进行修改。
6. 单击【创建策略】，完成按策略生成器创建自定义策略的操作。

## 按产品功能或项目权限创建
### 按产品功能创建
按产品功能创建的策略，由用户设置，权限粒度可由业务接入时控制，解决对权限划分有一定要求，但并不复杂的用户诉求。
1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按产品功能或项目权限创建】，进入配置服务类型页面。
3. 在配置服务类型页面，补充策略名信息。
4. 在选择服务类型栏选择服务类型，单击【下一步】，进入开启权限页面。

>?
> - 可选择内容分发网络、互动直播、队列类型、主题模型、短信。
> - 支持多选。

5. 在开启权限页面，将需要开启的功能权限开关置为 **开启状态**，并单击【下一步】，进入关联对象页面。
6. 在关联对象页面，单击【关联对象】，选择要关联的对象。
7. 单击【完成】，完成按产品功能创建自定义策略操作。

### 按项目权限创建
按项目权限创建的策略，将具有一类项目属性的资源快速授权给用户或用户组。
1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按产品功能或项目权限创建】，进入配置服务类型页面。
3. 在配置服务类型页面，补充策略名信息。
4. 在项目管理栏选择以下两种项目管理功能，单击【下一步】，进入关联对象页面。
- 管理 CDN 业务项目内云资源：可设置指定项目下 CDN 的管理权限。
- 管理其他业务项目内资源：可设置指定项目下其他云资源的管理权限。需该产品业务控制台支持按项目管理资源。
5. 在开启权限页面，将需要开启的功能权限开关置为 **开启状态**，并单击【下一步】，进入关联对象页面。
6. 在关联对象页面，单击【关联对象】。
7. 在弹出的关联对象框中，选择按项目选择，勾选要关联的对象，单击【确认】。
7. 单击【完成】，完成按项目权限创建自定义策略操作。

## 按策略语法创建
按语法创建的策略，由用户设置，权限粒度灵活，由用户把控，解决对权限精细划分有较高要求的用户诉求。
1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按策略语法创建】，进入选择策略模板页面。
3. 选择策略模版页面，可输入关键字进行搜索，如模版类型为全部模版，关键字为 a ，选择 AdministratorAccess 模版。
4. 单击【下一步】，进入编辑策略页面。
3. 在编辑策略页面，确认策略名称、策略内容后单击【创建策略】，完成按策略语法创建自定义策略操作。其中默认的策略名称和策略内容由控制台自动生成，策略名称默认为 "policygen" ，后缀数字根据创建日期生成。

## 按标签授权
按标签授权的策略，将具有一类标签属性的资源快速授权给用户或用户组。
1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按标签授权】，进入标签策略生成器页面。
3. 选择以下信息，单击【下一步】，进入检查并完成页面。
 - 赋予用户/和用户组：勾选需要授权的用户/用户组。（可选其一）
 - 在标签键：选择需要授权的标签键。（必填项）
 - 且具有标签值：选择需要授权的标签值。（必填项）
 - 的资源：默认为管理权限。
3. 在检查并完成页面，确认策略名称、策略内容后单击【完成】，完成按标签授权创建自定义策略操作。其中默认的策略名称和策略内容由控制台自动生成，策略名称默认为 "policygen" ，后缀数字根据创建日期生成。
