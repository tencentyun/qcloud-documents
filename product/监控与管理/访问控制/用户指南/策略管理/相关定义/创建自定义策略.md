## 操作场景

本文档介绍如何通过不同的创建方式创建自定义策略，自定义策略允许作细粒度的权限划分，可以灵活满足用户的差异化权限管理需求。
以下视频将为您介绍如何使用策略生成器创建策略：

<div class="doc-video-mod"><iframe src="https://cloud.tencent.com/edu/learning/quick-play/1765-19057?source=gw.doc.media&withPoster=1&notip=1"></iframe></div>

## 前提条件

已登录访问管理控制台，进入 [策略](https://console.cloud.tencent.com/cam/policy) 管理页面。

## 操作步骤

### 按策略生成器创建

按策略生成器创建的策略，通过从策略向导中选择服务和操作，并定义资源，自动生成策略语法，简单灵活，优先推荐使用。

1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按策略生成器创建】，进入选择服务和操作页面。
3. 在“可视化策略生成器”中选择服务的页面，补充以下信息，编辑一个授权声明。（亦可选择JSON，使用策略语法方式编辑策略，授权效果同“可视化策略生成器”）

  - 效果（必选）：选择允许或拒绝。

  - 服务（必选）：选择要授权的产品。

  - 操作（必选）：选择您要授权的操作。

  - 资源（必填）：选择全部资源或您要授权的特定资源。

    授权粒度为操作级、服务级的云产品不支持填写具体资源六段式，选择全部资源即可。

    授权粒度为资源级的云产品，可选择特定资源，资源描述方式请参阅  [支持 CAM 的产品](https://cloud.tencent.com/document/product/598/10588) 中对应产品的「访问管理指南」文档。云产品支持的授权粒度请参阅 [支持 CAM 的产品](https://cloud.tencent.com/document/product/598/10588) 中的「授权粒度」。

 - 条件（选填）：设置上述授权的生效条件。详细可参阅 [生效条件](https://cloud.tencent.com/document/product/598/10608)。

>?  
- 若要支持多个服务的手段，可点击“添加权限”，继续添加多个授权声明，对另外的服务进行授权策略配置。
- 一条策略中可以添加多条声明。

4. 完成策略授权声明编辑后，点击“下一步”，进入基本信息和关联用户/用户组页面。
5. 在关联用户/用户组页面，补充策略名称和描述信息，可同时关联用户或用户组快速授权。

>?  
 - 策略名称由控制台自动生成，默认为 "policygen" ，后缀数字根据创建日期生成。您可进行自定义。

6. 单击【完成】，完成按策略生成器创建自定义策略的操作。

### 按产品功能或项目权限创建

#### 按产品功能创建

按产品功能创建的策略，由用户设置，权限粒度可由业务接入时控制，解决对权限划分有一定要求，但并不复杂的用户诉求。

1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按产品功能或项目权限创建】，进入配置服务类型页面。
3. 在配置服务类型页面，补充策略名信息。
4. 在选择服务类型栏选择服务类型，单击【下一步】，进入开启权限页面。

>?
>
>- 可选择内容分发网络、项目管理、互动直播、队列类型、主题模型、短信。
>- 支持多选。

5. 在开启权限页面，将需要开启的功能权限开关置为 **开启状态**，并单击【下一步】，进入关联对象页面。
6. 在关联对象页面，单击【关联对象】，选择要关联的对象。
7. 单击【完成】，完成按产品功能创建自定义策略操作。

#### 按项目权限创建

按项目权限创建的策略，将具有一类项目属性的资源快速授权给用户或用户组。

1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按产品功能或项目权限创建】，进入配置服务类型页面。
3. 在配置服务类型页面，输入策略名，并在选择服务类型栏中勾选项目管理，单击【下一步】，进入开启权限页面。
4. 在开启权限页面，根据实际需求，配置项目管理功能。

 - 如果需要管理 CDN 相关项目云资源，请将 “管理 CDN 业务项目内云资源” 的 <img src="https://main.qcloudimg.com/raw/e42f187e2a90f38bbf6c832da1d680c4.png"  style="margin:0;"></img> 设置为 <img src="https://main.qcloudimg.com/raw/73f12a380082fa5a006254de729f9188.png"  style="margin:0;"></img>。
 - 如果需要管理其他产品的相关项目云资源，请将 “管理其它业务项目内云资源” 的 <img src="https://main.qcloudimg.com/raw/e42f187e2a90f38bbf6c832da1d680c4.png"  style="margin:0;"></img> 设置为 <img src="https://main.qcloudimg.com/raw/73f12a380082fa5a006254de729f9188.png"  style="margin:0;"></img>。

5. 在关联对象页面，单击【关联对象】。
6. 在弹出的关联对象框中，选择按项目选择，勾选要关联的对象，单击【确认】。
7. 单击【完成】，完成按项目权限创建自定义策略操作。

### 按策略语法创建

按语法创建的策略，由用户设置，权限粒度灵活，由用户把控，解决对权限精细划分有较高要求的用户诉求。

1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按策略语法创建】，进入选择策略模板页面。
3. 选择策略模版页面，可输入关键字进行搜索，如模版类型为全部模版，关键字为 a ，选择 AdministratorAccess 模版。
4. 单击【下一步】，进入编辑策略页面。
5. 在编辑策略页面，确认策略名称、策略内容后单击【创建策略】，完成按策略语法创建自定义策略操作。其中默认的策略名称和策略内容由控制台自动生成，策略名称默认为 "policygen"，后缀数字根据创建日期生成。

### 按标签授权

按标签授权的策略，将具有一类标签属性的资源快速授权给用户或用户组。

1. 在策略管理页面，单击左上角的【新建自定义策略】。
2. 在弹出的选择创建方式窗口中，单击【按标签授权】，进入按标签授权页面。
3. 在按标签授权页面选择以下信息，单击【下一步】，进入检查页面。

 - 赋予用户/用户组：勾选需要授权的用户/用户组。（可选其一）
 - 在标签键：选择需要授权的标签键。（必填项）
 - 且具有标签值：选择需要授权的标签值。（必填项）
 - 的资源：默认为管理权限。

4. 在检查页面，确认策略名称、策略内容后单击【完成】，完成按标签授权创建自定义策略操作。其中默认的策略名称和策略内容由控制台自动生成，策略名称默认为 "policygen"，后缀数字根据创建日期生成。
