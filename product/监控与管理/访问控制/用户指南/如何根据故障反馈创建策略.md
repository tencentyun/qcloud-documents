## 操作场景

本文档介绍如何根据无权限信息创建权限策略，创建之后子账号将在新设置的权限范围内管理主账号下的资源。


## 报错示例

当拥有 QcloudCVMReadOnlyAccess 策略的子账号尝试进行重装云服务器时将进行如下报错：
<img src="https://qcloudimg.tencent-cloud.cn/raw/f01f7e4755cdf5bd4ddc1ccb9dfa439b.png" width="800px">

如您愿意授权子账号继续进行操作，您可以根据当前报错信息为其创建并关联一个自定义策略。

## 前提条件

使用主账号或拥有访问管理全读写权限（QcloudCamFullAccess）的子账号操作。

## 操作步骤

1. 进入 CAM 的 [策略-控制台](https://console.cloud.tencent.com/cam/policy)，单击新建自定义策略。
2. 在弹出的选择创建方式窗口中，单击**按策略生成器创建**，进入编辑策略页面。
3. 在编辑策略页面，补充以下信息：[](id:3)
   ![](https://qcloudimg.tencent-cloud.cn/raw/bf9586af27838e4e6fd2295443803ea1.png)
   - **效果**（必选）：根据授权效果，选择允许还是拒绝。在本次示例中，选择「允许」。
   - **服务**（必选）：根据产品英文简称选择您要授权的产品。在本次示例中，对应报错信息的 operation 中的 「cvm」，您将从产品列表里选择「云服务器」。
   - **操作**（必选）：选择您要授权的操作。在本次示例中，对应报错信息 operation 中的「RebootInstances」。
   - **资源**（必填）：授权粒度为非资源级产品只能选择全部资源。授权粒度为资源级产品，可选择特定资源，点击添加资源六段式，填写资源前缀和资源。在本次示例中，对应报错信息的「resource」，需要对特定资源授权，选择特定资源，点击添加资源六段式，您可直接复制「qcs:id/0:cvm:ap-guangzhou:uin/10***6:instance/ins-arh4gyp2」中的前缀和资源填入。
   - **条件**（选填）：设置子账号上述授权的生效条件，其中「key」为条件键，「ope」为运算符，「value」为条件值。本次示例中，条件键（key）为「qcs:request_tag」，运算符(ope)为「for_all_value:string_equal」，条件值（value）为「server&1024","a&b"」。
4. 单击**下一步**，进入关联用户/用户组页面。
5. 在关联用户/用户组页面，补充策略名称、描述，其中策略名称由控制台自动生成。
> ? 
> - 策略名称默认为 "policygen" ，后缀数字根据创建日期生成。您可进行自定义。
> - 描述与 [步骤3](#3) 的服务和操作对应，您可根据实际需求进行修改。
> 
6. 单击**完成**，完成按策略生成器创建自定义策略的操作。
7. 参考 [通过策略关联用户](https://cloud.tencent.com/document/product/598/10602#.E9.80.9A.E8.BF.87.E7.AD.96.E7.95.A5.E5.85.B3.E8.81.94.E7.94.A8.E6.88.B7.2F.E7.94.A8.E6.88.B7.E7.BB.84) 为子账号授权，授权成功后，子账号将获得相应的权限，解除故障。
