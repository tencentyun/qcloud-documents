当您需要定期执行压测任务时，可以使用定时压测功能。定时压测可以指定压测任务的执行时间、频率、通知对象等。本文将介绍如何使用定时压测功能，帮助您快速上手，发起定时压测。

## 使用前提
- 为了确保压测任务的可行性，您需提前创建并调试了您的测试场景，详情可参见 [相关操作指引](https://cloud.tencent.com/document/product/1484/68208)。
- 提前 [新建告警联系人](https://console.cloud.tencent.com/pts/alarm/notice)，告警联系人用于在压测任务启动和结束时的通知。


## 使用限制
在使用定时压测功能之前，您需要知悉定时压测的使用限制：
- 一个测试场景只能用于一个定时压测任务。建议您单独为定时压测创建场景。
- 已经用于定时压测任务的测试场景不可再编辑，只有删除该定时压测任务后，场景的限制才会解除。

## 操作指南
1. 登录 [ 性能测试服务控制台](https://console.cloud.tencent.com/pts)。
2. 在左侧导航栏中选择 **定时压测** > **创建定时任务**。
3. 进入新建定时任务页面，根据下列描述配置定时压测任务。
![](https://qcloudimg.tencent-cloud.cn/raw/ddc1a70120240b6b9598b046aa4f97eb.png)
<table>
   <tr>
      <th width="0%" >配置项</td>
      <th width="0%" >说明</td>
   </tr>
   <tr>
      <td>任务名称</td>
      <td>自定义定时任务名称</td>
   </tr>
   <tr>
      <td>关联场景</td>
      <td>选择您需要关联的场景名称</td>
   </tr>
   <tr>
      <td>执行频率</td>
      <td>支持执行一次，日粒度（每个月的某日执行），周粒度（每周的星期几执行），高级配置（若前三种方式无法满足您的需求，您可以使用 cron 表达式来定义执行频率），详情可参见 <a href="#span1">执行频率介绍</a>。</td>
   </tr>
   <tr>
      <td>告警联系人</td>
      <td>选择对应的告警联系人，若无可进入 <a href="https://console.cloud.tencent.com/pts/alarm/notice">告警联系人</a> 页面进行创建，用于接收压测任务启动和结束相关的通知。</td>
   </tr>
</table>
4. 创建完后您可以在定时压测任务列表。查看定时压测任务的基本信息，包括关联的测试场景、以文字形式描述的执行频率、任务状态等。
![](https://qcloudimg.tencent-cloud.cn/raw/a1701d2a448bafb70edb8cfcd1e500d9.png)
 -  若您想要快速找到某一个定时压测任务，可以通过排序或任务名称模糊搜索实现。
 -  若您想要查看已经执行的压测任务的报表，可以点击对应场景快速跳转到报表界面。

## 执行频率介绍
- **执行一次**：您需要选择压测任务执行的时间，且该时间必须大于当前时间。定时压测任务会在指定时间运行一次压测任务，并将状态更新为已完成。
- **日粒度**：如果您想在每个月的某些天执行一次压测任务，可以选择日粒度，如图选择2号、4号的16:35，则定时压测任务会在每个月2号和4号的16:35执行一次压测任务。另外，您可以填写**结束时间**（可不填），定时压测任务会在到达结束时间时更新状态为已完成。
- **周粒度**：如果您想在每周的某些天执行一次压测任务，可以选择周粒度。
- **高级配置**：如果前三种方式都没法满足您的需求，那您可以直接使用 cron 表达式来定义执行频率（cron 表达式的介绍放在下一节），在您填写 cron 表达式的过程中，我们会检查您的表达式是否正确，这能辅助您正确填写。如果填写正确，我们会展示前5次执行的时间，方便您检查该表达式是否符合您的需求。


## cron 表达式
- 只能选择按照日或者周，指定执行压测时间。 日和周只能二选一，指定日或周之后，另外一个输入框内必须填写 ?，表示不受限制。
- 只能使用英文符号，不能使用中文符号（若您认为填写正确，但提示填写错误，可以检查  * 和?是否是英文）。
- 表示多个值时，使用英文逗号连接。例如， 日输入框中填写 1,5 表示每月一号和五号。
- 表示区间值时，用短横线连接。例如， 日输入框中填写 1-5 表示每月一号至五号。
- 表示指定频率时，使用斜杠连接。例如， 日输入框中填写 */2 表示每隔两天。

**示例：**
- 每隔10分钟执行一次。
![](https://qcloudimg.tencent-cloud.cn/raw/14fe4c11ca3fa8cd831c8672d4b63feb.png)
- 每个月一号至五号的2点和8点每隔半小时执行一次。详情可看图中的最近5次执行时间。
![](https://qcloudimg.tencent-cloud.cn/raw/948074579d1d0aa5e0ffeef7a37440d0.png)


