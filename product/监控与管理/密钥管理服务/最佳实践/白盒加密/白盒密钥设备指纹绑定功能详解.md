## 概述

设备指纹是从物理主机上提取的关于硬件设备的唯一性标识，如同人的指纹一样，不同的设备具备不同的设备指纹。

白盒密钥支持对设备指纹的集成，实现白盒密钥和指定的一个或一组设备的绑定，使得解密操作只能在已经建立绑定关系的设备上运行，从而进一步加固保护敏感信息的安全性。

## 操作步骤

1. 管理员进入 [密钥管理系统](https://console.cloud.tencent.com/kms2/whitebox) 用户密钥管理页面。
2. 单击【下载设备指纹采集工具】，将弹出下载采集工具对话框，根据需进行绑定的设备操作系统的类型，单击【下载】，即可下载相应的设备指纹采集工具。
![](https://main.qcloudimg.com/raw/3f0046a8b298670a2469d1d174093f8e.jpg)
3. 管理员将设备指纹采集工具分发给系统运维人员，并告知需要采集指纹的设备。
4. 系统运维人员登录相应设备的操作系统，运行设备采集工具，进行设备指纹采集，如下图所示：                   
 ![](https://main.qcloudimg.com/raw/5cffd4eb6bb33454f1dc797cb7d6e1f7.png)
>!设备指纹采集工具只支持 Windows，Linux 操作系统，并且需要在宿主操作系统上运行，目前支持物理机，腾讯云CVM，不支持 Docker 环境。
5. 系统运维人员将采集到的设备指纹列表给到管理员。
>?根据实际的应用场景和权限控制策略，系统运维人员和控制台管理员可以是同一个人。
6. 管理员在 [密钥管理系统](https://console.cloud.tencent.com/kms2/whitebox) 用户密钥管理页面，选择要绑定指纹的白盒密钥。
	- 如果是新创建的白盒密钥或者未绑定过设备指纹，则单击【新增设备指纹】。
	- 如果已绑定过设备指纹，则单击【管理设备指纹】。![](https://main.qcloudimg.com/raw/5d0c894e066915cfda5a2dea8e7a466d.jpg)
7. 在弹出的对话框中，输入搜集到的设备指纹，并提供每个设备指纹的描述信息。这里，有如下两种录入方式：
 - 单击【新增设备指纹】，直接在页面上录入：
		![](https://main.qcloudimg.com/raw/c1d9196dc60ae9c793654ec910e6cd0a.jpg)
 - 单击【下载批量上传导入模板】，在下载的 CSV 文件中录入，录入后，保存文件。单击【批量上传】，选择保存的 CSV 文件，将指纹信息批量上传。
CSV 文本内容示例：
```plaintext
设备指纹,描述
123456,test description
```
8. 完成录入后，单击【确定】，即可实现白盒密钥与指定设备指纹列表的绑定。
9. 完成设备指纹绑定后，在非绑定设备上运行解密操作会出现报错，错误码为 01000016，如下图所示：
![](https://main.qcloudimg.com/raw/1daffff932bf43647301a32066a8785c.png) 



## 注意事项

1. 设备绑定是一种对白盒密钥功能的加强操作，属于可选操作。
 - 若未进行设备绑定，那么白盒解密操作可以在任意设备上执行。
 - 若进行了设备绑定，那么白盒解密操作只能在已绑设备上才能正确执行。
2. **设备指纹绑定操作必须在下载解密密钥操作之前执行**，否则设备指纹绑定不会生效。
3. 设备指纹采集工具只支持 Windows，Linux 操作系统，并且需要在宿主操作系统上运行，目前支持物理机，腾讯云CVM，不支持 Docker 环境。
