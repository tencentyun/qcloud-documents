本文主要介绍如何创建、删除告警策略和设置默认告警策略。

## 应用场景

您可以针对云监控支持的云产品资源设置性能消耗类指标的阈值告警，也可以针对云产品实例或平台底层基础设施的服务状态设置事件告警，在发生异常时及时通知您采取措施。告警策略包括名称、策略类型和告警触发条件、告警对象、告警渠道五个必要组成部分。您可以根据以下指引进行告警策略的创建。

## 操作步骤

### 创建告警策略

1. 登录 [云监控控制台](https://console.cloud.tencent.com/monitor)。
2. 单击**告警配置** > **告警策略**，进入告警策略配置页面。
3. 单击**新增**，配置告警策略，配置说明如下。
   ![](https://main.qcloudimg.com/raw/fb110f55cb5caf90df1a1d893931e059.png)
<table>
	<tr>
		<th>配置类型</th>
		<th width="18%">配置项</th>
		<th>说明</th>
	</tr>
	<tr>
		<td  rowspan="5"> 基础配置</td>
		<td>策略名称</td>
		<td>自定义策略名称</td>
	</tr>
	<tr>
		<td>备注</td>
		<td>自定义策略备注</td>
	</tr>
	<tr>
		<td>策略类型</td>
		<td>选择您需要监控的云产品策略类型</td>
	</tr>
	<tr>
		<td>所属项目</td>
		<td>所属项目有以下两个作用：<br>   
         <ul>
             <li>管理告警策略。设置所属项目后，您可以在告警策略列表快速筛选该项目下的告警策略。</li>
             <li>管理实例。根据需求选择项目，在告警对象中可快速选择该项目下的实例。您可以根据您的业务类型把云产品分配到各个项目。如需创建项目，请参见 <a href="https://cloud.tencent.com/document/product/378/10861"> 项目管理 </a>创建项目后，可在各云产品控制台中为各云产品资源分配项目，部分云产品不支持分配项目。（例如，云数据库 MySQL 可参考 <a href="https://cloud.tencent.com/document/product/236/8460"> 为实例指定项目 </a>指引把实例分配到对应的项目），若您没有项目权限，请参考 <a href=" https://cloud.tencent.com/document/product/248/45428 "> 访问管理 </a> 授予权限。</li></td>   
	</tr>
	<tr>
		<td>告警对象</td>
		<td>
			<ul>
			   <li>选中全部对象，则该告警策略绑定当前账号拥有权限的全部实例。</li>
               <li>选中选择部分对象，则该告警策略绑定用户选中的实例。</li>
               <li>选中选择实例组，则该告警策略绑定用户选中的实例分组。</li>
           </ul>
        </td>
	</tr>
	<tr>
		<td rowspan="3">告警触发条件</td>
		<td>配置触发条件<br>（指标告警）</td>
		<td>
			<ul>
				<li>告警触发条件:指标、比较关系、阈值、统计粒度和持续周期组成的一个有语义的条件。<br>例如，指标为 CPU 利用率 、比较关系为> 、阈值为80% 、统计粒度为5分钟 、持续周期为2个周期。<br>表示：每5分钟收集一次 CPU 利用率数据，若某台云服务器的 CPU 利用率连续三次大于80%则触发告警。
				</li>
		<li>告警频率：您可以为您的每一条告警规则设置重复通知策略。即当告警产生时，您可以定义告警以特定的频率重复通知。<br>可选：不重复、5分钟、10分钟、周期指数递增...等重复频率。<br><ul><li type="square">周期指数递增的含义是当该告警第1次、第2次、第4次、第8次...第2的 N 次方次被触发时，向您发送告警信息。意义是告警信息发送时长间隔将越来越长，一定程度上避免重复告警对您的骚扰。 </li>
			<li>重复告警默认逻辑：告警产生后的24小时内，将按您设定的重复通知频率重复给您发送告警信息。告警产生满24小时，将默认切换为1天通知1次的策略进行重复通知。</li></ul></li>
	    </ul></td>
	</tr>
	<tr>
		<td>配置触发条件<br>（事件告警）</td>
		<td>在云产品资源或底层基础设施服务发生异常时，可以创建事件告警及时通知您采取措施。详情请查看<a href="https://cloud.tencent.com/document/product/248/14361">  事件中心</a>。</td>
	</tr>
	<tr>
		<td>触发条件模板</td>
		<td> 开启触发条件模板，并在下拉列表选择已配置的模板，具体配置请参阅 <a href="https://cloud.tencent.com/document/product/248/18474">配置触发条件模板 </a>。若新建的模板没有显示，则单击右侧的**刷新**，即可刷新触发告警模板选择列表</td>
	</tr>
   <tr>
        <td rowspan="3">告警渠道</td>
        <td>接收对象</td>
        <td>根据您的需求配置接收组或接收人。若您没有绑定接收对象权限，请参考 <a href=" https://cloud.tencent.com/document/product/248/45428 "> 访问管理</a>  授予权限。</td>
    </tr>
    <tr>
    	<td>有效时间段</td>
    	<td>您可以自定义告警通知有效时间，默认为全天有效（即 00:00:00 - 23:59:59）。</td>
    </tr>
    <tr>
    	<td>接收渠道</td>
    	<td>支持邮件、短信、微信接收渠道。
    		<ul>
    			<li>在配置邮件、短信接收渠道前请在 <a href="https://console.cloud.tencent.com/cam" > 访问管理 </a> 控制台确认您的邮箱、短信是否验证，若未验证则无法接收到告警通知。每个告警类型、每用户、每月为1000条免费短信配额，超量后将无法收到短信告警，可参考
    				<a href="https://cloud.tencent.com/document/product/248/17706"> 短信渠道</a> 指引购买短信。
    			</li>
    			<li>选择微信告警渠道，需进行微信渠道验证请参考<a href="https://cloud.tencent.com/document/product/248/17707"> 微信渠道 </a>。</li>
    		</ul>
    		</td>
     </tr>
     <tr>
     	<td>接口回调</td>
     	<td align="center">-</td>
     	<td>通过回调接口，您的系统可以直接收到腾讯云的告警通知，详情请参考<a href="https://cloud.tencent.com/document/product/248/9066"> 回调接口</a>。</td>
     </tr>
</table>
4. 配置完以上信息后单击**保存**，即成功创建告警策略。
> ?云服务器告警需要云服务器实例 [安装监控控件](https://cloud.tencent.com/document/product/248/6211) 上报监控指标数据后才能正常发送告警。在云产品监控页面可以查看未安装监控 agent 的云服务器，并下载 IP 列表。


### 删除告警策略

> ?告警策略列表中**已启用/实例数**字段展示该告警策略已经 [关联的告警对象](/doc/product/248/6216) 个数。若已应用数值非0，则不可删除该策略，解除所有告警对象与该策略关联后，才可删除该策略。

**情况一：告警策略未绑定实例。** 

在告警策略列表中，直接单击**删除**即可。
   ![](https://main.qcloudimg.com/raw/4180fac37392cdde227e3a12d26482d5.png)

**情况二： 告警策略已绑定实例。** 

1. 在告警策略列表中，单击您需要删除的告警策略名，进入告警策略管理页。
2. 在告警对象中单击**全部解除**，在弹框中确认解除。（如有多地域需重复执行该步骤，直到所有地域所有实例解除完）。
	 ![](https://main.qcloudimg.com/raw/5bd2e4960f8c87fd56510443006f5fb6.png)
3. 所有实例解除成功后，返回告警策略列表页，单击**删除**即可。

### 默认告警策略

目前默认策略仅支持云服务器-基础监控、云数据库 MongoDB、云数据库-Mysql-主机监控、云数据库 Redis、云数据库-CynosDB-MySQL、云数据库-CynosDB-PostgreSQL、消息服务CKafka-实例、Elasticsearch服务 。

- 当您首次成功购买默认策略支持的云产品，云监控会为您自动创建默认告警策略。如需了解默认策略支持的指标/事件或告警规则，请参见 [云产品默认策略说明](#step1)。
- 您也可以手动创建告警策略，设为默认告警策略。设置成功后新购买的实例会自动关联默认策略，无需您手动添加。
  ![](https://main.qcloudimg.com/raw/3e22de8d2e823fd8aba8445f9c78cd8a.jpg)



> ?每种策略类型每个项目仅有一个默认策略。

设置为默认的告警策略不可删除。

  [](id:step1)

  云产品默认策略说明如下：

  <table>
  	<tr>
  		<th>产品名称</th>
  		<th>告警类型</th>
  		<th>指标/事件名称</th>
  		<th>告警规则</th>
  	</tr>
  	<tr>
  		<td rowspan="5">云服务器</td>
  		<td rowspan="4">指标告警</td>
  		<td>CPU 利用率</td>
  		<td>统计粒度为1分钟；阈值为>95%；持续周期为5个周期</td>
  	</tr>
  	<tr>
  		<td>内存利用率</td>
  		<td>统计粒度为1分钟；阈值为>95%；持续周期为5个周期</td>	
  	</tr>
  	<tr>
  		<td>磁盘利用率</td>
  		<td>统计粒度为1分钟；阈值为>95%；持续周期为5个周期</td>	
  	</tr>
  	<tr>
  		<td>外网带宽利用率</td>
  		<td>统计粒度为1分钟；阈值为>95%；持续周期为5个周期</td>	
  	</tr>
  	<tr>
  		<td>事件告警</td>
  		<td>磁盘只读</td>
  		<td>-</td>
  	</tr>
  	<tr>
  		<td rowspan="3">云数据库<br> Mysql-主机监控</td>
  		<td rowspan="2">指标告警</td>
  		<td>磁盘利用率</td>
  		<td>统计粒度为1分钟；阈值为>80%；持续周期为5个周期</td>
  	</tr>
  	<tr>
  		<td>CPU 利用率</td>
  		<td>统计粒度为1分钟；阈值为>80%；持续周期为5个周期</td>
  	</tr>
  	<tr>
  		<td>事件告警</td>
  		<td>内存OOM</td>
  		<td>-</td>
  	</tr>
  	    <td rowspan="2">云数据库<br>MongoDB</td>
  	    <td rowspan="2">指标告警</td>
  	    <td>磁盘使用率</td>
  	    <td>统计粒度为1分钟；阈值为>80%；持续周期为5个周期</td>
      </tr>
      <tr>
      	<td>连接使用率</td>
      	<td>统计粒度为1分钟；阈值为>80%；持续周期为5个周期</td>
      </tr>
      <tr>
      	<td nowrap="nowrap">云数据库<br>Redis-CKV 版本/社区版</td>
      	<td>指标告警</td>
      	<td>容量使用率</td>
      	<td>统计粒度为1分钟；阈值为>80%；持续周期为5个周期</td>
      </tr>
      <tr>
      	<td rowspan="2">云数据库<br> CynosDB-MySQL</td>
      	<td rowspan="2">事件告警</td>
      	<td>内存 OOM</td>
      	<td rowspan="2">-</td>
      </tr>
      <tr>
      	<td>实例只读（硬盘超限）</td>
      </tr>
          <td rowspan="2">云数据库<br>CynosDB-PostgreSQL</td>
          <td rowspan="2">事件告警</td>
          <td>内存不足</td>
          <td rowspan="2">-</td>
      </tr>
      <tr>
      	<td>内存OOM</td>
      </tr>
      <tr>
          <td>消息服务<br> CKafka-实例</td>
          <td>指标告警</td>
      	<td>磁盘使用百分比</td>
      	<td>统计粒度为1分钟；阈值为>85%；持续周期为5个周期</td>
      </tr>
      <tr>
      	<td rowspan="4">Elasticsearch 服务</td>
      	<td rowspan="4">指标告警</td>
      	<td>平均磁盘使用率</td>
      	<td>统计粒度为1分钟；阈值为>80%；持续周期为5个周期</td>
     </tr>
     <tr>
     	    <td>平均 CPU 使用率</td>
     	    <td>统计粒度为1分钟；阈值为>90%；持续周期为5个周期</td>
     </tr>
     <tr>
     	    <td>平均 JVM 内存使用率</td>
     	    <td>统计粒度为1分钟；阈值为>85%；持续周期为5个周期</td>
     </tr>
     <tr>
     	    <td>集群健康状态</td>
     	    <td>统计粒度为1分钟；阈值为>=1；持续周期为5个周期</td>
     </tr>
  </table>
