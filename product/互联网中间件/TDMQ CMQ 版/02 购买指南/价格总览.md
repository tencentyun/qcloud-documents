本章节主要介绍消息队列 CMQ 版的各计费项的定价详情和免费说明。

## 按量计费

[](id:API)
### API 调用价格

消息队列 CMQ 版对 API 调用实行线性计价。**API 调用费用 =（发送消息 API 调用次数 + 消费消息 API 调用次数 + 消息确认调用次数）× API 调用单价**。

API 调用单价（单位：元/百万次调用）如下表所示：

<table><tr>
<th rowspan="2"><nobr>地域</nobr></th>
</tr><tr>
<th>广州、上海、南京、北京、成都</th>
<th>中国香港、新加坡、首尔、东京、硅谷、多伦多、法兰克福、弗吉尼亚、莫斯科</th>
<th>深圳金融、北京金融、上海金融</th>
</tr><tr>
<td>单价（元 /百万次）</td>
<td>2.00</td>
<td>2.60</td>
<td>3.20</td>
</tr>
</table>



消息体大小最大限制为1MB，根据消息的大小以不同的倍率计算 API 调用次数：

| 消息大小         | 倍率 |
| :--------------- | :--- |
| N ≤ 2KB          | 1    |
| 2KB < N ≤ 4KB    | 2    |
| 4KB < N ≤ 16KB   | 4    |
| 16KB < N ≤ 100KB | 16   |
| 100KB < N ≤ 1MB  | 64   |

例如：一次 10KB 的消息请求（发布或订阅），将以**4次** API 调用次数计算费用。

>? 如果是使用批量发送/消费，则会按照批量发送的消息条数分开计算。例如批量发送10条消息，每条2KB大小，则计算为10 × 2 = 20次 API 调用次数


[](id:msg)
### 消息存储价格

>? 消息回溯功能将于7月18日开始计费。

消息队列 CMQ 版对开启了消息回溯的队列所设定的消息存储上限实行线性计价，消息回溯功能详情请参见 [消息回溯](https://cloud.tencent.com/document/product/1496/61018)。**消息存储费用 = 消息回溯所设定的存储大小 × 消息副本数 × 消息存储单价**。

消息存储单价（单位：元/GB/小时）如下表所示：

| 地域               | 广州、上海、南京、北京、成都 | 中国香港、新加坡、首尔、东京、硅谷、多伦多、法兰克福、弗吉尼亚、莫斯科 | 深圳金融、北京金融、上海金融 |
| :----------------- | :--------------------------- | :----------------------------------------------------------- | :--------------------------- |
| 单价（元/GB/小时） | 0.0025                       | 0.0027                                                       | 0.0053                       |

消息副本数默认为3，暂不支持调整。

例如：广州地域创建的队列A的消息对业务十分重要，开启了消息回溯，设定了10GB的消息回溯空间，则在接下来1天内产生的费用为 0.0025 × 3 × 10 × 24 = 1.8 元

>?
>- 如果队列不开启消息回溯功能，则不产生消息存储的费用。
>- 无论实际产生了多大的存储，均按照设定的存储大小上限进行计费。


[](id:resource)
### 队列/主题资源占用价格

消息队列 CMQ 版对超出免费额度部分的分区主题资源占用实行线性计价。**队列/主题资源占用费用 = （队列数 + 主题数） × 资源占用单价**。

队列/主题资源占用单价（单位：元/个/天）如下表所示：

| 地域             | 广州、上海、南京、北京、成都 | 中国香港、新加坡、首尔、东京、硅谷、多伦多、法兰克福、弗吉尼亚、莫斯科 | 深圳金融、北京金融、上海金融 |
| :--------------- | :--------------------------- | :----------------------------------------------------------- | :--------------------------- |
| 单价（元/个/天） | 2.00                         | 2.60                                                         | 3.20                         |

>!消息队列 CMQ 版对队列/主题资源占用进行计费时，计费周期为天，即一个自然日内任何时刻创建的队列或主题资源，实际使用时长不足24小时的，也将在下一个自然日收取一天的费用。


## 免费说明

消息队列 CMQ 版对按量付费项目提供一定额度的免费服务。每个主账号在每个地域下所有按量计费的队列和主题拥有以下免费使用额度：

| 免费项            | 免费额度 | 累计方式       |
| :---------------- | :------- | :------------- |
| API调用           | 1000万次 | 分地域按月累计 |
| 消息存储          | 10GB     | 分地域按月累计 |
| 队列资源占用（新品优惠期间） | 50个    | 分地域 |
| 主题资源占用（新品优惠期间） | 50个    | 分地域 |

免费额度会优先抵扣每个主账号每个地域下各集群的累计用量，相同地域的不同队列/主题之间共享额度。
>? 新品优惠期过后，队列资源占用和主题资源占用将恢复为各5个(分地域)。


