## 概述

**弹性伸缩含义**：根据预先设定的弹性伸缩规则，动态增加或者减少部署组的实例数量。

**弹性伸缩规则**：由规则名、扩容活动、缩容活动、冷却时间等参数构成的规则，用来描述弹性扩缩容的触发条件、实例数量变化和限制。

**弹性伸缩指标**：

| 指标 | 说明 |
|---------|---------|
| CPU 利用率 | 在指定时间范围内，部署组内所有实例 CPU 利用率的平均值。|
| 内存利用率 | 在指定时间范围内，部署组内所有实例内存利用率的平均值。|
| 请求 QPS | 在指定时间范围内，部署组内所有实例请求 QPS 的平均值。|
| 响应时间 | 在指定时间范围内，部署组内所有实例响应时间的平均值。|

**冷却时间**：设置冷却时间，可以确保在上一扩（缩）容活动生效前弹性伸缩不会启动或终止其他实例。弹性伸缩会等待冷却时间完成，然后再继续扩（缩）容活动。建议设置冷却时间大于持续时间。

## 新建规则
>!
>- 请勿同时开启容器平台的弹性伸缩，可能会导致 TSF 的弹性伸缩规则被容器平台的弹性伸缩规则覆盖, 导致 TSF 弹性伸缩规则生效后实际结果不符合预期。
- 集群中存在超级节点时，当用户需要配置被动触发弹性时，可以使用 TSF 页面的弹性伸缩能力。当用户希望进行定时扩缩容的时候，建议通过 HPC/HPA 进行配置。


1. 登录 [TSF 控制台](https://console.cloud.tencent.com/tsf)。
2. 在左侧导航单击**弹性伸缩**，选择好地域后单击**新建规则**，填写弹性伸缩规则内容。
   - **规则名**：填写规则名称，最长为60个字符。
   - **扩容活动**：满足**任一**触发条件，将触发扩容操作。
     - 触发条件：由指标（CPU 利用率、内存利用率、请求 QPS 和响应时间），阈值和持续时间构成。多条触发条件为逻辑或（OR）的关系，满足任一条件，将触发扩容操作。
     - 增加实例数：每次部署组的指标达到了触发条件后，增加的实例数量。
     -  最大实例数：部署组的实例数量上限。
   - **缩容活动**：满足**全部**触发条件，将触发缩容操作。
     - 触发条件：由指标（CPU 利用率、内存利用率、请求 QPS 和响应时间），阈值和持续时间构成。多条触发条件为逻辑与 AND 的关系，必须同时满足才能触发缩容操作。
     - 减少实例数：每次部署组的指标达到了触发条件后，减少的实例数量。
     - 最小实例数：部署组的实例数下限。
   - **冷却时间**：冷却时间是指在同一个伸缩组内，一个伸缩活动（添加或移出实例）执行完成后的一段锁定时间，在这段时间内，该伸缩组不执行伸缩活动。建议设置冷却时间大于持续时间，如持续时间设置1分钟，冷却时间设置5分钟。
   - **标签**：用于分类管理资源，可不选。详情参见 [标签](https://cloud.tencent.com/document/product/649/53869)。
   - **数据集**：用于细粒度管理子账号权限，可不选。数据集使用，请参阅 [数据集管理](https://cloud.tencent.com/document/product/649/38326)。
3. 单击**提交**，完成规则创建。
![](https://qcloudimg.tencent-cloud.cn/raw/731349c5a4a789648c851bbfc4fad934.png)

## 关联部署组

创建弹性伸缩规则后，需要将规则关联到部署组上并开启规则才能生效。

1. 在 [弹性伸缩](https://console.cloud.tencent.com/tsf/scalable) 列表页面，单击目标规则操作栏的**关联部署组**。
2. 在关联部署组页面，选择应用后勾选要关联的部署组。
3. 在关联部署组页面左下方，选择是否立刻开启规则。如果选择开启，则规则会在部署组上立刻生效，否则将不生效。用户可以后续在规则详情页的**关联部署组** tab 页中修改启用状态。

## 解除规则和部署组的关联

1. 在 [弹性伸缩](https://console.cloud.tencent.com/tsf/scalable) 列表页面，单击目标规则的“ID”进入详情页，单击**关联部署组**页签。
2. 在关联部署组列表右侧操作栏，单击**删除**，**确认**解除规则和部署组的关联。

## 删除规则

删除弹性伸缩规则前需要解除规则和部署组的关联，否则无法删除。

在 [弹性伸缩](https://console.cloud.tencent.com/tsf/scalable) 列表页面，单击目标规则操作栏的**删除**，**确认**后即可删除规则。

## 编辑规则

在 [弹性伸缩](https://console.cloud.tencent.com/tsf/scalable) 列表页面，单击目标规则操作栏的**编辑**，修改规则后单击**提交**即可完成规则的修改。
