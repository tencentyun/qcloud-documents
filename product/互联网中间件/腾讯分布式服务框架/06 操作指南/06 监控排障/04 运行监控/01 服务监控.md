## 操作场景

服务监控用于查看特定时间范围内某命名空间下所有微服务的运行状态，并且根据微服务的监控指标初步判断是否出现异常。

服务监控支持监控以下指标：

- 请求量
- 错误率
- 响应耗时
- 响应耗时分布
- HTTP 状态码
- Top 接口
- 吞吐量
- Apdex 



## 功能入口

1. 登录 [TSF 控制台](https://console.cloud.tencent.com/tsf/index)。
2. 在左侧菜单栏中，单击**服务监控**，选择好时间范围和命名空间，维度选择**服务**，可查看当前筛选条件下所有服务的监控图表信息。
<dx-alert infotype="explain" title="">
您可以单击命名空间下方的➕，收藏您常用的命名空间，后续可快速查看命名空间中的服务监控信息。
</dx-alert>

![](https://qcloudimg.tencent-cloud.cn/raw/6ad2327a19fba6a638680f4e2c6c4fca.png)

在服务维度区域，您可以执行以下操作：

 - 查看所选命名空间下的总服务数，在线服务数和异常服务数。
 - 将鼠标放在接口卡片的服务名称上，单击右上角的![](https://qcloudimg.tencent-cloud.cn/raw/6bc0a1003da8cb84026fa5ce8b7e2f11.png)将该接口卡片置顶。
 - 开启**仅显示异常**按钮，筛选出**服务离线+服务错误率大于5%**的服务。
 - 按照**请求量**、**耗时**或**错误率**维度对服务图表进行排序。
 - 通过关键词搜索特定微服务。
 - 当某个服务的请求量，请求错误率，响应耗时等指标出现异常时，单击该服务卡片查看详细的监控信息。





### 设置自定义参数

您可以为应用配置自定义指标规则，当应用监控获取到的相应业务参数超过设置的阈值时，会根据设置的规则显示为异常状态或者标红示警。

支持设置的指标如下。

- Apdex 参数
  - 慢调用阈值
  - 错误调用阈值
- 异常定义
  - 服务异常时错误率
- 平均响应耗时定义
  - 慢响应阈值
  - 极慢响应阈值

在服务监控页面，单击右上角的![](https://qcloudimg.tencent-cloud.cn/raw/97302e158516f2a8f5a34f4e51c5618e.png)图标，设置好指标阈值和生效范围（针对所选命名空间下的所有服务生效)后单击**提交**，系统将根据设置的阈值判定参数是否异常。

> ?填写不同阈值之后，影响服务监控大盘和依赖分析图的颜色展示。

![](https://qcloudimg.tencent-cloud.cn/raw/ddeb04d850dfb329ea0254d923ccf5c7.png)







### 查看服务概览信息

在服务详情页面顶部，可以查看服务在选定时间范围内的调用总数、调用频率、错误率、平均响应耗时和最大调用延时等指标的统计数据。

![](https://qcloudimg.tencent-cloud.cn/raw/d2b59de906012a9c768de4cc197608f6.png)

### 查看服务监控信息

在服务监控页签下选择**监控**，可查看所选时间范围内服务的请求量、错误率、响应耗时、响应耗时分布、HTTP 状态码、Top 接口、吞吐量和 Apdex 等指标的监控信息。

- 请求量
- 错误率
- 响应耗时：响应耗时中 p95 代表线上95%的请求耗时都小于某个时间。
- 响应耗时分布：将鼠标放在散点图上，框选图表可查看请求详情。
- HTTP 状态码
- Top 接口
- 吞吐量
- Apdex ：详细释义参见 [服务依赖拓扑](https://cloud.tencent.com/document/product/649/15544#.E5.8F.AF.E8.A7.86.E5.8C.96.E5.8F.82.E8.80.83) 文档。
> ?成功请求为响应码为： "success"、"200"、"201"、"202"、"203"、"204"、"205"、"206"、"207"、"208"、"300"、"301"、"302"、"303"、"304"、"305"、"306"、"307"、"308"、"100"、"101"、"102" 的请求，其他响应码的请求被认为是错误请求。
>

![](https://qcloudimg.tencent-cloud.cn/raw/4dff5567d98009826a6fca8644840dd6.png)

在每个监控曲线区域，您可以进行以下操作：

- 您可以将光标移到曲线上，查看具体时刻的监控数据。
- 您可以单击每条曲线右上角的![img](https://main.qcloudimg.com/raw/7d2ae79ec8e992ec9252d909e74423e9.png)添加多时段数据对比。

### 查看服务统计信息

在服务监控页签下选择**统计**，可查看该服务的请求量、错误率、响应耗时和 HTTP 状态码等监控指标的统计信息。

![](https://main.qcloudimg.com/raw/f03c0fcab5ae09703aa47764580253d9.png)
