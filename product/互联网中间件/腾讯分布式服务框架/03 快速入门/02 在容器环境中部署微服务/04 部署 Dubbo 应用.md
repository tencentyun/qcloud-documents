## 操作场景

Dubbo 应用使用 TSF Atom-SDK 框架接入，支持 TSF 全栈服务治理、应用配置管理能力。如果您想了解如何实现微服务应用的相关功能，请参见 [Dubbo 应用开发](#building)。

为了帮助您快速体验如何在 TSF 中部署微服务应用，TSF 提供了一对应用 Demo，包含一个 provider 应用和一个 consumer 应用。本文以一个示例介绍如何在虚拟机环境中部署 Dubbo 普通应用。



## 前提条件

- 已参见 [快速创建一个容器集群](https://cloud.tencent.com/document/product/649/55505) 创建好一个虚拟机集群并导入云主机。
- 已下载并解压 [Demo](https://tsf-doc-attachment-1300555551.cos.ap-guangzhou.myqcloud.com/%E5%85%AC%E6%9C%89%E4%BA%91/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/tsf-dubbo-demo.zip)。

[](id:building)
## 操作步骤

[](id:step1)
### 步骤1：新建应用

1. 在左侧导航栏，单击**应用管理**，进入应用列表页。
2. 在应用列表上方单击**新建应用**。
3. 设置应用信息，单击**提交**。
   ![](https://qcloudimg.tencent-cloud.cn/raw/39b75760661b9f08df54f035a0efdae3.png)
   - **应用名**：填写 provider。
   - **部署方式**：选择 **容器部署**。
   - **业务类型**：选择 **业务应用**。
   - **开发语言**：选择 **JAVA**。
   - **开发框架**：选择 **Dubbo**。
   - **应用类型**：选择 **普通应用**。
   - **标签**：用于分类管理资源，可不选。详情参见 [标签](https://cloud.tencent.com/document/product/649/53869)。
   - **数据集**：选择“无”。用户可以通过数据集管理配置不同的子账号和协作者使用不同资源的权限，详情参阅 [数据集管理](https://cloud.tencent.com/document/product/649/38326)。
   - **备注**：选填，可留空。
4. 在弹出的弹窗中单击**确认**，前往上传镜像并部署应用。
   ![](https://main.qcloudimg.com/raw/761b87560d72e3a9e4b00a0d3b05a3b3.png)


[](id:step2)
### 步骤2：上传镜像

1. 在镜像标签页面，单击**上传程序包/镜像**。
2. 在个人仓库上传程序包页面，上传程序包。
   - 文件上传方式：选择**JAR包部署**。
   - 上传程序包：单击**选择文件**，选择提前准备好的 Demo 中的 provider 的 jar 程序包。
   - 程序包版本：填写版本号，或单击**用时间戳作为版本号**。
   - 备注：填写备注。
3. 单击**上传程序包并制作镜像**，我们将自动为您制作镜像并上传到镜像仓库，右上角将出现任务进行的状态。
4. 任务完成后，在镜像标签页的镜像列表中将看到上传好的镜像。
![](https://qcloudimg.tencent-cloud.cn/raw/2a04d4c9973aaa44ce0b1c877ba8b7d2.png)



### 步骤3：部署应用

1. 在应用列表中，单击在 [步骤1. 新建应用](#step1) 中创建的应用的 “ID”。
2. 在部署组页面，单击**新建部署组**，设置部署组相关信息。
   - **组名**：部署组的名称。
   - **集群**：选择提前创建好的集群。
   - **命名空间**：选择集群关联的默认命名空间。
   - **日志配置项**：用于采集应用的业务日志数据，此处可选择**无**。关于日志配置项的使用说明可参见 [日志配置项](https://cloud.tencent.com/document/product/649/13697)。
   - **日志投递**：用于日志转储，此处可选择**无**。关于日志投递的详情说明可参见 [日志投递](https://cloud.tencent.com/document/product/649/43510)。
   - **标签**：用于分类管理资源，可不选。详情参见 [标签](https://cloud.tencent.com/document/product/649/53869)。
   - **备注**：选填，可留空。
3. 单击**保存&下一步**，进入部署应用页面。
4. 设置部署相关信息。
![](https://qcloudimg.tencent-cloud.cn/raw/fe0089abfd6b528ce5917cd019260bad.png)
   - **选择镜像**：选择 [步骤2：上传镜像](#step2) 中推送到镜像仓库的镜像版本。
   - **启动参数**（选填）：设置 Java 应用的启动参数。
   - **资源配置**：应用容器的 CPU 和内存限制使用默认值即可，实例数设置为1。
   - **访问配置**： 
     - 网络访问方式决定了部署组内应用的网络属性，不同访问方式的应用可以提供不同网络能力。此处设置**集群内访问**。
     - 端口映射中选择 TCP 协议，容器端口和服务端口设置为8080。
5. 单击**提交**，完成应用部署。应用部署成功后，部署组中**已启动/总机器数**的数值发生变化。
![](https://qcloudimg.tencent-cloud.cn/raw/1d613f94d9bc3a1c46763e837f1fbf39.png)
6. 在服务治理页面，选择地域和应用关联的命名空间后，可以看到服务实例显示在线状态，表示服务注册成功。
![](https://qcloudimg.tencent-cloud.cn/raw/a13d86d15d83bdb88ab057c4041dc569.png)


