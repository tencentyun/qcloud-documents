### 操作与数据集配置

用户可以通过角色与数据集配置来灵活调整不同子账号和协作者使用 TSF 平台的操作权限。

### 操作步骤

#### 角色配置

角色配置配置的是子账号与协作者使用 TSF 的操作权限。当前 TSF 平台采取白名单机制。如子账号和协作者没有被授权任何角色，则无法使用TSF平台。

##### 新建角色

1. 登陆 [TSF 控制台](https://console.cloud.tencent.com/tsf/role?rid=19)。

2. 点击左侧管理中心 - 角色管理。

3. 点击新建角色。

4. 填写角色名称并选择角色权限。请注意，角色权限中的通用权限包含的 TSF 访问概览页面、监控等页面的基本操作，建议对所有用户授权。

   ![](https://main.qcloudimg.com/raw/aeff85265c2ae6aece10ed6d5e678121.png)

   备注：1. 日志告警、服务告警、部署组告警等告警策略的配置在云监控页面配置，不受TSF权限管控。2. 镜像仓库列表不受TSF权限管控。



##### 编辑角色

1. 登陆 [TSF 控制台](https://console.cloud.tencent.com/tsf/role?rid=19)。

2. 点击左侧管理中心 - 角色管理。

3. 点击选择某一个角色。

4. 点击右上角编辑按钮即可对角色进行编辑。


##### 删除角色

1. 登陆 [TSF 控制台](https://console.cloud.tencent.com/tsf/role?rid=19)。

2. 点击左侧管理中心 - 角色管理。

3. 点击选择某一个角色，在左侧列表页面点击删除按钮进行删除。

   备注：当已经给某用户绑定角色和策略组后，删除角色会导致策略不可用，请谨慎删除。

   ![](https://main.qcloudimg.com/raw/cb59d7bf1340d911fa317160a3ddf7b0.png)



#### 数据集配置

用户可以通过数据集配置来实现不同的子账号和协作者使用不同集群、命名空间、应用的数据集权限。数据集同样是白名单机制，未配置数据集会导致无法看到 TSF 上任何资源。

##### 新建数据集

1. 登陆 [TSF 控制台](https://console.cloud.tencent.com/tsf/role?rid=19)。

2. 点击左侧管理中心 - 数据集管理。

3. 点击新建数据集，并填写数据集名称。

4. 勾选数据集中的资源。

   ![](https://main.qcloudimg.com/raw/069f35c8486d244cefbaf29dde741d33.png)

   说明：1. 当前仅仅支持集群、命名空间、应用三种资源的数据集权限；2. 全部集群、命名空间、应用代表是的当前全部数据以及未来可能新增的集群、命名空间、应用。如果仅将指定集群权限授予某个用户，则新增集群对用户不可见；3. 当用户对集群、命名空间、应用中某一类不勾选时，该类别资源对被授权的用户不可用。

5. 完成。



##### 编辑数据集

1. 登陆 [TSF 控制台](https://console.cloud.tencent.com/tsf/role?rid=19)。

2. 点击左侧管理中心 - 数据集管理。

3. 点击具体数据集进入编辑页面。

4. 点击基本信息卡片右侧编辑按钮进行名称的编辑，点击资源范围卡片右侧编辑按钮编辑数据集权限。


##### 删除数据集

1. 登陆 [TSF 控制台](https://console.cloud.tencent.com/tsf/role?rid=19)。
2. 点击左侧管理中心 - 数据集管理。
3. 点删除对应数据集。当某个数据集已经对用户授权后，删除数据集将导致授权策略对用户不生效。



#### 授权管理

1. 登陆 [TSF 控制台](https://console.cloud.tencent.com/tsf/role?rid=19)。

2. 点击左侧管理中心 - 角色管理。

3. 点击策略配置，看到策略生成器页面。

   ![](https://main.qcloudimg.com/raw/bec98466abf74f26a3cb7d3affca611e.png)

4. 在权限配置处选择对应角色与资源组。使用举例：当用户希望对集群1配置全读写权限，对集群2配置只读策略时，可以将包含全读写集群的角色与包含集群1的数据集关联作为权限配置的第一条数据，将包含集群只读的角色与包含集群2的数据集关联作为第二条数据。

5. 点击“前往 CAM进行授权”，并在访问管理产品页面点击 “创建策略”。强烈不建议用户在此处修改策略脚本。

6. 将生成的策略关联给用户或用户组。

7. 完成。






















