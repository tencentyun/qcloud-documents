## 操作场景

当您通过 TSF 创建了执行任务后，可以在执行记录页查看所有任务的执行历史，并可以手动对任务停止执行或重新执行。

> ?分布式任务调度当前发布的为 beta 版本，如果您在使用中有任何不便或诉求，欢迎 [提交工单](https://console.cloud.tencent.com/workorder/category?level1_id=876&level2_id=931&source=0&data_title=腾讯微服务平台%20TSF&step=1) 向我们反馈，我们将持续改进，非常感谢您的支持。

## 操作步骤

### 查看执行记录

1. 登录 [TSF 控制台](https://console.cloud.tencent.com/tsf/index)。
2. 在左侧菜单栏中，找到**组件中心**分类，点击**分布式任务调度** > **执行记录**，进入执行记录页面。
3. 在执行记录页中，您可查看**7天内**所有任务、工作流的执行历史记录。
   ![](https://main.qcloudimg.com/raw/12f6c6c9631d76713a5e9f5382d97d67.png)

任务执行记录分为基本任务、工作流任务。

- 基本任务：按照定时或周期触发方式的历史记录。
- 工作流任务：任务导入工作流后或触发方式为工作流触发的历史执行记录。

工作流执行记录为工作流历史执行记录信息。

任务批次执行状态：任务执行可能存在6种状态。

| 任务执行状态         | 说明                                                         |
| -------------------- | ------------------------------------------------------------ |
| 等待                 | 任务执行批次的所有实例均在等待状态。                         |
| 执行中               | 有实例还未完成任务的执行（且无“停止中”的实例）。             |
| 成功                 | 所有节点执行结束，按照设置的执行成功率进行判定，满足执行成功判定条件则批次成功。 |
| 执行失败             | 所有节点执行结束，按照设置的执行成功率进行判定，不满足执行成功判定条件则执行失败。 |
| 终止中               | 针对已经运行的批次触发**停止执行**操作，则未分发的实例不再分发，已经执行实例尝试终止。 |
| 未满足工作流触发条件 | 由于工作流存在多重逻辑，因分支条件不再触发即为未满足工作流触发条件。 |

#### 筛选执行记录

您可以根据执行记录列表**所属部署组**、**任务名称/ID**、**批次ID**多选过滤或根据执行的**状态**、**触发方式**筛选执行记录列表。
![](https://main.qcloudimg.com/raw/7dc0901cc2615f0bb864aa0751d6f16c.png)

#### 查看执行详情

单击某执行记录的**批次 ID**，您可进入该次执行的详情页，查看每个实例的执行情况。

- 执行详情展示该执行批次所有执行实例的运行状态，您可以对执行实例查看**执行日志**，对运行中的执行实例进行**停止执行**，对已经执行完的执行进行**重新执行**操作。

- 执行实例状态：执行实例可能存在7种状态。

| 任务执行状态 | 说明                                 |
| ------------ | ------------------------------------ |
| 等待         | 未到达触发条件等待任务分发。         |
| 执行中       | 执行实例正在运行中，未返回执行结果。 |
| 成功         | 执行实例返回执行成功状态。           |
| 执行失败     | 执行实例返回执行失败状态。           |
| 终止中 | 针对已经运行的执行实例执行**停止执行**操作，则发送终止信号给运行的线程尝试终止。
| 已终止 | 执行实例成功触发中断操作则为已终止状态。|
| 超时 | 执行实例超过任务设置的超时时间。|

- 您可以根据**执行详情**列表**执行ID**或**执行实例**多选检索或根据执行的**状态**、**触发方式**筛选执行详情列表，对于分片任务也可通过**分片索引**进行检索。
![](https://main.qcloudimg.com/raw/12c34742bf408714af80bf9216d4f6ba.png)

### 停止执行

您可手动停止任务的某一次未完成的执行。

- 停止所有实例的执行：在**执行记录**列表页中，单击某次执行操作列中的**停止执行**，系统则会强行终止此次执行中所有实例的任务执行。
- 停止某一实例的执行：在**执行详情**列表页中，单击某实例的操作列中的**停止执行**，系统则会强行终止该实例的任务执行。

> !
> - 只有未完成的实例可被停止执行。
> - 停止执行**不一定**能成功（您可通过 [任务停止原理及实践](https://cloud.tencent.com/document/product/649/41640) 了解更多）。

### 重新执行

您可手动重试某次已结束的执行。

- 重试所有实例的执行：在**执行记录**列表页中，单击某次执行批次操作列中的**重新执行**，系统会针对该批次重新执行并产生新的批次流水展示该批次的历史执行记录，执行节点信息与执行任务内容与当前所选批次一致。
- 重试某一实例的执行：在**执行详情**列表页中，单击某执行实例的操作列中的**重新执行**，系统会针对该执行实例重新执行并产生新的执行流水展示该实例的历史执行记录，针对随机节点、分片执行方式执行实例优先选择当前的执行节点执行，广播执行方式执行实例仅选择在原有节点执行，原有节点不可用则不再执行。

> !只有已完成的执行可被重新执行。
