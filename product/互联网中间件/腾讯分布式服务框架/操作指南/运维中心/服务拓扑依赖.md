## 操作场景
服务依赖拓扑包含了查询服务之间相互依赖调用的拓扑关系，查询特定集群特定命名空间下服务之间调用的统计结果等功能。

以下视频将为您介绍服务依赖拓扑的使用方法：
<div class="doc-video-mod"><iframe src="https://cloud.tencent.com/edu/learning/quick-play/2039-24428?source=gw.doc.media&withPoster=1&notip=1"></iframe></div>

## 操作步骤
### 查询拓扑关系
1. 登录 [腾讯微服务框架控制台](https://console.cloud.tencent.com/tsf)。
2. 在左侧导航栏选择【运维中心】>【[服务依赖拓扑](https://console.cloud.tencent.com/tsf/topology)】，进入服务依赖拓扑界面。
3. 在页面顶部数据中心位置，选择需要查看的服务所属命名空间。
4. 下方按钮选择需要依赖拓扑的时间，近30分钟、近10分钟、近5分钟以及选择特定时间段（**特定时间段的时间跨度最长为32天**）。
5. 选择之后将在下方空白处出现对应的服务依赖调用关系。
 - 灰色的圆圈表示主动调用的服务，箭头表示发出调用。
 - 绿色的圆圈表示成功调用，黄色表示调用失败。
 - 绿色和黄色组成的圆圈，绿色所占的比例是成功调用的比例，黄色为失败的比例。
 - 圆圈中的数字表示平均请求耗时（单位：ms）和请求频率（单位：次/分钟）。
 - 服务间带箭头曲线上的数字表示两个服务间调用的平均耗时。
 ![](https://main.qcloudimg.com/raw/67fb128793c89054da31e5e6950d8566.png)
在选中时间范围内，consumer-demo 调用了 provider-demo 服务，调用成功比例为 100% （绿色部分）。其中平均每次调用耗时1.91ms，请求频率为每分钟59.8次。


### 查询依赖详情
鼠标放置到图上特定位置可以显示调用依赖详情。
- 放置在服务间的依赖线条上，弹出面板显示被调用者和调用次数统计，单击弹出框上的“查看调用链”可以进入到调用链查询界面。
  ![](https://main.qcloudimg.com/raw/d2d0aeffd066521f91f42e4f118711ad.png)
- 放置在服务圈内（白色底），可以展示被调用次数，单击弹出框上的“查看调用链”可以进入到调用链查询界面。
  ![](https://main.qcloudimg.com/raw/56fc41adac20d75a9ae3018cdb81a160.png)



### 查看监控
>?要使用该功能，需要更新到1.12.0版本之后的 agent 和 SDK（Spring Cloud），否则无法看到调用概览。

单击依赖详情对话框中【查看图表】，侧边弹出半屏的调用概览。调用概览的时间范围和调用链查询的时间范围一致。监控概览页面中包括4部分信息：

- 健康概览：显示按分钟统计的正常请求和失败请求数量。
![](https://main.qcloudimg.com/raw/44d7e11b0f8ba8cfb604140ce890baad.png)

- 延时概览：显示请求耗时在不同时间段的分配比例。
- 状态码概览：显示不同请求状态码的分配比例。
![](https://main.qcloudimg.com/raw/c6b0b4bf3571f469fccb30d4955d951d.png)

- 并发概览：显示每分钟统计的连接并发数。
![](https://main.qcloudimg.com/raw/3c1e94745db89c8dc84e762234837140.png)

