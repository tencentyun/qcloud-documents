
以下视频将为您介绍 TSF 部署组的使用方法：
<div class="doc-video-mod"><iframe src="https://cloud.tencent.com/edu/learning/quick-play/2039-24421?source=gw.doc.media&withPoster=1&notip=1"></iframe></div>

部署组基本操作如下：

|功能|说明|
|---|---|
|应用扩容|将 CVM 云服务器添加到部署组中，如果部署组此时已经关联了程序包，将执行部署命令。|
|部署应用|将应用部署到 CVM 云服务器上，并执行启动命令。|
|下线实例|停止 CVM 云服务器上的应用，然后将实例从部署组中移除。|
|停止应用|将部署组中所有的节点上运行的应用停止，停止后可以再启动。|
|启动应用|当应用处于停止状态时可以启动应用。|

### 创建部署组
1. 登录 [TSF 控制台](https://console.cloud.tencent.com/tsf/index)。
2. 在左侧导航栏中，单击【[部署组](https://console.cloud.tencent.com/tsf/group)】。
3. 在页面顶部选择集群。
4. 单击部署组列表上方的【新建部署组】。
5. 设置部署组相关信息。
 - **部署组名称**：部署组的名称，不超过60个字符。
 - **命名空间**：选择命名空间。
 - **关联应用**：关联应用字段决定了后续程序包来源和应用配置来源。
 - **日志配置项**：指定部署组内实例的业务日志采集规则。如果配置为"无"，将不采集业务日志。更多关于日志配置项的说明请参考 [日志配置项](https://cloud.tencent.com/document/product/649/13697)。
 - **日志投递**：指定日志的转储方式，将规则指定路径中的日志内容投递到指定的接收端。如果配置为"无"，将不投递业务日志。更多关于日志投递的功能说明请参考 [日志投递](https://cloud.tencent.com/document/product/649/43510)。
6. 单击【保存&下一步】，按照 [部署应用](#deploy) 进行操作。

<span id='deploy'></span>
### 部署应用
1. 单击部署组列表页右侧的【部署应用】。
2. 选择目标程序包版本。
3. 设置启动参数（选填）。
4. 选择【更新方式】。
 - 立即更新：会先停止所有运行实例，然后使用新的程序包版本部署，会造成发布期间短暂停服。
 - 滚动更新：当部署组内有多个实例时，可以选择滚动更新方式进行分批发布。滚动更新支持设置发布策略：
		- **beta 批次**：是否首次用一个实例来部署新版本，如果部署成功，才会部署后面的批次实例。
		- **批次 N 实例占比**：除了 beta 批次，可以将部署组内剩余实例按百分比划分为多个批次部署，只有当批次 N 部署成功后才会继续部署批次 N+1。
		- **分批执行方式**：批次之间可以选择自动或手动方式来开启下一批次的部署。
		- **分批等待时间**：如果【分批执行方式】选择自动时，等待分批等待时间后会自动部署下一批次。
5. 开启健康检查（可选）。
如果未开启健康检查，则根据应用进程判断实例是否已启动。
如果用户开启健康检查，如果健康检查结果为不健康，部署组的实例的状态显示为「异常」。
    - **检查方式**：支持三种检查方式：
		- HTTP 请求检查：任何大于200小于400的返回码都会认定是成功的返回码。其他返回码都会被认为是失败的返回码。HTTP 检查需要设置端口和请求路径。
		- TCP 端口检查：如果可以建立连接被认为是成功的。该检查方式需要设置检查端口。
		- 执行命令检查：如果命令执行成功并且返回值为 0，认为是成功；其他返回值认为是失败。该检查方式需要填写执行命令。
6. 填写描述信息（选填）。
7. 单击【完成】。应用部署成功后，部署组中的 **已启动/总机器数** 数值发生变化。
![](https://main.qcloudimg.com/raw/28d371bcbacd5562296735108e2f3a27.png)

>!如果部署组关联的应用是 Mesh 应用，则无须设置启动参数。

### 应用扩容

1. 单击部署组列表右侧的【更多】>【应用扩容】。
2. 选择要添加进部署组的云服务器 CVM，单击【提交】。
3. 在部署组的实例列表页面中显示出刚才添加的 CVM。


### 下线实例
1. 单击部署组列表右侧的【更多】>【下线实例】。
2. 选择要下线的实例。
3. 在弹出的确认页面中，单击【提交】。

### 停止应用
1. 单击部署组列表页右侧的【更多】>【停止应用】。
2. 在弹出的确认页面中，单击【确认】。

### 启动应用
1. 单击部署组列表页右侧的【更多】>【启动应用】。
2. 在弹出的确认页面中，单击【提交】。

### 删除部署组
1. 下线部署组内所有实例，才能执行部署组的删除操作。
2. 单击部署组列表页右侧的【删除】。


