## 操作场景

调用分析功能展示服务的依赖拓扑调用信息和主被调统计信息。



## 功能入口

1. 登录 [TSF 控制台](https://console.cloud.tencent.com/tsf/index)。
2. 在左侧菜单栏中，单击**服务监控**，选择好时间范围和命名空间，维度选择**服务**，查看当前筛选条件下所有服务的监控图表信息。
3. 单击目标服务卡片，进入服务监控详情页面。
4. 选择**调用分析**页签，查看该服务的调用拓扑图和调用统计信息。



### 调用拓扑与调用链详情

调用拓扑图展示了服务之间相互依赖调用的拓扑关系（包含服务及其上下游服务）和调用链信息。

- 关于服务依赖拓扑的详情，您可以参见 [服务依赖拓扑](https://cloud.tencent.com/document/product/649/15544)。
- 关于调用链详情，您可以参见 [调用链查询](https://cloud.tencent.com/document/product/649/13688)。

在调用拓扑区域，您可以进行以下操作：

- 单击服务间的依赖线条，弹出面板显示该调用的主被调用方信息、调用数、调用成功率等信息，单击弹出框上的“查看调用链”可以进入到调用链查询界面。
- 单击服务圈内（白色底），可以展示该服务的调用数、调用成功率和平均调用延时，单击弹出框上的“查看调用链”可以进入到调用链查询界面。
- 单击某一条调用链操作列的**查看详情**，查看可以查看具体的调用详情，包含基本信息、Tag、自定义 Metadata 和 Opentracing Format。

![](https://qcloudimg.tencent-cloud.cn/raw/e6b572685906ab213b6390ba87b98eb6.png)



### 主被调统计

#### 功能说明

TSF 支持从主调和被调两个视角展示服务指标的统计信息。用户可以通过统计信息了解服务指标的变化情况。
服务指标以天为单位进行统计，在当天只能查看**昨天之前**的统计数据。

- 一个服务可能既是主调服务，又是被调服务。TSF 会统计服务作为主调服务调用其他服务及接口的情况，以及服务作为被调，其接口被其他服务调用的情况。
- TSF 服务统计支持查看指标的日环比和周同比。
- 统计指标：
  - 平均响应时间。
  - 按照状态码统计：2xx 响应、3xx 响应、4xx 响应、5xx 响应、其他状态码响应。
  - 按照异常请求统计：超时响应、不可用响应。其中超时响应表示服务端处理超时的请求响应，不可用响应表示服务端无可用实例时的异常请求响应。

> ?成功请求为响应码为 "success"、"200"、"201"、"202"、"203"、"204"、"205"、"206"、"207"、"208"、 "300"、"301"、"302"、"303"、"304"、"305"、"306"、"307"、"308"、"100"、"101"、"102" 的请求。其他响应码的请求被认为是错误请求。

服务统计仅能查询昨日起近1个月的数据。



#### 使用说明

选择主调或被调视角、统计日期。

- **主调视角**下会展示被调方服务的指标列表。单击某个被调服务前的箭头会展示该服务不同接口被调用的统计信息。
- **被调视角**下会展示该服务的接口指标列表。单击某个接口前的箭头会展示该接口被不同主调服务调用的统计信息。

单击操作列的**查看日环比/周同比**，可以查看各指标日环比/周同比情况。
- 日环比表示查询日 **T** 和之前一天 **T - 1** 的指标数据对比。
- 周同比表示查询日 **T** 和查询日前7天 **T - 7** 的指标数据对比。

![](https://qcloudimg.tencent-cloud.cn/raw/5471d07a9b2d085e676b3d62fc23b1ea.png)

