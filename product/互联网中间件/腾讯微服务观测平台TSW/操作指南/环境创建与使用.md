## 操作场景
不同环境的数据隔离，您可分别创建多个环境，用于生产、测试、开发。
当您的主账号下有多个团队时，您可为不同业务的团队分别创建一个或多个环境。结合 [访问管理配置](https://cloud.tencent.com/document/product/1311/54298) 中 CAM 的资源级权限管理，为不同团队的用户/组绑定环境的资源权限后，即可实现不同团队间的业务权限隔离。
您还可为不同的环境分配资源配额，具体分配方式请参考下文操作。

## 操作步骤
### 新建环境
1. 在 TSW 控制台的 [环境页面](https://console.cloud.tencent.com/tsw/index?rid=1)，单击【新建环境】。
2. 在新建环境的窗口中填写环境名称、Span 量配额，选择峰值 QPS 限制、存储时长等信息。
	- 环境名称：建议使用 business_dev_env 这类含义清晰的名称。
	- Span 量配额：您的各个环境 Span 配额加和应小于等于总额度，建议根据您的环境实际用量与重要程度，合理分配每个环境的 Span 量配额。新建环境后，您可对余额进行调整。
	- 峰值 QPS 限制：限制您当前环境每秒可上报的 Span 数量，请合理配置限流。新建环境后，您可对限流进行调整。
	- 存储时长：超过数据存储时长后，将无法查询到调用数据。新建环境后，您可对存储时长进行调整。新存储时长配置生效后，新上报的数据将按新存储时长配置存储，历史数据将按照上报当时的存储时长存储。
	- 描述：添加当前环境的描述。
3. 单击【提交】，新建的环境将显示在环境页面。
![](https://main.qcloudimg.com/raw/7178853472a7744116a9f4160870129a.png)

### 配置环境相关告警
#### 场景一：为您的 span 余额配置告警
目前 TSW 还未接入计费，您需要手动设置 Span 量余额的告警。设置方式为：
1. 在云监控控制台的【[告警策略](https://console.cloud.tencent.com/monitor/alarm2/policy)】，单击【新建】。
2. 在新建告警策略页面，填写基本信息，并配置告警规则：
	- 策略类型：选择 TSW 中的环境上报余量。
	- 告警对象：选择实例 ID、或实例分组的对应环境。
3. 根据您的需求配置其他选项，单击【完成】。
![](https://main.qcloudimg.com/raw/8a671492ffae677343f824967d7bbf60.png)

#### 场景二：为避免触发限流配置告警
触发限流时，您的部分调用数据将会被丢弃，如果您不能接受数据的缺失，建议您配置合适的峰值QPS告警，及时提前调整峰值QPS限制。
1. 在云监控控制台的【[告警策略](https://console.cloud.tencent.com/monitor/alarm2/policy)】，单击【新建】。
2. 在新建告警策略页面，填写基本信息，并配置告警规则：
	- 策略类型：选择 TSW 中的环境上报 QPS。
	- 告警对象：选择实例 ID、或实例分组的对应环境。
3. 根据您的需求配置其他选项，单击【完成】。
![](https://main.qcloudimg.com/raw/8fbb26a72117bd1198ee246552e2f48b.png)



### 修改环境相关配置
- **调整数据存储时长**：
 在 TSW 控制台的 [环境页面](https://console.cloud.tencent.com/tsw/index?rid=1)，单击环境信息左侧数据存储时长的 ![](https://main.qcloudimg.com/raw/02ffb65112ce261c11d030a16e8e5c53.png) 图标，即可修改存储时长。
 新存储时长配置生效后，新上报的数据将按新存储时长配置存储，历史数据将按照上报当时的存储时长存储。

- **调整 Span 量配额与峰值 QPS 限制**：
在 TSW 控制台的 [环境页面](https://console.cloud.tencent.com/tsw/index?rid=1)，单击环境信息右上角的【调整配额】，调整当前环境的 Span 余额与峰值 QPS 限制。
环境 Span 余额的调整范围：下限为0，即调整后不再接受任何数据上报；上限为当前数值，加上可用的剩余配额。
峰值 QPS 的限制详见控制台开放的选项。
>!公测期间，若您的业务场景需要的额度与配置不足，请通过 [提交工单](https://console.cloud.tencent.com/workorder/category) 与我们取得联系。

![](https://main.qcloudimg.com/raw/d93c064854fa139ff4f50bb474596560.png)




