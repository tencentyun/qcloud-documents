## 异步解耦

交易引擎作为腾讯计费最核心的系统，每笔交易订单数据需要被几十个下游业务系统关注，包括物品批价、道具发货、积分、流计算分析等，多个系统对消息的处理逻辑不一致，单个系统不可能去适配每一个关联业务。此时，消息队列 TDMQ 可实现高效的异步通信和应用解耦，确保主站业务的连续性。

![](https://main.qcloudimg.com/raw/0d9879224dd334eb4ccee436be1a6f81.svg)

## 削峰填谷

企业不定时举办的一些营销活动，新品发布上线，节日抢红包等，往往都会带来临时性的流量洪峰，这对后端的各个应用系统考验是十分巨大的，如果直接采用扩容方式应对又会带来一定的资源浪费。消息队列 TDMQ 此时便可以承担一个缓冲器的角色，将上游突增的请求集中收集，下游可以根据自己的实际处理能力来消费请求消息。

![](https://main.qcloudimg.com/raw/6bb7c310c0c4f6048df64705a0c4aff2.svg)

## 顺序收发

顺序消息的应用出现在业务场景中。例如王者荣耀的皮肤道具购买与发放，过程中的订单创建、支付、退款等流程都是严格按照顺序执行的，与先进先出（First In First Out，FIFO）原理类似，消息队列 TDMQ 提供一种专门应对这种情形的顺序消息功能，即保证消息 FIFO。

![](https://main.qcloudimg.com/raw/964ecdc85396c26fb4863acaa9fd2222.svg)

## 分布式事务一致性

腾讯计费（米大师）是孵化于支撑腾讯内部业务千亿级营收的互联网计费平台，承载了公司每天数亿收入大盘，解决的核心问题是如何确保钱货一致，使用 TDMQ 与分布式事务应用结合来处理交易事务，可以大大提升处理效率和性能。计费的交易链路通常比较长，出错或者超时的概率比较高，借助 TDMQ 的自动重推和海量堆积能力来实现事务补偿，以及支付 Tips 通知和交易流水推送可以通过 TDMQ 来实现最终一致性。

![](https://main.qcloudimg.com/raw/60a8f143cd749516c2f5f03b4d19ed5c.svg)

## 数据同步

如果有多个数据中心存在，需要在多个数据中心之间消费，那么 TDMQ 可以非常方便实现数据中心之间的同步。

![](https://main.qcloudimg.com/raw/bf71094b56816dd68ad8c175e1c88e83.svg)

## 大数据分析

数据在“流动”中产生价值，传统数据分析大多是基于批量计算模型，而无法做到实时的数据分析，利用 TDMQ 与流式计算引擎相结合，可以很方便地实现业务数据的实时分析。

