>!**消息队列 IoT MQ 产品已下线，文档已做弃用处理，不再维护。存量用户仍可通过链接访问文档。**

## 产品概述
消息队列 IoT MQ（Internet of Things Message Queue，简称 IoT MQ）是一项针对物联网及移动互联网领域，特别是在需要低功耗、网络吞吐有限、网络质量差的 IoT 场景下的消息服务。 IoT MQ 基于发布/订阅模式，支持一对多分发，消息在传感器之间传输非常方便；支持标准 MQTT 协议，应用方可无缝迁移；支持亿级设备连接、百万级 QPS。

## MQTT 协议简介
消息队列遥测传输（Message Queuing Telemetry Transport，简称 MQTT）是一个客户端/服务器架构的发布/订阅模式的消息传输协议。该协议轻巧、开放、简单、规范，易于实现，平台支持丰富，几乎可以连接所有联网物品，因此它对很多场景来说都是很好的选择，特别是对于受限的环境如机器与机器的通信（M2M）以及物联网环境（IoT）。

### MQTT 协议特点
MQTT 协议运行在 TCP/IP，或其他提供了有序、可靠、双向连接的网络连接上。它具有以下特点：
- 使用发布/订阅消息模式，提供了一对多的消息分发和应用之间的解耦
- 消息传输不需要知道负载内容
- 提供三种等级的服务质量
- 很小的传输消耗和协议数据交换，最大限度减少网络流量
- 异常连接断开发生时，能通知到相关各方

## 产品架构
IoT MQ 完整支持 MQTT 3.1.1 协议，在腾讯自研 CMQ 消息引擎的基础上增加对 MQTT 协议的接入和对应的场景优化，是物联网解决方案中必不可少的消息中间件。整个产品架构图如下图示所示：
![](//mc.qcloudimg.com/static/img/d3cb878ac460328227252b65bed88745/image.jpg)
1. **物联设备**
一切可以联网的物体，如汽车、手机、各类家电、工业设备等，这些设备可以通过丰富的客户端 SDK 接入 IoT MQ。
2. **IoT 网关**
做负载均衡，将 MQTT 连接分发到消息引擎中多台 Broker 的接入层上。
3. **Broker 消息引擎**
IoT MQ 的核心处理模块，基于腾讯自研的消息引擎，负责底层消息的存储和分发，支持消息的可靠传递、高扩展性、水平扩容、高性能等特性。
4. **物联网平台**
IoT MQ 的下游可以接入物联网平台来管理设备和规则。
5. **API 网关**
实现完整 API 托管的服务，用于协助完成 API 的创建、维护、发布、监控等整个生命周期的管理。
6. **数据分析与处理**
根据业务需求场景选择处理套件。
7. **用户应用**
IoT MQ 连接设备与用户，做到双向交互。

## 优势
相比于其他物联网消息队列，IoT MQ 具有以下优势：
- **高兼容性**
兼容 MQTT 3.1.1协议，及任何支持该协议的SDK，低协议开销；弱网络容忍能力强，实时推送，支持多语言客户端。
- **高扩展性**
基于腾讯自研 CMQ 架构，可根据业务规模弹性伸缩，水平扩容对上层透明。
- **业务安全**
支持临时Token，SSL/TLS 加密通信，多维度安全防护。
- **统一运维**
IoT MQ 提供腾讯云平台的整套运维服务，包括资源申请、消息查询、监控告警等各项运维服务。

