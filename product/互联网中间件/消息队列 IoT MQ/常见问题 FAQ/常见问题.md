### 消息队列 IoT MQ 兼容哪一版本的 MQTT 协议？
目前消息队列 IoT MQ 完美兼容 MQTT3.1.1，零成本无缝集成。

### 连接被异常断开是怎么回事？
可能的原因：
- IoT MQ 服务器在客户端发送 CONNECT 报文时进行权限验证，如果权限验证失败则会断开连接。
- 不同的客户端使用相同的 ClientID 连接 IoT MQ 服务时会被强制断开，即当有一个客户端使用 ClientID1 连接上 IoT MQ 服务后，新的客户端使用同一个 ClientID 会被拒绝连接。

### 客户端的 ID 有格式要求吗？
ClientID 由两部分组成，组成形式为“Instanceid@DeviceID”，ClientID 的长度不超过 64个字符，请不要使用不可见字符。其中
- Instanceid 为 IoT MQ 的实例 ID。
- DeviceID 为每个设备独一无二的标识，由业务方自己指定，需保证全局唯一，例如每个传感器设备的序列号。

### 什么是主题（Topic）？
IoT MQ 服务中任何消息都属于一个 Topic，订阅者与发布者之间通过 Topic 路由消息进行通信；根据 MQTT 协议，Topic 存在多级，其格式类似 Unix 文件路径。 Topic 允许的字符包括：英文大小写字母、数字、下划线_和正斜杠/，长度不超过128个字符。用户需要先创建 topic 然后才能读写。

### IoT MQ 与 CMQ 有什么区别？
CMQ 是腾讯自研的消息队列，提供金融级的高可靠、高数据持久性消息传输，保证数据强一致性。
IoT MQ 基于 CMQ 底层消息引擎，接入 MQTT 协议，是为物联网和移动互联网量身打造的消息队列，高效支持需要低功耗、网络吞吐有限、网络质量差等的 IoT 场景。

### IoT MQ 的消费方式是 Pull 还是 Push?
IoT MQ 的消费方式是 Push，订阅者订阅 Topic 后，消息队列会把消息 Push 给订阅者。

### 用客户端连接 IoT MQ 时端口是多少？
客户端连接 IoT MQ 时使用默认端口 1883。

### 发布消息的 QoS 和订阅消息的 QoS 不同，以哪个为准？
MQTT 协议发布消息 QoS 保证不是端到端的，是客户端与服务器之间的。订阅者收到 MQTT 消息的 QoS 级别，最终取决于发布消息的 QoS 和主题订阅的 QoS。当二者不同时，会产生 QoS 降级，以最低的 QoS 为准。

|发布消息的 QoS|主题订阅的 QoS|最终接受消息的 QoS|
|----|----|----|
|0|0|0|
|0|1|0|
|1|0|0|
|1|1|1|

> 注：IoT MQ 暂不支持 QoS2.
