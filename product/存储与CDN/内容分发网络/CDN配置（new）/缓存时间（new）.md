## CDN配置--缓存时间

### 功能简介

CDN缓存时间是CDN服务器保存的一套针对用户文件的缓存策略，根据缓存策略判断文件是否超时需要回源。合理配置您的缓存策略，会大大降低回源率，减少源站的压力，节省带宽。腾讯云CDN支持根据不同文件类型配置缓存时间、自定义缓存优先级、设置Cache继承策略。

### 配置说明

您可在CDN接入时配置不同资料的缓存时间，或在CDN控制台的“域名管理”页面中点击域名右侧的“管理”，在“域名基本配置”页面中修改缓存时间配置。

![](//mccdn.qcloud.com/static/img/66dafba3487bb1ac9419a0f38b652b47/image.png)

**1) 全局设置**
系统默认所有文件的缓存时间是2592000秒（30天），用户可设置该时间，缓存时间可设置：0秒至4亿秒当中的任意整数秒，如果设置为0，则表示不缓存，文件访问会透传回源站。

**2) 个性化设置**
用户可以新加一列配置个性化的缓存时间，目前支持文件类型、文件夹、全路径文件三种，如：
文件类型：
> .jpg;.png;.js;.html 300秒


文件夹：
> /XXXX;/abcd;/1234 500秒


全路径文件，首页文件或指定某一文件：
>/index.html 300秒 
>/test/\*.jpg 300秒
									
	

**注意：**
a) 缓存内容可填入多个项，每个项用“;”分开，内容区分大小写；
b) 文件类型必须以“.”开头的文件后缀，如.jpg； 文件夹类型必须以“/”开头，不能		以“/”结尾，如/12345/test；
c) 用户最多只能添加10个个性化设置，每个设置内容不能超过150字；
d) 缓存时间可以设置任意整数秒，如果设置为0则表示不缓存；
e) 设置全路径文件缓存规则时，仅支持 * 匹配某一类型文件，暂时不支持其他正则匹配；
f）设置全路径文件缓存规则时，暂不支持"/"结尾的首页类型的缓存设置。

**3） 配置项的优先级**
根据列表中配置项的顺序来确定优先级，列表底部的优先级大于列表顶部。
如：
规则1：全部类型 所有文件 600秒
规则2：文件类型 .jpg;.png;.js;.html 300秒
规则3：文件夹 /XXXX;/abcd;/1234 500秒
则：
对/XXXX/a.jpg类型，由于内容”/XXXX”命中规则3，列表底部优先，则缓存时间为500秒
对/b.png 类型，由于内容”.png” 命中规则2，列表底部优先，则缓存时间为300秒
对/c.css 类型，由于内容”/c.css”不命中规则2、规则3，故其命中规则1，则缓存时间为600秒

**4）CDN缓存时间规则默认不继承源站http cache_control，以CDN节点服务器设置的默认时间为当前资源的缓存过期时间。但若源站返回头部包含：Cache-Control: no-cache、Cache-Control: no-store两个字段，则CDN节点服务器将不做缓存；若要继承源站http cache_control，则可开启“高级缓存过期设置”。**

5）****高级缓存过期设置即指：****CDN节点继承源站http cache_control，在CDN节点和源站max_age中取最小值设为缓存过期时间
如： 
/index.htm的max_age是200秒，CDN缓存时间配置600秒，则文件200秒即会超时回源
/index.htm的max_age是800秒，CDN缓存时间配置600秒，则文件600秒即会超时回源