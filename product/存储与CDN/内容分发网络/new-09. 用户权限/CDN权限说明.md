CDN目前已经接入新版的云资源访问管理（Cloud Resource Access Management）系统，根据功能属性的不同对CDN的所有操作进行了划分，每一项功能的权限包含了对应的**控制台操作**及对应的**云API操作**，创建者可以根据需要对子用户进行一个功能或多个功能及功能对应允许操作对象（项目/域名）的配置。

**注意**：原协作者无法生成密钥对调用API操作，配置此权限后，任意子用户都可使用自身密钥对调用有权限使用的API。

## 管理员功能
### 创建者

创建者是指此腾讯云账号的拥有者，拥有最高权限。

### 预设管理员
除了创建者外，创建者还可以通过关联**预设策略**（详情参考[权限策略](https://www.qcloud.com/doc/product/228/6690)），配置以下几种管理员：

+ 财务管理员
+ 超级管理员
+ 云资源管理员

超级管理员拥有创建者的所有权限，可以进行其他子用户的分配；而云资源管理员拥有对所有云资源的管理权限，但不可以创建其他子用户。部分功能仅能够供预设管理员使用，具体如下：

+ 使用**云API** [DescribeCdnHosts](https://www.qcloud.com/doc/api/231/3937) 获取账户下所有域名详细信息；
+ 使用**云API** [UpdateCdnProject](https://www.qcloud.com/doc/api/231/3935) 或在 **CDN控制台** 进行域名所属项目的切换；

预设管理员配置案例可参考[预设管理员配置案例](https://www.qcloud.com/doc/product/228/6693) 。


### 项目管理员
除了预设管理员外，还可以按照项目维度划分权限，即项目管理员。项目管理员可以管理指定项目中所有的云资源。

项目管理员可以通过**自定义策略** 中服务类型为**项目管理**的策略进行指派，该策略拥有两个功能：

+ 管理 CDN 业务项目内云资源
+ 管理其他业务项目内云资源

项目管理员权限等同于原有版本**项目协作者**，可以在控制台进行有权限项目之间的资源分配。

由于项目的划分对所有云资源均有效，您可以根据需要对项目管理的业务范围进行选择，具体配置方法参考[项目管理员配置案例](https://www.qcloud.com/doc/product/228/6693)。


## 子用户功能

### 查询消耗及统计信息

#### 设置须知
+ 目前查询消耗及统计信息的权限仅可按照**项目**划分；
+ 仅有**默认项目**的用户，给子用户分配查询消耗及统计信息权限时无法进行更细粒度的划分；

#### 控制台权限控制
该功能允许子用户查询指定一个或多个项目的消耗及统计数据，拥有该权限的子用户，在控制台可做如下操作：

![](https://mccdn.qcloud.com/static/img/01897e47d5c42bd4e3f83468f53a4b81/image.jpg)

+ CDN 控制台-概览页面：显示指定的一个或多个项目的概览信息；
+ CDN 控制台-统计分析-使用量统计：指定的一个或多个项目的消耗明细查询、下载；
+ CDN 控制台-统计分析-访问情况统计：指定的一个或多个项目的访问情况明细查询、下载；
+ CDN 控制台-统计分析-状态码统计：指定的一个或多个项目的状态码统计明细查询、下载；

#### 云API权限控制
拥有该权限的子用户，可申请云API密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云API查询指定的一个或多个项目的消耗、统计量数据：
+ [DescribeCdnHostInfo](https://www.qcloud.com/doc/api/231/3941) ：查询 CDN 消耗统计
+ [DescribeCdnHostDetailedInfo](https://www.qcloud.com/doc/api/231/3942) ：查询 CDN 消耗统计明细 
+ [GetCdnStatusCode](https://www.qcloud.com/doc/api/231/3943) ：查询 CDN 返回码统计数据
+ [GetCdnStatTop](https://www.qcloud.com/doc/api/231/3944) ：查询 CDN 查询消耗TOP100

#### 注意事项
+ 项目中已删除的域名，由于存在历史记录，因此在消耗查询中仍然可以查到。

### 查看域名详情
#### 设置须知
+ 目前查询域名详情的权限仅可按照**项目**划分；
+ 仅有**默认项目**的用户，给子用户分配查看域名详情权限时无法进行更细粒度的划分。

#### 控制台权限控制

该功能允许子用户查询指定一个或多个项目的域名信息（包括其配置详情），拥有该权限的子用户，可在控制台做如下操作：

![](https://mccdn.qcloud.com/static/img/8c221a7116a875fcf0ee1180819eeef7/image.jpg)

+ CDN 控制台-域名管理：查看指定的一个或多个项目的域名信息，点击【管理】可查看更多配置详情；


#### 云API权限控制
拥有该功能的子用户，可申请云API密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云API查询域名详情（该域名必须属于指定有权限的项目）：

+ [GetHostInfoByHost](https://www.qcloud.com/doc/api/231/3938) ：根据域名查询域名及配置详情
+ [GetHostInfoById](https://www.qcloud.com/doc/api/231/3939)：根据域名 ID 查询域名及配置详情


### 查询日志下载链接

#### 设置须知
+ 目前查询域名详情的权限仅可按照**项目**划分；
+ 仅有**默认项目**的用户，给子用户分配查询日志下载链接权限时无法进行更细粒度的划分。

#### 控制台权限控制
该功能允许子用户查询指定一个项目或多个项目的指定日期日志下载链接，拥有该权限的子账户可在控制台做如下操作：

![](https://mccdn.qcloud.com/static/img/88a905fae2f609ac2ca929cf1da5ef06/image.jpg)

+ CDN 控制台-高级工具-日志管理：查询指定一个或多个项目内域名的日志下载链接

#### 云API权限控制
拥有该功能的子用户，可申请云API密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云 API 查询日志下载链接（该域名必须属于指定有权限的项目）：

+ [GenerateLogList](https://www.qcloud.com/doc/api/231/3950) ：查询日志下载链接



### 添加域名
#### 设置须知
+ 目前添加域名的权限仅可按照**项目**划分，即可指定允许添加域名进入的项目；
+ 仅有**默认项目**的用户，给子用户分配添加域名权限时无法进行更细粒度的划分。

#### 控制台权限控制

该功能允许子用户向指定的一个或多个项目中添加域名，可在控制台做如下操作：

![](https://mccdn.qcloud.com/static/img/c2d1166e7d61a37c361bf44efce60d2b/image.jpg)

![](https://mccdn.qcloud.com/static/img/e57b0ae0f4f9b9ec8516991e5103d4b3/image.jpg)

+ CDN 控制台-域名管理-添加域名：添加域名第一步页面，所属项目下拉框中显示的项目即为有权限添加域名的项目，若无，表明该子用户无添加域名的权限，无法进行下一步操作。

#### 云API权限控制
拥有该功能的子用户，可申请云API密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云 API 添加域名（项目必须为有权限的项目）：

+ [AddCdnHost](https://www.qcloud.com/doc/api/231/1406)：添加域名


### 上线/下线域名
#### 设置须知
+ 目前上线/下线域名权限暂时仅支持按照**项目**划分。

#### 控制台权限控制

该功能允许子用户指定对一个项目或多个项目进行上线/下线操作，可在控制台做如下操作：

![](https://mccdn.qcloud.com/static/img/008fec0ecccdb8749d9f69b027171e3c/image.jpg)

+ CDN 控制台-域名管理：找到有权限的域名，可对其进行上线/下线（开启/关闭）操作。

#### 云API权限控制
拥有该功能的子用户，可申请云API密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云 API 上线/下线域名（上线/下线的域名必须为有权限的域名）：

+ [OnlineHost](https://www.qcloud.com/doc/api/231/1402) ：上线 CDN 域名
+ [OfflineHost](https://www.qcloud.com/doc/api/231/1403) ：下线 CDN 域名

### 域名配置管理
#### 设置须知
+ 目前域名配置管理权限暂时仅支持按照**项目**划分

#### 控制台权限控制
该功能允许子用户指定对一个项目或多个项目中的域名配置管理操作，可在控制台做如下操作：

![](https://mccdn.qcloud.com/static/img/3dc9b19234ab04d3d777574d25b3edd1/image.jpg)

+ CDN 控制台-域名管理：点击【管理】，可对有权限域名的基本配置和高级配置做修改；

#### 云API权限控制
拥有该功能的子用户，可申请云API密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云API进行域名配置管理（指定域名必须为有权限的域名）：

+ [UpdateCdnConfig](https://www.qcloud.com/doc/api/231/3933) ：修改域名配置
+ [UpdateCache](https://www.qcloud.com/doc/api/231/3934) ：修改域名缓存规则设置
+ [UpdateCdnHost](https://www.qcloud.com/doc/api/231/1397) ：修改域名源站设置

### 删除域名
#### 设置须知
+ 目前域名删除权限暂时仅支持按照**项目**划分
+ 可删除的域名状态需为【已关闭】，若不是，则需要限进行下线。

####  控制台权限控制
该功能允许子用户对指定的一个项目或多个项目中的域名进行删除，可在控制台做如下操作：

![](https://mccdn.qcloud.com/static/img/15d5108655abec1f7c888dd87a31451c/image.jpg)

+ CDN 控制台-域名管理：右键点击域名，可以对有权限的已关闭的域名进行删除操作；

#### 云API权限控制
拥有该功能的子用户，可申请云API密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云API进行域名删除（指定域名必须为有权限的域名，域名状态需要为已关闭状态）：

+ [DeleteCdnHost](https://www.qcloud.com/doc/api/231/1396) ：删除 CDN 域名

### 刷新预热
#### 设置须知
+ 目前刷新预热功能权限暂时仅支持按照**项目**划分;
+ 提交的 URL 列表或者目录列表中域名必须都均有权限。

#### 控制台权限控制
该功能允许子用户对指定的一个或多个项目中域名的 URL 或目录进行刷新预热操作，控制台操作如下图所示：

![](https://mccdn.qcloud.com/static/img/6ecc88d7a9768c19957badb16a1fbddb/image.jpg)

+ CDN 控制台-缓存刷新：批量贴入有权限域名下 URL 或目录，提交进行刷新

#### 云API权限控制
拥有该功能的子用户，可申请云 API 密钥，详情参考[ 申请安全凭证](https://www.qcloud.com/doc/api/231/1725#1.-.E7.94.B3.E8.AF.B7.E5.AE.89.E5.85.A8.E5.87.AD.E8.AF.81)，并使用其调用下列云API进行刷新预热（仅可提交有权限域名下URL或目录）：

+ [RefreshCdnUrl](https://www.qcloud.com/doc/api/231/3946) ：刷新 URL
+ [RefreshCdnDir](https://www.qcloud.com/doc/api/231/3947) ：刷新目录

### 默认功能
子用户一旦配置了 CDN 功能权限，则默认可以进行如下操作，**无需进行配置**：

+ 使用控制台查询所有刷新记录：
	![](https://mccdn.qcloud.com/static/img/0592d47b0f65a8271b39a83a684f7c46/image.jpg)
+ 使用云API [GetCdnRefreshLog](https://www.qcloud.com/doc/api/231/3948) 查询刷新记录。

子用户功能配置案例可参考[子用户配置案例](https://www.qcloud.com/doc/product/228/6693) 。











