<font color="red">HTTPS配置目前正处于内测阶段，敬请期待全量开放。</font>

## 部署自有证书

登录[CDN控制台](https://console.qcloud.com/cdn)，在【高级工具】中选择【证书管理】页面：

![](https://mccdn.qcloud.com/static/img/6c390e887c25f69653c9a0125451fa74/image.jpg)

点击左上角【+部署证书】按钮，在**证书类型** 栏选择 **上传证书**：

![](https://mccdn.qcloud.com/static/img/6b15acf105e2f05fc7d88886d39f1f63/image.jpg)

分别点击右侧 **浏览** 按钮，将本地的证书及私钥上传，选择回源方式并勾选SLA协议，即可提交配置。

**注意事项：**

+ 目前证书上传页面仅支持.pem格式的证书，若您的证书格式为.crt，可尝试修改后缀为.pem上传，若仍不成功，可提交工单转入人工处理；
+ 若您配置提示证书错误，可能是由于您的证书链不全等因素导致，您可以提交工单转入人工处理；
+ 选择HTTPS回源需要源站支持HTTPS，否则会导致回源失败，影响您的业务；
+ 配置成功的域名会显示在证书管理页面的列表中，证书生效时间大概需要5-10分钟，请耐心等待；
+ COS源的域名暂时不支持HTTPS回源。



## 申请免费证书

若您暂无可用证书，腾讯云CDN为您提供了第三方免费证书。申请免费证书，建议您为域名<font color="red">添加CNAME配置到腾讯云CDN为您提供的.cdn.dnsv1.com后缀CNAME</font>，否则会拉长验证流程，耽误较长时间。

### 提交申请

选择需要配置HTTPS的域名，在部署证书时选择 **免费申请证书**：

![](https://mccdn.qcloud.com/static/img/78e4c591e44b7ed9d25a3376de436e2c/image.jpg)

选择回源方式，并勾选SLA协议，点击提交，此时 <font color="red">CDN会向第三方CA（亚洲诚信）提交免费证书申请</font>。

**注意事项：**

+ 提交了配置后，则开始证书申请>>>验证>>>部署流程，详细说明见下文；
+ COS源的域名暂时不支持HTTPS回源；
+ 免费证书仅支持子域名，不支持泛域名。

### 域名验证

#### 文件验证

提交配置后，您可以在证书管理页面看到该域名的状态为【验证中】，此时CDN会自动帮您完成与CA的文件验证流程，需要您配置CNAME至腾讯云CDN提供的CNAME，否则会验证失败。

+ 验证成功：当状态为【验证成功】后，CDN会自动从CA获取证书并帮助您部署在CDN节点上，请耐心等待，无需进行邮箱验证等后续步骤。
+ 验证失败：当状态为【验证失败】后，您需要手动进行邮箱验证。

![](https://mccdn.qcloud.com/static/img/c139c60233453d2a7d639053f392f238/image.jpg)

#### 邮箱验证

文件验证失败后，您需要进行邮箱验证。选择您可以收到验证邮件的邮箱，点击发送，证书对应的状态会变为【邮箱验证中】。此时CA会向您选择的邮箱发送一封验证邮件，点击邮件中的链接，即可按指引完成认证。

![](https://mccdn.qcloud.com/static/img/cc7b5052c5cd84e25ca32d03ea9556fa/image.jpg)

#### 未收到验证邮件

若您选择的邮箱未收到验证邮件，则可以在证书管理页面，找到对应的配置记录，可重新发送邮件：

![](https://mccdn.qcloud.com/static/img/d03c02a81110067658f323eb4613f31b/image.jpg)

#### 邮箱验证超时

邮箱验证的时限为24小时，若您24小时内未点击验证邮件进行验证，则对应的状态会变为【邮箱验证超时】：

![](https://mccdn.qcloud.com/static/img/dedbbad6f7ef1dafac1cd31faee57739/image.jpg)

此时您需要重新选择邮箱，再进行验证。



### 证书部署

当证书申请成功后，状态会变为【验证成功】后，会自动进行部署。



### 注意事项

+ 配置过程中，仅当证书管理中域名对应的证书状态为【已部署】时，HTTPS配置才生效；
+ 若您未配置CNAME至腾讯云CDN，仍想申请免费证书，可前往[SSL证书管理](https://console.qcloud.com/ssl)页面，可直接选择其他验证方式获取免费证书，然后将其下载，按照部署自有证书的流程进行部署。



## 编辑证书

对于状态是【已部署】的证书，您可以通过右侧 **编辑** 按钮，重新上传证书或为其申请免费证书，进行部署：

![](https://mccdn.qcloud.com/static/img/1dbba4ba75f4ae65e0faec8784edeb0a/image.jpg)

您可以选择重新上传，也可以选择切换为免费证书：

![](https://mccdn.qcloud.com/static/img/8c580abddd142a1a60b55633d01db1bd/image.jpg)

**注意事项：**

+ 对于证书状态为【已部署】的域名，重新上传自有证书不会导致HTTPS服务的中断；
+ 对于证书状态为【已部署】的域名，为其申请免费证书时，即使申请过程中出现【验证失败】或【邮箱验证超时】的状态，也不会影响原有证书的使用，不会导致HTTPS服务中断（前提是原有的证书未过期）。



## 删除证书

您可以点击证书管理右侧的 **删除** 按钮，删除已有的证书配置：

![](https://mccdn.qcloud.com/static/img/fb4800a22b808e3810d4c3da754bc020/image.png)

**注意事项：**

+ 删除腾讯提供证书，会将对应.qcloudcdn.com后缀域名下线并删除：

  ![](https://mccdn.qcloud.com/static/img/d93da71949f45371796a6c199a5db307/image.jpg)



## 双证书说明

腾讯云CDN支持双证书机制，用户可以自行将自有证书部署至源站，在腾讯云CDN中为域名申请使用第三方免费证书，并选择回源为HTTPS。用户访问资源时，在CDN节点命中，则使用的为第三方证书进行加密传输，CDN节点向源站回源时，使用的用户自有证书进行加密传输。

