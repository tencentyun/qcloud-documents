

![](https://main.qcloudimg.com/raw/eb904bfddef689cd5d4382e69b728a12.png)

## 准备工作

### 开通 CDN 服务

配置 CDN 前，您需要 [开通 CDN 服务](https://cloud.tencent.com/document/product/228/3149)。如果您已开通 CDN 服务，请继续后续操作步骤.

### 易混淆概念：


| 配置名称          | 配置说明                                                     | 使用位置          |
| ----------------- | ------------------------------------------------------------ | ----------------- |
| 加速域名          | 您接入到 CDN 的域名，用户在终端进行实际访问的域名            | 添加域名-域名配置 |
| 源站地址/源站域名 | 服务器源站对应的IP地址(域名)，CDN节点不包含请求内容时将访问该地址(域名)获取请求内容<br /><br />**源站：** 提供服务的服务器，可以处理和响应用户请求。用户通过源站地址进行访问，源站地址可为域名或IP地址 | 添加域名-源站配置 |
| 回源 HOST         | CDN节点回源时实际请求的服务器内容。通常与加速域名保持一致，您可根据业务需求按回源请求时实际请求内容填写。                           | 添加域名-源站配置 |
| CNAME 域名        | 在您的加速域名接入后，系统将会自动分配一个以 `.cdn.dnsv1.com`或 `.dsa.dnsv1.com` 为后缀的 CNAME 域名。**CNAME 域名不可以直接作为访问域名使用。**<br />将您的加速域名映射到 CNAME 域名后，腾讯云会动态的修改 CNAME 所指向的 IP 地址并使您的加速域名全部更新，无需您手动更改每一个加速域名指向的 IP 地址。 | 配置 CNAME        |

- **加速域名：**用户通过 `cdntest.com` 进行访问，`cdntest.com` 即为加速域名。
- **CNAME 域名：**加速域名接入后，系统会自动分配一个以 `.cdn.dnsv1.com` 或 `.dsa.dnsv1.com` 为后缀的 CNAME 域名，如 `cdntest.com.cdn.dnsv1.com`/`cdntest.com.dsa.dnsv1.com`。
- **源站地址：**CDN 节点没有缓存用户请求内容时，CDN 节点将会向 1.1.1.1 请求内容，1.1.1.1 即为源站地址。
- **回源 HOST：**CDN节点在请求 1.1.1.1 时，如果您期望实际请求的地址为 "originhost.com"，与终端用户请求的 "cdntest.com" 不同，则配置回源 HOST 为 "originhost.com"，此时终端用户通过 "cdntest.com" 回源时将访问 "originhost.com" 的内容 。通常情况下，加速域名与回源 HOST 域名保持一致，您可以根据您的业务需求进行调整。


## 操作步骤

进入 CDN 控制台，在左侧导航栏中找到**域名管理**，单击**添加域名**。
![](https://qcloudimg.tencent-cloud.cn/raw/5bc0e19956c74baa73a14fd99f618934.png)

进入添加域名页面后，您需要配置以下三个部分即可完成域名接入：

- [域名配置](#m1)
- [源站配置](#m2)


[](id:m1)

### 域名配置

1. 选择加速区域
2. 填写加速域名
   如果您接入的域名为以下情况，则需要进行域名归属权验证，验证步骤请参考下方 [域名归属权验证](https://cloud.tencent.com/document/product/228/61702)。
   - 首次接入该域名。
   - 该域名已被其他用户接入。
   - 接入域名为泛域名。
3. 选择加速类型
4. 其他选填项(后续可在域名管理中更改)

![](https://qcloudimg.tencent-cloud.cn/raw/6729a8964e562596e393d6aad3181a54.png)



##### 配置项详解: 

| 配置项   | 配置说明                                                     |
| :------- | :----------------------------------------------------------- |
| 加速区域 | 中国境内：全球用户访问均会调度至中国境内加速节点进行服务。若您的业务主要分布在国内，请选择中国境内加速。<br>中国境外：全球用户访问均会调度至中国境外的加速节点进行服务。若您的业务主要分布在海外，请选择中国境外加速；若存在跨境访问，不保证加速质量。<br>全球：全球用户访问将会择优调度至最近节点进行服务。若您的业务主要分布在全球各地，请选择全球加速；若存在跨境回源，不保证加速质量。<br><br>**注意事项：** <br>中国大陆境内与中国大陆境外加速服务计费不同，请参考 [计费说明](https://cloud.tencent.com/document/product/228/2949)。 |
| 加速域名 | 1. 域名长度不超过81个字符。<br>2. 境内域名已经在工信部进行过备案。<br>3. 域名为 `a.test.com`、`a.b.test.com` 等形式子域名或 `*.test.com`、`*.a.test.com` 形式泛域名。<br>4. 当接入域名为泛域名，或已被其他用户接入，或首次接入一个新域名时，需要进行[域名归属权验证](https://cloud.tencent.com/document/product/228/61702)。<br><br>**注意事项：** <br>1. 接入泛域名后，不支持其子域名或二级泛域名在其他账号接入。<br>2. 不支持 `*.test.com` 与 `*.a.test.com` 同时接入。<br>　• 境内中文域名需先以中文形式进行相关备案。　<br>　• 中文域名，例如“中文.域名”，可通过第三方工具转换成为 “xn--fiq228c.xn--eqrt2g” 后接入。　<br>　• 含下划线域名，例如 “test_qq.tencent.cloud”，开白之后可直接添加。<br>3. 若域名为恶意域名或高风险域名，不可接入。详细说明请见 [使用限制](https://cloud.tencent.com/document/product/228/37848)。 |
| 加速类型 | 腾讯云 CDN 针对不同业务类型进行了针对性的加速性能优化，建议选择与自身业务更加贴近的业务类型，来获取更优质的加速效果。<br>CDN 和 ECDN 分别适用于静态资源或动态资源加速。<br>CDN：<br>• 网页小文件：适用于电商、网站、UGC 社区等以小型静态资源（如网页样式、图片和小文件）为主的业务场景。<br>• 下载大文件：适用于较大文件，如游戏安装包、应用更新、应用程序包下载等业务场景。<br>• 音视频点播：适用于在线音视频点播等音视频文件的点播加速业务场景。<br>ECDN：<br>• 动静加速：适用于各类网站首页等动静态数据相融合的业务场景。<br>• 动态加速：适用于账号登录、订单交易、API 调用、实时查询等场景。<br><br>加速类型选定后不支持修改，如要更换，则需要删除域名后重新添加。 |
| IPv6访问 | IPv6 访问开关默认为关闭状态。开启后，支持通过 IPv6 协议访问 CDN 节点。<br><br>**注意事项：** <br>• 部分平台正在升级中，暂不支持开启 IPv6 访问，请等待后续全量发布。 <br>• 仅中国境内支持 IPv6 访问。<br />• 若域名的加速区域为全球，则开启 IPv6 访问开关后，仅中国境内生效。 |
| 所属项目 | 项目为腾讯云所有云产品共享资源集概念，[项目管理](https://console.cloud.tencent.com/project) 中可进行项目相关操作。 |
| 标签     | 标签键和标签值为必选项，若您未创建标签，可以在[标签管理](https://console.cloud.tencent.com/tag/taglist) 中可进行标签相关操作。 |

[](id:m2)

### 源站配置

1. 选择源站类型
2. 选择回源协议
3. 输入源站地址

![](https://qcloudimg.tencent-cloud.cn/raw/766b36ccbcb29c32e31b26bda967dc12.png)

##### **配置项详解：**

| 配置项    | 配置说明                                                     |
| :-------- | :----------------------------------------------------------- |
| 源站类型  | 自有源：<br>已经拥有稳定运行的业务服务器（即源站）场景。<br><br>[COS 源](https://cloud.tencent.com/product/cos):<br>使用腾讯云COS服务，可以直接选择对应的bucket。<br><br>第三方对象存储：<br>腾讯云以外的第三方对象存储，当前支持的第三方为：AWS S3 和阿里云 OSS。<br><br>**注意事项**：<br>部分平台暂不支持第三方对象存储，请等待后续全量发布。 |
| 源站地址  | 建议您的源站根据加速区域配置相同地域的源站，例如，加速区域为中国境内，请配置为境内源站回源，如果源站位于中国香港或境外，由于回源存在跨境访问，将无法为您保障回源效果。<br>如果您的加速区域为全球加速，可以在域名配置-源站配置中，设立区域独立源站，境内、境外根据不同区域回源到不同的源站内，以保障回源效果。<br><br>自有源：<br>1. 支持配置多个 IP 作为源站，回源时会进行轮询回源。<br>2. 支持增加配置端口（0 - 65535）和权重（1 - 100）。<br>**参考格式：** `源站:端口:权重`（端口可缺省：`源站::权重`）<br>**注：** HTTPS 协议暂时仅支持443端口。<br>3. 支持以域名作为源站，请注意此域名**不可**与 CDN 加速域名相同。<br>**注**：源站地址若为已接入的 CDN 加速域名，会造成循环解析，无法正常回源。<br><br>COS 源：<br>1. 选择腾讯云对象存储中的一个存储桶作为源站。<br>2. 根据存储桶处的配置和您的实际业务场景，选择默认域名或静态网站类型。<br>3. 根据您的存储桶文件读写权限，如果您的存储桶为私有桶（私有读写），请授权 CDN 并开启回源鉴权，即开启私有存储桶访问；如果您的存储桶为公有桶（包括公有读写、公有读私有写），不需要开启私有存储桶访问。<br><br>第三方对象存储：<br>1. 若资源已存储在第三方对象存储中，请输入有效的存储桶访问地址作为源站，当前支持的第三方为：AWS S3 和阿里云 OSS。<br>**注**：不可包含 `http://` 或 `http:// 协议头`，`my-bucket.oss-cn-beijing.aliyuncs.com` 或 `my-bucket.s3.ap-east-1.amazonaws.com`。<br>2. 回源至第三方私有存储桶，需填写有效密钥并开启回源鉴权，即开启私有存储桶访问。 |
| 回源协议  | 回源协议指腾讯 CDN 节点请求您源站资源时使用的应用层协议，根据源站支持情况进行选择：<br><br>HTTP：HTTP/HTTPS 访问均使用 HTTP 回源。<br><br>HTTPS：HTTP/HTTPS 访问均使用 HTTPS 回源，可以避免您的回源数据被窃取或者篡改，会少量消耗您源站的处理器资源（源站需要支持 HTTPS 访问）。<br><br>协议跟随：HTTP 访问使用 HTTP 回源，HTTPS 访问使用 HTTPS 回源。如果您仅需对部分关键的敏感数据采用 HTTPS 协议传输，其他业务采用 HTTP 协议传输，建议您选择"协议跟随"（源站需要支持 HTTPS 访问）。 |




## 接入完成

完成添加域名操作后，请耐心等待域名配置下发至全网节点，下发时间约5 - 10分钟。
<img src="https://main.qcloudimg.com/raw/3c247056a2910ee301c86852aee62624.png" width="80%">

## 后续工作

接入完成后，腾讯云 CDN 会为您分配对应的 CNAME 地址，您需要完成 CNAME 的配置，CDN 服务才能生效。详情请参见 [配置 CNAME](https://cloud.tencent.com/document/product/228/3121)。
