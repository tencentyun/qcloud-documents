多 AZ（Available Zone）是指由 [腾讯云对象存储](https://cloud.tencent.com/product/cos) 推出的多 AZ 存储架构，这一存储架构能够为用户数据提供数据中心级别的容灾能力。

客户数据分散存储在城市中多个不同的数据中心，当某个数据中心因为自然灾害、断电等极端情况导致整体故障时，多 AZ 存储架构依然可以为客户提供稳定可靠的存储服务。

多 AZ 特性为客户提供99.9999999999%（12个9）的数据设计可靠性和99.995%的服务设计可用性。在上传数据到对象存储时，只需要通过指定对象的存储类型，即可将对象存放到多 AZ 的地域。

> ?
> - 对象存储多 AZ 特性目前仅支持广州地域，其他公有云地域后续将陆续支持。
> - 使用对象存储多 AZ 特性，产生的存储容量费用相对较高，详情请参见 [产品定价](https://cloud.tencent.com/document/product/436/6239)。

## 多 AZ 的优势

当您将数据存储在多 AZ 地域时，数据会被打散成若干个分块，同时按照纠删码算法计算出对应的校验码分块。原始数据分块和校验码分块会被打散并均分存储到该地域的不同数据中心中，实现同城容灾。当某个数据中心不可用时，另外其他数据中心的数据依旧可以正常读取和写入，保障客户数据持久存储不丢失，维持客户业务数据连续性和高可用。使用对象存储多 AZ 具有以下优势：

- **同城容灾**：提供跨数据中心的容灾。多 AZ 存储架构下，对象数据会被存储在同个地域不同数据中心的不同设备中。当一个数据中心出现故障时，冗余数据中心保持可用，用户业务不受影响，数据不丢失。
- **稳定持久**：采用纠删码冗余存储的方式，提供了高达99.9999999999%的数据设计可靠性；数据分块存储，并发读写，提供高达99.995%的服务设计可用性。
- **便捷易用**：通过对象存储类型指定您的数据存储于何种存储架构，您可以指定存储桶内的任意对象存储到多 AZ 架构中，让使用更为简单。

多 AZ 存储和非多 AZ 存储的规格限制对比如下：

<table>
<thead>
<tr>
<th>对比项</th>
<th>多 AZ 存储</th>
<th>非多 AZ 存储</th>
</tr>
</thead>
<tbody><tr>
<td nowrap="nowrap">数据设计持久性</td>
<td nowrap="nowrap">99.9999999999%  （12个9）</td>
<td>99.999999999%（11个9）</td>
</tr>
<tr>
<td>服务设计可用性</td>
<td>99.995%</td>
<td>99.99%</td>
</tr>
<tr>
<td>支持的地域</td>
<td>广州地域</td>
<td>所有地域，详见 <a href="https://cloud.tencent.com/document/product/436/6224">地域和访问域名</a> 文档</td>
</tr>
<tr>
<td nowrap="nowrap">支持的存储类型</td>
<td>标准（MAZ-STANDARD）</td>
<td>标准（STANDARD）<br>低频（STANDARD-IA）<br>归档（ARCHIVE）</td>
</tr>
</tbody></table>


## 使用方法

用户可以为存储桶开启多 AZ 配置，在已开启多 AZ 配置的存储桶中上传对象，可以将对象的存储类型设置为多 AZ。目前多 AZ 存储架构仅支持标准存储类型，用户在上传对象时，指定对象的存储类型即可将对象存放到多 AZ 存储架构中。
简而言之，您只需要执行以下两步即可将文件存储到多 AZ 架构中：

1. 创建存储桶，并在**创建时**开启多 AZ 配置。存储桶的创建指引，可参见 [创建存储桶](https://cloud.tencent.com/document/product/436/13309) 文档。
2. 上传文件，并在上传时指定文件存储类型。文件的上传指引可参见 [上传对象](https://cloud.tencent.com/document/product/436/13321) 文档。

> ?
>
> - 存储桶多 AZ 配置开启后，无法进行修改，请谨慎配置；原先已创建的存储桶默认未开启多 AZ 配置，仅新创建的存储桶可以开启。
> - 开启多 AZ 配置的存储桶，仅支持上传多 AZ 标准存储类型（MAZ_STANDARD）。多 AZ 低频存储类型（MAZ_STANDARD_IA）和多 AZ 归档存储类型（MAZ_ARCHIVE）后续将会支持。
> - 如果您希望将存量数据存储于多 AZ 存储桶中，可以新建一个开启多 AZ 配置的存储桶，同时使用 COS Batch 的批量复制功能，将存量存储桶中的文件批量复制到新存储桶中。COS Batch 的使用指引，可参见 [批量处理](https://cloud.tencent.com/document/product/436/38605) 文档。

## 使用限制

目前对象存储 COS 仅支持上传多 AZ 标准存储类型（MAZ_STANDARD），因此涉及存储类型变更相关的功能同样存在限制，相关功能限制说明如下：

- 存储类型限制：当前仅支持多 AZ 标准存储类型（MAZ_STANDARD）。多 AZ 低频存储类型（MAZ_STANDARD_IA）和多 AZ 归档存储类型（MAZ_ARCHIVE）后续将会支持。
- 操作限制：当前仅支持对象的上传、下载和删除操作；支持对象复制到多 AZ 的存储桶，不支持复制到单 AZ 的存储桶。
- 生命周期限制：当前仅支持对象的过期删除，不支持沉降为其他存储类型。
- 跨地域复制限制：由于当前仅支持广州地域，其他地域均无此项配置，因此不支持跨地域复制。
- JSON 接口（即历史版本接口）无法在多 AZ 存储桶中上传或者下载对象，请升级到 XML 接口。
