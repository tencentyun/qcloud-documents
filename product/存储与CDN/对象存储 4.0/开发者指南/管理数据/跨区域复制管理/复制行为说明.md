本文档主要介绍用户在对存储桶启用了存储桶复制功能后，对象存储 COS 会复制的内容和不复制的内容。

## 复制的内容

在启用了存储桶复制功能的源存储桶中，对象存储将会复制以下内容：

- 添加存储桶复制规则后，用户往源存储桶中新上传的任何对象。
- 对象的元数据和版本 ID 等对象属性信息。
- 有关对象的操作信息，如新增同名对象（等同于新增对象），删除对象等。

>?
>
>- 如果您在源存储桶中指定删除某个对象版本，即指定了版本 ID，则该操作不会被复制。
>- 如果您在源存储桶中添加了存储桶级别配置，如生命周期规则，则因这些配置引起的对象操作也不会复制到目标存储桶中。

#### 存储桶复制下的删除操作

如果从源存储桶中删除对象，则存储桶复制行为如下所示：

- 不指定对象版本 ID 执行 DELETE 请求时，COS 将源存储桶中添加删除标记，如果选择了同步删除标记， 则存储桶复制会将该标记复制到目标存储桶 ；选择了不同步删除标记，则目标存储桶不会新增删除标记。两种情况下，目标存储桶均不会删除对应文件，用户可通过指定版本 ID 访问对象历史版本。 关于版本控制和删除标记的详细信息可参见 [版本控制概述](https://cloud.tencent.com/document/product/436/19883) 文档。
- 指定对象版本 ID 执行 DELETE 请求时，COS 将删除源存储桶中指定的对象版本，但不会在目标存储桶中复制这一删除操作，即 COS 不会在目标存储桶中删除指定的对象版本。此行为可防止恶意删除数据。

## 不会复制的内容

当源存储桶启用了存储桶复制功能，对象存储不会复制以下内容：

- 启用存储桶复制功能之前已存在的对象内容，即存量数据。
- 已加密的对象的加密信息，即加密对象被复制后将失去加密信息。
- 源存储桶中新增的数据是来自其它存储桶复制的对象数据。
- 存储桶级别的配置更新行为。
- 生命周期配置执行后的结果。

>?
>
>- 对象数据在存储桶间的存储桶复制不具备传递性，如果您同时设置了 A 存储桶为源存储桶，B 存储桶为目标存储桶和 B 存储桶为源存储桶，C 存储桶为目标存储桶的两条存储桶复制规则，那么 A 存储桶中的新增对象数据仅会复制到 B 存储桶中，而不会进一步复制到 C 存储桶中。
>- 例如生命周期的配置，当您更新了源存储桶的生命周期配置，COS 不会将这一生命周期配置同步应用到目标存储桶。
>- 如果您只对源存储桶配置了生命周期规则，对象存储会为过期对象添加删除标记，而目标存储桶不会复制这些标记。如果您希望目标存储桶能够删除过期对象，则需要您单独对目标存储桶配置与源存储桶相同的生命周期规则。
