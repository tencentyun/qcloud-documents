腾讯云 COS 在数据写入数据中心内的磁盘前会在对象级别上应用数据加密的保护策略，并在访问数据时自动解密，期间的加解密操作都是在服务端完成，只要在服务端验证了用户的访问权限，访问加密或未加密的对象便没有差别，这种服务端加密功能能有效保护静态数据。

> 注意：服务端加密仅加密对象数据而不加密对象元数据，而且使用服务端加密的对象必须使用有效签名访问，不可被匿名用户访问。

## 适用场景

- 私密数据存储场景：对于私密数据的存储，服务端加密可以对存储的数据进行加密，保证用户的隐私，用户访问时会自动解密。
- 私密数据传输场景：对于私密数据的传输，COS 提供用 HTTPS 部署 SSL 证书实现加密的功能，在传输链路层上建立加密层，确保数据在传输过程中不会被窃取及篡改。

## 支持说明

### 服务端加密支持的方式

一个对象只能选择使用一种加密方式，不能对同一对象使用不同类型的服务端加密。

- 使用具有腾讯云 COS 托管密钥的服务端加密（SSE-COS）：SSE-COS 采用了多因素强加密，确保使用唯一的密钥加密每个对象，同时采用 256 位高级加密标准（AES-256）来加密数据，并且会通过定期轮换的主密钥来对密钥本身进行加密。
- 使用具有腾讯云 KMS 托管密钥的服务端加密（SSE-KMS）：与 SSE-COS 相似，但会有一些额外的优势。KMS 提供了不同密钥和量子密钥两种不同主密钥类型，对用户的不同需求进行对应满足。详情请参考 [密钥管理服务](https://cloud.tencent.com/document/product/573)。
- 同时使用服务端加密与用户提供的密钥（SSE-C）：用户管理加密密钥，即用户的请求中会提供加密密钥给 COS，COS 在写入磁盘时管理加密并在访问对象时管理解密，因此用户不需要维护任何代码来执行加解密，只需管理加密密钥。

> 注意：COS 不存储用户提供的加密密钥，而是存储加密密钥添加了随机数据的 HMAC 值来验证未来的请求。无法使用添加了随机数据的 HMAC 值来推导出加密密钥的值或解密加密对象的内容，所以一旦用户丢失加密密钥，会失去该对象。 

### 支持的 API

> 注意：在列出存储桶中对象时，列表会返回所有对象的列表，无论对象是否加密。

腾讯云 COS 提供 REST API 与服务端加密相关的接口，在创建对象时可以通过提供 x-cos-server-side-encryption 头部来请求服务端加密。当用户执行以下上传和复制操作的时候，需要提供 x-cos-server-side-encryption 头部。

以下操作支持此标头：

- PUT 操作：在使用 PUT API 上传对象时指定请求头部。可参考 [PUT Object](https://cloud.tencent.com/document/product/436/7749)。
- Initiate Multipart Upload：当使用分段上传 API 上传大型对象时，在启动请求中指定标头。可参考 [Initiate Multipart Upload](https://cloud.tencent.com/document/product/436/7746)。
- POST 操作：允许用表单的形式上传对象，所有由 HTTP 头部携带的 API 参数，都使用表单字段请求。可参考 [POST Object](https://cloud.tencent.com/document/product/436/14690)。
- Copy 操作：在复制对象时，您同时具有源对象和目标对象。可参考 [PUT Object - Copy](https://cloud.tencent.com/document/product/436/10881)。

