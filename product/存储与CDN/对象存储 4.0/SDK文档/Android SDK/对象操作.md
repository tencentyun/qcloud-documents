## 简介

本文档提供关于对象的简单操作、分块操作等其他操作相关的 API 概览以及 SDK 示例代码。

**简单操作**

| API                                                          | 操作名         | 操作描述                                  |
| ------------------------------------------------------------ | -------------- | ----------------------------------------- |
| [GET Bucket（List Object）](https://cloud.tencent.com/document/product/436/7734) | 查询对象列表   | 查询存储桶下的部分或者全部对象     |
| [PUT Object](https://cloud.tencent.com/document/product/436/7749) | 简单上传对象       | 上传一个 Object（文件/对象）至 Bucket     |
| [POST Object](https://cloud.tencent.com/document/product/436/14690) | 表单上传对象   | 使用表单请求上传对象                      |
| [HEAD Object](https://cloud.tencent.com/document/product/436/7745) | 查询对象元数据 | 获得 Object 的 Meta 信息                  |
| [GET Object](https://cloud.tencent.com/document/product/436/7753) | 下载对象       | 下载一个 Object（文件/对象）至本地        |
| [Options Object](https://cloud.tencent.com/document/product/436/8288) | 预请求跨域配置 | 用预请求来确认是否可以发送真正的跨域请求  |
| [PUT Object - Copy](https://cloud.tencent.com/document/product/436/10881) | 设置对象复制   | 复制文件到目标路径                        |
| [DELETE Object](https://cloud.tencent.com/document/product/436/7743) | 删除单个对象   | 在 Bucket 中删除指定 Object （文件/对象） |
|[DELETE Multiple Object](https://cloud.tencent.com/document/product/436/8289)	 | 删除多个对象	|在 Bucket 中批量删除 Object （文件/对象）  |


**分块操作**

| API                                                          | 操作名         | 操作描述                             |
| ------------------------------------------------------------ | -------------- | ------------------------------------ |
| [List Multipart Uploads](https://cloud.tencent.com/document/product/436/7736) | 查询分块上传   | 查询正在进行中的分块上传信息         |
| [Initiate Multipart Upload](https://cloud.tencent.com/document/product/436/7746) | 初始化分块上传 | 初始化 Multipart Upload 上传操作     |
| [Upload Part](https://cloud.tencent.com/document/product/436/7750) | 上传分块       | 分块上传对象                        |
| [Upload Part - Copy](https://cloud.tencent.com/document/product/436/8287) | 复制分块       | 将其他对象复制为一个分块             |
| [List Parts](https://cloud.tencent.com/document/product/436/7747) | 查询已上传块   | 查询特定分块上传操作中的已上传的块   |
| [Complete Multipart Upload](https://cloud.tencent.com/document/product/436/7742) | 完成分块上传   | 完成整个文件的分块上传               |
| [Abort Multipart Upload](https://cloud.tencent.com/document/product/436/7740) | 终止分块上传   | 终止一个分块上传操作并删除已上传的块 |

**其他操作**

| API                                                          | 操作名       | 操作描述                                      |
| ------------------------------------------------------------ | ------------ | --------------------------------------------- |
| [POST Object restore](https://cloud.tencent.com/document/product/436/12633) | 恢复归档对象 | 将归档类型的对象取回访问                      |
| [PUT Object acl](https://cloud.tencent.com/document/product/436/7748) | 设置对象 ACL | 设置 Bucket 中某个 Object （文件/对象）的 ACL |
| [GET Object acl](https://cloud.tencent.com/document/product/436/7744) | 获取对象 ACL | 获取 Object（文件/对象）的 ACL                |

## 简单操作

### 查询对象列表

#### 功能说明

查询存储桶下的部分或者全部对象。

#### 方法原型

```java
GetBucketResult getBucket(GetBucketRequest request) throws CosXmlClientException, CosXmlServiceException;

void getBucketAsync(GetBucketRequest request, CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-get-bucket)
```java
String bucketName = "examplebucket-1250000000"; //格式：BucketName-APPID;
GetBucketRequest getBucketRequest = new GetBucketRequest(bucketName);

// 前缀匹配，用来规定返回的对象前缀地址
getBucketRequest.setPrefix("prefix");

// 如果是第一次调用，您无需设置 marker 参数，COS 会从头开始列出对象
// 如果需列出下一页对象，则需要将 marker 设置为上次列出对象时返回的 GetBucketResult.listBucket.nextMarker 值
// 如果返回的 GetBucketResult.listBucket.isTruncated 为 false，则说明您已经列出了所有满足条件的对象
// getBucketRequest.setMarker(marker);

// 单次返回最大的条目数量，默认1000
getBucketRequest.setMaxKeys(100);

// 定界符为一个符号，如果有 Prefix，
// 则将 Prefix 到 delimiter 之间的相同路径归为一类，定义为 Common Prefix，
// 然后列出所有 Common Prefix。如果没有 Prefix，则从路径起点开始
getBucketRequest.setDelimiter('/');

// 设置签名校验 Host, 默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
getBucketRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    GetBucketResult getBucketResult = cosXmlService.getBucket(getBucketRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.getBucketAsync(getBucketRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        GetBucketResult getBucketResult = (GetBucketResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Get Bucket failed because of CosXmlClientException or CosXmlServiceException...
    }
});

// 如果您需列出所有的对象，可以参考如下代码：

bucketName = "examplebucket-1250000000";
getBucketRequest = new GetBucketRequest(bucketName);

// prefix 表示列出的 object 的 key 以 prefix 开始
getBucketRequest.setPrefix("images/");
// delimiter 表示分隔符，设置为 / 表示列出当前目录下的 object, 设置为空表示列出所有的 object
getBucketRequest.setDelimiter("/");
// 设置最大遍历出多少个对象，一次 listobject 最大支持1000
getBucketRequest.setMaxKeys(100);
GetBucketResult getBucketResult = null;
do {
    try {
        getBucketResult = cosXmlService.getBucket(getBucketRequest);
    } catch (CosXmlClientException e) {
        e.printStackTrace();
        return;
    } catch (CosXmlServiceException e) {
        e.printStackTrace();
        return;
    }
    // commonPrefixs 表示表示被 delimiter 截断的路径，例如 delimter 设置为 /，commonPrefixs 则表示子目录的路径
    List<ListBucket.CommonPrefixes> commonPrefixs = getBucketResult.listBucket.commonPrefixesList;

    // contents 表示列出的 object 列表
    List<ListBucket.Contents> contents = getBucketResult.listBucket.contentsList;

    String nextMarker = getBucketResult.listBucket.nextMarker;
    getBucketRequest.setMarker(nextMarker);
} while (getBucketResult.listBucket.isTruncated);
```


> ?请求时，如需直接设置已计算好的签名串，则可通过调用`getBucketRequest.setSign("已计算好的签名串")`方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法 | 描述                               | 类型           |
| ------------------- | -------- | ---------------------------------- | -------------- |
| bucket              | 构造方法 | 存储桶名称，格式：BucketName-APPID | String         |
| prefix              | set 方法 | 限制返回的结果对象，以 prefix 为前缀。默认不进行限制，即 Bucket 下所有的成员| String         |
| marker              | set 方法 | 标记 list 的起点位置，第一次可设置为空，后续请求需设置为上一次 listObjects 返回值中的 nextMarker | String         |
| delimiter              | set 方法 | 分隔符，限制返回的是以 prefix 开头，并以 delimiter 第一次出现的结束的路径 | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | getBucketAsync                                                 | 结果回调        | CosXmlResultListener   |


#### 返回结果说明


通过 GetBucketResult 返回请求结果。

| 成员变量   | 类型                                                         | 描述                                                      |
| ---------- | ------------------------------------------------------------ | --------------------------------------------------------- |
| httpCode   | int                                                          | HTTP Code， [200， 300)之间表示操作成功，否则表示操作失败 |
| listBucket | [ListBucket](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/normal/java/com/tencent/cos/xml/model/tag/ListBucket.java) | 返回 Bucket 对象列表信息                                  |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 简单上传对象

#### 功能说明

上传一个 Object（文件/对象）至 Bucket。最大支持上传不超过5GB的对象，5GB以上对象请使用 [分块上传](#.E5.88.86.E5.9D.97.E6.93.8D.E4.BD.9C) 或 [高级接口](#.E9.AB.98.E7.BA.A7.E6.8E.A5.E5.8F.A3.EF.BC.88.E6.8E.A8.E8.8D.90.EF.BC.89) 上传。

#### 方法原型

```java
PutObjectResult putObject(PutObjectRequest request) throws CosXmlClientException, CosXmlServiceException;

void putObjectAsync(PutObjectRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-put-object)
```java
String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象位于存储桶中的位置标识符，即对象键。例如 cosPath = "text.txt";
String srcPath = new File(context.getExternalCacheDir(), "exampleobject").toString();//"本地文件的绝对路径";
PutObjectRequest putObjectRequest = new PutObjectRequest(bucket, cosPath, srcPath);

putObjectRequest.setProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long progress, long max) {
        // todo Do something to update progress...
    }
});
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
putObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法上传
try {
    PutObjectResult putObjectResult = cosXmlService.putObject(putObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调上传
cosXmlService.putObjectAsync(putObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        PutObjectResult putObjectResult = (PutObjectResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Put object failed because of CosXmlClientException or CosXmlServiceException...
    }
});


// 上传字节数组
byte[] data = "this is a test".getBytes(Charset.forName("UTF-8"));
putObjectRequest = new PutObjectRequest(bucket, cosPath, data);
putObjectRequest.setProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long progress, long max) {
        // todo Do something to update progress...
    }
});
try {
    PutObjectResult putObjectResult = cosXmlService.putObject(putObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}


// 上传字节流
InputStream inputStream = new ByteArrayInputStream("this is a test".getBytes(Charset.forName("UTF-8")));
putObjectRequest = new PutObjectRequest(bucket, cosPath, inputStream);
putObjectRequest.setProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long progress, long max) {
        // todo Do something to update progress...
    }
});
try {
    PutObjectResult putObjectResult = cosXmlService.putObject(putObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `putObjectRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型                        |
| ------------------- | ---------------------- | ------------------------------------------------------------ | --------------------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String                      |
| cosPath                 | 构造方法 或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String                      |
| srcPath             | 构造方法               | 用于上传到 COS 的本地文件的绝对路径                          | String                      |
| data                | 构造方法               | 用于上传到 COS 的 byte 数组                                  | byte[]                      |
|inputStream          | 构造方法               | 用于上传到 COS 的 字节流                                     | InputStream                 |
| progressCallback    | setProgressListener | 设置上传进度回调                                             | CosXmlProgressListener |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | putObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 PutObjectResult 返回请求结果。

| 成员变量 | 类型   | 描述                                                       |
| -------- | ------ | ---------------------------------------------------------- |
| httpCode | int    | HTTP Code， [200， 300)之间表示操作成功，否则表示操作失败 |
| eTag     | String | 返回对象的 eTag                                          |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 表单上传对象

#### 功能说明

使用表单请求上传对象。

#### 方法原型

```java
PostObjectResult postObject(PostObjectRequest request) throws CosXmlClientException, CosXmlServiceException；

void postObjectAsync(PostObjectRequest request, CosXmlResultListener cosXmlResultListener)；
```

#### 请求示例

[//]: # (.cssg-snippet-post-object)
```java
String bucket = "examplebucket-1250000000"; //存储桶名称，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象位于存储桶中的位置标识符，即对象键。例如 cosPath = "text.txt";
String srcPath = new File(context.getExternalCacheDir(), "exampleobject").toString();//"本地文件的绝对路径";

PostObjectRequest postObjectRequest = new PostObjectRequest(bucket, cosPath, srcPath);

postObjectRequest.setProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long progress, long max) {
        // todo Do something to update progress...
    }
});
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
postObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法上传
try {
    PostObjectResult postObjectResult = cosXmlService.postObject(postObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调上传
cosXmlService.postObjectAsync(postObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        PutObjectResult putObjectResult = (PutObjectResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Put object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```

#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型                        |
| ------------------- | ---------------------- | ------------------------------------------------------------ | --------------------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String                      |
| cosPath                 | 构造方法 或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String                      |
| srcPath             | 构造方法               | 用于上传到 COS 的本地文件的绝对路径                          | String                      |
| data                | 构造方法               | 用于上传到 COS 的 byte 数组                                  | byte[]                      |
| inputStream          | 构造方法               | 用于上传到 COS 的 字节流                                     | InputStream                 |
| progressCallback    | setProgressListener | 设置上传进度回调                                             | CosXmlProgressListener |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | postObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 PostObjectResult 返回请求结果。

| 成员变量 | 类型   | 描述                                                       |
| -------- | ------ | ---------------------------------------------------------- |
| httpCode | int    | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| eTag     | String | 返回对象的 eTag                                          |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 查询对象元数据

#### 功能说明

查询 Object 的 Meta 信息。

#### 方法原型

```java
HeadObjectResult headObject(HeadObjectRequest request) throws CosXmlClientException, CosXmlServiceException;

void headObjectAsync(HeadObjectRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-head-object)
```java
String bucket = bucket = "examplebucket-1250000000"; //存储桶名称，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象位于存储桶中的位置标识符，即对象键
HeadObjectRequest headObjectRequest = new HeadObjectRequest(bucket, cosPath);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
headObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    HeadObjectResult headObjectResult = cosXmlService.headObject(headObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.headObjectAsync(headObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        HeadObjectResult headObjectResult = (HeadObjectResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Head Bucket failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```

> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `headObjectRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法              | 描述                                                         | 类型           |
| ------------------- | --------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法              | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | headObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 HeadObjectResult 返回请求结果。

| 成员变量 | 类型   | 描述                                                       |
| -------- | ------ | ---------------------------------------------------------- |
| httpCode | int    | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| eTag     | String | 返回对象的 eTag                                          |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 下载对象

#### 功能说明

下载一个 Object（文件/对象）至本地（GET Object）。

#### 方法原型

```java
GetObjectResult getObject(GetObjectRequest request) throws CosXmlClientException, CosXmlServiceException;

void getObjectAsync(GetObjectRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-get-object)
```java
String bucket = "examplebucket-1250000000"; //存储桶名称，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象位于存储桶中的位置标识符，即对象键
String savePath = context.getExternalCacheDir().toString(); //本地路径

GetObjectRequest getObjectRequest = new GetObjectRequest(bucket, cosPath, savePath);
getObjectRequest.setProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long progress, long max) {
        // todo Do something to update progress...
    }
});
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
getObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法下载
try {
    GetObjectResult getObjectResult = cosXmlService.getObject(getObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.getObjectAsync(getObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult cosXmlResult) {
        GetObjectResult getObjectResult = (GetObjectResult) cosXmlResult;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Get Object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```

> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `getObjectRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型                        |
| ------------------- | ---------------------- | ------------------------------------------------------------ | --------------------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String                      |
| cosPath                 | 构造方法 或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String                      |
| localDir            | 构造方法               | 下载对象到本地保存的绝对文件夹路径                           | String                      |
| localFileName       | 构造方法               | 下载对象到本地保存的文件名                                   | String                      |
| progressCallback    | setProgressListener | 设置上传进度回调                                             | CosXmlProgressListener |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | getObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 GetObjectResult 返回请求结果。

| 成员变量 | 类型   | 描述                                                       |
| -------- | ------ | ---------------------------------------------------------- |
| httpCode | int    | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| eTag     | String | 返回对象的 eTag                                            |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 预请求跨域配置

#### 功能说明
获取预请求跨域配置（Options Object）。

#### 方法原型

```java
OptionObjectResult optionObject(OptionObjectRequest request) throws CosXmlClientException, CosXmlServiceException;

void optionObjectAsync(OptionObjectRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-option-object)
```java
String bucket = "examplebucket-1250000000"; //存储桶名称，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象位于存储桶中的位置标识符，即对象键
String origin = "https://cloud.tencent.com";
String accessMethod = "PUT";
OptionObjectRequest optionObjectRequest = new OptionObjectRequest(bucket, cosPath, origin, accessMethod);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
optionObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    OptionObjectResult result = cosXmlService.optionObject(optionObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.optionObjectAsync(optionObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        OptionObjectResult optionObjectResult = (OptionObjectResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo OptionOb Object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `optionObjectRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法                           | 描述                                                         | 类型           |
| ------------------- | ---------------------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法                           | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法 或 SetCosPath             | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| origin              | 构造方法 或 SetOrigin              | 模拟跨域访问的请求来源域名                                   | String         |
| accessMthod         | 构造方法 或 SetAccessControlMethod | 模拟跨域访问的请求 HTTP 方法                                 | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | optionObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 DeleteObjectResult 返回请求结果。

| 成员变量                        | 类型           | 描述                                                       |
| ------------------------------- | -------------- | ---------------------------------------------------------- |
| httpCode                        | int            | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| accessControlAllowHeaders       | `List<String>` | 跨域访问的允许请求头部                                     |
| accessControlAllowMethods       | `List<String>` | 跨域访问的允许请求 HTTP 方法                               |
| accessControlAllowExposeHeaders | `List<String>` | 跨域访问的允许请求自定义头部                               |
| accessControlMaxAge             | long           | OPTIONS 请求得到结果的有效期                               |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 设置对象复制

复制文件到目标路径（PUT Object-Copy）。

#### 方法原型

```java
CopyObjectResult copyObject(CopyObjectRequest request) throws CosXmlClientException, CosXmlServiceException;

void copyObjectAsync(CopyObjectRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-copy-object)
```java
String sourceAppid = "1250000000"; //账号 APPID
String sourceBucket = "sourcebucket-1250000000"; //源对象所在的存储桶
String sourceRegion = "COS_REGION"; //源对象的存储桶所在的地域
String sourceCosPath = "sourceObject"; //源对象键
// 构造源对象属性
CopyObjectRequest.CopySourceStruct copySourceStruct = new CopyObjectRequest.CopySourceStruct(sourceAppid, sourceBucket, sourceRegion, sourceCosPath);
String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键

CopyObjectRequest copyObjectRequest = new CopyObjectRequest(bucket, cosPath, copySourceStruct);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
copyObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    CopyObjectResult copyObjectResult = cosXmlService.copyObject(copyObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.copyObjectAsync(copyObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        CopyObjectResult copyObjectResult = (CopyObjectResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Copy Object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `copyObjectRequest.setSign(“已计算好的签名串”)` 方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法                 | 描述                                                         | 类型                 |
| ------------------- | ------------------------ | ------------------------------------------------------------ | -------------------- |
| bucket              | 构造方法                 | 存储桶名称，格式：BucketName-APPID                           | String               |
| cosPath                 | 构造方法 | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String               |
| copySourceStruct          | 构造方法            | 复制的数据源路径描述                                         | CopySourceStruct     |
| metaDataDirective   | setCopyMetaDataDirective | 是否拷贝源对象的元数据或者更新源对象的元数据                 | MetaDataDirective |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | copyObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 CopyObjectResult 返回请求结果。

| 成员变量   | 类型                                                         | 描述                                                       |
| ---------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| httpCode   | int                                                          | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| copyObject | [CopyObject](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/main/java/com/tencent/cos/xml/model/tag/CopyObject.java) | 返回成功复制的对象信息                                     |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。


### 删除单个对象

#### 功能说明

删除指定的对象（DELETE Object）。

#### 方法原型

```java
DeleteObjectResult deleteObject(DeleteObjectRequest request) throws CosXmlClientException, CosXmlServiceException;

void deleteObjectAsync(DeleteObjectRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-delete-object)
```java
String bucket = "examplebucket-1250000000"; //存储桶名称，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键

DeleteObjectRequest deleteObjectRequest = new DeleteObjectRequest(bucket, cosPath);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
deleteObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法删除
try {
    DeleteObjectResult deleteObjectResult = cosXmlService.deleteObject(deleteObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.deleteObjectAsync(deleteObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        DeleteObjectResult deleteObjectResult = (DeleteObjectResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Delete Object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `deleteObjectRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型           |
| ------------------- | ---------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法 或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | getBucketLocationAsync                                                | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 DeleteObjectResult 返回请求结果。

| 成员变量 | 类型 | 描述                                                       |
| -------- | ---- | ---------------------------------------------------------- |
| httpCode | int  | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 删除多个对象

#### 功能说明

批量删除多个对象（Delete Multi Objects）。

#### 方法原型

```java
DeleteMultiObjectResult deleteMultiObject(DeleteMultiObjectRequest request) throws CosXmlClientException, CosXmlServiceException;

void deleteMultiObjectAsync(DeleteMultiObjectRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-delete-multi-object)
```java
String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
List<String> objectList = new ArrayList<String>();
objectList.add("exampleobject"); //对象在存储桶中的位置标识符，即对象键

DeleteMultiObjectRequest deleteMultiObjectRequest = new DeleteMultiObjectRequest(bucket, objectList);
deleteMultiObjectRequest.setQuiet(true);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
deleteMultiObjectRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法删除
try {
    DeleteMultiObjectResult deleteMultiObjectResult = cosXmlService.deleteMultiObject(deleteMultiObjectRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.deleteMultiObjectAsync(deleteMultiObjectRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        // Delete Multi Object success...
        DeleteMultiObjectResult deleteMultiObjectResult = (DeleteMultiObjectResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        //  Delete Multi Object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `deleteMultiObjectRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型           |
| ------------------- | ---------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String         |
| quiet                     | true：只返回删除报错的文件信息； false：返回每个对象的删除结果 | Boolean              | 是   |
| objectList                | 需要删除的 [对象键](https://cloud.tencent.com/document/product/436/13324) 列表 | `List<String>`      | 是   |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | getBucketLocationAsync                                                | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 DeleteMultiObjectResult 返回请求结果。

| 成员变量 | 类型 | 描述                                                       |
| -------- | ---- | ---------------------------------------------------------- |
| httpCode | int  | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。


## 分块操作


- 分块上传对象： 初始化分块上传，上传分块，完成分块上传。
- 分块续传：查询已上传块， 上传分块，完成分块上传。
- 删除已上传分块。



### 查询分块上传

#### 功能说明

查询指定存储桶中正在进行的分块上传（List Multipart Uploads）。

#### 方法原型

```java
ListMultiUploadsResult listMultiUploads(ListMultiUploadsRequest request) throws CosXmlClientException, CosXmlServiceException;

void listMultiUploadsAsync(ListMultiUploadsRequest request, CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-list-multi-upload)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
ListMultiUploadsRequest listMultiUploadsRequest = new ListMultiUploadsRequest(bucket);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
listMultiUploadsRequest.setSignParamsAndHeaders(null, headerKeys);
try {
    // 使用同步方法
    ListMultiUploadsResult listMultiUploadsResult = cosXmlService.listMultiUploads(listMultiUploadsRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.listMultiUploadsAsync(listMultiUploadsRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        // Delete Multi Object success...
        ListMultiUploadsResult listMultiUploadsResult = (ListMultiUploadsResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        //  Delete Multi Object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```

#### 参数说明

| 参数名称            | 设置方法 | 描述                               | 类型           |
| ------------------- | -------- | ---------------------------------- | -------------- |
| bucket              | 构造方法 | 存储桶名称，格式：BucketName-APPID | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | getBucketLocationAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 ListMultiUploadsResult 返回请求结果。

| 成员变量             | 类型                                                         | 描述                                                       |
| -------------------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| httpCode             | int                                                          | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| listMultipartUploads | [ListMultipartUploads](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/normal/java/com/tencent/cos/xml/model/tag/ListMultipartUploads.java) | 返回 Bucket 中所有正在进行分块上传的信息                   |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### <span id = "INIT_MULIT_UPLOAD"> 初始化分块上传 </span>

#### 功能说明

初始化 Multipart Upload 上传操作，获取对应的 uploadId（Initiate Multipart Upload）。

#### 方法原型

```java
InitMultipartUploadResult initMultipartUpload(InitMultipartUploadRequest request) throws CosXmlClientException, CosXmlServiceException;

void initMultipartUploadAsync(InitMultipartUploadRequest request, CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-init-multi-upload)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键。 例如 cosPath = "text.txt";

InitMultipartUploadRequest initMultipartUploadRequest = new InitMultipartUploadRequest(bucket, cosPath);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
initMultipartUploadRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法请求
try {
    InitMultipartUploadResult initMultipartUploadResult = cosXmlService.initMultipartUpload(initMultipartUploadRequest);
    uploadId = initMultipartUploadResult.initMultipartUpload.uploadId;
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.initMultipartUploadAsync(initMultipartUploadRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        String uploadId = ((InitMultipartUploadResult) result).initMultipartUpload.uploadId;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Init Multipart Upload failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `initMultipartUploadRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型           |
| ------------------- | ---------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法 或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | getBucketLocationAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 InitMultipartUploadResult 返回请求结果。

| 成员变量            | 类型                                                         | 描述                                                       |
| ------------------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| httpCode            | int                                                          | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| initMultipartUpload | [InitiateMultipartUpload](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/main/java/com/tencent/cos/xml/model/tag/InitiateMultipartUpload.java) | 返回对象初始化分块上传的 uploadId                        |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。



### <span id = "MULIT_UPLOAD_PART"> 上传分块 </span>

分块上传对象（Upload Part）。

#### 方法原型

```java
UploadPartResult uploadPart(UploadPartRequest request) throws CosXmlClientException, CosXmlServiceException;

void uploadPartAsync(UploadPartRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-upload-part)
```java
String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键
String uploadId = "exampleUploadId"; //初始化分块上传返回的 uploadId
int partNumber = 1; //分块块编号，必须从1开始递增
String srcPath = new File(context.getExternalCacheDir(), "exampleobject").toString(); //本地文件绝对路径
UploadPartRequest uploadPartRequest = new UploadPartRequest(bucket, cosPath, partNumber, srcPath, uploadId);

uploadPartRequest.setProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long progress, long max) {
        // todo Do something to update progress...
    }
});
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
uploadPartRequest.setSignParamsAndHeaders(null, headerKeys);
//使用同步方法上传
try {
    UploadPartResult uploadPartResult = cosXmlService.uploadPart(uploadPartRequest);
    eTag = uploadPartResult.eTag; //获取分块块的 eTag
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}


// 使用异步回调请求
cosXmlService.uploadPartAsync(uploadPartRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        String eTag = ((UploadPartResult) result).eTag;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Upload Part failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```

#### 参数说明

| 参数名称            | 设置方法                  | 描述                                                         | 类型                        |
| ------------------- | ------------------------- | ------------------------------------------------------------ | --------------------------- |
| bucket              | 构造方法                  | 存储桶名称，格式：BucketName-APPID                           | String                      |
| cosPath                 | 构造方法 或 SetCosPath    | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String                      |
| uploadId            | 构造方法 或 SetUploadId   | 标识指定分块上传的 uploadId                                  | String                      |
| partNumber          | 构造方法 或 SetPartNumber | 标识指定分块的编号，必须 >= 1                                | int                         |
| srcPath             | 构造方法                  | 用于上传到 COS 的本地文件的绝对路径                          | String                      |
| data                | 构造方法                  | 用于上传到 COS 的 byte 数组                                  | byte[]                      |
| progressCallback    | SetCosProgressCallback    | 设置上传进度回调                                             | Callback.OnProgressCallback |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 URL 中查询参数    | `Set<String>` |
| cosXmlResultListener      | uploadPartAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 UploadPartResult 返回请求结果。

| 成员变量 | 类型   | 描述                                                       |
| -------- | ------ | ---------------------------------------------------------- |
| httpCode | int    | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| eTag     | String | 返回对象的分块的 eTag                                   |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 复制分块

#### 功能说明

将其他对象复制为一个分块 （Upload Part-Copy）。

#### 方法原型

```java
UploadPartCopyResult copyObject(UploadPartCopyRequest request) throws CosXmlClientException, CosXmlServiceException;

void copyObjectAsync(UploadPartCopyRequest request,final CosXmlResultListener cosXmlResultListener);
```
#### 请求示例

[//]: # (.cssg-snippet-upload-part-copy)
```java
//具体步骤：
// 1. 调用 cosXmlService.initMultipartUpload(InitMultipartUploadRequest) 初始化分块,请参考 [InitMultipartUploadRequest 初始化分块](#InitMultipartUploadRequest)。
// 2. 调用 cosXmlService.copyObject(UploadPartCopyRequest) 完成分块复制。
// 3. 调用 cosXmlService.completeMultiUpload(CompleteMultiUploadRequest) 完成分块复制,请参考 [CompleteMultiUploadRequest 完成分块复制](#CompleteMultiUploadRequest)。

String sourceAppid = "1250000000"; //账号 APPID
String sourceBucket = "sourcebucket-1250000000"; //源对象所在的存储桶
String sourceRegion = "COS_REGION"; //源对象的存储桶所在的地域
String sourceCosPath = "sourceObject"; //源对象键
// 构造源对象属性
CopyObjectRequest.CopySourceStruct copySourceStruct = new CopyObjectRequest.CopySourceStruct(sourceAppid, sourceBucket, sourceRegion, sourceCosPath);

String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键

String uploadId = "exampleUploadId";
int partNumber = 1; //分块编号
long start = 0; //复制源对象的开始位置
long end = 1023; //复制源对象的结束位置

UploadPartCopyRequest uploadPartCopyRequest = new UploadPartCopyRequest(bucket, cosPath, partNumber, uploadId, copySourceStruct, start, end);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
uploadPartCopyRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    UploadPartCopyResult uploadPartCopyResult = cosXmlService.copyObject(uploadPartCopyRequest);
    eTag = uploadPartCopyResult.copyObject.eTag;
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.copyObjectAsync(uploadPartCopyRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        UploadPartCopyResult uploadPartCopyResult = (UploadPartCopyResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Copy Object failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `uploadPartCopyRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法                 | 描述                                                         | 类型                 |
| ------------------- | ------------------------ | ------------------------------------------------------------ | -------------------- |
| bucket              | 构造方法                 | 存储桶名称，格式：BucketName-APPID                           | String               |
| cosPath                 | 构造方法 | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String               |
| copySourceStruct          | 构造方法            | 复制的数据源路径描述                                         | CopySourceStruct     |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 URL 中查询参数    | `Set<String>` |
| cosXmlResultListener      | copyObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 CopyObjectResult 返回请求结果。

| 成员变量   | 类型                                                         | 描述                                                       |
| ---------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| httpCode   | int                                                          | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| copyObject | [CopyObject](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/main/java/com/tencent/cos/xml/model/tag/CopyObject.java) | 返回成功复制的对象信息                                     |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。


### <span id = "LIST_MULIT_UPLOAD"> 查询已上传块 </span>

#### 功能说明

查询特定分块上传操作中的已上传的块（List Parts）。

#### 方法原型

```java
ListPartsResult listParts(ListPartsRequest request) throws CosXmlClientException, CosXmlServiceException;

void listPartsAsync(ListPartsRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-list-parts)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键。 例如 cosPath = "text.txt";
String uploadId = "exampleUploadId";

ListPartsRequest listPartsRequest = new ListPartsRequest(bucket, cosPath, uploadId);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
listPartsRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法请求
try {
    ListPartsResult listPartsResult = cosXmlService.listParts(listPartsRequest);
    ListParts listParts = listPartsResult.listParts;
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.listPartsAsync(listPartsRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        ListParts listParts = ((ListPartsResult) result).listParts;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo List Part failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `listPartsRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法                | 描述                                                         | 类型           |
| ------------------- | ----------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法                | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法 或 SetCosPath  | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| uploadId            | 构造方法 或 SetUploadId | 标识指定分块上传的 uploadId                                  | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 URL 中查询参数    | `Set<String>` |
| cosXmlResultListener      | listPartsAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 ListPartsResult 返回请求结果。

| 成员变量  | 类型                                                         | 描述                                                       |
| --------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| httpCode  | int                                                          | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| listParts | [ListParts](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/main/java/com/tencent/cos/xml/model/tag/ListParts.java) | 返回指定 uploadId 分块上传中的已上传的块信息               |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。



### <span id = "COMPLETE_MULIT_UPLOAD"> 完成分块上传 </span>

#### 功能说明

完成整个文件的分块上传（Complete Multipart Upload）。

#### 请求示例
[//]: # (.cssg-snippet-complete-multi-upload)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键。 例如 cosPath = "text.txt";
String uploadId = "exampleUploadId";
int partNumber = 1;
String etag = "exampleETag";
Map<Integer, String> partNumberAndETag = new HashMap<>();
partNumberAndETag.put(partNumber, etag);

CompleteMultiUploadRequest completeMultiUploadRequest = new CompleteMultiUploadRequest(bucket, cosPath, uploadId, partNumberAndETag);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
completeMultiUploadRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法请求
try {
    CompleteMultiUploadResult completeMultiUploadResult = cosXmlService.completeMultiUpload(completeMultiUploadRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.completeMultiUploadAsync(completeMultiUploadRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        CompleteMultiUploadResult completeMultiUploadResult = (CompleteMultiUploadResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Complete Multi Upload failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `completeMultiUploadRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法                | 描述                                                         | 类型                       |
| ------------------- | ----------------------- | ------------------------------------------------------------ | -------------------------- |
| bucket              | 构造方法                | 存储桶名称，格式：BucketName-APPID                           | String                     |
| cosPath                 | 构造方法 或 SetCosPath  | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String                     |
| uploadId            | 构造方法 或 SetUploadId | 标识指定分块上传的 uploadId                                  | String                     |
| partNumber          | SetPartNumberAndETag    | 标识指定分块的编号，必须 >= 1                              | int                        |
| eTag                | SetPartNumberAndETag    | 标识指定分块的上传返回的 eTag                              | String                     |
| partNumberAndETags  | SetPartNumberAndETag    | 标识分块的编号和上传返回的 eTag                            | `Dictionary<int, String> ` |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 URL 中查询参数    | `Set<String>` |
| cosXmlResultListener      | completeMultiUploadAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 CompleteMultipartUploadResult 返回请求结果。

| 成员变量       | 类型                                                         | 描述                                                       |
| -------------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| httpCode       | int                                                          | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| CompleteResult | [CompleteMultipartUploadResult](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/main/java/com/tencent/cos/xml/model/tag/CompleteMultipartUploadResult.java) | 返回所有分块上传成功信息                                 |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### <span id = "ABORT_MULIT_UPLOAD"> 终止分块上传 </span>

#### 功能说明

终止一个分块上传操作并删除已上传的块（Abort Multipart Upload）。

#### 方法原型

```java
AbortMultiUploadResult abortMultiUpload(AbortMultiUploadRequest request) throws CosXmlClientException, CosXmlServiceException;

void abortMultiUploadAsync(AbortMultiUploadRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-abort-multi-upload)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键。 例如 cosPath = "text.txt";
String uploadId = "exampleUploadId";

AbortMultiUploadRequest abortMultiUploadRequest = new AbortMultiUploadRequest(bucket, cosPath, uploadId);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
abortMultiUploadRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法请求
try {
    AbortMultiUploadResult abortMultiUploadResult = cosXmlService.abortMultiUpload(abortMultiUploadRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
    //
}

// 使用异步回调请求
cosXmlService.abortMultiUploadAsync(abortMultiUploadRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest cosXmlRequest, CosXmlResult result) {
        // todo Abort Multi Upload success...
        AbortMultiUploadResult abortMultiUploadResult = (AbortMultiUploadResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Abort Multi Upload failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `abortMultiUploadRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。

#### 参数说明

| 参数名称            | 设置方法                | 描述                                                         | 类型           |
| ------------------- | ----------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法                | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法 或 SetCosPath  | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| uploadId            | 构造方法 或 SetUploadId | 标识指定分块上传的 uploadId                                  | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 URL 中查询参数    | `Set<String>` |
| cosXmlResultListener      | abortMultiUploadAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 AbortMultipartUploadResult 返回请求结果。

| 成员变量 | 类型 | 描述                                                       |
| -------- | ---- | ---------------------------------------------------------- |
| httpCode | int  | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。


## 其他操作

### 恢复归档对象 

#### 功能说明

将归档类型的对象取回访问（POST Object restore）。

#### 方法原型

```java
RestoreResult restoreObject(RestoreRequest request) throws CosXmlClientException, CosXmlServiceException;

void restoreObjectAsync(RestoreRequest request,  CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-restore-object)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键。 例如 cosPath = "text.txt";
RestoreRequest restoreRequest = new RestoreRequest(bucket, cosPath);
restoreRequest.setExpireDays(5); // 保留5天
restoreRequest.setTier(RestoreConfigure.Tier.Standard); // 标准恢复模式
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
restoreRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    RestoreResult restoreResult = cosXmlService.restoreObject(restoreRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.restoreObjectAsync(restoreRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        // todo Get Bucket ACL success
        RestoreResult restoreResult = (RestoreResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Get Bucket ACL failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `restoreRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型                  |
| ------------------- | ---------------------- | ------------------------------------------------------------ | --------------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String                |
| cosPath                 | 构造方法 或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String                |
| days                | SetExpireDays          | 设置临时副本的过期时间                                       | int                   |
| tier                | SetTier                | 恢复数据时，Tier 可以指定为 CAS 支持的三种恢复类型，分别为 Expedited、Standard、Bulk | RestoreConfigure.Tier |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 URL 中查询参数    | `Set<String>` |
| cosXmlResultListener      | restoreObjectAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 RestoreObjectResult 返回请求结果。

| 成员变量 | 类型 | 描述                                                       |
| -------- | ---- | ---------------------------------------------------------- |
| httpCode | int  | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 设置对象 ACL

#### 功能说明

设置 Bucket 中某个 Object （文件/对象）的 ACL（PUT Object acl）。

#### 方法原型

```java
PutObjectACLResult putObjectACL(PutObjectACLRequest request) throws CosXmlClientException, CosXmlServiceException;

void putObjectACLAsync(PutObjectACLRequest request, final CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-put-object-acl)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键。 例如 cosPath = "text.txt";
PutObjectACLRequest putObjectACLRequest = new PutObjectACLRequest(bucket, cosPath);

// 设置 bucket 访问权限
putObjectACLRequest.setXCOSACL("public-read");

// 赋予被授权者读的权限
ACLAccount readACLS = new ACLAccount();
readACLS.addAccount("100000000001", "100000000001");
putObjectACLRequest.setXCOSGrantRead(readACLS);

// 赋予被授权者读写的权限
ACLAccount writeandReadACLS = new ACLAccount();
writeandReadACLS.addAccount("100000000001", "100000000001");
putObjectACLRequest.setXCOSReadWrite(writeandReadACLS);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
putObjectACLRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    PutObjectACLResult putObjectACLResult = cosXmlService.putObjectACL(putObjectACLRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.putObjectACLAsync(putObjectACLRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        PutObjectACLResult putObjectACLResult = (PutObjectACLResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Put Bucket ACL failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```

> ?请求时，如需直接设置已计算好的签名串，则可通过调用`putObjectACLRequest.setSign("已计算好的签名串")`方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法                                                  | 描述                                                         | 类型           |
| ------------------- | --------------------------------------------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法                                                  | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法 或 SetCosPath                                    | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| cosAcl              | SetCosAcl                                                 | 设置存储桶的 ACL 权限                                          | String         |
| grandtAccout        | SetXCosGrantRead 或 SetXCosReadWrite | 授予用户读写权限                                             | GrantAccount   |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | putObjectACLAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 PutObjectACLResult 返回请求结果。

| 成员变量 | 类型 | 描述                                                       |
| -------- | ---- | ---------------------------------------------------------- |
| httpCode | int  | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

### 查询对象 ACL

#### 功能说明

查询 Object（文件/对象）的 ACL（GET Object acl）。

#### 方法原型

```java
GetObjectACLResult getObjectACL(GetObjectACLRequest request) throws CosXmlClientException, CosXmlServiceException;

void getObjectACLAsync(GetObjectACLRequest request, CosXmlResultListener cosXmlResultListener);
```

#### 请求示例

[//]: # (.cssg-snippet-get-object-acl)
```java
String bucket = "examplebucket-1250000000"; //格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键。 例如 cosPath = "text.txt";
GetObjectACLRequest getBucketACLRequest = new GetObjectACLRequest(bucket, cosPath);
// 设置签名校验 Host，默认校验所有 Header
Set<String> headerKeys = new HashSet<>();
headerKeys.add("Host");
getBucketACLRequest.setSignParamsAndHeaders(null, headerKeys);
// 使用同步方法
try {
    GetObjectACLResult getObjectACLResult = cosXmlService.getObjectACL(getBucketACLRequest);
} catch (CosXmlClientException e) {
    e.printStackTrace();
} catch (CosXmlServiceException e) {
    e.printStackTrace();
}

// 使用异步回调请求
cosXmlService.getObjectACLAsync(getBucketACLRequest, new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        GetObjectACLResult getObjectACLResult = (GetObjectACLResult) result;
    }

    @Override
    public void onFail(CosXmlRequest cosXmlRequest, CosXmlClientException clientException, CosXmlServiceException serviceException) {
        // todo Get Bucket ACL failed because of CosXmlClientException or CosXmlServiceException...
    }
});
```
> ?请求时，如需直接设置已计算好的签名串，则可通过调用 `getBucketACLRequest.setSign("已计算好的签名串")` 方法设置，默认由 SDK 计算签名串。


#### 参数说明

| 参数名称            | 设置方法               | 描述                                                         | 类型           |
| ------------------- | ---------------------- | ------------------------------------------------------------ | -------------- |
| bucket              | 构造方法               | 存储桶名称，格式：BucketName-APPID                           | String         |
| cosPath                 | 构造方法 或 SetCosPath | 对象位于存储桶中的位置标识符，即 [对象键](https://cloud.tencent.com/document/product/436/13324) | String         |
| headerKeys          | setSignParamsAndHeaders  | 签名是否校验 header                | `Set<String>` |
| queryParameterKeys          | setSignParamsAndHeaders  | 签名是否校验请求 url 中查询参数    | `Set<String>` |
| cosXmlResultListener      | getObjectACLAsync                                                 | 结果回调        | CosXmlResultListener   |

#### 返回结果说明

通过 GetObjectACLResult 返回请求结果。

| 成员变量            | 类型                                                         | 描述                                                       |
| ------------------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| httpCode            | int                                                          | HTTP Code，  [200， 300)之间表示操作成功，否则表示操作失败 |
| accessControlPolicy | [AccessControlPolicy](https://github.com/tencentyun/qcloud-sdk-android/blob/master/QCloudCosXml/cosxml/src/normal/java/com/tencent/cos/xml/model/tag/AccessControlPolicy.java) | 返回对象的访问权限列表信息                               |

> ?操作失败时，SDK 将抛出 [CosXmlClientException](https://cloud.tencent.com/document/product/436/34539#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.BC.82.E5.B8.B8) 或 [CosXmlServiceException](https://cloud.tencent.com/document/product/436/34539#.E6.9C.8D.E5.8A.A1.E7.AB.AF.E5.BC.82.E5.B8.B8) 异常。

## 高级接口（推荐）

### 上传对象

**TransferManager**、**COSXMLUploadTask** 封装了简单上传、分块上传接口的异步请求，并支持暂停、恢复以及取消上传请求，同时支持续传功能。我们推荐使用这种方式来上传对象，示例代码如下：

[//]: # (.cssg-snippet-transfer-upload-object)
```java
// 初始化 TransferConfig
TransferConfig transferConfig = new TransferConfig.Builder().build();

/*若有特殊要求，则可以如下进行初始化定制。例如限定当对象 >= 2M 时，启用分块上传，且分块上传的分块大小为1M，当源对象大于5M时启用分块复制，且分块复制的大小为5M。*/
transferConfig = new TransferConfig.Builder()
        .setDividsionForCopy(5 * 1024 * 1024) // 是否启用分块复制的最小对象大小
        .setSliceSizeForCopy(5 * 1024 * 1024) // 分块复制时的分块大小
        .setDivisionForUpload(2 * 1024 * 1024) // 是否启用分块上传的最小对象大小
        .setSliceSizeForUpload(1024 * 1024) // 分块上传时的分块大小
        .build();

// 初始化 TransferManager
TransferManager transferManager = new TransferManager(cosXmlService, transferConfig);

String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即称对象键
String srcPath = new File(context.getExternalCacheDir(), "exampleobject").toString(); //本地文件的绝对路径
String uploadId = null; //若存在初始化分块上传的 UploadId，则赋值对应的 uploadId 值用于续传；否则，赋值 null
// 上传对象
COSXMLUploadTask cosxmlUploadTask = transferManager.upload(bucket, cosPath, srcPath, uploadId);

/**
 * 若是上传字节数组，则可调用 TransferManager 的 upload(string, string, byte[]) 方法实现;
 * byte[] bytes = "this is a test".getBytes(Charset.forName("UTF-8"));
 * cosxmlUploadTask = transferManager.upload(bucket, cosPath, bytes);
 */

/**
 * 若是上传字节流，则可调用 TransferManager 的 upload(String, String, InputStream) 方法实现；
 * InputStream inputStream = new ByteArrayInputStream("this is a test".getBytes(Charset.forName("UTF-8")));
 * cosxmlUploadTask = transferManager.upload(bucket, cosPath, inputStream);
 */

//设置上传进度回调
cosxmlUploadTask.setCosXmlProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long complete, long target) {
        // todo Do something to update progress...
    }
});
//设置返回结果回调
cosxmlUploadTask.setCosXmlResultListener(new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        COSXMLUploadTask.COSXMLUploadTaskResult cOSXMLUploadTaskResult = (COSXMLUploadTask.COSXMLUploadTaskResult) result;
    }

    @Override
    public void onFail(CosXmlRequest request, CosXmlClientException exception, CosXmlServiceException serviceException) {
        // todo Upload failed because of CosXmlClientException or CosXmlServiceException...
    }
});
//设置任务状态回调, 可以查看任务过程
cosxmlUploadTask.setTransferStateListener(new TransferStateListener() {
    @Override
    public void onStateChanged(TransferState state) {
        // todo notify transfer state
    }
});

/**
 若有特殊要求，则可以如下操作：
 PutObjectRequest putObjectRequest = new PutObjectRequest(bucket, cosPath, srcPath);
 putObjectRequest.setRegion(region); //设置存储桶所在的地域
 putObjectRequest.setNeedMD5(true); //是否启用 Md5 校验
 COSXMLUploadTask cosxmlUploadTask = transferManager.upload(putObjectRequest, uploadId);
 */

//取消上传
cosxmlUploadTask.cancel();


//暂停上传
cosxmlUploadTask.pause();

//恢复上传
cosxmlUploadTask.resume();
```

### 下载对象

**TransferManager**、**COSXMLDownloadTask** 封装了下载接口的异步请求，并支持暂停、恢复以及取消下载请求，同时支断点下载功能。示例代码如下：

[//]: # (.cssg-snippet-transfer-download-object)
```java
Context applicationContext = context.getApplicationContext(); // application context
String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即称对象键
String savePathDir = context.getExternalCacheDir().toString(); //本地目录路径
String savedFileName = "exampleobject";//本地保存的文件名，若不填（null），则与 COS 上的文件名一样
//下载对象
TransferConfig transferConfig = new TransferConfig.Builder().build();
//初始化 TransferManager
TransferManager transferManager = new TransferManager(cosXmlService, transferConfig);
COSXMLDownloadTask cosxmlDownloadTask = transferManager.download(applicationContext, bucket, cosPath, savePathDir, savedFileName);
//设置下载进度回调
cosxmlDownloadTask.setCosXmlProgressListener(new CosXmlProgressListener() {
    @Override
    public void onProgress(long complete, long target) {
        // todo Do something to update progress...
    }
});
//设置返回结果回调
cosxmlDownloadTask.setCosXmlResultListener(new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        COSXMLDownloadTask.COSXMLDownloadTaskResult cOSXMLDownloadTaskResult = (COSXMLDownloadTask.COSXMLDownloadTaskResult) result;
    }

    @Override
    public void onFail(CosXmlRequest request, CosXmlClientException exception, CosXmlServiceException serviceException) {
        // todo Download failed because of CosXmlClientException or CosXmlServiceException...
    }
});
//设置任务状态回调，可以查看任务过程
cosxmlDownloadTask.setTransferStateListener(new TransferStateListener() {
    @Override
    public void onStateChanged(TransferState state) {
        // todo notify transfer state
    }
});

/**
 若有特殊要求，则可以如下操作：
 GetObjectRequest getObjectRequest = new GetObjectRequest(bucket, cosPath, localDir, localFileName);
 getObjectRequest.setRegion(region); //设置存储桶所在的地域
 COSXMLDownloadTask cosxmlDownloadTask = transferManager.download(context, getObjectRequest);
 */

//取消下载
cosxmlDownloadTask.cancel();

//暂停下载
cosxmlDownloadTask.pause();

//恢复下载
cosxmlDownloadTask.resume();
```

>?高级下载接口支持断点续传，所以会在下载前先发起 HEAD 请求获取文件信息。如果您使用的是临时密钥或者使用子账号访问，请确保权限列表中包含 HeadObject 的权限。

### 复制对象

**TransferManager**、**COSXMLCopyTask** 封装了简单复制、分块复制接口的异步请求，并支持暂停、恢复以及取消复制请求。示例代码如下：

[//]: # (.cssg-snippet-transfer-copy-object)
```java
String sourceAppid = ""; //账号 APPID
String sourceBucket = "sourcebucket-1250000000"; //源对象所在的存储桶
String sourceRegion = "COS_REGION"; //源对象的存储桶所在的地域
String sourceCosPath = ""; //源对象的对象键
//构造源对象属性
CopyObjectRequest.CopySourceStruct copySourceStruct = new CopyObjectRequest.CopySourceStruct(sourceAppid, sourceBucket, sourceRegion, sourceCosPath);

String bucket = "examplebucket-1250000000"; //存储桶，格式：BucketName-APPID
String cosPath = "exampleobject"; //对象在存储桶中的位置标识符，即对象键

TransferConfig transferConfig = new TransferConfig.Builder().build();
//初始化 TransferManager
TransferManager transferManager = new TransferManager(cosXmlService, transferConfig);
//复制对象
COSXMLCopyTask cosxmlCopyTask = transferManager.copy(bucket, cosPath, copySourceStruct);
//设置返回结果回调
cosxmlCopyTask.setCosXmlResultListener(new CosXmlResultListener() {
    @Override
    public void onSuccess(CosXmlRequest request, CosXmlResult result) {
        COSXMLCopyTask.COSXMLCopyTaskResult cOSXMLCopyTaskResult = (COSXMLCopyTask.COSXMLCopyTaskResult) result;
    }

    @Override
    public void onFail(CosXmlRequest request, CosXmlClientException exception, CosXmlServiceException serviceException) {
        // todo Copy failed because of CosXmlClientException or CosXmlServiceException...
    }
});
//设置任务状态回调, 可以查看任务过程
cosxmlCopyTask.setTransferStateListener(new TransferStateListener() {
    @Override
    public void onStateChanged(TransferState state) {
        // todo notify transfer state
    }
});
/**
 若有特殊要求，则可以如下操作：
 CopyObjectRequest copyObjectRequest = new CopyObjectRequest(bucket, cosPath, copySourceStruct);
 copyObjectRequest.setRegion(region); //设置存储桶所在的地域
 COSXMLCopyTask cosxmlCopyTask = transferManager.copy(copyObjectRequest);
 */

//取消复制
cosxmlCopyTask.cancel();


//暂停复制
cosxmlCopyTask.pause();

//恢复复制
cosxmlCopyTask.resume();
```
