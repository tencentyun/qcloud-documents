## 简介
本文档重点提供关于对象的简单操作、分块操作以及其他操作相关的 API 概览以及 SDK 示例代码，并且举例如何使用。

- 我们假设您已经按照 [快速入门](https://cloud.tencent.com/document/product/436/11280) 文档中的指引完成了 SDK 下载、安装和初始化的过程。
- 查询时建议使用 Command+F 搜索到想要查询的接口，然后看我们给出的接口简单说明，复制示例到您的工程中运行。
> ?如果需要了解接口的功能或者参数的意义，建议直接查看代码里的注释，Xcode 支持通过三指轻按、Force-touch 重按或者将鼠标停留在变量上，按 Control+Command+D 的方式查看它的释义。   

**简单操作**

| API                                                          | 操作名         | 操作描述                           |
| ------------------------------------------------------------ | -------------- | -------------------------- |
| [GET Bucket（List Object）](https://cloud.tencent.com/document/product/436/7734) | 获取对象列表   | 获取存储桶中的对象列表                    |
| GET Bucket Versions（List Object Versions） | 获取对象版本列表   | 获取存储桶中的对象版本列表                    |
| [POST Object](https://cloud.tencent.com/document/product/436/14690) | POST上传对象       | 上传一个 Object（文件/对象）至 Bucket     |
| [PUT Object](https://cloud.tencent.com/document/product/436/7749) | PUT创建对象       | 传文本内容创建文件至 Bucket     |
| [HEAD Object](https://cloud.tencent.com/document/product/436/7745) | 获取对象元数据 | 获得 Object 的 Meta 信息                  |
| [GET Object](https://cloud.tencent.com/document/product/436/7753) | 获取对象       | 下载一个 Object（文件/对象）至本地        |
| [OPTIONS Object](https://cloud.tencent.com/document/product/436/8288) | 预请求跨域配置 | 用预请求来确认是否可以发送真正的跨域请求  |
| [PUT Object - Copy](https://cloud.tencent.com/document/product/436/10881) | 设置对象复制   | 复制文件到目标路径                        |
| [DELETE Object](https://cloud.tencent.com/document/product/436/7743) | 删除单个对象   | 在 Bucket 中删除指定 Object （文件/对象） |
| [DELETE Multiple Object](https://cloud.tencent.com/document/product/436/8289)     |	删除多个对象	|在 Bucket 中批量删除 Object （文件/对象）|

**分块操作**

| API                                                          | 操作名         | 操作描述                             |
| ----------------------------------------------------- | -------------- | ------------------------------------ |
| [List Multipart Uploads](https://cloud.tencent.com/document/product/436/7736) | 查询分块上传   | 查询正在进行中的分块上传信息         |
| [Initiate Multipart Upload](https://cloud.tencent.com/document/product/436/7746) | 初始化分块上传 | 初始化 Multipart Upload 上传操作     |
| [Upload Part](https://cloud.tencent.com/document/product/436/7750) | 上传分块       | 分块上传文件                         |
| [Upload Part - Copy](https://cloud.tencent.com/document/product/436/8287) | 复制分块       | 将其他对象复制为一个分块             |
| [List Parts](https://cloud.tencent.com/document/product/436/7747) | 查询已上传块   | 查询特定分块上传操作中的已上传的块   |
| [Complete Multipart Upload](https://cloud.tencent.com/document/product/436/7742) | 完成分块上传   | 完成整个文件的分块上传               |
| [Abort Multipart Upload](https://cloud.tencent.com/document/product/436/7740) | 终止分块上传   | 终止一个分块上传操作并删除已上传的块 |

**其他操作**

| API                                                          | 操作名       | 操作描述                                      |
| ------------------------------------------------------------ | ------------ | --------------------------------------------- |
| [PUT Object acl](https://cloud.tencent.com/document/product/436/7748) | 设置对象 ACL | 设置 Bucket 中某个 Object （文件/对象）的 ACL |
| [GET Object acl](https://cloud.tencent.com/document/product/436/7744) | 获取对象 ACL | 获取 Object（文件/对象）的 ACL                |


## 简单操作

### GET Bucket（List Object）

GET Bucket（List Object）请求等同于 List Object 请求，可以列出该 Bucket 下的部分或者全部 Object。此 API 调用者需要对 Bucket 有 Read 权限。了解更多参阅 [Get Bucket 接口说明](https://cloud.tencent.com/document/product/436/7734)。

#### 使用示例

示例一：列出目录 a 的所有文件。

```js
cos.getBucket({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',     /* 必须 */
    Prefix: 'a/',           /* 非必须 */
}, function(err, data) {
    console.log(err || data.Contents);
});
```

返回值格式：

```json
{
    "Name": "examplebucket-1250000000",
    "Prefix": "",
    "Marker": "a/",
    "MaxKeys": "1000",
    "Delimiter": "",
    "IsTruncated": "false",
    "Contents": [{
        "Key": "a/3mb.zip",
        "LastModified": "2018-10-18T07:08:03.000Z",
        "ETag": "\"05a9a30179f3db7b63136f30aa6aacae-3\"",
        "Size": "3145728",
        "Owner": {
            "ID": "1250000000",
            "DisplayName": "1250000000"
        },
        "StorageClass": "STANDARD"
    }],
    "statusCode": 200,
    "headers": {}
}
```

示例二：列出目录 a 的文件，不深度遍历。

```js
cos.getBucket({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Prefix: 'a/',              /* 非必须 */
    Delimiter: '/',            /* 非必须 */
}, function(err, data) {
    console.log(err || data.CommonPrefix);
});
```

返回值格式：

```json
{
    "Name": "examplebucket-1250000000",
    "Prefix": "a/",
    "Marker": "",
    "MaxKeys": "1000",
    "Delimiter": "/",
    "IsTruncated": "false",
    "CommonPrefixes": [{
        "Prefix": "a/1/"
    }],
    "Contents": [{
        "Key": "a/3mb.zip",
        "LastModified": "2018-10-18T07:08:03.000Z",
        "ETag": "\"05a9a30179f3db7b63136f30aa6aacae-3\"",
        "Size": "3145728",
        "Owner": {
            "ID": "1250000000",
            "DisplayName": "1250000000"
        },
        "StorageClass": "STANDARD"
    }],
    "statusCode": 200,
    "headers": {}
}
```

#### 参数说明

| 参数名       | 参数描述                                                     | 类型   | 必填 |
| ------------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket       | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region       | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Prefix       | 前缀匹配，用来规定返回的文件前缀地址                         | String | 否   |
| Delimiter    | 定界符为一个分隔符号，一般是传 "/"，如果有 Prefix，则将 Prefix 到 delimiter 之间的相同路径归为一类，定义为 Common Prefix，然后列出所有 Common Prefix。如果没有 Prefix，则从路径起点开始 | String | 否   |
| Marker       | 默认以 UTF-8 二进制顺序列出条目，所有列出条目从 marker 开始  | String | 否   |
| MaxKeys      | 单次返回最大的条目数量，默认1000                             | String | 否   |
| EncodingType | 规定返回值的编码方式，可选值：url                            | String | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名           | 参数描述                                                     | 类型        |
| ---------------- | ------------------------------------------------------------ | ----------- |
| err              | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。 如果请求成功则为空 | Object      |
| - statusCode     | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers        | 请求返回的头部信息                                           | Object      |
| data             | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - headers        | 请求返回的头部信息                                           | Object      |
| - statusCode     | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - CommonPrefixes | 将 Prefix 到 delimiter 之间的相同路径归为一类，定义为 Common Prefix | ObjectArray |
| - - Prefix       | 单条 Common 的前缀                                           | String      |
| - - Name         | 说明 Bucket 的信息                                           | String      |
| - Prefix         | 前缀匹配，用来规定返回的文件前缀地址                         | String      |
| - Marker         | 默认以 UTF-8 二进制顺序列出条目，所有列出条目从 marker 开始  | String      |
| - MaxKeys        | 单次响应请求内返回结果的最大的条目数量                       | String      |
| - IsTruncated    | 响应请求条目是否被截断，字符串，'true' 或者 'false'          | String      |
| - NextMarker     | 假如返回条目被截断，则返回NextMarker就是下一个条目的起点     | String      |
| - Encoding-Type  | 返回值的编码方式，作用于Delimiter，Marker，Prefix，NextMarker，Key | String      |
| - Contents       | 元数据信息                                                   | ObjectArray |
| - - ETag         | 文件的 MD5 算法校验值，如 `"22ca88419e2ed4721c23807c678adbe4c08a7880"`， **注意前后携带双引号** | String      |
| - - Size         | 说明文件大小，单位是 Byte                                    | String      |
| - - Key          | Object名称                                                   | String      |
| - - LastModified | 说明 Object 最后被修改时间，如2017-06-23T12:33:27.000Z       | String      |
| - - Owner        | Bucket 持有者信息                                            | Object      |
| - ID             | Bucket 的 AppID                                              | String      |
| - StorageClass   | Object 的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE      | String      |

### GET Bucket Versions（List Object Versions）

GET Bucket Versions（List Object Versions）接口可以列出该 Bucket 下的部分或者全部 Object 的 Version。此 API 调用者需要对 Bucket 有 Read 权限。

#### 使用示例

示例一：列出目录 a 的所有文件的版本。

```js
cos.listObjectVersions({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',     /* 必须 */
    Prefix: 'a/',           /* 非必须 */
}, function(err, data) {
    console.log(err || data.Contents);
});
```

返回值格式：

```json
{
    "Name": "examplebucket-1250000000",
    "Prefix": "",
    "KeyMarker": "",
    "VersionIdMarker": "",
    "MaxKeys": "1000",
    "IsTruncated": "false",
    "DeleteMarkers": [{
        "Key": "0001.txt",
        "VersionId": "MTg0NDY3NDI1MzM4MzI5OTg5MjM",
        "IsLatest": "false",
        "LastModified": "2018-10-18T15:29:12.000Z",
        "Owner": {"UID": "1250000000"}
    }],
    "Versions": [{
        "Key": "0001.txt",
        "VersionId": "MTg0NDY3NDI1MzM4MzI5OTI2NzU",
        "IsLatest": "true",
        "LastModified": "2018-10-18T15:29:18.000Z",
        "ETag": "\"5a8dd3ad0756a93ded72b823b19dd877\"",
        "Size": "6",
        "StorageClass": "STANDARD",
        "Owner": {"UID": "1250000000"}
    }, {
        "Key": "0001.txt",
        "VersionId": "MTg0NDY3NDI1MzM4MzMwMTk3NzQ",
        "IsLatest": "false",
        "LastModified": "2018-10-18T15:28:51.000Z",
        "ETag": "\"5a8dd3ad0756a93ded72b823b19dd877\"",
        "Size": "6",
        "StorageClass": "STANDARD",
        "Owner": {"UID": "1250000000"}
    }],
    "statusCode": 200,
    "headers": {}
}
```

示例二：列出目录 a 的文件，不深度遍历。

```js
cos.listObjectVersions({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Prefix: '',              /* 非必须 */
    Delimiter: '/',            /* 非必须 */
}, function(err, data) {
    if (err) {
        console.log(err);
    } else {
        console.log(data.CommonPrefix);
        console.log(data.Conents);
    }
});
```

返回值格式：

```json
{
    "Name": "examplebucket-1250000000",
    "Prefix": "1mb.zip",
    "KeyMarker": "",
    "VersionIdMarker": "",
    "MaxKeys": "1000",
    "IsTruncated": "false",
    "DeleteMarkers": [{
        "Key": "1mb.zip",
        "VersionId": "MTg0NDY3NDI1MzM4NzM3NTU1NDE",
        "IsLatest": "true",
        "LastModified": "2018-10-18T04:09:56.000Z",
        "Owner": {"UID": "1250000000"}
    }],
    "Versions": [{
        "Key": "1mb.zip",
        "VersionId": "MTg0NDY3NDI1MzM5Mjg1ODk4OTI",
        "IsLatest": "false",
        "LastModified": "2018-10-17T12:56:01.000Z",
        "ETag": "\"b6d81b360a5672d80c27430f39153e2c\"",
        "Size": "1048576",
        "StorageClass": "STANDARD",
        "Owner": {"UID": "1250000000"}
    }],
    "statusCode": 200,
    "headers": {}
}
```

#### 参数说明

| 参数名          | 参数描述                                                     | 类型   | 必填 |
| --------------- | ------------------------------------------------------------ | ------ | ---- |
| Bucket          | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region          | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Prefix          | 前缀匹配，用来规定返回的文件前缀地址                         | String | 否   |
| Delimiter       | 定界符为一个分隔符号，一般是传 "/"，如果有 Prefix，则将 Prefix 到 delimiter 之间的相同路径归为一类，定义为 Common Prefix，然后列出所有 Common Prefix。如果没有 Prefix，则从路径起点开始 | String | 否   |
| KeyMarker       | 默认以 UTF-8 二进制顺序列出条目，所有列出 Object 条目从 KeyMarker 开始 | String | 否   |
| VersionIdMarker | 默认以 UTF-8 二进制顺序列出条目，所有列出 VersionId 条目从 VersionIdMarker 开始 | String | 否   |
| MaxKeys         | 单次返回最大的条目数量，默认1000                             | String | 否   |
| EncodingType    | 规定返回值的编码方式，可选值：url                            | String | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名            | 参数描述                                                     | 类型        |
| ----------------- | ------------------------------------------------------------ | ----------- |
| err               | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。 如果请求成功则为空 | Object      |
| - statusCode      | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers         | 请求返回的头部信息                                           | Object      |
| data              | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - headers         | 请求返回的头部信息                                           | Object      |
| - statusCode      | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - CommonPrefixes  | 将 Prefix 到 delimiter 之间的相同路径归为一类，定义为 Common Prefix | ObjectArray |
| - - Prefix        | 单条 Common 的前缀                                           | String      |
| - - Name          | 说明 Bucket 的信息                                           | String      |
| - Prefix          | 前缀匹配，用来规定返回的文件前缀地址                         | String      |
| - KeyMarker       | 默认以 UTF-8 二进制顺序列出条目，所有列出 Object 条目从 KeyMarker 开始 | String      |
| - VersionIdMarker | 默认以 UTF-8 二进制顺序列出条目，所有列出 VersionId 条目从 VersionIdMarker 开始 | String      |
| - MaxKeys         | 单次响应请求内返回结果的最大的条目数量                       | String      |
| - IsTruncated     | 响应请求条目是否被截断，字符串，'true' 或者 'false'          | String      |
| - NextMarker      | 假如返回条目被截断，则返回NextMarker就是下一个条目的起点     | String      |
| - Encoding-Type   | 返回值的编码方式，作用于Delimiter，Marker，Prefix，NextMarker，Key | String      |
| - DeleteMarkers   | 如果存储桶开启了多版本，删除操作默认会新增一个 DeleteMarker 标记 | ObjectArray |
| - - ETag          | 文件的 MD5 算法校验值，如 `"22ca88419e2ed4721c23807c678adbe4c08a7880"`， **注意前后携带双引号** | String      |
| - - Size          | 说明文件大小，单位是 Byte                                    | String      |
| - - Key           | Object名称                                                   | String      |
| - - IsLatest      | 是否最新版本，枚举值："true"、"false"                        | String      |
| - - LastModified  | 说明 Object 最后被修改时间，如2017-06-23T12:33:27.000Z       | String      |
| - - Owner         | Bucket 持有者信息                                            | Object      |
| - - - ID          | Bucket 的 AppID                                              | String      |
| - Versions        | 元数据信息                                                   | ObjectArray |
| - - ETag          | 文件的 MD5 算法校验值，如 `"22ca88419e2ed4721c23807c678adbe4c08a7880"`， **注意前后携带双引号** | String      |
| - - Size          | 说明文件大小，单位是 Byte                                    | String      |
| - - Key           | Object名称                                                   | String      |
| - - IsLatest      | 是否最新版本，枚举值："true"、"false"                        | String      |
| - - LastModified  | 说明 Object 最后被修改时间，如2017-06-23T12:33:27.000Z       | String      |
| - - StorageClass  | Object 的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE    | String      |
| - - Owner         | Bucket 持有者信息                                            | Object      |
| - - - ID          | Bucket 的 AppID                                              | String      |

### Head Object

Head Object 接口请求可以获取对应 Object 的 meta 信息数据，Head 的权限与 Get 的权限一致。

#### 使用示例

```js
cos.headObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',               /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名          | 参数描述                                                     | 类型   | 必填 |
| --------------- | ------------------------------------------------------------ | ------ | ---- |
| Bucket          | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region          | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Key             | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String | 是   |
| IfModifiedSince | 当 Object 在指定时间后被修改，则返回对应 Object 的 meta 信息，否则返回304 | String | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名                | 参数描述                                                     | 类型    |
| --------------------- | ------------------------------------------------------------ | ------- |
| err                   | 请求发生错误时返回的对象，包括网络错误和业务错误。如果请求成功，则为空，[错误码文档](https://cloud.tencent.com/document/product/436/7730) | Object  |
| - statusCode          | 请求返回的 HTTP 状态码，如200、403、404等                    | Number  |
| - headers             | 请求返回的头部信息                                           | Object  |
| data                  | 请求成功时返回的对象，如果请求发生错误，则为空               | Object  |
| - statusCode          | 请求返回的 HTTP 状态码，如200，304等，如果在指定时间后未被修改，则返回304 | Number  |
| - headers             | 请求返回的头部信息                                           | Object  |
| - x-cos-object-type   | 用来表示 Object 是否可以被追加上传，枚举值：normal、appendable | String  |
| - x-cos-storage-class | Object 的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE             | String  |
| - x-cos-meta-*       | 用户自定义的 meta                                            | String  |
| - NotModified         | Object 是否在指定时间后未被修改                              | Boolean |

### POST Object

POST Object 接口请求可以将用户 wx.chooseImage 选择的文件（Object）上传至指定 Bucket 中。该操作需要请求者对 Bucket 有 WRITE 权限。

#### 使用示例

简单上传文件
```js
cos.postObject({
    Bucket: 'examplebucket-1250000000',
    Region: 'ap-beijing',
    Key: filename,
    FilePath: tmpFilePath, // wx.chooseImage 选择文件得到的 tmpFilePath
    onProgress: function (info) {
        console.log(JSON.stringify(info));
    }
}, function (err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名                 | 参数描述                                                     | 类型             | 必填 |
| ---------------------- | ------------------------------------------------------------ | ---------------- | ---- |
| Bucket                 | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String           | 是   |
| Region                 | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String           | 是   |
| Key                    | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String           | 是   |
| CacheControl           | RFC 2616中定义的缓存策略，将作为 Object 元数据保存           | String           | 否   |
| ContentDisposition     | RFC 2616中定义的文件名称，将作为 Object 元数据保存           | String           | 否   |
| ContentEncoding        | RFC 2616中定义的编码格式，将作为 Object 元数据保存           | String           | 否   |
| ContentType            | RFC 2616中定义的内容类型（MIME），将作为 Object 元数据保存   | String           | 否   |
| Expect                 | 当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容 | String           | 否   |
| Expires                | RFC 2616中定义的过期时间，将作为 Object 元数据保存           | String           | 否   |
| ACL                    | 定义 Object 的 ACL 属性。有效值：private、public-read；默认值：private | String           | 否   |
| GrantRead              | 赋予被授权者读的权限，格式：x-cos-grant-read: id="[OwnerUin]"| String           | 否   |
| GrantFullControl       | 赋予被授权者所有的权限，格式：x-cos-grant-full-control: id="[OwnerUin]" | String           | 否   |
| StorageClass           | 设置 Object 的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE，默认值：STANDARD | String           | 否   |
| x-cos-meta-*           | 允许用户自定义的头部信息，将作为 Object 元数据返回。大小限制2K | String           | 否   |
| FilePath               | 上传文件的临时文件路径，可通过 wx.chooseImage 方法选择得到   | String | 是   |
| onProgress             | 进度的回调函数，进度回调响应对象（progressData）属性如下     | Function         | 否   |
| - progressData.loaded  | 已经下载的文件部分大小，以字节（bytes）为单位                | Number           | 否   |
| - progressData.total   | 整个文件的大小，以字节（Bytes）为单位                        | Number           | 否   |
| - progressData.speed   | 文件的下载速度，以字节/秒（Bytes/s）为单位                   | Number           | 否   |
| - progressData.percent | 文件下载的百分比，以小数形式呈现，例如：下载50%即为0.5       | Number           | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| - ETag       | 返回文件的 MD5 算法校验值。ETag 的值可以用于检查 Object 在上传过程中是否有损坏，<br>**注意：这里的 ETag 值字符串前后带有双引号，例如 `"09cba091df696af91549de27b8e7d0f6"`** | String |

### PUT Object

在小程序上传用户的文件文件，请使用 POST Object 接口
PUT Object 在小程序里只能传文本创建文件，原因是小程序获取不到用户选择的文件内容，并且使用 wx.uploadFile 方法，method 不支持 PUT，导致 PUT Object 无法上传文件。
PUT Object 操作需要请求者对 Bucket 有 WRITE 权限。

> !
> 1. Key（文件名）不能以 `/` 结尾，否则会被识别为文件夹。
> 2. 每个主账号（即同一个 APPID），存储桶的 ACL、Policy 和 CAM 关联的策略数量总和最多为 1000 条，对象 ACL 规则数量不限制。如果您不需要进行对象 ACL 控制，请在上传时不要设置，默认继承 Bucket 权限。
> 3. 上传之后，您可以用同样的 `key` 生成预签名链接（下载请指定 method 为 `GET`，具体接口说明见下文，分享到其他端来进行下载。但注意如果您的文件是私有读权限，那么预签名链接只有一定的有效期。

#### 使用示例

传字符串作为文件内容：
```js
cos.putObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
    Body: 'hello!',
}, function(err, data) {
    console.log(err || data);
});
```

创建目录：
```js
cos.putObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: 'a/',              /* 必须 */
    Body: '',
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名                 | 参数描述                                                     | 类型             | 必填 |
| ---------------------- | ------------------------------------------------------------ | ---------------- | ---- |
| Bucket                 | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String           | 是   |
| Region                 | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String           | 是   |
| Key                    | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String           | 是   |
| CacheControl           | RFC 2616中定义的缓存策略，将作为 Object 元数据保存           | String           | 否   |
| ContentDisposition     | RFC 2616中定义的文件名称，将作为 Object 元数据保存           | String           | 否   |
| ContentEncoding        | RFC 2616中定义的编码格式，将作为 Object 元数据保存           | String           | 否   |
| ContentLength          | RFC 2616中定义的 HTTP 请求内容长度（字节）                   | String           | 否   |
| ContentType            | RFC 2616中定义的内容类型（MIME），将作为 Object 元数据保存   | String           | 否   |
| Expect                 | 当使用 Expect: 100-continue 时，在收到服务端确认后，才会发送请求内容 | String           | 否   |
| Expires                | RFC 2616中定义的过期时间，将作为 Object 元数据保存           | String           | 否   |
| ACL                    | 定义 Object 的 ACL 属性。有效值：private、public-read；默认值：private | String           | 否   |
| GrantRead              | 赋予被授权者读的权限，格式：x-cos-grant-read: id="[OwnerUin]"| String           | 否   |
| GrantFullControl       | 赋予被授权者所有的权限，格式：x-cos-grant-full-control: id="[OwnerUin]" | String           | 否   |
| StorageClass           | 设置 Object 的存储级别，枚举值：STANDARD、STANDARD_IA、ARCHIVE，默认值：STANDARD | String           | 否   |
| x-cos-meta-*           | 允许用户自定义的头部信息，将作为 Object 元数据返回。大小限制2K | String           | 否   |
| Body                   | 创建的文件的文本内容，可以为`字符串`                        | String | 是   |
| onProgress             | 进度的回调函数，进度回调响应对象（progressData）属性如下     | Function         | 否   |
| - progressData.loaded  | 已经下载的文件部分大小，以字节（bytes）为单位                | Number           | 否   |
| - progressData.total   | 整个文件的大小，以字节（Bytes）为单位                        | Number           | 否   |
| - progressData.speed   | 文件的下载速度，以字节/秒（Bytes/s）为单位                   | Number           | 否   |
| - progressData.percent | 文件下载的百分比，以小数形式呈现，例如：下载50%即为0.5       | Number           | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| - ETag       | 返回文件的 MD5 算法校验值。ETag 的值可以用于检查 Object 在上传过程中是否有损坏，<br>**注意：这里的 ETag 值字符串前后带有双引号，例如 `"09cba091df696af91549de27b8e7d0f6"`** | String |

### GET Object

GET Object 接口请求可以获取存储桶里指定文件的内容，得到文件内容是字符串格式。

该操作需要请求者对目标 Object 具有读权限或目标 Object 对所有人都开放了读权限（公有读）。

> !该接口不适用于下载文件，下载文件可以通过 cos.getObjectUrl 获取 url 再自行打开下载，具体参考上文的 cos.getObjectUrl 接口。

#### 使用示例

```js
cos.getObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
}, function(err, data) {
    console.log(err || data.Body);
});
```

指定 Range 获取文件内容：
```js
cos.getObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
    Range: 'bytes=1-3',        /* 非必须 */
}, function(err, data) {
    console.log(err || data.Body);
});
```

#### 参数说明

| 参数名                     | 参数描述                                                     | 类型   | 必填 |
| -------------------------- | ------------------------------------------------------------ | ------ | ---- |
| Bucket                     | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region                     | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Key                        | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String | 是   |
| ResponseContentType        | 设置响应头部中的 Content-Type 参数                           | String | 否   |
| ResponseContentLanguage    | 设置返回头部中的 Content-Language 参数                       | String | 否   |
| ResponseExpires            | 设置返回头部中的 Content-Expires 参数                        | String | 否   |
| ResponseCacheControl       | 设置返回头部中的 Cache-Control 参数                          | String | 否   |
| ResponseContentDisposition | 设置返回头部中的 Content-Disposition 参数                    | String | 否   |
| ResponseContentEncoding    | 设置返回头部中的 Content-Encoding 参数                       | String | 否   |
| Range                      | RFC 2616 中定义的指定文件下载范围，以字节（bytes）为单位，如 Renge: 'bytes=1-3' | String | 否   |
| IfModifiedSince            | 当Object在指定时间后被修改，则返回对应 Object meta 信息，否则返回 304 | String | 否   |
| IfUnmodifiedSince          | 如果文件修改时间早于或等于指定时间，才返回文件内容。否则返回 412 (precondition failed) | String | 否   |
| IfMatch                    | 当 ETag 与指定的内容一致，才返回文件。否则返回 412（precondition failed） | String | 否   |
| IfNoneMatch                | 当 ETag 与指定的内容不一致，才返回文件。否则返回 304（not modified） | String | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名                | 参数描述                                                     | 类型    |
| --------------------- | ------------------------------------------------------------ | ------- |
| err                   | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object  |
| - statusCode          | 请求返回的 HTTP 状态码，如200、403、404等                    | Number  |
| - headers             | 请求返回的头部信息                                           | Object  |
| data                  | 请求成功时返回的对象，如果请求发生错误，则为空               | Object  |
| - statusCode          | 请求返回的 HTTP 状态码，如200，304，403，404等               | Number  |
| - headers             | 请求返回的头部信息                                           | Object  |
| - x-cos-object-type   | 用来表示 object 是否可以被追加上传，枚举值：normal、appendable | String  |
| - x-cos-storage-class | Object 的存储级别，枚举值：STANDARD、STANDARD_IA，<br>**注意：如果没有返回该头部，则说明文件存储级别为 STANDARD （标准存储）** | String  |
| - x-cos-meta-*       | 用户自定义的元数据                                           | String  |
| - NotModified         | 如果请求时带有 IfModifiedSince 则返回该属性，如果文件未被修改，则为 true，否则为 false | Boolean |
| - Body                | 返回的文件内容，默认为 String 形式                           | String  |

### OPTIONS Object

OPTIONS Object 接口实现 Object 跨域访问配置的预请求。即在发送跨域请求之前会发送一个 OPTIONS 请求并带上特定的来源域，HTTP 方法和 HEADER 信息等给 COS，以决定是否可以发送真正的跨域请求。当 CORS 配置不存在时，请求返回403 Forbidden。
**可以通过 Put Bucket CORS 接口来开启 Bucket 的 CORS 支持。**

#### 使用示例

```js
cos.optionsObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
    Origin: 'https://www.qq.com',      /* 必须 */
    AccessControlRequestMethod: 'PUT', /* 必须 */
    AccessControlRequestHeaders: 'origin,accept,content-type' /* 非必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名                      | 参数描述                                                     | 类型   | 必填 |
| --------------------------- | ------------------------------------------------------------ | ------ | ---- |
| Bucket                      | Bucket 的名称。命名规则为 BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region                      | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Key                         | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String | 是   |
| Origin                      | 模拟跨域访问的请求来源域名                                   | String | 是   |
| AccessControlRequestMethod  | 模拟跨域访问的请求 HTTP 方法                                 | String | 是   |
| AccessControlRequestHeaders | 模拟跨域访问的请求头部                                       | String | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名                       | 参数描述                                                     | 类型    |
| ---------------------------- | ------------------------------------------------------------ | ------- |
| err                          | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object  |
| - statusCode                 | 请求返回的 HTTP 状态码，如200、403、404等                    | Number  |
| - headers                    | 请求返回的头部信息                                           | Object  |
| data                         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object  |
| - headers                    | 请求返回的头部信息                                           | Object  |
| - statusCode                 | 请求返回的 HTTP 状态码，如200、403、404等                    | Number  |
| - AccessControlAllowOrigin   | 模拟跨域访问的请求来源域名，中间用逗号间隔，当来源不允许的时候，此 Header 不返回。例如：\* | String  |
| - AccessControlAllowMethods  | 模拟跨域访问的请求HTTP方法，中间用逗号间隔，当请求方法不允许的时候，此Header不返回。例如：PUT，GET，POST，DELETE，HEAD | String  |
| - AccessControlAllowHeaders  | 模拟跨域访问的请求头部，中间用逗号间隔，当模拟任何请求头部不允许的时候，此 Header 不返回该请求头部。例如：accept，content-type，origin，authorization | String  |
| - AccessControlExposeHeaders | 跨域支持返回头部，中间用逗号间隔。例如：ETag                 | String  |
| - AccessControlMaxAge        | 设置 OPTIONS 请求得到结果的有效期。例如：3600                | String  |
| - OptionsForbidden           | OPTIONS 请求是否被禁止，如果返回的 HTTP 状态码为 403，则为 true | Boolean |

### PUT Object - Copy

PUT Object Copy 请求实现将一个文件从源路径复制到目标路径。建议文件大小1MB 到5GB，超过5GB 的文件请使用分块上传 Upload - Copy。在拷贝的过程中，文件元属性和 ACL 可以被修改。用户可以通过该接口复制文件、修改文件属性（源文件和目标文件的属性相同）、移动或重命名文件（先复制，再单独调用删除接口）。

#### 使用示例

```js
cos.putObjectCopy({
    Bucket: 'examplebucket-1250000000',                               /* 必须 */
    Region: 'ap-guangzhou',                                  /* 必须 */
    Key: '1.jpg',                                            /* 必须 */
    CopySource: 'test1-1250000000.cos.ap-guangzhou.myqcloud.com/2.jpg', /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名                      | 参数描述                                                     | 类型   | 必填 |
| --------------------------- | ------------------------------------------------------------ | ------ | ---- |
| Bucket                      | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region                      | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Key                         | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String | 是   |
| CopySource                  | 源文件 URL 路径，可以通过 versionid 子资源指定历史版本       | String | 是   |
| ACL                         | 定义 Object 的 ACL 属性。有效值：private、public-read；默认值：private | String | 否   |
| GrantRead                   |赋予被授权者读的权限。格式：id="[OwnerUin]" | String | 否   |
| GrantFullControl            |赋予被授权者所有的权限。格式：id="[OwnerUin]" | String | 否   |
| MetadataDirective           | 是否拷贝元数据，枚举值：Copy, Replaced，默认值 Copy。假如标记为 Copy，忽略 Header 中的用户元数据信息直接复制；假如标记为 Replaced，按 Header 信息修改元数据。**当目标路径和原路径一致，即用户试图修改元数据时，必须为 Replaced** | String | 否   |
| CopySourceIfModifiedSince   | 当 Object 在指定时间后被修改，则执行操作，否则返回412。**可与 CopySourceIfNoneMatch 一起使用，与其他条件联合使用返回冲突** | String | 否   |
| CopySourceIfUnmodifiedSince | 当 Object 在指定时间后未被修改，则执行操作，否则返回412。**可与 CopySourceIfMatch 一起使用，与其他条件联合使用返回冲突** | String | 否   |
| CopySourceIfMatch           | 当 Object 的 Etag 和给定一致时，则执行操作，否则返回412。**可与CopySourceIfUnmodifiedSince 一起使用，与其他条件联合使用返回冲突** | String | 否   |
| CopySourceIfNoneMatch       | 当 Object 的 Etag 和给定不一致时，则执行操作，否则返回412。**可与 CopySourceIfModifiedSince 一起使用，与其他条件联合使用返回冲突** | String | 否   |
| StorageClass                | 存储级别，枚举值：存储级别，枚举值：Standard, Standard_IA；默认值：Standard | String | 否   |
| x-cos-meta-*               | 其他自定义的文件头部                                         | String | 否   |
| CacheControl                | 指定所有缓存机制在整个请求/响应链中必须服从的指令            | String | 否   |
| ContentDisposition          | MIME 协议的扩展，MIME 协议指示 MIME 用户代理如何显示附加的文件 | String | 否   |
| ContentEncoding             | HTTP 中用来对「采用何种编码格式传输正文」进行协定的一对头部字段 | String | 否   |
| ContentType                 | RFC 2616 中定义的 HTTP 请求内容类型（MIME），例如`text/plain` | String | 否   |
| Expect                      | 请求的特定的服务器行为                                       | String | 否   |
| Expires                     | 响应过期的日期和时间                                         | String | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名         | 参数描述                                                     | 类型   |
| -------------- | ------------------------------------------------------------ | ------ |
| err            | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object |
| - statusCode   | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers      | 请求返回的头部信息                                           | Object |
| data           | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode   | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers      | 请求返回的头部信息                                           | Object |
| - ETag         | 文件的 MD5 算法校验值，如 `"22ca88419e2ed4721c23807c678adbe4c08a7880"`，**注意前后携带双引号** | String |
| - LastModified | 说明 Object 最后被修改时间，如2017-06-23T12:33:27.000Z       | String |

### DELETE Object

DELETE Object 接口请求可以在 COS 的 Bucket 中将一个文件（Object）删除。该操作需要请求者对 Bucket 有 WRITE 权限。

#### 使用示例

```js
cos.deleteObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg'                            /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Key    | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200，204，403，404等，**如果删除成功或者文件不存在则返回204或200，如果找不到指定的 Bucket，则返回404** | Number |
| - headers    | 请求返回的头部信息                                           | Object |

### DELETE Multiple Object

DELETE Multiple Object 接口请求实现在指定 Bucket 中批量删除 Object，单次请求最大支持批量删除1000个 Object。对于响应结果，COS 提供 Verbose 和 Quiet 两种模式：Verbose 模式将返回每个 Object 的删除结果；Quiet 模式只返回报错的 Object 信息。

#### 使用示例

删除多个文件：

```js
cos.deleteMultipleObject({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Objects: [
        {Key: '1.jpg'},
        {Key: '2.zip'},
    ]
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名      | 参数描述                                                     | 类型        | 必填 |
| ----------- | ------------------------------------------------------------ | ----------- | ---- |
| Bucket      | Bucket 的名称。命名规则为BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String      | 是   |
| Region      | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String      | 是   |
| Quiet       | 布尔值，这个值决定了是否启动 Quiet 模式。值为 true 启动 Quiet 模式，值为 false 则启动 Verbose 模式，默认值为 false | Boolean     | 否   |
| Objects     | 要删除的文件列表                                             | ObjectArray | 是   |
| - Key       | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String      | 是   |
| - VersionId | 要删除的 Object 或 DeleteMarker 版本 ID                      | String      |    否  |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名                    | 参数描述                                                     | 类型        |
| ------------------------- | ------------------------------------------------------------ | ----------- |
| err                       | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object      |
| - statusCode              | 请求返回的 HTTP 状态码，如200，204，403，404等               | Number      |
| - headers                 | 请求返回的头部信息                                           | Object      |
| data                      | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - statusCode              | 请求返回的 HTTP 状态码，如200，204，403，404等               | Number      |
| - headers                 | 请求返回的头部信息                                           | Object      |
| - Deleted                 | 说明本次删除的成功 Object 信息                               | ObjectArray |
| - - Key                   | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String      |
| - - VersionId             | 如果参数传入了 VersionId，返回也会带上 VersionId，表示刚操作的 Object 或 DeleteMarker 版本 | String      |
| - - DeleteMarker          | 如果开启了多版本，并且参数没有 VersionId，本次删除不会真正抹去文件内容，只新增一个 DeleteMarker 代表可见的文件已删除，枚举值：true、false | String      |
| - - DeleteMarkerVersionId | 当返回的 DeleteMarker 为 true 时，返回刚新增的 DeleteMarker 的 VersionId | String      |
| - Error                   | 说明本次删除的失败 Object 信息                               | ObjectArray |
| - - Key                   | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String      |
| - - Code                  | 删除失败的错误码                                             | String      |
| - - Message               | 删除错误信息                                                 | String      |


## 其他操作

### GET Object acl

GET Object acl 接口用来获取某个 Bucket 下的某个 Object 的访问权限。只有 Bucket 的持有者才有权限操作。

#### 使用示例

```js
cos.getObjectAcl({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称。命名规则为 BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| Key    | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名            | 参数描述                                                     | 类型        |
| ----------------- | ------------------------------------------------------------ | ----------- |
| err               | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object      |
| - statusCode      | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers         | 请求返回的头部信息                                           | Object      |
| data              | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - statusCode      | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers         | 请求返回的头部信息                                           | Object      |
| - ACL             | Object 的 ACL 属性。枚举值：private、public-read、default | Object      |
| - Owner           | 标识资源的所有者                                             | Object      |
| - - ID            | Object 持有者 ID，格式为：qcs::cam::uin/<OwnerUin>:uin/<SubUin>。 如果是主帐号 ID，<OwnerUin> 和 <SubUin> 是同一个值 | String      |
| - - DisplayName   | Object 持有者的名称                                          | String      |
| - Grants          | 被授权者信息与权限信息列表                                   | ObjectArray |
| - - Permission    | 指明授予被授权者的权限信息，枚举值：READ、READ_ACP、WRITE_ACP、FULL_CONTROL | String      |
| - - Grantee       | 说明被授权者的信息。type 类型可以为 RootAccount、Subaccount；当 type 类型为 RootAccount 时，ID 中指定的是根帐号;当 type 类型为 Subaccount 时，ID 中指定的是子帐号 | Object      |
| - - - DisplayName | 用户的名称                                                   | String      |
| - - - ID          |用户的 ID，格式为：qcs::cam::uin/<OwnerUin>:uin/<SubUin>。 如果是主帐号 ID，<OwnerUin> 和 <SubUin> 是同一个值 | String      |

### PUT Object acl

PUT Object acl 接口用来对某个 Bucket 中的某个的 Object 进行 ACL 表的配置。

>!每个主账号（即同一个 APPID），存储桶的 ACL、Policy 和 CAM 关联的策略数量总和最多为 1000 条，对象 ACL 规则数量不限制。如果您不需要进行对象 ACL 控制，请不要设置，默认继承 Bucket 权限。

#### 使用示例

```js
cos.putObjectAcl({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
    ACL: 'public-read',        /* 非必须 */
}, function(err, data) {
    console.log(err || data);
});
```

为某个用户赋予文件读写权限：
```js
cos.putObjectAcl({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
    GrantFullControl: 'id="100000000001"' // 100000000001是主账号 uin
}, function(err, data) {
    console.log(err || data);
});
```

通过 AccessControlPolicy 修改 Bucket 权限：
```js
cos.putObjectAcl({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-guangzhou',    /* 必须 */
    Key: '1.jpg',              /* 必须 */
    AccessControlPolicy: {
        "Owner": { // AccessControlPolicy 里必须有 owner
            "ID": 'qcs::cam::uin/100000000001:uin/100000000001' // 100000000001 是 Bucket 所属用户的 QQ 号
        },
        "Grants": [{
            "Grantee": {
                "ID": "qcs::cam::uin/100000000011:uin/100000000011", // 100000000011 是 QQ 号
            },
            "Permission": "WRITE"
        }]
    }
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名              | 参数描述                                                     | 类型        | 必填 |
| ------------------- | ------------------------------------------------------------ | ----------- | ---- |
| Bucket              | Bucket 的名称。命名规则为 BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String      | 是   |
| Region              | Bucket 所在区域。枚举值请见：[Bucket 地域信息](https://cloud.tencent.com/document/product/436/6224) | String      | 是   |
| Key                 | 对象键（Object 的名称），对象在存储桶中的唯一标识，[对象键说明](https://cloud.tencent.com/document/product/436/13324) | String      | 是   |
| ACL                 | 定义 Object 的 ACL 属性。有效值：private、public-read、default；默认值：private；传 default 时清除文件权限，权限恢复为继承权限 | String      | 否   |
| GrantRead           |赋予被授权者读的权限。格式：id="[OwnerUin]" | String      | 否   |
| GrantFullControl    | 赋予被授权者所有的权限。格式：id="[OwnerUin]" | String      | 否   |
| AccessControlPolicy | Object 的 ACL JSON 定义格式                                  | Object     |  否   |
| - Owner             | 标识资源的所有者                                             | Object      |  否   |
| - - ID              | Object 持有者 ID，格式：qcs::cam::uin/&lt;OwnerUin>:uin/lt;SubUin> <br>如果是根帐号，&lt;OwnerUin> 和&lt;SubUin> 是同一个值 | String      |  否   |
| - - DisplayName     | Object 持有者的名称                                          | String      |   否   |
| - Grants            | 被授权者信息与权限信息列表                                   | ObjectArray |  否   |
| - - Permission      | 指明授予被授权者的权限信息，枚举值：READ、WRITE、READ_ACP、WRITE_ACP、FULL_CONTROL | String      | 否   |
| - - Grantee         | 说明被授权者的信息。type 类型可以为 RootAccount、Subaccount；当 type 类型为 RootAccount 时，ID 中指定的是根帐号;当 type 类型为 Subaccount 时，ID 中指定的是子帐号 | Object      |  否   |
| - - - DisplayName   | 用户的名称                                                   | String      | 否   |
| - - - ID            | 用户的 ID，格式：qcs::cam::uin/&lt;OwnerUin>:uin/lt;SubUin> <br>如果是根帐号，&lt;OwnerUin> 和&lt;SubUin> 是同一个值 | String    |  否 |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，处理措施请参考 [错误码文档](https://cloud.tencent.com/document/product/436/7730)。如果请求成功则为空 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200，204，403，404等               | Number |
| - headers    | 请求返回的头部信息                                           | Object |


## 上传队列

JavaScript SDK 针对 putObject 和 sliceUploadFile 发起的上传任务都有记录队列里，队列相关方法如下。
1. cos.getTaskList 可以获取任务列表。
2. cos.pauseTask、cos.restartTask、cos.cancelTask 操作任务。
3. cos.on('list-update', callback); 可以监听列表和进度变化。

完整的队列使用例子：[demo-queue](https://github.com/tencentyun/cos-js-sdk-v5/tree/master/demo/queue)

具体方法如下：

### Cancel Task

根据 taskId 取消分块上传任务。

#### 使用示例

```js
var taskId = 'xxxxx';                   /* 必须 */
cos.cancelTask(taskId);
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| taskId | 文件上传任务的编号，在调用 sliceUploadFile 方法时，其 TaskReady 回调会返回该上传任务的 taskId | String | 是   |

### Pause Task

根据 taskId 暂停分块上传任务。

#### 使用示例

```js
var taskId = 'xxxxx';                   /* 必须 */
cos.pauseTask(taskId);
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| taskId | 文件上传任务的编号，在调用 sliceUploadFile 方法时，其 TaskReady 回调会返回该上传任务的 taskId | String | 是   |

### Restart Task

根据 taskId 重新开始上传任务，可以用于开启用户手动停止的（调用 pauseTask 停止）或者因为上传错误而停止的上传任务。

#### 使用示例

```js
var taskId = 'xxxxx';                   /* 必须 */
cos.restartTask(taskId);
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| taskId | 文件上传任务的编号，在调用 sliceUploadFile 方法时，其 TaskReady 回调会返回该上传任务的 taskId | String | 是   |
