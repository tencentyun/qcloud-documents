## 简介

本文档提供关于跨域访问、生命周期、存储桶策略、标签管理、版本控制和跨地域复制相关的 API 概览以及 SDK 示例代码。

**跨域访问**

| API                                                          | 操作名       | 操作描述                     |
| ------------------------------------------------------------ | ------------ | ---------------------------- |
| [PUT Bucket cors](https://cloud.tencent.com/document/product/436/8279) | 设置跨域配置 | 设置存储桶的跨域访问权限     |
| [GET Bucket cors](https://cloud.tencent.com/document/product/436/8274) | 查询跨域配置 | 查询存储桶的跨域访问配置信息 |
| [DELETE Bucket cors](https://cloud.tencent.com/document/product/436/8283) | 删除跨域配置 | 删除存储桶的跨域访问配置信息 |

**生命周期**

| API                                                          | 操作名       | 操作描述                       |
| ------------------------------------------------------------ | ------------ | ------------------------------ |
| [PUT Bucket lifecycle](https://cloud.tencent.com/document/product/436/8280) | 设置生命周期 | 设置存储桶的生命周期管理的配置 |
| [GET Bucket lifecycle](https://cloud.tencent.com/document/product/436/8278) | 查询生命周期 | 查询存储桶生命周期管理的配置   |
| [DELETE Bucket lifecycle](https://cloud.tencent.com/document/product/436/8284) | 删除生命周期 | 删除存储桶生命周期管理的配置   |

**存储桶策略**

| API                                                          | 操作名         | 操作描述                 |
| ------------------------------------------------------------ | -------------- | ------------------------ |
| [PUT Bucket policy](https://cloud.tencent.com/document/product/436/8282) | 设置存储桶策略 | 设置指定存储桶的权限策略 |
| [GET Bucket policy](https://cloud.tencent.com/document/product/436/8276) | 查询存储桶策略 | 查询指定存储桶的权限策略 |
| [DELETE Bucket policy](https://cloud.tencent.com/document/product/436/8285) | 删除存储桶策略 | 删除指定存储桶的权限策略 |

**标签管理**

| API                                                          | 操作名         | 操作描述                         |
| ------------------------------------------------------------ | -------------- | -------------------------------- |
| [PUT Bucket tagging](https://cloud.tencent.com/document/product/436/34838) | 设置存储桶标签 | 为已存在的存储桶设置标签         |
| [GET Bucket tagging](https://cloud.tencent.com/document/product/436/34837) | 查询存储桶标签 | 查询指定存储桶下已有的存储桶标签 |
| [DELETE Bucket tagging](https://cloud.tencent.com/document/product/436/34836) | 删除存储桶标签 | 删除指定的存储桶标签             |

**版本控制**

| API                                                          | 操作名       | 操作描述                 |
| ------------------------------------------------------------ | ------------ | ------------------------ |
| [PUT Bucket versioning](https://cloud.tencent.com/document/product/436/19889) | 设置版本控制 | 设置存储桶的版本控制功能 |
| [GET Bucket versioning](https://cloud.tencent.com/document/product/436/19888) | 查询版本控制 | 查询存储桶的版本控制信息 |

**跨地域复制**

| API                                                          | 操作名         | 操作描述                   |
| ------------------------------------------------------------ | -------------- | -------------------------- |
| [PUT Bucket replication](https://cloud.tencent.com/document/product/436/19223) | 设置跨地域复制 | 设置存储桶的跨地域复制规则 |
| [GET Bucket replication](https://cloud.tencent.com/document/product/436/19222) | 查询跨地域复制 | 查询存储桶的跨地域复制规则 |
| [DELETE Bucket replication](https://cloud.tencent.com/document/product/436/19221) | 删除跨地域复制 | 删除存储桶的跨地域复制规则 |

## 跨域访问

### 设置跨域配置

#### 功能说明

PUT Bucket cors 接口用来设置存储桶的跨域访问权限，您可以通过传入 XML 格式的配置文件来实现配置，文件大小限制为64KB。默认情况下，Bucket 的持有者直接有权限使用该 API 接口，Bucket 持有者也可以将权限授予其他用户。

#### 使用示例

```js
cos.putBucketCors({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
    CORSRules: [{
        "AllowedOrigin": ["*"],
        "AllowedMethod": ["GET", "POST", "PUT", "DELETE", "HEAD"],
        "AllowedHeader": ["*"],
        "ExposeHeader": ["ETag", "x-cos-acl", "x-cos-version-id", "x-cos-delete-marker", "x-cos-server-side-encryption"],
        "MaxAgeSeconds": "5"
    }]
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名           | 参数描述                                                     | 类型        | 必填 |
| ---------------- | ------------------------------------------------------------ | ----------- | ---- |
| Bucket           | Bucket 的名称，命名规则为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String      | 是   |
| Region           | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String      | 是   |
| CORSRules        | 说明跨域资源共享配置的所有信息列表                           | ObjectArray | 否   |
| - ID             | 配置规则的 ID，可选填                                        | String      | 否   |
| - AllowedMethods | 允许的 HTTP 操作，枚举值：GET、PUT、HEAD、POST、DELETE       | StringArray | 是   |
| - AllowedOrigins | 允许的访问来源，支持通配符`*`，格式为：`协议://域名[:端口]`<br>例如：`http://www.qq.com` | StringArray | 是   |
| - AllowedHeaders | 在发送 OPTIONS 请求时告知服务端，接下来的请求可以使用哪些自定义的 HTTP 请求头部，支持通配符`*` | StringArray | 否   |
| - ExposeHeaders  | 设置浏览器可以接收到的来自服务器端的自定义头部信息           | StringArray | 否   |
| - MaxAgeSeconds  | 设置 OPTIONS 请求得到结果的有效期                            | String      | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误。如果请求成功则为空，更多详情请参见 [错误码文档](https://cloud.tencent.com/document/product/436/7730) | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

### 查询跨域配置

#### 功能说明

GET Bucket cors 接口实现查询存储桶的跨域访问配置信息。（CORS 是一个 W3C 标准，全称是"跨域资源共享"（Cross-origin Resource Sharing））。默认情况下，Bucket 的持有者直接有权限使用该 API 接口，Bucket 持有者也可以将权限授予其他用户。

#### 使用示例

```js
cos.getBucketCors({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 返回示例

```json
{
    "CORSRules": [{
        "MaxAgeSeconds": "5",
        "AllowedOrigins": ["*"],
        "AllowedHeaders": ["*"],
        "AllowedMethods": ["GET", "POST", "PUT", "DELETE", "HEAD"],
        "ExposeHeaders": ["ETag", "Content-Length", "x-cos-acl", "x-cos-version-id", "x-cos-request-id", "x-cos-delete-marker", "x-cos-server-side-encryption"]
    }],
    "statusCode": 200,
    "headers": {}
}
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名规则为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名             | 参数描述                                                     | 类型        |
| ------------------ | ------------------------------------------------------------ | ----------- |
| err                | 请求发生错误时返回的对象，包括网络错误和业务错误。如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object      |
| data               | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - CORSRules        | 说明跨域资源共享配置的所有信息列表                           | ObjectArray |
| - - AllowedMethods | 允许的 HTTP 操作，枚举值：GET、PUT、HEAD、POST、DELETE       | StringArray |
| - - AllowedOrigins | 允许的访问来源，支持通配符`*`，格式为：`协议://域名[:端口]`<br>例如：`http://www.qq.com` | StringArray |
| - - AllowedHeaders | 在发送 OPTIONS 请求时告知服务端，接下来的请求可以使用哪些自定义的 HTTP 请求头部，支持通配符`*` | StringArray |
| - - ExposeHeaders  | 设置浏览器可以接收到的来自服务器端的自定义头部信息           | StringArray |
| - - MaxAgeSeconds  | 设置 OPTIONS 跨域信息缓存秒数                                | String      |
| - - ID             | 配置规则的 ID                                                | String      |

### 删除跨域配置

> !
>
> 1. 删除当前 Bucket 的跨域访问配置信息，会导致所有请求跨域失败，请谨慎操作。
> 2. 不推荐在浏览器端使用该方法。

#### 功能说明

删除存储桶的跨域访问配置信息。

#### 使用示例

```js
cos.deleteBucketCors({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名规则为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误。如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

#### 使用示例

```js
cos.getBucketLocation({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名规则为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名               | 参数描述                                                     | 类型   |
| -------------------- | ------------------------------------------------------------ | ------ |
| err                  | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode         | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers            | 请求返回的头部信息                                           | Object |
| data                 | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode         | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers            | 请求返回的头部信息                                           | Object |
| - LocationConstraint | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String |

## 生命周期

### 设置生命周期

#### 功能说明

设置存储桶生命周期管理的配置。

#### 使用示例

示例一：上传30天后，沉降至低频存储。

```js
cos.putBucketLifecycle({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
    Rules: [{
        "ID": "1",
        "Status": "Enabled",
        "Filter": {},
        "Transition": {
            "Days": "30",
            "StorageClass": "STANDARD_IA"
        }
    }],
}, function(err, data) {
    console.log(err || data);
});

```

示例二：指定目录前缀`dir/`，上传90天后，沉降至归档存储。

```js
cos.putBucketLifecycle({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
    Rules: [{
        "ID": "2",
        "Filter": {
            "Prefix": "dir/",
        },
        "Status": "Enabled",
        "Transition": {
            "Days": "90",
            "StorageClass": "ARCHIVE"
        }
    }],
}, function(err, data) {
    console.log(err || data);
});

```

示例三：上传180天后，删除文件。

```js
cos.putBucketLifecycle({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
    Rules: [{
        "ID": "3",
        "Status": "Enabled",
        "Filter": {},
        "Expiration": {
            "Days": "180"
        }
    }],
}, function(err, data) {
    console.log(err || data);
});


```

示例四：上传30天后，删除碎片。

```js
cos.putBucketLifecycle({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
    Rules: [{
        "ID": "4",
        "Status": "Enabled",
        "Filter": {},
        "AbortIncompleteMultipartUpload": {
            "DaysAfterInitiation": "30"
        }
    }],
}, function(err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名                             | 参数描述                                                     | 类型        | 必填 |
| ---------------------------------- | ------------------------------------------------------------ | ----------- | ---- |
| Bucket                             | Bucket 的名称，命名规则为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String      | 是   |
| Region                             | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String      | 是   |
| LifecycleConfiguration             | 指定生命周期规则                                             | Object      | 是   |
| - Rules                            | 请求返回的头部信息                                           | ObjectArray | 是   |
| - - ID                             | 规则的唯一标识 ID                                            | String      | 是   |
| - - Status                         | 规则的开启状态，枚举值：Enabled、Disabled                    | String      | 是   |
| - - Filter                         | 指定过滤条件                                                 | String      | 是   |
| - - - Prefix                       | 规则要匹配上的 Object 前缀                                   | String      | 否   |
| - - Transition                     | 表示对 Object 沉降                                           | Object      | 否   |
| - - - Days                         | 规则生效天数，按文件上传时间开始算，必须为正整数             | Object      | 是   |
| - - - StorageClass                 | 对 Object 转存的目标存储类型，枚举值：STANDARD、STANDARD_IA，默认值：STANDARD | Object      | 否   |
| - - Expiration                     | 表示对 Object 删除                                           | Object      | 否   |
| - - - Days                         | 规则生效天数，按文件上传时间开始算，必须为正整数             | Object      | 是   |
| - - AbortIncompleteMultipartUpload | 表示删除碎片                                                 | Object      | 否   |
| - - - Days                         | 规则生效天数，按文件上传时间开始算，必须为正整数             | Object      | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

### 查询生命周期

#### 功能说明

GET Bucket lifecycle 接口可以查询存储桶生命周期管理的配置。

#### 使用示例

```js
cos.getBucketLifecycle({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});

```

#### 返回示例

```json
{
    "Rules": [{
        "ID": "1",
        "Filter": "",
        "Status": "Enabled",
        "Transition": {
            "Days": "30",
            "StorageClass": "STANDARD_IA"
        }
    }, {
        "ID": "2",
        "Filter": {
            "Prefix": "dir/"
        },
        "Status": "Enabled",
        "Transition": {
            "Days": "90",
            "StorageClass": "ARCHIVE"
        }
    }, {
        "ID": "3",
        "Filter": "",
        "Status": "Enabled",
        "Expiration": {
            "Days": "180"
        }
    }, {
        "ID": "4",
        "Filter": "",
        "Status": "Enabled",
        "AbortIncompleteMultipartUpload": {
            "DaysAfterInitiation": "30"
        }
    }],
    "statusCode": 200,
    "headers": {}
}

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名规则为 BucketName-APPID ，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名                             | 参数描述                                                     | 类型        |
| ---------------------------------- | ------------------------------------------------------------ | ----------- |
| err                                | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object      |
| - statusCode                       | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers                          | 请求返回的头部信息                                           | Object      |
| data                               | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - statusCode                       | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers                          | 请求返回的头部信息                                           | Object      |
| - Rules                            | 请求返回的头部信息                                           | ObjectArray |
| - - ID                             | 规则的唯一标识 ID                                            | String      |
| - - Status                         | 规则的开启状态，枚举值：Enabled、Disabled                    | String      |
| - - Filter                         | 指定过滤条件                                                 | String      |
| - - - Prefix                       | 规则要匹配上的 Object 前缀                                   | String      |
| - - Transition                     | 表示对 Object 沉降                                           | Object      |
| - - - Days                         | 规则生效天数，按文件上传时间开始算，必须为正整数             | Object      |
| - - - StorageClass                 | 对 Object 转存的目标存储类型，枚举值：STANDARD、STANDARD_IA，默认值：STANDARD | Object      |
| - - Expiration                     | 表示对 Object 删除                                           | Object      |
| - - - Days                         | 规则生效天数，按文件上传时间开始算，必须为正整数             | Object      |
| - - AbortIncompleteMultipartUpload | 表示删除碎片                                                 | Object      |
| - - - Days                         | 规则生效天数，按文件上传时间开始算，必须为正整数             | Object      |

### 删除生命周期

#### 功能说明

删除存储桶生命周期管理的配置。

#### 使用示例

```js
cos.deleteBucketLifecycle({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

## 存储桶策略

### 设置存储桶策略

#### 功能说明

设置指定存储桶的权限策略。

#### 使用示例

```js
cos.putBucketPolicy({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
    Policy: {
        "version": "2.0",
        "Statement": [{
            "Effect": "allow",
            "Principal": {
                "qcs": ["qcs::cam::uin/100000000001:uin/100000000001"]
            },
            "Action": [
                "name/cos:PutObject",
                "name/cos:InitiateMultipartUpload",
                "name/cos:ListMultipartUploads",
                "name/cos:ListParts",
                "name/cos:UploadPart",
                "name/cos:CompleteMultipartUpload"
            ],
            "Resource": ["qcs::cos:ap-beijing:uid/1250000000:examplebucket-1250000000/*"],
        }]
    },
}, function(err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名        | 参数描述                                                     | 类型        | 必填 |
| ------------- | ------------------------------------------------------------ | ----------- | ---- |
| Bucket        | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String      | 是   |
| Region        | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String      | 是   |
| Policy        | 权限策略，详情请参见 [访问管理策略语法](https://cloud.tencent.com/document/product/436/12469#.E8.AE.BF.E9.97.AE.E7.AE.A1.E7.90.86.E7.AD.96.E7.95.A5.E8.AF.AD.E6.B3.95) | Object      | 是   |
| - version     | 版本号，固定 2.0                                             | ObjectArray | 是   |
| - statement   | 权限策略生命列表                                             | ObjectArray | 是   |
| - - effect    | 效力，枚举值：allow、deny                                    | String      | 是   |
| - - principal | 身份信息                                                     | ObjectArray | 是   |
| - - - qcs     | 身份信息标识字符串<br>格式：`qcs::cam::uin/100000000001:uin/100000000011`<br>其中100000000001 是主账号，100000000011是子账号 | String      | 是   |
| - - action    | 策略生效的相关 Action 列表，支持通配符`*`                    | StringArray | 是   |
| - - resource  | 相关的资源标识字符串列表<br>格式：`qcs::cos:<Region>:uid/<AppId>:<ShortBucketName>/*`<br>例如：`qcs::cos:ap-beijing:uid/1250000000:examplebucket/*` | StringArray | 是   |
| - - condition | 允许或禁用的的资源列表，字符串                               | ObjectArray | 否   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

### 查询存储桶策略

#### 功能说明

查询指定存储桶的权限策略。

#### 使用示例

```js
cos.getBucketPolicy({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});

```

#### 返回示例

```json
{
    "Policy": {
        "version": "2.0",
        "Statement": [{
            "Action": [
                "name/cos:PutObject",
                "name/cos:InitiateMultipartUpload",
                "name/cos:ListMultipartUploads",
                "name/cos:ListParts",
                "name/cos:UploadPart",
                "name/cos:CompleteMultipartUpload"
            ],
            "Effect": "allow",
            "Principal": {
                "qcs": ["qcs::cam::uin/100000000001:uin/100000000001"]
            },
            "Resource": ["qcs::cos:ap-beijing:uid/1250000000:examplebucket-1250000000/*"],
            "Sid": "costs-1539833197000000307620-46518-39"
        }]
    },
    "statusCode": 200,
    "headers": {}
}

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名          | 参数描述                                                     | 类型        |
| --------------- | ------------------------------------------------------------ | ----------- |
| err             | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object      |
| data            | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - Policy        | 权限策略，详情请参见 [访问管理策略语法](https://cloud.tencent.com/document/product/436/12469#.E8.AE.BF.E9.97.AE.E7.AE.A1.E7.90.86.E7.AD.96.E7.95.A5.E8.AF.AD.E6.B3.95) | Object      |
| - - version     | 版本号，固定2.0                                              | ObjectArray |
| - - statement   | 权限策略生命列表                                             | ObjectArray |
| - - - effect    | 效力，枚举值：allow、deny                                    | String      |
| - - - principal | 身份信息                                                     | ObjectArray |
| - - - - qcs     | 身份信息标识字符串<br>格式：`qcs::cam::uin/100000000001:uin/100000000011`<br>其中100000000001是主账号，100000000011是子账号 | String      |
| - - - action    | 策略生效的相关 Action 列表，支持通配符`*`                    | StringArray |
| - - - resource  | 相关的资源标识字符串列表<br>格式：`qcs::cos:<Region>:uid/&ltAppId>:<ShortBucketName>/*`<br>例如：`qcs::cos:ap-beijing:uid/1250000000:examplebucket/*` | StringArray |
| - - - condition | 允许或禁用的的资源列表，字符串                               | ObjectArray |

### 删除存储桶策略

#### 功能说明

删除指定存储桶的权限策略。

#### 使用示例

```js
cos.deleteBucketPolicy({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

## 标签管理

### 设置存储桶标签

#### 功能说明

为已存在的存储桶设置标签。

#### 使用示例

```js
cos.putBucketTagging({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
    Tagging: {
        "Tags": [
            {"Key": "k1", "Value": "v1"},
            {"Key": "k2", "Value": "v2"}
        ]
    }
}, function(err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名    | 参数描述                                                     | 类型        | 必填 |
| --------- | ------------------------------------------------------------ | ----------- | ---- |
| Bucket    | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String      | 是   |
| Region    | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String      | 是   |
| Tagging   | 标签信息                                                     | Object      | 是   |
| - Tags    | 标签信息                                                     | ObjectArray | 是   |
| - - Key   | 标签名                                                       | String      | 是   |
| - - Value | 标签值                                                       | String      | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

### 查询存储桶标签

#### 功能说明

查询指定存储桶下已有的存储桶标签。

#### 使用示例

```js
cos.getBucketTagging({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});

```

#### 返回示例

```json
{
    "Tags": [
        {"Key": "k1", "Value": "v1"},
        {"Key": "k2", "Value": "v2"}
    ],
    "statusCode": 200,
    "headers": {}
}

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型        |
| ------------ | ------------------------------------------------------------ | ----------- |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object      |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers    | 请求返回的头部信息                                           | Object      |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number      |
| - headers    | 请求返回的头部信息                                           | Object      |
| - Tags       | 标签信息                                                     | ObjectArray |
| - - Key      | 标签名                                                       | String      |
| - - Value    | 标签值                                                       | String      |

### 删除存储桶标签

#### 功能说明

删除指定的存储桶标签。

#### 使用示例

```js
cos.deleteBucketTagging({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

## 版本控制

### 设置版本控制

#### 功能说明

设置存储桶的版本控制功能。

#### 使用示例

```js
cos.putBucketVersioning({
    Bucket: 'examplebucket-1250000000',  /* 必须 */
    Region: 'ap-beijing',     /* 必须 */
    VersioningConfiguration: {
        Status: "Enabled"
    }
}, function (err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名                  | 参数描述                                                     | 类型   | 必填 |
| ----------------------- | ------------------------------------------------------------ | ------ | ---- |
| Bucket                  | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region                  | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |
| VersioningConfiguration | 定义存储桶的版本控制配置信息                                 | Object | 是   |
| - Status                | 版本控制是否打开的状态，枚举值：Enabled、Suspended，Enabled 表示打开，Suspended 表示暂停 | String | 否   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

### 查询版本控制

#### 功能说明

查询存储桶的版本控制信息。

#### 使用示例

```js
cos.getBucketVersioning({
    Bucket: 'examplebucket-1250000000',  /* 必须 */
    Region: 'ap-beijing',     /* 必须 */
}, function (err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名                    | 参数描述                                                     | 类型   |
| ------------------------- | ------------------------------------------------------------ | ------ |
| err                       | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode              | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers                 | 请求返回的头部信息                                           | Object |
| data                      | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode              | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers                 | 请求返回的头部信息                                           | Object |
| - VersioningConfiguration | 存储桶的版本控制配置信息                                     | Object |
| - - Status                | 版本控制是否打开的状态，枚举值：空、Enabled、Suspended       | String |

## 跨地域复制

### 设置跨地域复制

#### 功能说明

设置存储桶的跨地域复制规则。

#### 使用示例

```js
cos.putBucketReplication({
    Bucket: 'examplebucket-1250000000',  /* 必须 */
    Region: 'ap-beijing',     /* 必须 */
    ReplicationConfiguration: { /* 必须 */
        Role: "qcs::cam::uin/100000000001:uin/100000000001",
        Rules: [{
            ID: "1",
            Status: "Enabled",
            Prefix: "sync/",
            Destination: {
                Bucket: "qcs:id/0:cos:ap-chengdu:appid/1250000000:backup",
                StorageClass: "Standard",
            }
        }]
    }
}, function (err, data) {
    console.log(err || data);
});

```

#### 参数说明

| 参数名                   | 参数描述                                                     | 类型        | 必填 |
| ------------------------ | ------------------------------------------------------------ | ----------- | ---- |
| Bucket                   | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String      | 是   |
| Region                   | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String      | 是   |
| ReplicationConfiguration | 定义跨地域复制规则                                           | Object      | 是   |
| - Role                   | 复制过程以什么角色的身份<br>格式：`qcs::cam::uin/100000000001:uin/100000000011`<br>其中100000000001是主账号，100000000011是子账号 | Object      | 否   |
| - Rules                  | 复制具体规则列表                                             | ObjectArray | 是   |
| - - ID                   | 任务标识 ID                                                  | String      | 否   |
| - - Status               | 规则状态，枚举值：Enabled、Disabled                          | String      | 是   |
| - - Prefix               | 要复制的 Object 前缀                                         | String      | 否   |
| - - Destination          | 要复制的 Object 前缀                                         | Object      | 是   |
| - - - Bucket             | 要复制到的存储桶<br>格式：`qcs:id/0:cos:<Region>:appid/<AppId>:<ShortBucketName>`<br>例如：`qcs:id/0:cos:ap-chengdu:appid/1250000000:backup` | Object      | 是   |
| - - - StorageClass       | 复制后的存储类型，枚举值：STANDARD、STANDARD_IA，默认值：STANDARD | Object      | 否   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |

### 查询跨地域复制

#### 功能说明

查询存储桶的跨地域复制规则。

#### 使用示例

```js
cos.getBucketReplication({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});

```

#### 返回示例

```json
{
    "ReplicationConfiguration": {
        "Role": "qcs::cam::uin/100000000001:uin/100000000001",
        "Rules": {
            "ID": "1",
            "Status": "Enabled",
            "Prefix": "sync/",
            "Destination": {
                "Bucket": "qcs:id/0:cos:ap-chengdu:appid/1250000000:backup",
                "StorageClass": "Standard"
            }
        }
    },
    "statusCode": 200,
    "headers": {}
}

```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }

```

| 参数名                     | 参数描述                                                     | 类型        |
| -------------------------- | ------------------------------------------------------------ | ----------- |
| err                        | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object      |
| data                       | 请求成功时返回的对象，如果请求发生错误，则为空               | Object      |
| - ReplicationConfiguration | 跨地域复制规则                                               | Object      |
| - - Role                   | 复制过程以什么角色的身份<br>格式：`qcs::cam::uin/100000000001:uin/100000000011`<br>其中100000000001是主账号，100000000011是子账号 | Object      |
| - - Rules                  | 复制具体规则列表                                             | ObjectArray |
| - - - ID                   | 任务标识 ID                                                  | String      |
| - - - Status               | 规则状态，枚举值：Enabled、Disabled                          | String      |
| - - - Prefix               | 要复制的 Object 前缀                                         | String      |
| - - - Destination          | 要复制的 Object 前缀                                         | Object      |
| - - - - Bucket             | 要复制到的存储桶<br>格式：`qcs:id/0:cos:<Region>:appid/<AppId>:<ShortBucketName>`<br>例如：`qcs:id/0:cos:ap-chengdu:appid/1250000000:backup` | Object      |
| - - - - StorageClass       | 复制后的存储类型，枚举值：STANDARD、STANDARD_IA，默认值：STANDARD | Object      |

### 删除跨地域复制

#### 功能说明

删除存储桶的跨地域复制规则。

#### 使用示例

```js
cos.deleteBucketReplication({
    Bucket: 'examplebucket-1250000000', /* 必须 */
    Region: 'ap-beijing',    /* 必须 */
}, function(err, data) {
    console.log(err || data);
});
```

#### 参数说明

| 参数名 | 参数描述                                                     | 类型   | 必填 |
| ------ | ------------------------------------------------------------ | ------ | ---- |
| Bucket | Bucket 的名称，命名格式为 BucketName-APPID，此处填写的存储桶名称必须为此格式 | String | 是   |
| Region | Bucket 所在地域，枚举值请参见 [地域和访问域名](https://cloud.tencent.com/document/product/436/6224) | String | 是   |

#### 回调函数说明

```
function(err, data) { ... }
```

| 参数名       | 参数描述                                                     | 类型   |
| ------------ | ------------------------------------------------------------ | ------ |
| err          | 请求发生错误时返回的对象，包括网络错误和业务错误，如果请求成功则为空，更多详情请参见 [错误码](https://cloud.tencent.com/document/product/436/7730) 文档 | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
| data         | 请求成功时返回的对象，如果请求发生错误，则为空               | Object |
| - statusCode | 请求返回的 HTTP 状态码，如200、403、404等                    | Number |
| - headers    | 请求返回的头部信息                                           | Object |
