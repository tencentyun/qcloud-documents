## 简介

本文介绍如何通过控制台使用 COS 的图片处理功能。您可以通过以下两种方式使用图片处理功能。如需了解图片处理的相关说明，请参见 [图片处理概述](https://cloud.tencent.com/document/product/436/42215)。

- **通过给图片 URL 添加参数**：您可以通过在图片的对象地址（URL）后添加相应参数来对图片进行相应的处理。
- **使用图片样式**：您可以通过创建样式的方式将不同的处理效果保存下来，然后使用样式对图片进行统一的处理。此处设置的样式是图片下载时，为实时处理参数组合起的一个模板。

> !
> - 图片处理功能仅支持中国公有云地域。
> - 图片处理功能为收费项，由数据万象收取，详细的计费说明请参见数据万象 [计费与定价](https://cloud.tencent.com/document/product/460/6970)。

## 添加 URL 参数

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5/bucket)。
2. 找到图片所在的存储桶，单击其存储名称，进入存储桶管理页面。
3. 在图片文件的右侧操作栏下，单击【详情】进入文件详情页。
4. 复制【对象地址】，并粘贴到浏览器窗口地址栏中。
> !处理图片需要有对象的写权限，有关对象权限设置可参见 [设置对象的访问权限](https://cloud.tencent.com/document/product/436/13327)。
5. 在地址栏中，按以下格式在对象地址后面添加相应的参数。有关更多的图片处理参数及说明，请参见 [数据万象基础图片处理](https://cloud.tencent.com/document/product/460/6924) API 文档。
```sh
对象地址?处理接口名称/处理操作名称/处理参数
```
> !如果图片文件的访问权限为私有读，则需在带有签名的地址上添加图片处理参数。

**示例：缩放图片宽高为原图50%**
假设原图效果如下，对象的访问权限为公有读私有写，对象地址 URL 为`https://examplebucket-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg`。
![img](https://main.qcloudimg.com/raw/3d4682ff8e622425ebd29913810a5c38.jpeg)

然后在 URL 链接中添加如下参数：

- 缩放处理接口：imageMogr2
- 缩放操作名称：thumbnail
- 处理参数：!50p

添加参数后的地址为：`https://examplebucket-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg?imageMogr2/thumbnail/!50p`，将此地址粘贴至地址栏回车，即可看到缩放后的效果图如下。
![](https://main.qcloudimg.com/raw/f48dba67ddfac797136a552dc6a14816.jpg)

## 使用图片样式

图片样式功能可以帮助您将不同的处理操作参数以模板的形式呈现，通过样式对图片进行统一的处理。此处设置的样式是图片下载时为实时处理参数组合起的一个模板。下面以**设置限定图片缩放为宽480px，高270px 的样式**为例，介绍如何操作：


1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5/bucket)。
2. 找到图片所在的存储桶，单击其存储名称，进入存储桶管理页面。
3. 在左侧菜单栏中，单击【图片处理】，进入**样式管理**页面。
   **分隔符**：样式分隔符是分割文件名称和处理样式的符号，包含中划线（-）、下划线（_）、斜杠（/）和感叹号（!）。此处选择感叹号（!），然后保存。
4. 单击【添加样式】，进入**新增样式**页面，配置信息如下：
	- **样式名称**：输入自定义的样式名称，此处举例输入：yunstyle。
> ! 
> - 样式名需要区分大小写，且保存之后不可修改。
> - 为避免歧义，处理样式名中不可出现当前所启用的间隔标志符。
	- **编辑模式**：选择基本编辑。
  - 缩略方式：选择只缩放。
  - 缩放选择：选择限定宽高缩放。
  - 缩略尺寸：宽480px，高270px。
  - 渐进显示：如开启，访问图片时以渐进显示的方式展现。此处保存默认不开启。
  - 输出格式：可选图片输出的格式，此处保持默认原图。
5. 配置信息完成后，可单击右侧预览按钮查看预览效果。
6. 预览无误后，单击【保存】，即可看到一个名为 yunstyle 的图片样式添加完毕。
> ?
> - 同一存储桶下最多可设置100条样式。
> - 设置生效时间平均为30分钟。
> - 更改分隔符需清除缓存，全网生效至少需要24小时。
> - 取消已使用的分隔符，可能导致产品功能异常。
> - 有关图片样式的更多说明，可参见 [样式设置](https://cloud.tencent.com/document/product/460/6936)。
7. 进入对象详情页，复制对象地址并按以下格式在对象地址后面添加分隔符和样式名。
```
对象地址 + 分隔符 + 处理样式名
```
最后得到的对象地址为：`https://examplebucket-1250000000.cos.ap-chengdu.myqcloud.com/sample.jpeg!yunstyle`，将此地址粘贴至地址栏回车，即可看到缩放后的效果图如下。
![](https://main.qcloudimg.com/raw/f48dba67ddfac797136a552dc6a14816.jpg)


