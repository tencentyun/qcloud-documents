## 简介

您可以通过 [对象存储控制台](https://console.cloud.tencent.com/cos5)，为您的存储桶开通清单功能。开通清单功能可以实现定期每天或每周为您的存储桶输出一份关于对象属性、配置详情等清单报告。关于清单的更多详情，请参见 [清单功能概述](https://cloud.tencent.com/document/product/436/33703)。下面将为您详细介绍如何开通存储桶清单功能。支持定时清单和即时清单，您可按需选择。

>!
> - 用户可以在一个存储桶中配置多个清单任务。
> - 清单任务执行过程中并不会直接读取对象内容，仅扫描对象元数据等属性信息。
> - 清单功能目前暂不支持金融云地域。
> 

## 前提条件

已创建存储桶，详情请参见 [创建存储桶](https://cloud.tencent.com/document/product/436/13309) 文档。

## 操作步骤

### 添加定时清单

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5)。
2. 在左侧导航栏中，单击**存储桶列表**。
3. 单击进入想要开通清单功能的存储桶（源存储桶）。
4. 在左侧导航栏中，选择**基础配置 > 清单设置**，单击**添加清单**。
5. 在配置页面您可以进行以下配置：
 1. 基础信息
    - **规则状态**：是否开启当前清单规则。您可以选择开启/关闭清单。
    - **清单名称**：输入您的清单名称。
    - **目标存储桶**：是指存储清单的存储桶，初始默认目标存储桶即源存储桶，目标存储桶必须与源存储桶处于同一地域。
    - **清单报告前缀（选填）**：输入为目标存储桶选择的前缀，可对公共位置的清单文件进行分组，初始为默认值。
 2. 筛选条件
    - **文件范围**：选择清单对象的范围，可选择整个存储桶或者部分相同前缀的文件。例如选择存储桶中 folder 路径下的 doc 路径的所有文件，则指定文件前缀为 `folder/doc`。
	- **对象版本**：选择清单要包含对象的所有版本还是仅当前版本。如不选择，默认只保留当前版本。
	- **筛选标签（选填）**：通过筛选将标签相同的对象列入清单。若不填写，默认不筛选。
	- **筛选时间（选填）**：通过筛选将修改时间为某时间点后或某时间段内的对象列入清单。若不设置，默认不筛选。
	- **输出自定义头部（选填）**：如需清单报告中包含对象的自定义头部，可填入需输出的自定义头部，仅支持输出 x-cos-meta-\* 头部。若不填写，则默认不输出自定义头部。
	- **清单信息**：选择清单报告需要包含的对象的相应信息，可选项有：对象大小、存储类别、ETag、存储桶复制状态、分块上传状态、最新更新日期、标签、CRC64。若不选择，默认全选。
>?
>- ETag（实体标签）是对象的哈希，ETag 仅反映对对象内容的更改，而不反映对其元数据的更改。ETag 不一定是对象数据的 MD5 摘要，这取决于对象的创建方式和加密方式。
>- 生成的清单内容默认包含 Appid、Bucket、Key、LastModifiedTime 字段。
>- 如果存储桶已开启版本控制，则生成的清单内容会增加 VersionId、IsLatest、IsDeleteMarker 字段。
>
 3. 输出格式
	- **输出格式**：输出清单文件格式为使用 GZIP 压缩的 CSV 文件。
	- **生成周期**：选择清单是每日/每周进行生成，默认每日生成；例如当天下午15点添加了清单，通常最晚于次日的6点生成清单文件并投递至目标存储桶。若选择按周生成，则以7天为周期生成清单。例如9月1日开启清单，将在9月2日、9月9日、9月16日......，以7天为周期生成清单。
	- **清单加密**：选择清单是否需要服务端加密，您可选择：
		 - 不加密：不加密清单，此项为默认项。
		 - SSE-COS：使用 COS 托管密钥的服务端加密来加密报告，有关更多信息，请参见对象存储开发者指南中的 [SSE-COS 加密](https://cloud.tencent.com/document/product/436/18145#sse-cos-.E5.8A.A0.E5.AF.86)。
	- **访问授权**：默认关闭。开启访问授权后，即可进行下一步操作。
 4. 信息确认
对存储桶的清单配置信息进行确认。如需修改，单击**上一步**即可。
6. 确认配置信息无误后，单击**确定**即可。此后 COS 将每日或每周自动生成清单文件并投递到您所设置的目标存储桶。
>? 如需了解清单功能生成的清单报告格式和内容详情，请参见 [清单功能概述](https://cloud.tencent.com/document/product/436/33703)。
>

### 生成即时清单

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5)。
2. 在左侧导航栏中，单击**存储桶列表**，然后单击进入想要开通清单功能的存储桶（源存储桶）。
3. 单击左侧**基础配置 > 清单设置**，选择一个清单规则。单击右侧的**即时生成清单**，即可生成即时清单。
>? 
>- 如需生成即时清单，请在已有清单的操作列，单击**即时生成清单**即可。
>- 如您未配置清单，请先配置一个清单，生成即时清单。
>


