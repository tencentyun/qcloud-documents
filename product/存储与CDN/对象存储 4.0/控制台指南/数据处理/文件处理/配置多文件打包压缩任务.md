## 简介

对象存储支持对云上多文件打包功能，支持对 COS 上某个路径中的文件进行批量打包，或根据您提供的若干文件单链进行打包。

>?
>
>- 使用批量文件的打包方式，单次请求最多支持打包1000个文件，总大小不超过50GB。
>- 使用目录或清单的打包方式，最多支持打包10000个文件，总大小不超过50GB。
>- 创建任务后，会产生相应的功能费用，由数据万象服务收取，详细的计费说明请参见 [文件处理费用](https://cloud.tencent.com/document/product/460/82333)。
>- 支持的地域：北京、南京、上海、广州、成都、重庆

## 创建多文件打包压缩任务

#### 操作步骤

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5)。
2. 在左侧导航栏中，单击**存储桶列表**，进入存储桶列表管理页面。
3. 找到需要操作的存储桶，单击该存储桶名称，进入该存储桶管理页面。
4. 在左侧导航栏中，单击**任务与工作流** > **任务管理**，进入任务管理页面。
5. 选择**文件处理**页签，选择**多文件打包压缩**任务类型，单击**创建任务**，并按照如下信息进行配置：
   <img src="https://qcloudimg.tencent-cloud.cn/raw/0733094c0e1f32bcde7353435e27d157.png" alt="img" style="zoom:50%;" />

 - **选择源文件**：支持以下三种方式进行文件打包压缩：

    - 文件：手动选择存储桶内的多个文件，进行打包压缩；
    - 文件目录：手动选择存储桶内的一个目录，对整个目录进行打包压缩；
    - URL 列表文件：将需要打包的文件列表整理成 CSV 清单文件，并将清单文件保存至存储桶中，选择桶内的清单文件即可对清单中的文件进行打包压缩。

 - **目录扁平化**：使用目录扁平化后，将去除源目录结构。例如源文件 URL 为 `https://example.com/source/123/test.mp4`，这里源文件的路径是 `source/123/test.mp4`。

    - 如果使用扁平化，则压缩包中该文件为 test.mp4；
    - 如果不使用扁平化， 则压缩包中该文件为 source/123/test.mp4。
   >!
   >使用目录扁平化，则不同目录下的同名文件，在压缩包内会自动覆盖仅保留一个。
   
 -  **压缩类型**：支持压缩为 zip、tar、gz 三种格式。

 - **压缩方式**：支持设置压缩的效果：

    - 默认：适中的压缩速度及压缩后的文件体积
    - 压缩速度优先：压缩时间更短，但压缩后的文件体积相对较大
    - 压缩质量优先：压缩时间更长，但压缩后的文件体积更小

 - **是否加密**：支持在压缩时进行加密，仅支持目标格式为 zip 时进行加密。

 - **目标存储桶**：文件解压后保存的存储桶，仅支持同地域下开通了文件处理服务的存储桶。

 - **目标路径**：文件解压后保存的具体路径，如不填写则默认保存在目标存储桶根路径。

 - **目标文件名**：打包压缩后的文件名称。

 - **回调 URL**：与队列绑定的回调地址信息，详情请参考 [队列与回调](https://cloud.tencent.com/document/product/436/53970) 。

## 查看任务

您可以在任务页面查看不同任务类型在**指定时间段内**的所有任务，可以单击**任务状态**筛选查看不同状态下的任务，也可以在**搜索框**通过任务 ID 查找指定任务。

#### 操作步骤

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5)。
2. 在左侧导航栏中，单击**存储桶列表**，进入存储桶列表管理页面。
3. 找到需要操作的存储桶，单击该存储桶名称，进入该存储桶管理页面。
4. 在左侧导航栏中，选择**任务与工作流**，单击**任务**，进入任务管理页面。
5. 单击任务右侧的**查看**，即可查看任务的详细信息。

>? 
>
>- 任务一共包括6种状态：执行成功、执行失败、执行中、未执行、已暂停、已取消。
>- 仅支持查询近1个月的任务记录。
