## 简介

对象存储（Cloud Object Storage，COS）日志分析为您提供了多种场景的日志分析服务，协助您更高效地提取日志文件中的关键信息。本文介绍如何添加 COS 日志分析函数，创建函数后，请参考 [设置日志分析](https://cloud.tencent.com/document/product/436/70223) 使用 COS 日志分析功能。

## 注意事项

- 若您此前在对象存储控制台上为存储桶添加了 COS 日志分析规则，可以在 [云函数控制台](https://console.cloud.tencent.com/scf/list?rid=1&ns=default) 上看到您所创建的 COS 日志分析函数，请**不要**删除该 COS 日志分析函数，否则可能导致您的规则不生效。
- 已上线云函数的地域均已支持 COS 日志分析，包括有广州、上海、北京、成都、香港、新加坡、孟买、多伦多、硅谷等，更多支持地域可查看 [云函数产品文档](https://cloud.tencent.com/document/product/583)。
- COS 日志分析功能依赖于云函数服务，云函数服务为用户提供了 [免费额度](https://cloud.tencent.com/document/product/583/12282)，超出免费额度的部分需要按照 [云函数产品定价](https://cloud.tencent.com/document/product/583/12281) 收费。

## 操作步骤

1. 登录 [对象存储控制台](https://console.cloud.tencent.com/cos5)。
2. 在左侧导航栏中，单击**应用集成**，进入应用集成页面。
3. 单击上方的**拓展功能**页签，找到 COS 日志分析，单击**配置分析功能**，进入 COS 日志分析的函数规则配置页面。
4. 在页面中选择您需要添加函数的地域，然后单击**添加函数**，在弹出的窗口中配置如下信息：
 - **函数名称**：函数名称作为函数的唯一标识名称，创建后不可修改。您可以在 [云函数控制台](https://console.cloud.tencent.com/scf/list?rid=1&ns=default) 上查看该函数。
 - **关联存储桶**：选择已设置日志分析功能的 COS 存储桶。
 - **执行配置**：当前仅支持异步执行，调用后进入异步执行状态，不返回执行结果，但支持更长的运行时间。
 - **鉴权方式**：当前仅支持云函数鉴权。
 - **SCF 授权**：COS 日志分析需要授权云函数从您的存储桶中读取对应文件，并将日志分析的结果文件保存至指定位置，因此需要勾选该项完成 SCF 服务的授权。
5. 确认配置无误后，单击**确认**，即可看到函数已添加完成。
![](https://qcloudimg.tencent-cloud.cn/raw/08d929cfc60cc748e4d9ae209447b4ec.png)
   您可以对新创建的函数进行如下操作：
 - 单击**日志**，查看 COS 日志分析函数的历史运行情况。
 - 单击**详情**，查看 COS 日志分析函数的具体配置规则。
 - 单击**编辑**，修改 COS 日志分析函数规则。
 - 单击**删除**，删除不使用的 COS 日志分析函数规则。
