## 概述
由于索引规则编辑后仅对新写入的日志生效，如果需要按照最新的索引规则对历史数据重新创建索引，可使用重建索引功能，常见的需要使用重建索引的场景如下：
- 键值索引新增字段，历史数据也需要使用该字段进行检索。
- 调整分词符配置，历史数据也需要按照新的分词符进行检索。
- 字段之前未开启统计，在索引配置中开启后，历史数据也需要对该字段进行统计（即 SQL）。

重建索引会将指定时间范围内的原始日志重新构建一遍索引，将产生索引流量费用（不产生写流量费用及索引存储费用）。数据量较大时会消耗较长时间并产生较高的费用，建议您尽量避免频繁的修改索引配置并重建索引。


## 前提条件

已开启索引，且最新的索引配置能满足后续的检索分析需求。


## 注意事项

- 单个日志主题同时仅允许运行一个重建索引任务，单个日志主题最多同时拥有10个重建索引任务记录，需删除不再需要的任务记录后才能新建索引任务。
- 同一时间范围内的日志，仅允许重建一次索引，需删除之前的任务记录后才能再次重建。
- 删除重建索引任务记录将恢复重建索引前的索引数据。
- 仅支持通过控制台重建写流量500GB以内的时间范围的日志。超过该限制时建议您缩小需要重建索引的日志时间范围，或 [联系技术服务](https://console.cloud.tencent.com/workorder/category) 获得更高配额支持。
- 重建索引时间范围以日志时间为准，日志上传时间与重建索引时间范围有超过1小时的偏差时（例如16:00上传了一条02:00的日志到 CLS，重建00:00～12:00的日志索引）不会被重建且后续无法进行检索。新上报一条日志到已经被重建的日志时间范围时，也不会被重建且后续无法进行检索。 

![](https://qcloudimg.tencent-cloud.cn/raw/0577bd347ba9aa2ac4db1407d6c02842.png)


## 操作步骤
1.  登录 [日志服务控制台](https://console.cloud.tencent.com/cls)。
2.  在左侧导航栏中，单击**日志主题**，进入日志主题列表页面。
3.  单击需要重建索引的日志主题ID/名称，进入日志主题管理页面。
4.  选择**索引配置**页签， 单击底部的**重建索引**。
![](https://qcloudimg.tencent-cloud.cn/raw/91d0e1e746e8ed1338141ac5a21a6729.png)
5. 选择需要重建的日志时间范围，单击**开始重建**。
![](https://qcloudimg.tencent-cloud.cn/raw/92ddd3153eb92a347e264fbac7d9d7eb.png)
>? 此处将根据选择的时间范围预估需要重建的日志数据对应的写流量及耗时，如果写流量过大、耗时过长，建议您尽可能的缩小需要重建的日志时间范围，以缩短耗时，同时也有助于降低重建索引带来的成本。开始重建后，可以查看任务的运行进度。
6. 重建完成后，可在列表中查看已经完成的任务。在列表中可删除指定任务，删除任务将恢复重建索引前的索引数据。
![](https://qcloudimg.tencent-cloud.cn/raw/6e88bdcd36080c5ee528094e0bc52f84.png)

