
本文介绍如何在日志服务控制台查看指定日志在原始文件中的上下文信息。

## 操作场景

日志上下文检索是指把目标日志数据在原始文件中的前若干条日志（上文）或后若干条日志（下文）检索查询出来。通过查看指定日志的上下文信息，您可以在业务故障排查中快速查找故障信息，方便定位问题。

## 功能优势

- 免除登录机器的繁琐步骤，在检索分析页面、快速查看任意机器，文件的指定日志的上下文信息。
- 结合事件发生的时间线索，在检索分析页指定时间段快速定位可疑日志后再进行上下文查询，快速定位问题。
- 不用担心服务器存储空间不足或日志文件轮转造成的数据丢失，在检索分析页上随时可以查看历史数据。


## 前提条件

- 上下文检索分析仅支持2.3.5以上版本使用，建议 [安装或升级至最新版本](https://cloud.tencent.com/document/product/614/17414)。
- 只有通过 LogListener 采集到的日志才支持上下文功能。
- 已开启并配置索引，详情请参见 [配置索引](https://cloud.tencent.com/document/product/614/50922)。

## 场景示例

订单交易轨迹：用户登录 > 浏览商品 > 选择物品 > 加入购物车 > 下单 > 订单支付 > 支付扣款 > 生成订单
使用场景：若用户的某一单交易失败，可先通过订单号查询错误日志，再根据查到的错误日志还原上下文，找到失败原因。例如扣款失败。
在日志服务中，可以按照以下步骤排查：
1. 在日志服务控制台的**检索分析**页面，结合事件发生的时间线索，输入**关键字**订单 ID 找到订单失败日志。
2. 以查到的日志为基准，向上或向下滚动直到发现与之相关的上下文日志信息。

<img src="https://main.qcloudimg.com/raw/eddd422f920b3b67e4f2df2b2dd5a29f.svg" style="width: 50%"/>


## 操作步骤

1. 登录 [日志服务控制台](https://console.cloud.tencent.com/cls)。
2. 在左侧导航栏中，单击【检索分析】，进入检索分析管理页面。
3. 根据实际需求，选择【**地域**】、【**日志集**】和【**日志主题**】。
4. 输入检索分析语句，选择时间范围， 单击【检索分析】。
5. 在“**原始数据**”页签下，找到目标日志的日志时间，单击 <img src="https://main.qcloudimg.com/raw/1327fb192ece11abdf3a130feaa4e78a.png"></img>，进入上下文检索分析页面。
6. 在上下文检索分析页面，系统仅检索出目标日志的前10条日志数据（上文）和后10条日志数据（下文）。
![](https://main.qcloudimg.com/raw/4d1913d3bc2f9fb0124bcf69eeb9a86f.png)
您可以在此页面进行如下操作：
 - 使用鼠标在当前页面上下滚动查看指定日志的上下文信息。
    - 单击【展示更早】，进行向上翻页浏览，每次多展示前20条日志数据。
    - 单击【展示更多】，进行向下翻页浏览，每次多展示后20条日志数据。
 - 在【高亮显示】文本框中，输入关键字进行高亮显示，实现关键字黄色填充显示。
 - 在【过滤日志】文本框中，输入需要过滤的字符串进行高亮显示。



