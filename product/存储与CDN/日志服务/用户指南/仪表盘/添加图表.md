日志服务（Cloud Log Service，CLS）支持对检索分析结果进行可视化图表统计，并支持将统计图表保存到仪表盘以方便持续监控查看，同时仪表盘也提供统计图表创建的入口，支持简易图表创建和自定义图表创建。


## 操作步骤

### 通过检索分析添加图表

>! 此方式需通过检索数据生成图表内容，详情请参考 [日志分析](https://cloud.tencent.com/document/product/614/44061)。
>

1. 登录 [日志服务控制台](https://console.cloud.tencent.com/cls/overview)。
2. 在左侧导航栏中，单击**检索分析**，进入检索分析管理页面。
3. 选择**图表分析**，单击**添加到仪表盘**。
4. 在弹出的窗口中，填写信息，单击**确定**。
![](https://qcloudimg.tencent-cloud.cn/raw/41f241ce21f927c7306ad2eabab10f7c.png)
<table>
	<tr><th>表单元素</th><th>说明</th></tr>
	<tr><td>图表名称</td><td>图表名称。</td></tr>
	<tr><td>目标仪表盘</td><td>图表将要添加到的仪表盘类别。<ul style="margin: 0;"><li>选择已有仪表盘，会添加仪表盘到已有仪表盘中。</li><li>选择新建仪表盘，则需要新建一个仪表盘，并将图表添加进去。</li></ul></td></tr>
	<tr><td>仪表盘</td><td>仪表盘名称。</td></tr>
</table>


### 通过仪表盘添加图表

1. 登录 [日志服务控制台](https://console.cloud.tencent.com/cls/overview)。
2. 在左侧导航栏中，单击**仪表盘**，进入仪表盘管理页面。
3. 单击需要操作的仪表盘 ID/名称，进入该仪表盘详情页面。
>? 如果您没有仪表盘，请 [新建仪表盘](https://cloud.tencent.com/document/product/614/63398)。
>
4. 单击**新建**，根据实际需求选择图表类型，创建图表。
![](https://qcloudimg.tencent-cloud.cn/raw/0923c0ed78cfed056eef79f63626b2c6.png)
 - 简易图表：通过可视化拖拽方式轻松创建图表，但统计分析功能较弱。
![](https://qcloudimg.tencent-cloud.cn/raw/9d09af961dec1aef4a9b9510660657df.png)
 <table>
	<tr><th>图表元素</th><th>说明</th></tr>
	<tr><td>选择字段</td><td>展示当前日志主题字段信息的列表，可以单击或直接鼠标拖拽添加到右侧条件输入框。</td></tr>
	<tr><td>指标</td><td>指标是衡量事物某个特征的参数，一般为数值类型字段。可以从左侧字段列表拖入字段，也可以单击“+”号触发下拉菜单选择字段。字段填充后可以单击字段旁的设置图标,修改字段的聚合计算方式，系统默认使用 “平均值” 。</td></tr>
	<tr><td>维度</td><td>维度是分析指标的视角分组，一般为字符串类型描述事物属性的字段。可以从左侧字段列表拖入字段，也可以单击“+”号触发下拉菜单选择字段。</td></tr>
	<tr><td>过滤</td><td>过滤字段用于数据的属性过滤。可以从左侧字段列表拖入字段，也可以单击“+”号触发下拉菜单选择字段。字段填充后可以单击字段旁的设置图标,修改字段的过滤方式，系统默认使用“字段存在” 。</td></tr>
	<tr><td>排序</td><td>排序字段用于统计结果的排列。排列字段仅支持依据条件字段排列，其他非条件字段不可用。建议单击“+”号触发下拉菜单选择字段。字段填充后可以单击字段旁的设置图标,修改排序方法，系统默认使用 “升序” 。</td></tr>
	<tr><td>行数限制</td><td>行数限制用于统计结果的数量过滤。设置后将按照排序从前往后显示设定数量的统计结果。行数限制取值范围为1 - 1000，系统默认使用“1000”。</td></tr>
</table>
 - 自定义图表：通过自定义检索语句创建图表，则支持全部统计分析功能。
![](https://qcloudimg.tencent-cloud.cn/raw/54c50745fd1137fc707a6687e52e5308.png)
填写检索分析语句后，单击**生成图表**即可。
5. 检查数据配置是否符合要求，系统将会根据图表数据结构要求自动填充。但必要时用户可手动调整数据结构配置。
![](https://qcloudimg.tencent-cloud.cn/raw/eb7b0902daf43068d8952a882068672c.png)
6. 单击**保存**。




## 常见问题

#### 配置完成后，单击生成图表或切换图表类型，发现图表没有生成，该怎么办？

当检索的数据结构与图表所要求的数据结构一致时，系统会默认自动填充。如果数据结构不一致，将因为缺少必要字段，导致图表无法生成（例如下图的缺少时间字段），因此，当出现这种情况时，请检查数据是否符合要求。

![](https://qcloudimg.tencent-cloud.cn/raw/4748d315478c086e09102b7ca3b77913.png)
