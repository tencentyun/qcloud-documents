
日志服务（Cloud Log Service，CLS）离线存储定位是以低成本方案解决海量低频日志的检索和存储问题，适用于用户对检索日志无实时要求，且日志保存时间较长的场景。离线存储提供分钟级的离线检索日志能力，满足用户对历史日志的回溯检索，归档存储等诉求。离线存储不支持监控告警，流式消费，实时投递等日志实时处理功能。

>!
> - 目前日志离线存储处于公测阶段，仅支持北京、广州、重庆地域。如果您日志主题所在地域暂未支持，可联系 [在线客服](https://cloud.tencent.com/act/event/Online_service) 申请。
> - 公测阶段免除离线存储的日志主题写入流量费用及存储费用。
> 

## 特性
- **成本低廉：**仅收取写入流量与日志存储量费用，整体使用成本相比【CLS-实时存储】降低80%。
- **简单易用：**检索语法兼容 Lucene，无额外学习成本；无需配置索引，写入即可检索。
- **稳定可靠：**基于全新自研的计算存储分离的日志系统，水平可扩展，高可用，使用灵活。

## 使用方法
1. 创建日志主题，并将“存储类型”选择为【离线存储】。详情请参考 [管理日志主题](https://cloud.tencent.com/document/product/614/41035)。
![](https://main.qcloudimg.com/raw/0b9779c1d1bf0f0bdd0de41311cfb8d8.png)
2. 将日志采集至目标 topic 上，详情请参考 [采集方式](https://cloud.tencent.com/document/product/614/12502)。
3. 进入目标日志主题检索页，输入检索语句，如 status:200，创建检索任务。
>? 检索语法与实时存储基本一致，区别请参考 [采集方式](https://cloud.tencent.com/document/product/614/12502)。
>
4. 创建成功后，单击【离线任务】，查看任务。
![](https://main.qcloudimg.com/raw/021397c3e337cffb6c580508693d4af5.png)
等待离线任务执行完成后，即可单击【查看】，查看数据。
![](https://main.qcloudimg.com/raw/63dd79b54539ce0df9c2e4ad2a3e61de.png)


## 限制说明

| 限制项               | 说明                             |
| -------------------- | -------------------------------- |
| 离线检索任务个数     | 单个日志集50个任务               |
| 离线检索结果保留时间 | 24h                              |
| 离线检索任务结果条数 | 上限500                          |
| 上下文检索限制       | 时间区间支持前后1小时，上限100条 |


## 常见问题

#### 离线存储公测结束后，如何计费？

仅收取日志写入流量费用与日志存储费用，日志存储量为未压缩的原始日志量，价格为0.0033元/GB/天。

示例，每天写入2TB原始日志数据，保存30天，以广州地域定价为例。

| 计费项     | 实时存储 | 离线存储        |  说明                                        |
| ---------- | -------- | --------------- | ---------------------------------------- |
| 写流量     | 3600元     | 3600元            | 价格均为0.18元/GB/天                     |
| 索引流量   | 21000元    | 0元               | 实时存储：0.35元/GB/天<br />离线存储：0元/GB/天  |
| 日志存储   | 8400元     | 6000元            | 实时存储：0.014元/GB/天<br />离线存储：0.0033元/GB/天 |
| 索引存储   | 25200元    | 0元               | 实时存储：0.014元/GB/天<br />离线存储：0元/GB/天 |
| 其他费用   | 极少     | 极少            | 包含接口调用次数，分区费用等             |
| 总价（月） | 58280元    | 9600元（下降83%） | -                                        |


#### 离线存储检索语法和实时存储有什么具体差异？

原则上与实时存储 Lucene 语法保持一致，详情可见 [语法规则文档](https://cloud.tencent.com/document/product/614/47044)。离线存储不支持以下语法：

| 不支持语法                                          | 示例                                                   |
| --------------------------------------------------- | ------------------------------------------------------ |
| 同时使用全文关键词检索与键值检索，且存在 and 和 or 语法 | (a OR key1:value1) AND b<br />(a AND key1:value1) OR b |
| ? 匹配单个字符                                  | a?                                                     |
| ~近似查询                                           | from~                                                  |
| 范围查询                                            | date:[20020101 TO 20030101]                            |

   
