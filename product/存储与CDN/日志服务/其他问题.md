### 日志服务 CLS 是什么？

日志服务（Cloud Log Service，CLS）是腾讯云提供的一站式的日志数据服务平台，主要提供以下功能：

- 日志采集：日志采集端 LogListener ，API 等多种接入方式。
- 日志存储：集中存储管理日志数据。
- 检索分析：提供日志查询筛选功能。
- 投递消费：提供日志投递/消费功能，便于进一步处理日志数据。
- CLS 与腾讯云多个云产品日志无缝对接。

### 日志服务如何定义一条日志？

在日志服务 CLS 中，一条完整的日志主要包含日志时间戳、日志内容、元数据三部分：
- 日志时间戳：日志的时间基本属性。
- 日志内容：键值对（key-value）组织的数据内容。
- 元数据：日志源 IP 地址、日志源文件路径等基本元信息。

### 日志可以保存多长时间？

日志服务提供日志生命周期管理，在创建日志集时可以指定日志的有效保存周期，逾期后数据将会被清理且不会再产生存储费用。若需要保存更长时间，请 [提交工单](https://console.cloud.tencent.com/workorder/category) 进行申请。

另外，投递至对象存储的数据会遵循目标存储桶的生命周期管理，收费规则也遵循对象存储计费规则。
>!逾期后的数据清理需要一定的清理时间，该时间段内不收取费用。

### 日志集和日志主题的区别是什么？

日志服务提供两层概念逻辑：日志集和日志主题，一个日志集包含多个日志主题，如同一个项目包含多个应用服务。一般而言，每个服务的日志格式都不相同，因此日志主题作为采集、检索等配置管理的最小单元。


### 全文索引和键值索引有什么区别？

- 全文索引：将整条日志按分词符拆分成多个分词，然后基于分词进行关键词查询。
- 键值索引：将整条日志按格式拆分成多个键值对（key-value），然后基于键值对进行字段查询。


### 服务不在腾讯云上，可以使用日志服务吗？

可以使用。日志服务对日志源没有限制要求，只要日志源与我们的服务端之间网络可达，就可以将日志采集到日志服务中来。

### 服务器更换 IP 地址后，Loglistener 应该如何适配？
- 若服务器通过机器标识绑定机器组，用户无需变更 Loglistener 配置。若服务器 IP 需要频繁变更，建议用户使用机器标识配置机器组。单击 [了解详情](https://cloud.tencent.com/document/product/614/17412)。
- 若服务器通过 IP 地址绑定机器组，用户需要完成以下配置变更：
 1. 修改 Loglistener 安装目录下的 /etc/loglistener.conf 文件。此处安装目录以 /user/local 为例：
```go
vi /usr/local/loglistener-2.3.0/etc/loglistener.conf
```
 2. 键盘按 **i** 键，进入编辑模式。
 3. 修改配置文件中 group_ip 部分，填入变更后的 IP 地址。
 4. 保存设置并退出编辑器，具体操作步骤：按 Esc 键，输入 :wq，按 Enter 键。
 5. 执行如下命令，重启 Loglistener。
```go
 /etc/init.d/loglistenerd restart
```
 6. 登录 [日志服务控制台](https://console.cloud.tencent.com/cls/overview?region=ap-guangzhou)，在左侧导航栏中，单击【机器组管理】，修改该服务器绑定的机器组配置，使用新 IP 替换原机器 IP 地址，单机【确定】。
