## 说明
腾讯移动推送提供多种推送方式，可根据以下指引测试不同场景下的消息推送。若您当前测试机型不足，可使用 [云真机](https://wetest.qq.com/) 测试。

##  推送功能测试

###  单设备推送

| 测试目标 | 单设备推送 |
| --- | --- |
| 测试目的 | 测试支持按设备 Token 推送，可以收到消息 |
| 测试环境 | 网络环境： Wi-Fi或4G<br>终端： 主流厂商的 Android 设备或 iOS 设备 |
| 前置条件 | 集成 SDK，设备注册成功|
| 测试步骤 | 1. 获取待测手机设备的 Token 信息<br>2. 通过调用API来进行推送或在管理台推送目标选择 Token 进行推送 |
| 预期结果 | 手机收到消息 |
| 备注 | 会优先选择走厂商通道，然后再走 TPNS 通道|

###  全部设备推送（广播）

| 测试目标 | 对全部设备推送 |
| --- | --- |
| 测试目的 | 测试是否支持对全部设备推送消息 |
| 测试环境 | 网络环境： Wi-Fi 或4G<br>终端： 主流厂商的 Android 设备或 iOS 设备 |
| 前置条件 | 集成SDK，设备注册成功 |
| 测试步骤 | 通过调用API进行推送给所有设备或在管理台推送目标选择所有设备推送 |
| 预期结果 | 全部设备收到消息 |

###  定时推送

| 测试目标 | 定时推送 |
| --- | --- |
| 测试目的 | 指定一个时间推送消息 |
| 测试环境 | 网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备或iOS设备 |
| 前置条件 | 集成SDK，设备注册成功|
| 测试步骤 | 1、在管理台或者调用API设置推送时间<br>2、推送目标选择所有设备或标签来进行推送 |
| 预期结果 | 在设置的时间点手机收到消息 |
| 备注 |仅全量推送和标签推送支持定时推送|

###  循环推送

| 测试目标 | 循环推送 |
| --- | --- |
| 测试目的 | 设置循环推送日期和循环类型，满足循环条件时可以收到消息 |
| 测试环境 | 网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备或iOS设备 |
| 前置条件 | 集成SDK，设备注册成功|
| 测试步骤 | 1、在管理台或者调用API设置循环推送时间和循环类型<br>2、推送目标选择所有设备或标签来进行推送 |
| 预期结果 | 满足循环条件时，手机收到消息 |
| 备注 | 仅全量推送和标签推送支持此字段|

### 单账号推送

| 测试目标 | 单账号推送 |
| --- | --- |
| 测试目的 | 支持按单个账号进行推送 ，可以收到消息 |
| 测试环境 | 网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备或iOS设备  |
| 前置条件 | 1、需调用账号绑定接口绑定账号 |
| 测试步骤 | 1. 用户在手机APP端通过调用SDK接口完成账号绑定<br>2. 绑定完成后，用户指定的账号和设备token就完成绑定了这时候可以通过调用 API 或在管理台选择对单个账号推送 |
| 预期结果 | 绑定账号的设备收到消息 |
| 备注 | [Android 账号绑定方式](https://cloud.tencent.com/document/product/548/36659#.E7.BB.91.E5.AE.9A.E8.B4.A6.E5.8F.B7.E6.B3.A8.E5.86.8C)<br>[iOS 账号绑定方式](https://cloud.tencent.com/document/product/548/36668#.E7.BB.91.E5.AE.9A.2F.E8.A7.A3.E7.BB.91.E6.A0.87.E7.AD.BE.E5.92.8C.E8.B4.A6.E5.8F.B7)|

###  批量账号推送

| 测试目标 | 批量账号推送 |
| --- | --- |
| 测试目的 | 支持给定一批账号，可以通过账号列表进行推送 |
| 测试环境 |网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备或iOS设备  |
| 前置条件 | 1、需调用账号绑定接口绑定账号 |
| 测试步骤 | 1、调用API或在管理台，对批量账号推送 |
| 预期结果 |  绑定账号的设备收到消息 |
| 备注 |  [Android 账号绑定方式](https://cloud.tencent.com/document/product/548/36659#.E7.BB.91.E5.AE.9A.E8.B4.A6.E5.8F.B7.E6.B3.A8.E5.86.8C)<br>[iOS 账号绑定方式](https://cloud.tencent.com/document/product/548/36668#.E7.BB.91.E5.AE.9A.2F.E8.A7.A3.E7.BB.91.E6.A0.87.E7.AD.BE.E5.92.8C.E8.B4.A6.E5.8F.B7) |

### 多厂商通道推送

| 测试目标 | 厂商通道推送 |
| --- | --- |
| 测试目的 | 在设备上将应用进程杀死，推送消息可以收到|
| 测试环境 | 需小米、华为、魅族、OPPO、vivo相应的机型，FCM需要设备安装Google Play服务 |
| 前置条件 | 1、需自行在厂商推送平台上注册并创建应用<br>2、在控制台[配置管理](https://console.cloud.tencent.com/tpns/app-config)打开并配置好厂商通道<br>3、根据官网厂商集成方法来集成SDK<br>4、在SDK里打开厂商通道开关 |
| 测试步骤 | 1、在厂商机型上安装集成了厂商通道的APP<br>2、注册厂商推送通道，获取厂商 Token   <br>3、通过API或在管理台，对厂商手机进行推送 |
| 预期结果 | 将 App 退到后台，并且停止所有 App 进程，进行单推/全推，能够收到推送 |
| 备注 |华为需要使用签名的包，详情请参考[华为推送通道接入](https://cloud.tencent.com/document/product/548/36653)   |


###  标签推送

支持通过管理台、API做标签推送，其中API支持多个标签与和或的操作

| 测试目标 | 标签推送 |
| --- | --- |
| 测试目的 | 针对不同的用户群体设置标签，然后根据标签名群发通知 |
| 测试环境 |  网络环境： Wi-Fi或4G<br>终端： 主流厂商的 Android 设备或 iOS 设备 |
| 前置条件 |  集成 SDK 并成功设置自定义标签 |
| 测试步骤 | 1、在创建推送时选择单个自定义标签或系统预设标签，设置「与」和「或」关系后进行推送<br>2、通过 API 选择单个或者多个自定义标签，设置「与」和「或」关系后再推送 |
| 预期结果 | 设置标签的用户群收到消息 |
| 备注 | [Andorid 设置自定义标签接口](https://cloud.tencent.com/document/product/548/36659#.E8.AE.BE.E7.BD.AE.E8.87.AA.E5.AE.9A.E4.B9.89.E6.A0.87.E7.AD.BE)<br>[iOS 设置自定义标签接口](https://cloud.tencent.com/document/product/548/36668#.E7.BB.91.E5.AE.9A.2F.E8.A7.A3.E7.BB.91.E6.A0.87.E7.AD.BE.E5.92.8C.E8.B4.A6.E5.8F.B7)  |

###  应用内消息推送

直接透传给Android终端的消息，不会主动展示在通知栏，由App在接受后进行处理


| 测试目标 | 应用内消息推送 |
| --- | --- |
| 测试目的 | 消息透传 |
| 测试环境 | 网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备或iOS设备   |
| 前置条件 |   集成 SDK，设备注册成功 |
| 测试步骤 | 通过管理台或API推送应用内消息 |
| 预期结果 | APP可接收透传消息 |

###  富媒体推送

支持将图片,音频,视频等多媒体信息推送给客户端


| 测试目标 | 富媒体推送 |
| --- | --- |
| 测试目的 | 推送图片等富媒体信息 |
| 测试环境 | 网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备或iOS设备  |
| 前置条件 | **Android**：带有富媒体的消息将只通过 TPNS 通道进行下发。Android原生系统包含大图和缩略两种形式，具体的展现效果根据机型和定制系统可能有一定的差异。<br>1. Android系统支持静态图片以及音视频作为富媒体内容<br>2. 图片的分辨率大小要求为430\*2303.仅支持https的富媒体链接<br>3.音视频富媒体需要在集成SDK后新建一个 xml 文件，详情请参考[音视频富媒体使用方法](https://cloud.tencent.com/document/product/548/36652) <br>**iOS**：系统支持图片&amp;音频&amp;视频的富媒体内容，在图片场景下，iOS系统将在用户通过Force touch交互展示大图，其他情况展示缩略图（支持普通图片&amp;gif）。<br>1. 仅支持JEPG/PNG/GIF格式的图片文件<br>2. 请将图片大小控制在10mb以内<br>3. 仅支持AIFF/WAV/MP3/MP4格式的音频文件<br>4. 请将音频大小控制在5mb以内<br>5. 仅支持MPEG/MPEG2video/MPEG4/AVI格式的音频文件<br>6.仅支持https的富媒体链接 |
| 测试步骤 | 1.通过管理台或API创建推送<br>2.打开富媒体开关，填入富媒体文件地址 |
| 预期结果 | APP可接收图片或音视频消息 |


###  离线消息保存

| 测试目标 | 离线消息保存 |
| --- | --- |
| 测试目的 | 离线消息保存功能 |
| 测试环境 |  网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备 |
| 前置条件 | 集成SDK，设备注册成功  |
| 测试步骤 | 1、将App退到后台，并且停止所有 App 进程 <br>2、推送多条消息 |
| 预期结果 | App退出状态下收不到消息，再次打开 App 收到消息，并按推送先后顺序展示 |
| 备注 | 只能通过 TPNS 通道测试,离线消息最多可以保存3条，保存时间最长为72小时  |

## 其他功能测试

### 消息提醒（自定义铃声）


| 测试目标 | 自定义铃声 |
| --- | --- |
| 测试目的 | 测试是否可以正常设置自定义铃声 |
| 测试环境 |  网络环境： Wi-Fi或4G<br>终端： 主流厂商的Android设备或iOS设备 |
| 前置条件 | 集成SDK，设备注册成功  |
| 测试步骤 | 1、在管理台创建推送，在高级设置中选择自定义铃声<br>2、推送一条消息 |
| 预期结果 | 消息提醒为自定义铃声 |
| 备注 | Android支持自定义声音、震动、呼吸灯。特别说明：(仅 TPNS 通道支持自定义，厂商通道不支持)<br>iOS支持自定义声音 |

### iOS角标设置


| 测试项目 | iOS角标设置是否可用 |
| --- | --- |
| 测试目的 | 测试iOS角标设置功能是否符合预期 |
| 测试环境 | 网络环境：Wi-Fi或4G<br>终端：iOS设备 |
| 前置条件 | 测试「角标+1」功能，需按官网开发文档来配置 |
| 测试步骤 | 1、在管理台创建推送，「角标数字」可选择：不变、设置为、自动加1<br>2、推送消息<br>3、接收消息，查看角标 |
| 预期结果 | 角标是否符合设置 |
| 备注 | [iOS 角标接口实现方法](https://cloud.tencent.com/document/product/548/36668#.E8.A7.92.E6.A0.87.E8.87.AA.E5.8A.A8.E5.8A.A01)  |

### 推送跳转


| 测试项目 |推送跳转指定页面 |
| --- | --- |
| 测试目的 | 测试点击通知栏消息跳转功能是否符合预期 |
| 测试环境 | 网络环境：Wi-Fi或4G<br>终端：主流厂商的Android设备 |
| 前置条件 |  测试客户端自定义跳转功能，需按官网开发文档来配置，请参考[配置指引](https://cloud.tencent.com/document/product/548/36674#.E5.A6.82.E4.BD.95.E8.AE.BE.E7.BD.AE.E6.B6.88.E6.81.AF.E7.82.B9.E5.87.BB.E4.BA.8B.E4.BB.B6.EF.BC.9F) |
| 测试步骤 | 1、在管理台创建推送，打开高级设置<br>2、在「点击打开」中可选择：应用、应用内页面、URL、客户端自定义<br>3、推送一条消息<br>4、点击通知栏消息，查看点击后跳转页面是否符合预期 |
| 预期结果 | 点击通知栏消息后跳转页面符合预期 |
| 备注 | 厂商推送通道只支持点击打开应用和客户端自定义（intent），TPNS 通道支持所有点击动作 <br>iOS 推送跳转可参考[客户端根据消息内容跳转方法](https://cloud.tencent.com/document/product/548/36673#.E5.AE.A2.E6.88.B7.E7.AB.AF.E5.A6.82.E4.BD.95.E6.A0.B9.E6.8D.AE.E6.B6.88.E6.81.AF.E5.86.85.E5.AE.B9.E8.BF.9B.E8.A1.8C.E8.B7.B3.E8.BD.AC.E6.88.96.E8.80.85.E5.85.B6.E4.BB.96.E5.93.8D.E5.BA.94.EF.BC.9F) |
