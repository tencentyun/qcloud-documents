

## 如何实现消息撤回和已读回执
使用现有的IMSDK的自定义消息可以实现短时间内的已读回执和消息撤回的功能。我们以撤回消息为例说明一下具体做法：


发送方：选中要撤回的消息，通过自定义消息发送撤回消息的uniqueId，同时调用remove删除这条消息
接收方：收到撤回的自定义消息，使用getMessage获取最近2分钟之内的所有消息，找到uniqueId相等的消息，设置这条消息的[自定义字段](https://cloud.tencent.com/doc/product/269/1561#.E6.B6.88.E6.81.AF.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5),将这条消息设为被撤回状态，以后客户端都可以识别有被撤回字段的消息。

限制：
1、对于单聊，一定要开启c2c漫游和最近联系人漫游，否则撤回功能不完整，切换终端单聊撤回会有问题
2、用户操作只能从新往旧遍历消息，如果有反过来遍历显示的需求，撤回功能也有问题
3、必须限制2分钟以内，或者几分钟以内，越久对性能影响越大
