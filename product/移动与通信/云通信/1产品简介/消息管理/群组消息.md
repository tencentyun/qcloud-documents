## 应用场景
### 群内收发消息
群成员在群内收发消息，类似 QQ 群、微信群的聊天方式。

### App 管理员发送消息
群聊消息可以由 App 管理员在后台发送消息，也可以模拟其他用户身份发送消息（即使 App 管理员或发送者不是群成员，消息依然会下发）。

### App 管理员模拟系统消息
通过 App 管理员在后台发送消息，可以模拟系统消息，以系统消息的形式给指定的群内在线成员，App 端收到 App 管理员的自定义消息可做特殊处理。

## 发送群聊消息

### 发送群消息和群系统通知相关接口

| 接口分类                    | 接口说明                                                     | 备注                                                         |
| --------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| IM SDK 发送群消息接口       | [Android 消息收发](/doc/product/269/9232#.E6.B6.88.E6.81.AF.E5.8F.91.E9.80.81)<br>[iOS 消息收发](/doc/product/269/9150#.E6.B6.88.E6.81.AF.E5.8F.91.E9.80.81)<br>[Windows C++ 消息收发](/doc/product/269/消息收发（Windows%20SDK）)<br>[Web 消息收发](/doc/product/269/消息收发（Web%20SDK）) | 群成员发送群消息，群内所有成员均可接收到消息。即使群成员当前不在线，上线之后仍可以拉取到历史消息 |
| REST API 发送群消息接口     | [REST API：在群组中发送普通消息](/doc/product/269/在群组中发送普通消息) | App 管理员无需加入群组，即可调用此 REST API 在群组中发送消息。同时可以还可以指定消息发送者，适用于通过 App 后台向群组发送消息的场景 |
| REST API 发送群系统通知接口 | [REST API：在群组中发送系统通知](/doc/product/269/在群组中发送系统通知) | App 管理员无需加入群组，即可调用此 REST API 在群组中发送系统通知。该系统通知，只有群内在线成员才会收到该消息，不在线成员即使上线也无法收到该通知 |

>!
>
>- 群系统通知的可靠性弱于普通群消息，若无特殊需求，请尽量发送群消息而非系统消息。更多细节参见 [群组内普通消息与系统消息的区别](https://cloud.tencent.com/document/product/269/2751)。

### 在群消息中携带发送者相关信息
群消息在下发给客户端时，除了会携带消息内容本身外，还会携带消息发送者的相关信息，默认会携带如下字段：发送者的昵称、发送者的头像、发送者在群内的群名片。其中如需携带发送者昵称和头像，则必须把这两个字段的信息导入到云通信的用户资料中。

如果您的 App 在云通信中配置了用户维度的自定义字段、[群维度的自定义字段](/doc/product/269/群组系统#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5)、[群成员维度的自定义字段](/doc/product/269/群组系统#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5)，也可以提需求工单，配置在消息中携带这些信息。

用户资料相关接口：

| 接口分类               | 接口说明                                                     | 备注                                                       |
| ---------------------- | ------------------------------------------------------------ | ---------------------------------------------------------- |
| 用户资料 IM SDK 接口   | [Android 用户资料](/doc/product/269/9231)<br>[iOS 用户资料](/doc/product/269/9153)<br>[Windows C++ 用户资料](/doc/product/269/用户资料与关系链（Windows%20SDK）)<br>[Web 用户资料](/doc/product/269/用户资料（Web%20SDK）) |                                                            |
| 用户资料 REST API 接口 | [REST API：拉取用户资料](/doc/product/269/拉取资料)<br>[REST API：设置用户资料](/doc/product/269/设置资料)<br>[REST API：单个帐号导入接口](/doc/product/269/单个帐号导入接口) | App 管理员调用，其中在导入单个帐号时，可以同时设置用户资料 |

## 接收群聊消息
| 接口分类                      | 接口说明                                                     | 备注                                                         |
| ----------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 接收在线消息 IM SDK 接口      | [Android 新消息通知](/doc/product/269/9229#.E6.96.B0.E6.B6.88.E6.81.AF.E9.80.9A.E7.9F.A5)<br>[IOS 新消息通知](/doc/product/269/9148#.E6.96.B0.E6.B6.88.E6.81.AF.E9.80.9A.E7.9F.A5)<br>[Windows 新消息通知](/doc/product/269/初始化（Windows%20%20SDK）#4.-.E6.96.B0.E6.B6.88.E6.81.AF.E9.80.9A.E7.9F.A5)<br>[Web 初始化新消息回调](/doc/product/269/初始化（Web%20SDK）) | IM SDK 接收消息都是通过统一回调接口`onNewMessage`，通过该回调接口获得消息后，能根据消息获取相应的会话 |
| 获取离线/历史消息 IM SDK 接口 | [Android 获取消息](https://cloud.tencent.com/doc/product/269/9232#.E8.8E.B7.E5.8F.96.E4.BC.9A.E8.AF.9D.E6.BC.AB.E6.B8.B8.E6.B6.88.E6.81.AF)<br>[iOS 获取消息](/doc/product/269/9150#.E8.8E.B7.E5.8F.96.E4.BC.9A.E8.AF.9D.E6.BC.AB.E6.B8.B8.E6.B6.88.E6.81.AF)<br>[Windows 获取消息](/doc/product/269/消息收发（Windows%20SDK）#2.-.E6.8E.A5.E6.94.B6.E6.B6.88.E6.81.AF) | 终端通过`getMessage`接口查询历史聊天记录。该接口既会查询 IM SDK 本地缓存的消息，同时也会向云通信后台请求漫游的历史消息。（注1、注2） |
>!
>1. IM SDK 接收到消息后，默认会对消息进行缓存和存储。如果不需要，可以调用`disableStorage`接口禁用存储功能，以提升性能。
>
>2. 对于私有群、公开群和聊天室的群消息，云通信后台默认会保存 7 天。如果 APP 需要延长保存时间，可以按需提 [工单](/doc/product/269/云通信配置变更需求工单#.E4.BF.AE.E6.94.B9.E6.AF.8F.E6.97.A5.E5.88.9B.E5.BB.BA.E7.BE.A4.E7.BB.84.E9.85.8D.E9.A2.9D) 配置，详情请参考[价格说明](https://cloud.tencent.com/document/product/269/11673)。

### 获取群消息中携带的发送者信息
默认在群消息中带有发送方的资料以及群成员资料，在 1.9.0 以后版本可以通过以下 IM SDK 接口获取相关资料。
具体请参阅：

- [Android 获取发送者信息](/doc/product/269/9232#.E6.B6.88.E6.81.AF.E5.8F.91.E9.80.81.E8.80.85.E5.8F.8A.E5.85.B6.E7.9B.B8.E5.85.B3.E8.B5.84.E6.96.99)
- [iOS 获取发送者信息](/doc/product/269/9150#.E6.B6.88.E6.81.AF.E5.8F.91.E9.80.81.E8.80.85.E4.BB.A5.E5.8F.8A.E7.9B.B8.E5.85.B3.E8.B5.84.E6.96.99)
- [Windows 获取发送者信息](/doc/product/269/1587#.E6.B6.88.E6.81.AF.E5.8F.91.E9.80.81.E8.80.85.E4.BB.A5.E5.8F.8A.E7.9B.B8.E5.85.B3.E8.B5.84.E6.96.99)

### 群消息接收选项

群消息支持三种消息接收选项，详细描述如下：

| 群消息接收选项                | 详细描述                                                     |
| ----------------------------- | ------------------------------------------------------------ |
| 接收并提示（AcceptAndNotify） | 默认配置                                                     |
| 接收不提示（AcceptNotNotify） | 设置该选项后，iOS 终端会去掉 APNs 推送功能。但如果已登录到 App 中，该选项的行为跟“接收并提示”是一致的，需要客户端根据用户的设置进行判断并过滤群消息 |
| 屏蔽消息（Discard）           | 云通信后台屏蔽群消息，不下发到客户端                         |

这些消息接收选项，都是群成员维度的设置。同一用户可以在不同的群组中分别设置不同的消息接收选项，同时该设置只会对当前用户有效，不影响其他用户。

相关操作接口如下：

| 接口分类          | 接口说明                                                     | 备注                                                 |
| ----------------- | ------------------------------------------------------------ | ---------------------------------------------------- |
| IM SDK 查询接口   | [iOS 获取群消息接收选项](/doc/product/269/1569#.E7.BE.A4.E7.BB.84.E6.B6.88.E6.81.AF.E4.BC.9A.E8.AF.9D.E7.9A.84.E6.8E.A5.E6.94.B6.E6.B6.88.E6.81.AF.E9.80.89.E9.A1.B9)<br>[Android 获取群消息接收选项](/doc/product/269/1561#.E7.BE.A4.E7.BB.84.E6.B6.88.E6.81.AF.E4.BC.9A.E8.AF.9D.E7.9A.84.E6.8E.A5.E6.94.B6.E6.B6.88.E6.81.AF.E9.80.89.E9.A1.B9)<br/> |                                                      |
| IM SDK 修改接口   | [Android 修改群消息接收选项](/doc/product/269/9232#.E7.BE.A4.E7.BB.84.E6.B6.88.E6.81.AF.E4.BC.9A.E8.AF.9D.E7.9A.84.E6.8E.A5.E6.94.B6.E6.B6.88.E6.81.AF.E9.80.89.E9.A1.B9)<br>[iOS 修改群消息接收选项](/doc/product/269/9150#.E7.BE.A4.E7.BB.84.E6.B6.88.E6.81.AF.E4.BC.9A.E8.AF.9D.E7.9A.84.E6.8E.A5.E6.94.B6.E6.B6.88.E6.81.AF.E9.80.89.E9.A1.B9)<br>[Windows C++ 修改群消息接收选项](/doc/product/269/1592#.E4.BF.AE.E6.94.B9.E7.BE.A4.E5.91.98.E4.BF.A1.E6.81.AF)<br> |                                                      |
| REST API 查询接口 | [REST API：获取群成员详细资料](/doc/product/269/获取群组成员详细资料) | App 管理员调用，可获取任意群内某个成员的消息接收选项 |
| REST API 修改接口 | [REST API：修改群成员资料](/doc/product/269/修改群成员资料)  | App 管理员调用，可修改任意群内某个成员的消息接收选项 |

## 群消息发送控制

可以通过以下方式控制群消息的发送：

| 控制方式         | 详细描述                                                     |
| ---------------- | ------------------------------------------------------------ |
| 群组内禁言       | 禁止某一用户一段时间内在群内发言，只针对单个群组有效。如果用户退群再重新入群，只要禁言时间没有过期，禁言依旧有效 |
| 脏字过滤         | 云通信后台在用户发送的消息中检测到是否包含脏词，如包含则拒绝下发该消息，并向发送者返回错误码 80001；<br>云通信已经默认配置了政治类、色情类的脏词，能够满足这两方面的大多数过滤需求。同时也支持 App 配置自定义的脏词 |
| 群消息发送前回调 | 在把群消息下发给群成员之前，云通信后台先去 App 后台询问是否允许下发消息，如果不允许，则拒绝下发消息；<br>App 后台在收到回调后，也可对消息内容进行修改并返回给云通信，云通信将使用修改之后的信息进行下发，详情请参考[群内发言之前回调](/doc/product/269/群内发言之前回调)；<br>但是云通信在发起该回调后，最多只会等待 2 秒。如 2 秒内未收到应答，直接将消息下发给群成员，不会进行重试 |

各种控制方式相关的操作接口如下：

| 接口分类               | 接口说明                                                     | 备注                                                         |
| ---------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| IM SDK 禁言接口        | [Android 对群成员进行禁言](/doc/product/269/9236#.E5.AF.B9.E7.BE.A4.E6.88.90.E5.91.98.E8.BF.9B.E8.A1.8C.E7.A6.81.E8.A8.80)<br>[iOS 对群成员进行禁言](/doc/product/269/9152#.E5.AF.B9.E7.BE.A4.E6.88.90.E5.91.98.E8.BF.9B.E8.A1.8C.E7.A6.81.E8.A8.80)<br>[Windows C++ 对群成员进行禁言](/doc/product/269/群组管理（Windows%20SDK）#.E4.BF.AE.E6.94.B9.E7.BE.A4.E5.91.98.E4.BF.A1.E6.81.AF)<br>[Web 对群成员进行禁言](/doc/product/269/1602#.E8.AE.BE.E7.BD.AE.E7.BE.A4.E6.88.90.E5.91.98.E7.A6.81.E8.A8.80.E6.97.B6.E9.97.B4) | 群主、管理员可以调用对群成员设置禁言                         |
| REST API 禁言接口      | [REST API：批量禁言和取消禁言](/doc/product/269/批量禁言和取消禁言)<br>[REST API：获取群组被禁言用户列表](/doc/product/269/获取群组被禁言用户列表) | App 管理员可调用，可对任意群组内的成员进行禁言               |
| 脏字相关 REST API 接口 | [REST API：查询 APP 自定义脏字](/doc/product/269/查询APP自定义脏字)<br>[REST API：添加 APP 自定义脏字](/doc/product/269/添加APP自定义脏字)<br>[REST API：删除 APP 自定义脏字](/doc/product/269/删除APP自定义脏字) | 云通信默认开启脏词过滤功能， 并且已经内置了政治类、色情类的脏词。App 管理员可根据业务需要，确定是否需要添加部分自定义脏词 |
| 第三方回调             | [群内发言之前回调](/doc/product/269/群内发言之前回调)        | 该回调需要在控制台开通。第三方回调的工作原理请参考：<br>[第三方回调简介](/doc/product/269/第三方回调简介)<br>[第三方回调接入指引](/doc/product/269/第三方回调接入指引) |

>!
>
>云通信后台只会对消息中的文本内容进行过滤（TIMTextElem，参见 [消息格式描述](/doc/product/269/消息格式描述)）。如果 App 使用自定义消息格式（TIMCustomElem，参见 [消息格式描述](/doc/product/269/消息格式描述)），云通信后台无法进行过滤。因此，App 最好在设计之初就确保将需要进行脏字过滤的文本放到 TIMCustomElem 中。

## 消息优先级与频率控制
### 群消息优先级

群消息分为 4 个优先级，如果某个群的消息超过了频率限制，后台会优先下发高优先级的消息。因此用户应根据消息的重要程度，来选择合适的优先级。

4 个优先级从高到低，分别如下：

| 优先级 | 建议选择该优先级的消息类型 |
| ------ | -------------------------- |
| High   | 红包消息和礼物消息         |
| Normal | 普通文本消息               |
| Low    | 点赞消息                   |
| Lowest | 最不重要的消息             |

优先级设置方法，请参考：

- [Android SDK 设置群消息优先级](/doc/product/269/9232#.E7.BE.A4.E7.BB.84.E6.B6.88.E6.81.AF.E4.BC.9A.E8.AF.9D.E7.9A.84.E6.8E.A5.E6.94.B6.E6.B6.88.E6.81.AF.E9.80.89.E9.A1.B9)
- [iOS SDK 设置群消息优先级](/doc/product/269/9150#.E6.B6.88.E6.81.AF.E4.BC.98.E5.85.88.E7.BA.A7)
- [通过 REST API 发送群内普通消息设置优先级](/doc/product/269/1629#.E8.AF.B7.E6.B1.82.E5.8C.85.E7.A4.BA.E4.BE.8B)

### 群消息频控
#### 总消息数频控
总消息数频控是指单个群每秒最多能发送的消息数限制，默认值为 40 条/秒。频控对象包括客户端发送的群消息和 [通过 REST API 发送的普通消息](/doc/product/269/1629)，但不包括[通过 REST API 发送的系统通知](/doc/product/269/1630)。
当在一个频控周期内单个群的发消息请求超过了频控限制时，后台优先下发优先级相对较高的消息，同等优先级的消息随机排序。
被频控策略所限制的消息不会下发；不产生 [群消息 seq](/doc/product/269/群组消息综述#.E7.BE.A4.E6.B6.88.E6.81.AF.E7.9A.84seq.E6.9C.BA.E5.88.B6)；不会进入[历史消息](/doc/product/269/群组消息综述#.E7.A6.BB.E7.BA.BF.E6.B6.88.E6.81.AF.E4.B8.8E.E5.8E.86.E5.8F.B2.E6.B6.88.E6.81.AF)；会触发[群内发言之前回调](/doc/product/269/1619)；不会触发[群内发言之后回调](/doc/product/269/2661)；发送方会得到发送成功的返回包。

#### 优先级频控
优先级频控是指单个群每秒最多能发送多少条某优先级的消息，发消息请求只有在通过总消息数频控之后，才会进入优先级频控。
App 管理员/群主/群管理员发送的消息不受优先级频控限制；High 优先级的消息不受优先级频控限制，其余 3 个优先级可以独立配置，默认都为 40 条/秒。
一个 SdkAppid 下的每个[群组形态](/doc/product/269/群组系统#.E7.BE.A4.E7.BB.84.E5.BD.A2.E6.80.81.E4.BB.8B.E7.BB.8D)都有自己的总消息数频控和优先级频控配置。如果需要修改默认值，请根据[工单模板](/doc/product/269/云通信配置变更需求工单#.E7.BE.A4.E7.BB.84.E4.B8.8D.E5.90.8C.E4.BC.98.E5.85.88.E7.BA.A7.E7.9A.84.E6.B6.88.E6.81.AF.E7.9A.84.E9.A2.91.E7.8E.87.E6.8E.A7.E5.88.B6)提交工单进行申请。

## 成员变更通知
成员变更通知是指：当群组中有成员加入（包括申请加入和被邀请加入）或者退出（包括被踢出群和主动退群）时，云通信后台会给群组中的所有成员广播一条消息来通知这一事件。

| 通知分类     | 详细说明                                                     | 备注                                                         |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 加群通知     | [Android 用户加群通知](/doc/product/269/9236#.E7.94.A8.E6.88.B7.E5.8A.A0.E5.85.A5.E7.BE.A4.E7.BB.84.E9.80.9A.E7.9F.A5)<br>[iOS 用户加群通知](/doc/product/269/9152#.E7.94.A8.E6.88.B7.E5.8A.A0.E5.85.A5.E7.BE.A4.E7.BB.84)<br>[Windows C++ 用户加群通知](/doc/product/269/1592#.E7.94.A8.E6.88.B7.E5.8A.A0.E5.85.A5.E7.BE.A4.E7.BB.84)<br>[Web 用户加群通知](/doc/product/269/群提示消息（Web%20SDK）#.E7.94.A8.E6.88.B7.E4.B8.BB.E5.8A.A8.E9.80.80.E5.87.BA.E7.BE.A4.E7.BB.84) | 用户主动申请加群和被邀请加群，并成功入群后，群内成员会收到此事件通知 |
| 退群通知     | [Android 用户退群通知](/doc/product/269/9236#.E7.94.A8.E6.88.B7.E9.80.80.E5.87.BA.E7.BE.A4.E7.BB.84)<br>[iOS 用户退群通知](/doc/product/269/9152#.E7.94.A8.E6.88.B7.E9.80.80.E5.87.BA.E7.BE.A4.E7.BB.84)<br>[Windows C++ 用户退群通知](/doc/product/269/群组管理（Windows%20SDK）#.E7.94.A8.E6.88.B7.E9.80.80.E5.87.BA.E7.BE.A4.E7.BB.84)<br>[Web 用户退群通知](https://cloud.tencent.com/doc/product/269/1603#.E7.94.A8.E6.88.B7.E8.A2.AB.E9.82.80.E8.AF.B7.E5.8A.A0.E5.85.A5.E7.BE.A4.E7.BB.84) | 有成员主动退群后，群内其他成员会收到此事件通知               |
| 被踢出群通知 | [Android 用户被踢出群组通知](/doc/product/269/群组管理（Android%20SDK）#.E7.94.A8.E6.88.B7.E8.A2.AB.E8.B8.A2.E5.87.BA.E7.BE.A4.E7.BB.84)<br>[iOS 用户被踢出群组通知](/doc/product/269/9236#.E7.94.A8.E6.88.B7.E8.A2.AB.E8.B8.A2.E5.87.BA.E7.BE.A4.E7.BB.84)<br>[Windows C++ 用户被踢出群组通知](/doc/product/269/群组管理（Windows%20SDK）#.E7.94.A8.E6.88.B7.E8.A2.AB.E8.B8.A2.E5.87.BA.E7.BE.A4.E7.BB.84)<br>[Web 用户被踢出群组通知](/doc/product/269/群提示消息（Web%20SDK）#.E7.94.A8.E6.88.B7.E8.A2.AB.E8.B8.A2.E5.87.BA.E7.BE.A4.E7.BB.84) | 有成员被踢出群后，群内其他成员收到此事件通知                 |

不论是哪一种群组形态，IM SDK 中接收成员变更通知的接口都是相同的。但是，不同群组形态的成员变更通知却有着不同的表现形式。

云通信目前支持三种成员变更通知形式：

| 通知形式 | 详细说明                                                     | 备注                                     |
| -------- | ------------------------------------------------------------ | ---------------------------------------- |
| 无提醒   | 不下发成员变更通知                                           | 聊天室默认使用该配置                     |
| 弱提醒   | 以系统消息的形式广播成员变更通知。此类通知只会触达群组中的在线成员，它们不保存在漫游消息中，不计入未读消息计数，因此不在线成员重新上线之后也看不到该消息 | 在线成员广播大群和音视频聊天室使用该配置 |
| 强提醒   | 以普通消息的形式广播成员变更通知。此类通知计入未读计数，并会保存在后台漫游消息中，不在线成员重新上线之后也可以看到该消息 | 私有群、公开群默认使用该配置             |

## 群消息的APNs 推送
当用户在群内的消息接收选项为“接收并提示”时，如果群内有新消息，iOS 客户端会收到 APNs 推送。基本的展示形式是：
> 发送者昵称/群名片(群名称)：消息内容

其中群名片的展示优先级大于昵称。下面给出几个具体示例：
>示例 1：群名称为“xxx业主群”，发送者昵称为“张三”，未设置群名片：张三(xxx业主群)：消息内容
>示例 2：群名称为“xxx业主群”，发送者昵称为“张三”，设置群名片为“2栋308业主”：2栋308业主(xxx业主群)：消息内容
>示例 3：群名称为“xxx业主群”，发送者ID为ID_yyy，发送者未设置昵称，也未设置群名片：ID_yyy(xxx业主群)：消息内容

有关离线推送的详细介绍，请参考 [离线推送（IOS SDK）](/document/product/269/1577).

## APP 后台获取群消息记录
APP 后台可以通过如下三种方式获取群组消息：

| 方法                                                        | 描述                                                         | 使用场景                                                 |
| ----------------------------------------------------------- | ------------------------------------------------------------ | -------------------------------------------------------- |
| [REST API：消息记录下载](/doc/product/269/消息记录下载)     | 云通信会将 App 在一段时间内产生的所有消息打包成文件，App 后台可以通过 REST API 来获取该文件 | 适用于 App 定期备份消息记录的场景                        |
| [群内发言之后回调](/doc/product/269/群内发言之后回调)       | 云通信后台会在群消息下发之后，将该消息同步给 App 后台        | 适用于App 需要实时获取群消息的场景，需要在控制台配置开通 |
| [REST API：拉取群漫游消息](/doc/product/269/拉取群漫游消息) | 可以通过该 REST API 来获取指定群组的历史消息                 | 适用于 App 需要快速获取指定群组历史消息的场景            |

## 消息删除
所谓消息删除，是指一旦 App 后台发现有人在群内发布了恶意信息（并且部分成员已经看到），但为了降低影响，可以将该消息从历史消息中删除，从而确保尚未看到该消息的用户无法看到该消息。
参见：

- [REST API：删除指定用户发送的消息](/doc/product/269/删除指定用户发送的消息)

## 群消息的 SEQ 机制
云通信会为每个群维护一个消息 SEQ。SEQ 的初始值为 1。群内每产生一条普通消息，云通信后台会将当前 SEQ 的值作为该消息的 SEQ，并且将该 SEQ 自增 1。
群组 ID + SEQ，相当于是一条消息的唯一标识。

特别注意的是：云通信只会为普通消息产生 SEQ，不会为系统消息产生 SEQ；

## 群组离线消息处理流程
![](//mc.qcloudimg.com/static/img/11326d65298d19dedd4e3f7d562ba6f0/image.png)

**群组离线消息处理流程：**
1. 用户 A 调用`sendMessage`给群组 C 发送消息，用户 B 处于下线状态；
	1.1 把群组 C 添加进用户 B 的最近联系人，缓存大小为 100 条；
	1.2 用户更新群组的消息信息，包括群组最新消息 seq；
	1.3 把消息存入漫游服务器中，时间限制 7 天。
2. 用户B调用`login`接口登录云通信；
3. SDK 自动拉取所有群组的消息 seq 信息，包括最新消息 seq 和未读计数；
4. SDK 自动拉取最近联系人，通过`OnNewMessage`接口抛出；
5. 同步消息过程完成，通过`OnRefresh`接口通知用户已完成群组数据同步；
6. 用户调用`getMessage`，SDK 自动拉漫游服务器。
