## 用户权限概述
用户泛指可以访问系统应用内资源的人员，在 C 端场景下是终端用户，在B端场景下主要就是企业内部员工、外部客户。一般会根据用户的角色权限，管控不同用户可以访问的应用、查看的页面、参与的审批流程以及可以操作数据的范围，这是系统安全中非常重要的一部分。例如，IT 管理员可以访问所有应用、查看所有页面和数据，普通员工则只能查看自己的数据。HR 部门只有特定人员可以查看员工的工资字段，而其他人员只能查看员工的基本信息等等都依赖于这一套用户权限体系。	 

## 用户管理[](id:manage)
用户泛指可以访问应用内资源的人员，包括内部用户、外部用户、匿名访客等等。

### 内部用户管理

#### 新建用户
1. 腾讯云控制台进入微搭低代码 **用户权限** > [**用户管理**](https://console.cloud.tencent.com/lowcode/permission/user) 页面，单击**新建用户**。 
![](https://main.qcloudimg.com/raw/9404d88bb9845039850a8139f58acfd9.png)
2. 设置用户信息，此处仅对部分配置项进行必要说明。 
<ul><li>用户名：企业工作台进行账号登录时，使用的用户名，定义时需要注意下用途。</li>
<li>手机号：手机号主要识别用户唯一性的，例如微信授权登录后绑定手机号，可以识别出一个用户信息。其次手机号用于接收用户的初始密码。</li>
<li>密码：结合用户名使用，进行账号登录时的密码，密码信息微搭可以进行初始密码的设定，密码设置完成以后会以短信的形式发送给用户，密码设置以后为了安全起见，无法查看密码。</li>
<li>选择角色：一个用户可以关联多个角色权限，并具备关联角色的权限集。</li></ul>
<img src = "https://main.qcloudimg.com/raw/5df0e1b706b2b9ea66650bc72cbe6178.png" style="width: 80%">


#### 编辑用户
1. 腾讯云控制台进入微搭低代码**用户权限** > **用户管理**页面，单击**更多操作**，然后单击**编辑**。 
![](https://main.qcloudimg.com/raw/3d4b5c70152e1765f88eed837f97854f.png)
2. 修改用户信息，此处仅支持修改部分信息。 
<img src = "https://main.qcloudimg.com/raw/9feeb93834acea8eb2e90cf19a83faf5.png" style="width: 80%">

#### 删除用户
腾讯云控制台进入微搭低代码**用户权限** > **用户管理**页面，单击**更多操作**，然后单击**删除**，删除用户以后，用户不能再进行登录鉴权，该用户关联的历史业务数据不会受影响。
<img src = "https://main.qcloudimg.com/raw/7d4126b9e27760bb9527f9abaa29eee4.png" style="width: 80%">

#### 重新授权
1. 当用户已经关联了很多角色以后，无需再一个一个取消勾选，如果需要重新授权，可以单击**重新授权**，对用户的角色权限重新选择。
![](https://main.qcloudimg.com/raw/358e737319839a6dede19b42e81e703a.png)
2. 进入**关联角色**弹框，重新选中对应的角色。
<img src = "https://main.qcloudimg.com/raw/80f1619904298272dcd561d12a55a3ce.png" style="width: 80%">

#### 批量授权
如果有多个用户的角色权限是一样的，可以批量对用户进行角色关联，无需再一个一个进行授权，可以提高效率。
![](https://main.qcloudimg.com/raw/4516961a352ee0eab1fdf8a927cdd488.png)

#### 批量删除
如果有多个用户的信息都需要进行清理，可以批量对用户进行删除，无需再一个一个操作，可以提高效率。删除用户以后，用户不能再进行登录鉴权，该用户关联的历史业务数据不会受影响。
![](https://main.qcloudimg.com/raw/fef5f56e9f20c16d91c89de69d10e52e.png)

 	 
### 匿名访客管理
目前只有独立发布的自定义应用支持匿名访问。企业工作台不支持匿名访问，所有模型应用发布以后，都必须用户名密码登录企业工作台以后才可以进行访问。

在匿名状态下可正常的访问应用的资源，开发者或者企业管理员同时可以配合 [角色权限](#jurisdiction) 针对匿名用户制定对应的访问限制。无需注册，匿名访客本质上是一个有效的匿名用户，在同设备有效期内，用户可以产生独立的私有数据。

对匿名访客的有效期限策略是：每个设备同时只存在一个匿名访客，永不过期，只有用户手动清除了设备或浏览器的本地数据或者企业管理员手动删除，才会清除匿名访客信息。

#### 匿名访问开关
腾讯云控制台进入微搭低代码**用户权限** > [**匿名访客管理**](https://console.cloud.tencent.com/lowcode/permission/anonymity) 页面，单击右上角开启**匿名访问开关**。
![](https://main.qcloudimg.com/raw/a1e846e152dbbefde74d4591974e33dd.png)
匿名访问的开关默认是关闭的，开启以后可支持对应的应用进行匿名访问。当前环境下如果存在需要匿名访问的应用，可以在角色权限里定义哪些应用、页面、数据可以匿名访问，这些都可以在对应的 [角色权限](#jurisdiction) 中定义。
![](https://main.qcloudimg.com/raw/170fbdb2c21eb8a47ef3abde32a50e3e.png)

#### 删除匿名访客
如果用户手动清除了设备或浏览器的本地数据，那么匿名用户的数据便会被同步清除，再次访问应用时会产生一个新的匿名用户。
每个环境的匿名访客数量不超过 1000 万个，如果达到上限可以在微搭侧进行批量删除，也可以进一步在 [CloudBase 控制台](https://cloud.tencent.com/login?s_url=https%3A%2F%2Fconsole.cloud.tencent.com%2Ftcb%2Fuser) 的**用户管理**页面查看匿名用户的活跃情况，针对长期不登录的匿名用户可单击**删除**以释放空间。
![](https://main.qcloudimg.com/raw/d699f7034187f5b99e211808063cda40.png)

### 用户登录鉴权方式

#### 用户名密码登录
目前独立发布的自定义应用和企业工作台均支持用户名密码登录，所有 [模型应用](https://cloud.tencent.com/document/product/1301/59391) 发布以后，都必须用户名密码登录企业工作台以后才可以进行访问。

#### 企业微信登录
支持和企业微信进行打通，进行企业微信扫码登录。

#### 微信授权登录
目前仅小程序支持微信授权快速登录。

## 角色权限[](id:jurisdiction)

### 预制角色
预制了一个**普通用户**的角色，默认可以访问所有应用、查看应用下的所有页面、访问所有流程、查看自己创建和修改的数据，并且可登入企业工作台，但是不能操作企业工作台的相关设置项。
![](https://main.qcloudimg.com/raw/f47ebf61b0b5e5e0b2d9d23e136a98ac.png)

### 新建角色
腾讯云控制台进入微搭低代码**用户权限** > [**角色权限**](https://console.cloud.tencent.com/lowcode/permission/role) 页面，单击**新建角色**。
- 角色名称：用于用户授权时显示，不能重复。
- 角色标识：当前环境下唯一，不能重复。
- 角色描述：为非必填项，用于描述角色的一些信息。
<img src = "https://main.qcloudimg.com/raw/1fc0c005b8bc2e54044ae7b61e0c6e0d.png" style="width: 80%">

### 编辑角色
- 角色名称：可以修改，用于用户授权时显示，不能重复。
- 角色标识：一旦定义以后不能修改。
- 角色描述：可以修改，为非必填项，用于描述角色的一些信息。
<img src = "https://main.qcloudimg.com/raw/233b4bd47303a3e8d9cd38265c311874.png" style="width: 80%">

### 删除角色
当角色不需要使用了，可以直接单击**删除**，如果角色已经被用户关联了，则不能进行删除，需要解除关联以后再进行删除。
![](https://main.qcloudimg.com/raw/fdb20a6e9b0451d802f0cbac52113d7c.png)

### 查看并定义角色
鼠标停留在**角色名称**处会提示**单击配置角色权限**，单击之后进入角色定义。
![](https://main.qcloudimg.com/raw/82f7fefc11368d93b2e20f5e1b6c565f.png)

#### 应用访问权限
对于目前独立发布的自定义应用，只有用户关联的角色勾选了应用访问权限，登录的时候才可以进入到应用的首页，没有勾选的话，即便登录鉴权成功，也无法登入。
对于企业工作台，发布以后的模型应用，登入用户只有具备应用的访问权限，单击应用才可以进入到应用的首页。
![](https://main.qcloudimg.com/raw/6b9798bc39d104076c697cf7a2e0e54e.png)

#### 页面访问权限
当对应的角色具备对应的应用访问权限以后，才需要定义页面访问权限。如果对应的角色没有勾选应用的访问权限，则不能设置页面的访问权限。
![](https://main.qcloudimg.com/raw/a2097dbc056b5bc7a647038c5c16365a.png)

用户关联的角色没有勾选可以访问的页面，运行态访问未勾选的页面时，展示空白页面，并气泡提示：“当前页面没有访问权限！”。
<img src = "https://main.qcloudimg.com/raw/d5d442c4e39e58529417337fb02a55d5.png" style="width: 80%">

#### 数据源访问权限
数据源目前仅支持定义业务数据的行权限，支持定义查看本人、修改本人，查看全部、修改全部的数据访问范围。其中修改本人和修改全部勾选之后，默认选中对应的查看权限。
![](https://main.qcloudimg.com/raw/0eb001a3b311de007c2d551d44cd82ea.png)
>?当一个角色具备了查看全部和修改全部的权限以后，则默认就具备查看本人和修改本人的数据权限，无需重复定义，即便定义查看和修改本人的数据权限，也会按照公有读写的权限处理。


#### 流程访问权限
用户对应的角色勾选流程访问权限以后，用户才能发起或处理流程，未勾选的流程不能发起或处理。
![](https://main.qcloudimg.com/raw/22ab750c6b1481f55c9abe3842aeed4a.png)

#### 企业工作台访问权限
进入企业工作台需要验证账号密码、以及判断用户关联的角色“是否可登入企业工作台”的权限（避免 C 端自定义应用的用户验证密码成功后，误入工作台）。
工作台的系统配置入口，通过开关的策略控制，对应用户关联的角色勾选以后，才可以进入系统配置页面。
![](https://main.qcloudimg.com/raw/2c0216640f3c4b0aad2ffba469131393.png)

### 发布角色
腾讯云控制台进入微搭低代码 **用户权限** > [**角色权限**](https://console.cloud.tencent.com/lowcode/permission/role) 页面，单击**发布角色**。
![](https://main.qcloudimg.com/raw/8197a5bf7e92b40bee45d3ede52c35f8.png)
>?当角色的定义有变更，默认体验环境直接生效。但是发布的线上环境默认不生效，只有单击发布角色，提示“操作成功”以后，发布的线上环境才生效。

