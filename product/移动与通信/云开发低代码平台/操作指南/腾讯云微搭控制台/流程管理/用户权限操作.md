## 用户权限概述
用户泛指可以访问系统应用内资源的人员，在 C 端场景下是终端用户，在 B 端场景下主要就是企业内部员工、外部客户。一般会根据用户的角色权限，管控不同用户可以访问的应用、查看的页面、参与的审批流程以及可以操作数据的范围，这是系统安全中非常重要的一部分。例如，IT 管理员可以访问所有应用、查看所有页面和数据，普通员工则只能查看自己的数据。HR 部门只有特定人员可以查看员工的工资字段，而其他人员只能查看员工的基本信息等等都依赖于这一套用户权限体系。	 

## 用户管理[](id:manage)
用户泛指可以访问应用内资源的人员，包括内部用户、外部用户、匿名访客等等。

### 内部用户管理

#### 新建用户
1. 腾讯云控制台进入微搭低代码 **用户权限** > [**用户管理**](https://console.cloud.tencent.com/lowcode/permission/user) 页面，单击**新建用户**。 
![](https://main.qcloudimg.com/raw/a1091e0bde6c3744b75b37cf53a10ba1.png)
2. 设置用户信息，此处仅对部分配置项进行必要说明。 
<ul><li>用户名：企业工作台进行账号登录时，使用的用户名，定义时需要注意下用途。</li>
<li>手机号：手机号主要用于识别用户的唯一性，例如微信授权登录后绑定手机号，可以识别出一个用户信息。其次手机号用于接收用户的初始密码。</li>
<li>密码：结合用户名使用，进行账号登录时的密码，密码信息微搭可以进行初始密码的设定，密码设置完成以后会以短信的形式发送给用户，密码设置以后为了安全起见，无法查看密码。</li>
<li>关联角色：一个用户可以关联多个角色权限，并具备关联角色的权限集。</li></ul>
<img src = "https://main.qcloudimg.com/raw/3620336130e0cb45cf847d2af6cd9465.png" style="width: 80%">


#### 导入用户
目前支持导入企业微信用户到微搭侧，可以通过企微管理员授权微搭的方式将可见范围的用户一键同步过来。

1. 进入**用户管理**页面，单击**导入用户** > **企微管理员授权**。
![](https://main.qcloudimg.com/raw/1e2a78313fe52555ac86cb958dc7b6ad.png)
跳转到登录页面后，可通过企业微信扫描二维码进行授权登录。
![](https://main.qcloudimg.com/raw/6f0066762670d2bb6cab5ad6d907d3e6.png)
2. 选择**腾讯云微搭低代码**员工可见范围，单击**同意以上授权并添加**后，会自动把企微用户同步到微搭侧。
![](https://main.qcloudimg.com/raw/18b567d88ffa5fc94665a9c6970be36c.png)
<dx-alert infotype="explain" title="">
企微管理员扫码授权完成安装以后，选择腾讯云微搭低代码的员工可见范围，默认会把可见范围内的员工同步到微搭侧。
</dx-alert>
3. 授权完成，企微用户同步到微搭侧并且安装到企业微信工作台。
![](https://main.qcloudimg.com/raw/38cf9d22d7527ea0051aa54b029b3e9f.png)
同时企微工作台会自动安装好**腾讯云微搭低代码**。
<img src = "https://main.qcloudimg.com/raw/2c63b63dc60fa08671de8a7b14c09058.png" style="width: 60%"><br>
4. 微搭侧定时同步新增或删除可见范围的企微用户，可以直接进入**企微管理员后台**进行查看。
<dx-alert infotype="explain" title="">
企微管理员变更“腾讯云微搭低代码”可见范围后，相关企微用户都会自动同步到微搭侧，再次单击**导入用户** > **企微管理员授权**会进行如下提示。
![](https://main.qcloudimg.com/raw/f38b2d41a1dcf1a075ed30b05b3cc346.png)
</dx-alert> 
5. 支持企微登录，并且企业微信工作台可以直接使用微搭。
	- 微搭的企业工作台可以直接使用企业微信扫码登录。
	<img src = "https://main.qcloudimg.com/raw/6f09e97da1e650229223a4afc3517c3e.png" style="width: 60%"><br>
	- 企业微信里单击**腾讯云微搭低代码**可以直接访问已发布的**模型应用**。
![](https://main.qcloudimg.com/raw/7d72ef60e3ce10c01e4a8e1b6a4b35cb.png)


#### 编辑用户
1. 腾讯云控制台进入微搭低代码**用户权限** > **用户管理**页面，单击**更多操作**，然后单击**编辑**。 
![](https://main.qcloudimg.com/raw/a95a4066e13dac3155788657501e6e20.png)
2. 修改用户信息，此处仅支持修改部分信息。 
<img src = "https://main.qcloudimg.com/raw/e42cc7dfd597e054d3021f26ed416228.png" style="width: 80%">


#### 删除用户
腾讯云控制台进入微搭低代码**用户权限** > **用户管理**页面，单击**更多操作**，然后单击**删除**，删除用户以后，用户不能再进行登录鉴权，该用户关联的历史业务数据不会受影响。
<img src = "https://main.qcloudimg.com/raw/7d4126b9e27760bb9527f9abaa29eee4.png" style="width: 80%">

#### 关联角色
1. 当用户已经关联了很多角色以后，无需再一个一个取消勾选，如果需要重新授权，可以单击**关联角色**，对用户的角色权限重新选择。
![](https://main.qcloudimg.com/raw/72579d7b9bd2bb0fc65750e525f1747c.png)
2. 关联角色页面，重新选中对应的角色。
![](https://main.qcloudimg.com/raw/18141c1fdd94f8fa5e271cc39b6c2e76.png)


#### 批量关联角色

如果有多个用户的角色权限是一样的，可以批量对用户进行角色关联，无需逐个进行授权，可以提高效率。
![](https://main.qcloudimg.com/raw/1c392d0529e5c4daa5b41dbdbb2ec98d.png)

#### 批量删除用户

如果有多个用户的信息都需要进行清理，可以批量对用户进行删除，无需逐个操作，可以提高效率。
![](https://main.qcloudimg.com/raw/46328a1ce5c9d99eb3c17a2056a8ca0c.png)
<dx-alert infotype="explain" title="">
删除用户以后，用户不能再进行登录鉴权，该用户关联的历史业务数据不会受影响。
</dx-alert>


 	 
### 匿名访客管理
目前只有独立发布的自定义应用支持匿名访问。企业工作台不支持匿名访问，所有模型应用发布以后，都必须用户名密码登录企业工作台以后才可以进行访问。

在匿名状态下可正常的访问应用的资源，开发者或者企业管理员同时可以配合 [角色权限](#jurisdiction) 针对匿名用户制定对应的访问限制。无需注册，匿名访客本质上是一个有效的匿名用户，在同设备有效期内，用户可以产生独立的私有数据。

对匿名访客的有效期限策略是：每个设备同时只存在一个匿名访客，永不过期，只有用户手动清除了设备或浏览器的本地数据或者企业管理员手动删除，才会清除匿名访客信息。

#### 匿名访问开关
腾讯云控制台进入微搭低代码**用户权限** > [**匿名访客管理**](https://console.cloud.tencent.com/lowcode/permission/anonymity) 页面，单击右上角开启**匿名访问开关**。


匿名访问的开关默认是开启的，默认支持对应的 C 端普通应用进行匿名访问。当前环境下如果存在需要匿名访问的应用，可以在角色权限里定义哪些应用、页面、数据可以匿名访问，这些都可以在对应的 [角色权限](#jurisdiction) 中定义。
![](https://main.qcloudimg.com/raw/8b632754dda30daeedcec9af3ea9045e.png)

如果不需要匿名，则关闭匿名访客开关即可。
![](https://main.qcloudimg.com/raw/fe46fa48bef75f7210ca592d006402e8.png)
关闭以后也可以重新开启匿名访问。
![](https://main.qcloudimg.com/raw/e90c6691ccb1b2654c94b08233a2be70.png)


#### 删除匿名访客
如果用户手动清除了设备或浏览器的本地数据，那么匿名用户的数据便会被同步清除，再次访问应用时会产生一个新的匿名用户。
每个环境的匿名访客数量不超过 1000 万个，如果达到上限可以在微搭侧进行批量删除，也可以进一步在 [CloudBase 控制台](https://cloud.tencent.com/login?s_url=https%3A%2F%2Fconsole.cloud.tencent.com%2Ftcb%2Fuser) 的**用户管理**页面查看匿名用户的活跃情况，针对长期不登录的匿名用户可单击**删除**以释放空间。
![](https://main.qcloudimg.com/raw/d699f7034187f5b99e211808063cda40.png)

### 用户登录鉴权方式

#### 用户名密码登录
目前独立发布的自定义应用和企业工作台均支持用户名密码登录，所有 [模型应用](https://cloud.tencent.com/document/product/1301/59391) 发布以后，都必须用户名密码登录企业工作台以后才可以进行访问。

#### 企业微信登录
支持和企业微信进行打通，进行企业微信扫码登录。

#### 微信授权登录
目前仅小程序支持微信授权快速登录。

## 角色权限[](id:jurisdiction)

### 预制角色
预制了“匿名访客”和“超级管理员”的角色，默认对于初次使用用户权限的用户，用户可以默认关联预制角色使用普通应用和模型应用。用户可进入**用户权限** > **角色权限管理**页面进行查看。
![](https://main.qcloudimg.com/raw/ec51eadf7eeee73a7e11d92d38b918f5.png)
-   匿名访客默认给普通应用使用，如不满足可以重新定义新的角色。默认仅可以访问所有的普通应用和对应的页面，数据源所对应的业务数据可以查看全部、修改全部。
-   超级管理员默认给模型应用使用，如不满足可以重新定义新的角色。默认仅可以访问所有的模型应用和对应的页面，数据源所对应的业务数据可以查看全部、修改全部，可以访问所有流程，可以访问企业工作台和进行相关的设置。


### 新建角色
腾讯云控制台进入微搭低代码**用户权限** > [**角色权限**](https://console.cloud.tencent.com/lowcode/permission/role) 页面，单击**新建角色**。
- 角色名称：用于用户授权时显示，不能重复。
- 角色标识：当前环境下唯一，不能重复。
- 角色描述：为非必填项，用于描述角色的一些信息。
<img src = "https://main.qcloudimg.com/raw/1fc0c005b8bc2e54044ae7b61e0c6e0d.png" style="width: 80%">

### 编辑角色
![](https://main.qcloudimg.com/raw/f57e632944c16be8a305990c819f7887.png)
- 角色名称：可以修改，用于用户授权时显示，不能重复。
- 角色标识：一旦定义以后不能修改。
- 角色描述：可以修改，为非必填项，用于描述角色的一些信息。
<img src = "https://main.qcloudimg.com/raw/b3a47c400c931160c496670f3c5132ed.png" style="width: 80%">



### 删除角色
当角色不需要使用了，可以直接单击**删除**，如果角色已经被用户关联了，则不能进行删除，需要解除关联以后再进行删除。
![](https://main.qcloudimg.com/raw/4e174c213c3741e96245bfe00e2a95b7.png)

![](https://main.qcloudimg.com/raw/8801235288e3236ede262e2863212e21.png)



### 查看并定义角色
鼠标停留在**角色名称**处会提示**单击配置角色权限**，单击之后进入角色定义。
![](https://main.qcloudimg.com/raw/c0de7c82806d749ecd3ff99fa897c6d2.png)



#### 应用访问权限
对于目前独立发布的自定义应用，只有用户关联的角色勾选了**应用访问权限**，登录的时候才可以进入到应用的首页，没有勾选的话，即便登录鉴权成功，也无法登入。

对于发布以后的模型应用，登入企业工作台的用户只有具备应用的访问权限，单击应用才可以进入到应用的首页。

![](https://main.qcloudimg.com/raw/b11e5e508aeeaacf5ad4aac8c98b2b3e.png)

![](https://main.qcloudimg.com/raw/39ef9f5bce80e0b48a33426fcdcc0d3b.png)


#### 页面访问权限
当对应的角色具备对应的应用访问权限以后，才需要定义页面访问权限。如果对应的角色没有勾选应用的访问权限，则不能设置页面的访问权限。默认勾选**应用访问权限**以后，会把应用下所有页面勾选。
![](https://main.qcloudimg.com/raw/850d832cf6303af3a67a2ceb7a3326e7.png)
<img src = "https://main.qcloudimg.com/raw/c2d08e55235e025a8aad85363691ba19.png" style="width: 80%">

>?用户关联的角色没有勾选可以访问的页面，运行态访问未勾选的页面时，展示空白页面，并气泡提示：“当前页面没有访问权限！”。


#### 数据源访问权限
数据源目前仅支持定义业务数据的权限，支持定义查看本人、修改本人，查看全部、修改全部的数据访问范围。其中修改本人和修改全部勾选之后，默认选中对应的查看权限。
![](https://main.qcloudimg.com/raw/3d4acef26ed577e54519000961e0618f.png)
>?当一个角色具备了查看全部和修改全部的权限以后，则默认就具备查看本人和修改本人的数据权限，无需重复定义，即便定义查看和修改本人的数据权限，也会按照公有读写的权限处理。


#### 流程访问权限
用户对应的角色勾选流程访问权限以后，用户才能发起或处理流程，未勾选的流程不能发起或处理。
![](https://main.qcloudimg.com/raw/842a9b744b03644a004f6a66b988cb41.png)

#### 企业工作台访问权限
进入企业工作台需要验证账号密码、以及判断用户关联的角色“是否可登入企业工作台”的权限（避免 C 端自定义应用的用户验证密码成功后，误入工作台）。
工作台的系统配置入口，通过开关的策略控制，对应用户关联的角色勾选以后，才可以进入系统配置页面。
![](https://main.qcloudimg.com/raw/3a6eac99c6e090c0d3ef1a2e250a49c0.png)
![](https://main.qcloudimg.com/raw/013e31fc8332bb6f1032cf68e704dd09.png)



### 发布角色
进入微搭低代码**用户权限** > **角色权限**页面，单击**发布角色**。
![](https://main.qcloudimg.com/raw/cfe2859dc9bfa03b7499dd5d26557b19.png)
>?当角色的定义有变更，默认体验环境直接生效。但是发布的正式环境默认不生效，只有点击发布角色，提示“发布成功”以后，发布的正式环境才生效。对应的角色会有发布状态的显示，只有已发布的角色，正式环境才会生效。

