## 注意事项
流程管理功能目前处于公测阶段，基础版本用户免费使用，公测截止后，将会收取一部分费用，公测截止时间另行通知。


## 步骤1：新建流程
进入微搭低代码控制台，进入 [**流程管理**](https://console.cloud.tencent.com/lowcode/flow/index) 页面，单击**新建流程**。
![](https://main.qcloudimg.com/raw/c3cb73247bc8f0ae772b397ea1070a0e.png)

## 步骤2：选择触发类型并配置
选择**触发类型**并配置**触发时机** 。
<table>
<tr>
<th>触发类型</th>
<th>功能说明</th>
<th>场景举例</th>
</tr>
<tr>
<td >定时触发</td>
<td>您可以基于一个固定的时间点，设定一个循环周期时间（例如每周一早8点），当时间每到达该周期时间，都可以执行一次计划的动作。</td>
<td >公司每周一下午3点开周例会，通过循环流程，设置每周一下午2点，就短信提醒大家准备开会；合同到期前一天9点短信提醒合同责任人，合同即将到期。</td>
</tr>
<tr>
<td >即时触发</td>
<td>当数据满足某种条件时，用户操作某功能时，即可触发流程的执行。</td>
<td >用户新建请假数据，并单击<b>提交表单</b>时触发<b>请假审批</b>流程。</td>
</tr>
</table>
<img src = "https://main.qcloudimg.com/raw/a57b53c6ea9e653c6643eb57ccccd325.png" style="width: 100%">

## 步骤3：设置功能节点
设置流程中需要执行的功能节点，下列提供审批、发送通知、数据表操作和分支四种功能节点的介绍。

### 审批
在审批场景下，需要用到“审批节点”，并在审批通过或者驳回后进行相应的数据状态变更，或发送通知给相关业务执行人。
1. 单击**审批**，添加审批节点。
![](https://main.qcloudimg.com/raw/dfd460c9d77c4e4fbbb71dcd20ae39d4.png)
2. 配置审批节点。
![](https://main.qcloudimg.com/raw/36cee2283196b42b4eb89dd3d5877a4e.png)
#### 参数说明
<table>
    <tr>
        <th colspan="2">参数项</th>
        <th>描述</th>
    </tr>
    <tr>
        <td colspan="2">关联数据源</td>
        <td>选择要审批的数据源。</td>
    </tr>
    <tr>
        <td colspan="2">节点名称</td>
        <td>根据实际情况创建节点名称。</td>
    </tr>
    <tr>
        <td rowspan="2">审批类型</td>
        <td>单人审批</td>
        <td>该节点只需要一个人审批通过即为审批通过，该节点审批人在设置时可以设置为一个或多个，当该节点审批人设置为多人时，含义为审批人中只需要其中任何一个人审批通过即为通过。</td>
    </tr>
    <tr>
        <td>多人会签</td>
        <td>该节点需要多个人同时审批通过即为审批通过，该节点审批人在设置时可以设置为多个用户，或者包含多个用户的用户组，部门、角色等。</td>
    </tr>
    <tr>
        <td rowspan="2">审批人</td>
        <td>固定审批人</td>
        <td>在流程定义时已知审批人是谁，需要设定该节点的审批人。</td>
    </tr>
    <tr>
        <td>上一节点的审批人</td>
        <td>在流程执行时，流程节点执行人都是由前一个节点的审批人来指定。</td>
    </tr>
    <tr>
        <td colspan="2">通过</td>
        <td>勾选通过选项后，当流程执行时，审批人操作通过时可以编辑的字段，通过之后可发送通知给到其他相关用户，或者配置操作数据表更新来按照审批结果自动化更新数据表。</td>
    </tr>
    <tr>
        <td colspan="2">驳回</td>
        <td>勾选驳回选项后，当流程执行时，设置驳回后的流程走向，审批人操作驳回时可以编辑的字段，驳回之后可发送通知给到其他相关用户，或者配置操作数据表来按照审批结果自动化更新数据表。</td>
    </tr>
</table>


<dx-alert infotype="explain" title="">
需按照业务需求设置不同的审批操作时的参数。
<ul style = "margin-bottom: 0px;"><li>根据业务需求，设置不同的分支流程。</li>
<li>审批节点后增加分支节点，根据数据条件决定不同数据的流程走向。</li></ul>

场景举例：请假1天只需要直属领导审批，请假大于1天需要直属领导审批后部门经理审批。
</dx-alert>

### 发送通知
通知节点是自动化执行不同类型系统通知的动作的集合，可通过配置“通知节点”实现当数据满足某种条件时或者某个定时条件下自动发送不同类型的通知触达用户。
![](https://main.qcloudimg.com/raw/7560925994a5e8c7c004d156942b7295.png)

1. 进入**流程管理** > **消息模板**页面，单击**新建消息模板**，配置通知模板。
发送方式：站内通知可发送至微搭预置**企业工作台**的站内通知中；站内待办可发送至微搭预置**企业工作台**的站内待办中。
![](https://qcloudimg.tencent-cloud.cn/raw/2e9e11b92f1baa72254b9d416b59e852.png)
>?消息标题、子标题、消息内容除了支持文本外，支持嵌入数据源变量字段，例如“张三”提交了一笔请假申请。其中“张三”为“请假人”字段，在流程运行时，该字段为变量值，不同的数据请假人不一样。
>
2. 配置通知发送人。
在流程中按照业务需求，选择需要发送的消息模板，并选择消息所要通知到的相关用户。
![](https://main.qcloudimg.com/raw/ae7265d357f7f736a2d8f3bc4da5ace6.png)

### 数据表操作
单击**操作数据表**，选择操作数据表类型**更新**。
![](https://main.qcloudimg.com/raw/40de36db744041b195d7e201c63a8368.png)
节点功能： 更新某条记录中的一个或多个字段的值（本表字段或关联他表字段），可以修改为新的内容、清空字段的值、增加或减少值（数值、金额、多选字段、多选人员字段 ）。
场景示例：商品入库时，某个商品入库量为100， 将库存记录中 当前商品的库存值 增加100。

<dx-alert infotype="explain" title="说明">
其他数据表操作，如**新建**和**删除**能力敬请期待。
</dx-alert>



### 分支
单击**分支节点**，通过分支节点的条件设置，使满足不同数据条件的数据走不同的分支流程。
![](https://main.qcloudimg.com/raw/772f9912009525cbde4264b73e9699e0.png)
场景举例：请假1天只需要直属领导审批，请假大于1天需要直属领导审批后部门经理审批。


## 步骤4：调试并保存流程
当业务流程比较复杂时，避免流程设置过程中容易出错，可以一边配置流程节点，一边调试配置是否有误，如配置有误，可提前检查并发现问题。保存流程后，流程可以在应用编辑器中被引用，并发布到体验环境，流程在体验环境测试无误后，可在流程列表单击**发布**将流程发布至线上环境，只有发布的流程才可以正常运行。
![](https://qcloudimg.tencent-cloud.cn/raw/0b3d3f9b93cf3691a0dbbd60fb1ada34.png)

## 步骤5：查看审批节点和前端组件样式
流程中的**人工节点**在运行态需要用户通过页面操作来完成该节点的执行，因此配置完流程之后，可进入**模型应用**页面编辑器，查看**人工节点**对应的前端组件。
![](https://qcloudimg.tencent-cloud.cn/raw/3251a1579f00ee0c77afe2dd3b464004.png)
<dx-alert infotype="explain" title="">
- 目前人工节点下只包括了**审批节点**，创建**模型页面**时，选择数据源，如果该数据源绑定了流程，且该流程包括**审批节点**，为了提高配置效率，系统会在预置的详情页面中预置**审批组件**。
- 需要注意的是，该数据源必须在创建模型页面前预先关联了相关流程，才会在自动生成的模型页面中包含审批组件（审批组件正常运行需要一定页面入参，为了保证审批数据正常显示，审批组件暂不支持拖拽），该组件样式当前不支持二次定制，但可通过拖拽的方式调整组件在页面中的布局。
</dx-alert>


