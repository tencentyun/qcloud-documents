[](id:step1)
### 获取用户信息（数据模型的 OpenAPI）
参见 [数据模型](https://cloud.tencent.com/document/product/1301/70983) 。
请求方式：GET 
示例：
```html
https://{envId}.{region}.ap-shanghai.tcb-api.tencentcloudapi.com/weda/odata/v1/{envType}/sys_user
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应资源未发布），prod：正式环境（对应资源已发布）</td>
</tr>
</table>
返回参数示例：


<dx-codeblock>
:::  js
{
    "@odata.context":"$metadata#sys_user",
    "value":[
        {
            "_id":"1491618225351524354",
            "createdAt":1646924769165,
            "updatedAt":1656644264179,
            "createBy":"administrator",
            "updateBy":"administrator",
            "name":"administrator",
            "type":0,
            "internal_user_type":1,
            "uin":"100010452549",
            "sub_uin":"100021970282",
            "uuid":"BTk_AAEDPMs",
            "open_id":null,
            "user_desc":"超级管理员用户\n\n1234qwer#",
            "nick_name":null,
            "env_id":"lowcode-6ggpw0rpf76676d9",
            "project_id":null,
            "corp_id":null,
            "source":1,
            "wechat_user_id":null,
            "email":"",
            "phone":""
        }
    ]
}



:::
</dx-codeblock>

_id 即为用户的唯一标识，对应来源标识 type=4。
**type 取值：3.企业微信 4.weda 内部用户**。


**以下为流程 OpenAPI**
返回参数基本格式为：
<dx-codeblock>
:::  html
{
    "Response":{
        "RequestId":"5ce05e64b8b79",
        "Error":{
            "Code":"",
            "Message":""
        },
        "Data":{

        }
    }
}

:::
</dx-codeblock>



[](id:step2)
### 查询已部署的流程列表
>?本接口用于查询设计态已部署的流程，每次保存后出参 FlowCode 会更新，ProcessKey 不更新。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/ListDeployedFlows
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Type</td>
<td>int</td>
<td>是</td>
<td>流程类型，1：逻辑流，2：审批流</td>
</tr>
</table>

**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>TotalCount</td>
<td>int</td>
<td>总数</td>
</tr>
</tr>
<tbody>
<tr>
<td>FlowSet</td>
<td>
 list&lt;DeployedProcessInfo&gt;
</td>
<td>流程列表</td>
</tr>

</table>

**DeployedProcessInfo**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>流程编码，流程有多版本设计，每次保存、发布后 FlowCode 会更新，该接口返回最新值</td>
</tr>
</tr>
<tbody>
<tr>
<td>ProcessKey</td>
<td>string</td>
<td>流程唯一标识</td>
</tr>
<tr>
<td>Published</td>
<td>bool</td>
<td>流程是否发布</td>
</tr>

<tr>
<td>Version</td>
<td>string</td>
<td>版本</td>
</tr>
</tr>
<tbody>
<tr>
<td>Name</td>
<td>string</td>
<td>流程名称</td>
</tr>
<tr>
<td>Description</td>
<td>bool</td>
<td>流程描述</td>
</tr>
</tr>
<tr>
<td>BeginElementType</td>
<td>int</td>
<td>开始节点是否有入参，0：没有参数，1：有参数</td>
</tr>
</table>


**Body 参数示例**
<dx-codeblock>
::: js
{
    "Type": 2
}

:::
</dx-codeblock>

**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response":{
        "RequestId":"5ce05e64b8b79",
        "Error":{
            "Code":"",
            "Message":""
        },
        "Data":{

        }
    }
}

:::
</dx-codeblock>


[](id:step3)
### 发起流程
>?本接口用于运行态触发流程，产生流程实例。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/StartFlow
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>是</td>
<td>流程编码</td>
</tr>
<tr>
<td>FlowVersion</td>
<td>string</td>
<td>是</td>
<td>流程版本</td>
</tr>
<tr>
<td>ProcessKey</td>
<td>string</td>
<td>是</td>
<td>流程唯一标识</td>
</tr>
<tr>
<td>StartParams</td>
<td> list&lt; string，object &gt; </td>
<td>否</td>
<td>流程启动入参，key 为流程开始节点变量名，value 为变量值</td>
</tr>
<tr>
<td>StartUser</td>
<td>UserInfo</td>
<td>是</td>
<td>流程发起人</td>
</tr>
</table>

**UserInfo**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>UserId</td>
<td>string</td>
<td>是</td>
<td>用户id</td>
</tr>
<tr>
<td>Type</td>
<td>int</td>
<td>是</td>
<td>用户来源：1：tcb，2：企微，4：内部</td>
</tr>
</table>

**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>FlowInstanceId</td>
<td>string</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>TaskId</td>
<td>int</td>
<td>发起人需要处理的审批任务 ID，没有则返回空</td>
</tr>
</table>

**Body 参数示例：**
<dx-codeblock>
:::  js
{
    "FlowCode": "1539815610601385986",
    "FlowVersion": "8.0",
    "ProcessKey": "flow_063",
    "StartParams": {
        "kt": {
            "test": "1558049980829474819"
        }
    },
    "StartUser": {
        "Type": 4,
        "UserId": "1538836331646423040"
    }
}


:::
</dx-codeblock>



**返回参数示例：**
<dx-codeblock>
:::  js
{
    "Response":{
        "Data":{
            "FlowInstanceId":"1555098494600142849",
            "TaskId":"1555098498219827202"
        }
    }
}


:::
</dx-codeblock>


[](id:step4)
### 完成审批任务
>?本接口用于操作审批任务通过、驳回、转办和提交。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/CompleteTask
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>TaskId</td>
<td>string</td>
<td>是</td>
<td>审批任务 ID</td>
</tr>
<tr>
<td>ButtonAction</td>
<td>int</td>
<td>是</td>
<td>审批动作，1：提交；2：同意；3：拒绝；4：转办；</td>
</tr>
<tr>
<td>Comment</td>
<td>string</td>
<td>否</td>
<td>审批意见</td>
</tr>
<tr>
<td>PageParams</td>
<td> map&lt; string，VariableInfo &gt; </td>
<td>否</td>
<td>页面输出变量，key 为变量名，参考接口 GetApprovalPageDetail 出参 VariableKey</td>
</tr>
<tr>
<td>Approver</td>
<td>UserInfo</td>
<td>是</td>
<td>流程审批人</td>
</tr>
<td>TurnToUser</td>
<td>UserInfo</td>
<td>否</td>
<td>转办人</td>
</tr>
<tr>
<td>CcUserIds</td>
<td> list&lt; string &gt; </td>
<td>否</td>
<td>抄送人 userId 列表</td>
</tr>
</table>

**VariableInfo**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Type</td>
<td>string</td>
<td>变量类型：对象：object</td>
</tr>
<tr>
<td>Value</td>
<td>object</td>
<td>变量值</td>
</tr>
</table>

**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>ToBeSubmittedFlowTaskFlag</td>
<td>boolean</td>
<td>是否弹出筛选审批人列表页面（配置了上一节点指定审批人时返回）</td>
</tr>
<tr>
<td>ToBeSubmittedFlowTaskInfo</td>
<td>  list&lt;ToBeSubmittedFlowTaskInfo&gt; </td>
<td>待提交任务信息（同上）</td>
</tr>
</table>

**ToBeSubmittedFlowTaskInfo**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Assignee</td>
<td>string</td>
<td>待审批人 ID</td>
</tr>
<tr>
<td>AssigneeName</td>
<td>string</td>
<td>待审批人名称</td>
</tr>
<tr>
<td>WaitFlowTaskId</td>
<td>string</td>
<td>待提交任务 ID</td>
</tr>
</table>

**Body 参数示例：**
<dx-codeblock>
:::  js
{
    "TaskId": "1539896972964917249",
    "ButtonAction": 2,
    "PageParams": {
        "approve": {
            "Type": "object",
            "Value": {
                "test": "1"
            }
        }
    },
    "Comment": "ookk",
    "Approver": {
        "Type": 4,
        "UserId": "1538836331646423040"
    },
    "CcUserIds": [
        "1558049980829474819"
    ]
}


:::
</dx-codeblock>

**返回参数示例：**
<dx-codeblock>
:::  js
{
    "Response":{
        "RequestId":"24f7bbfbcd78d",
        "Data":{
            "OpenPageFlag":false,
            "ClosePageFlag":false,
            "RefreshPageFlag":false,
            "ToBeSubmittedFlowTaskFlag": true,
            "ToBeSubmittedFlowTaskInfo": [
                {
                    "Assignee": "1569601870691893251",
                    "AssigneeName": "test11223344",
                    "WaitFlowTaskId": "1575337230822875138"
                },
                {
                    "Assignee": "1564617649596395522",
                    "AssigneeName": "kathyzjxu",
                    "WaitFlowTaskId": "1575337230822875139"
                }
            ]
        }
    }
}

:::
</dx-codeblock>



[](id:step5)
### 终止流程
请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/StopFlow
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>是</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>Operator</td>
<td>UserInfo</td>
<td>是</td>
<td>操作人</td>
</tr>
<tr>
<td>DeleteReason</td>
<td>string</td>
<td>否</td>
<td>终止理由</td>
</tr>
</table>

**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>bool</td>
<td>操作结果</td>
</tr>
</table>


**Body 参数示例：**
<dx-codeblock>
::: js
{
    "InstanceId": "1539815610601385986",
    "DeleteReason": "nono",
    "Operator": {
        "Type": 4,
        "UserId": "1538836331646423040"
    }
}


:::
</dx-codeblock>

**返回参数示例：**
<dx-codeblock>
:::  js
{
    "Response":{
        "RequestId":"24f7bbf34d78d",
        "Data":{
            "Result": true
        }
    }
}


:::
</dx-codeblock>




[](id:step6)
### 查询流程实例相关信息
请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/GetFlowInstances
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>否</td>
<td>流程编码</td>
</tr>
<tr>
<td>ProcessKey</td>
<td>string</td>
<td>否</td>
<td>流程标识</td>
</tr>
<tr>
<td>FlowVersion</td>
<td>string</td>
<td>否</td>
<td>流程版本</td>
</tr>
<tr>
<td>StartUserId</td>
<td>string</td>
<td>否</td>
<td>发起人 ID</td>
</tr>
<tr>
<td>StartTime</td>
<td>long</td>
<td>否</td>
<td>流程开始时间段</td>
</tr>
<tr>
<td>EndTime</td>
<td>long</td>
<td>否</td>
<td>流程结束时间段</td>
</tr>
<tr>
<td>Status</td>
<td>int</td>
<td>否</td>
<td>流程状态，1：终止（调用接口5），2：正常结束-审批拒绝，3：正常结束-审批通过，4：处理中</td>
</tr>
<tr>
<td>PageNumber</td>
<td>int</td>
<td>否</td>
<td>页码，默认1</td>
</tr>
<tr>
<td>PageSize</td>
<td>int</td>
<td>否</td>
<td>页面大小，默认10</td>
</tr>
<tr>
<td>Sort</td>
<td>string</td>
<td>否</td>
<td>排序字段，可选择 id、flow_code、flow_name、instance_id、process_key、create_by_name、start_time、end_time、is_end、status、title。默认为 start_time</td>
</tr>
<tr>
<td>Order</td>
<td>string</td>
<td>否</td>
<td>排序规则，升序 asc，降序 desc。默认为 desc</td>
</tr>
</table>

**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td> list&lt;FlowInstanceData&gt;</td>
<td>返回结果</td>
</tr>
<tr>
<td>TotalCount</td>
<td>int</td>
<td>总数</td>
</tr>
</table>

**FlowInstanceData**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>Description</td>
<td>string</td>
<td>流程描述</td>
</tr>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>流程编码</td>
</tr>
<tr>
<td>FlowName</td>
<td>string</td>
<td>流程名称</td>
</tr>
<tr>
<td>FlowVersion</td>
<td>string</td>
<td>流程版本</td>
</tr>
<tr>
<td>StartUserName</td>
<td>string</td>
<td>流程发起人名称</td>
</tr>
<tr>
<td>StartTime</td>
<td>date</td>
<td>开始时间</td>
</tr>
<tr>
<td>EndTime</td>
<td>date</td>
<td>结束时间</td>
</tr>
<tr>
<td>Status</td>
<td>int</td>
<td>流程状态，1：终止，2：驳回，3：同意，4：处理中</td>
</tr>
</table>


**Body 参数示例：**
<dx-codeblock>
::: js
{
    "FlowCode": "1554326000705142787"
}

:::
</dx-codeblock>

**返回参数示例：**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "24f7bbfbcd78d",
        "Data": {
            "Result": [
                {
                    "InstanceId": "1554350593668153346",
                    "Description": "kong页面预发测试复用",
                    "FlowCode": "1554326000705142787",
                    "FlowName": "kong页面预发测试复用",
                    "FlowVersion": "27.0",
                    "StartUserName": "administrator",
                    "StartTime": "2022-08-02T14:17:15.000+0800",
                    "EndTime": "2022-08-02T14:18:07.013+0800",
                    "Status": 3
                },
                {
                    "InstanceId": "1554411407090827265",
                    "Description": "kong页面预发测试复用",
                    "FlowCode": "1554326000705142787",
                    "FlowName": "kong页面预发测试复用",
                    "FlowVersion": "27.0",
                    "StartUserName": "administrator",
                    "StartTime": "2022-08-02T18:18:54.000+0800",
                    "EndTime": null,
                    "Status": 4
                },
                {
                    "InstanceId": "1554430936495865858",
                    "Description": "kong页面预发测试复用",
                    "FlowCode": "1554326000705142787",
                    "FlowName": "kong页面预发测试复用",
                    "FlowVersion": "27.0",
                    "StartUserName": "administrator",
                    "StartTime": "2022-08-02T19:36:30.000+0800",
                    "EndTime": null,
                    "Status": 4
                },
                {
                    "InstanceId": "1554725610770042881",
                    "Description": "kong页面预发测试复用",
                    "FlowCode": "1554326000705142787",
                    "FlowName": "kong页面预发测试复用",
                    "FlowVersion": "27.0",
                    "StartUserName": "administrator",
                    "StartTime": "2022-08-03T15:07:27.000+0800",
                    "EndTime": null,
                    "Status": 4
                }
            ],
            "TotalCount": 4
        }
    }
}



:::
</dx-codeblock>




[](id:step7)
### 查询流程任务相关信息
请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/GetFlowInstanceTasks
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>是</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>TaskAssignee</td>
<td>UserInfo</td>
<td>否</td>
<td>任务处理人</td>
</tr>
<tr>
<td>TaskIds</td>
<td> list&lt;string&gt;</td>
<td>否</td>
<td>节点任务列表</td>
</tr>
<tr>
<td>TaskType</td>
<td>int</td>
<td>否</td>
<td>用户任务类型，1：审批节点，2：处理节点</td>
</tr>
<tr>
<td>ElementIds</td>
<td>list&lt;string&gt;</td>
<td>否</td>
<td>节点 ID 列表</td>
</tr>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>否</td>
<td>流程编码</td>
</tr>
<tr>
<td>TaskStatus</td>
<td>int</td>
<td>否</td>
<td>任务状态，1：待办，2：已办，3：无效（任签时可视为已办），4：草稿箱，5：配置审批开始节点时，任务待提交</td>
</tr>
<tr>
<td>StartUser</td>
<td>UserInfo</td>
<td>否</td>
<td>流程发起人</td>
</tr>
<tr>
<td>IsCarbonCopyTask</td>
<td>bool</td>
<td>否</td>
<td>是否为抄送任务</td>
</tr>
<tr>
<td>StartTime</td>
<td>long</td>
<td>否</td>
<td>启动时间</td>
</tr>
<tr>
<td>EndTime</td>
<td>long</td>
<td>否</td>
<td>结束时间</td>
</tr>
<tr>
<td>PageNumber</td>
<td>int</td>
<td>否</td>
<td>页码，默认1</td>
</tr>
<tr>
<td>PageSize</td>
<td>int</td>
<td>否</td>
<td>页面大小，默认10</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td> list&lt;FlowInstanceData&gt;</td>
<td>返回结果</td>
</tr>
<tr>
<td>TotalCount</td>
<td>int</td>
<td>总数</td>
</tr>
</table>

**FlowInstanceData**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>流程编码</td>
</tr>
<tr>
<td>FlowName</td>
<td>string</td>
<td>流程名称</td>
</tr>
<tr>
<td>TaskId</td>
<td>string</td>
<td>任务 ID</td>
</tr>
<tr>
<td>FlowStartUser</td>
<td>UserInfo</td>
<td>流程发起人</td>
</tr>
<tr>
<td>TaskAssignee</td>
<td>UserInfo</td>
<td>流程审批人</td>
</tr>
<tr>
<tr>
<td>ElementName</td>
<td>string</td>
<td>节点名称</td>
</tr>
<tr>
<td>ElementId</td>
<td>string</td>
<td>节点 ID</td>
</tr>
<tr>
<td>StartTime</td>
<td>date</td>
<td>开始时间</td>
</tr>
<tr>
<td>EndTime</td>
<td>date</td>
<td>结束时间</td>
</tr>
<tr>
<td>TaskStatus</td>
<td>int</td>
<td>任务状态，1：待办，2：已办，3：无效（可视为已办），4：草稿箱</td>
</tr>
<tr>
<td>OperationResult</td>
<td>int</td>
<td>操作结果</td>
</tr>
<tr>
<td>PageTransitionUrl</td>
<td>string</td>
<td>页面跳转 URL</td>
</tr>
</table>


**Body 参数示例：**
<dx-codeblock>
:::  js
{
    "InstanceId": "1554411407090827265",
    "TaskAssignee": {
        "UserId": "1519239780903088129",
        "Type": 4
    }
}



:::
</dx-codeblock>

**返回参数示例：**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "f82c847eb776e",
        "Data": {
            "Result": [
                {
                    "InstanceId": "1554411407090827265",
                    "TaskId": "1554411407241822210",
                    "FlowName": "kong页面预发测试复用",
                    "FlowCode": "1554326000705142787",
                    "FlowStartUser": {
                        "UserId": "1519239780903088129",
                        "Source": 4,
                    },
                    "ElementName": "审批节点",
                    "ElementId": "approvalNode1658740549804",
                    "TaskAssignee": {
                        "UserId": "1519239780903088129",
                        "Source": 4
                    },
                    "StartTime": "2022-08-02T18:18:54.000+0800",
                    "EndTime": "2022-08-02T18:19:15.952+0800",
                    "TaskStatus": 2,
                    "OperationResult": 1,
                    "PageTransitionUrl": "https://lowcode-1yyyy0000000ffff-1000000001.tcloudbaseapp.com/adminportal/#/flowCenter/detail?envType=prod&flowTaskId=1554411407241822210&pageType=TODO"
                },
                {
                    "InstanceId": "1554411407090827265",
                    "TaskId": "1554411501026459650",
                    "FlowName": "kong页面预发测试复用",
                    "FlowCode": "1554326000705142787",
                    "FlowStartUser": {
                        "UserId": "1519239780903088129",
                        "Source": 4
                    },
                    "ElementName": "处理节点",
                    "ElementId": "handleNode1658740983395",
                    "TaskAssignee": {
                        "UserId": "1519239780903088129",
                        "Source": 4
                    },
                    "StartTime": "2022-08-02T18:19:16.000+0800",
                    "EndTime": null,
                    "TaskStatus": 1,
                    "OperationResult": 0,
                    "PageTransitionUrl": "https://lowcode-1yyyy0000000ffff-1000000001.tcloudbaseapp.com/adminportal/#/flowCenter/detail?envType=prod&flowTaskId=1554411501026459650&pageType=TODO"
                }
            ],
            "TotalCount": "2"
        }
    }
}

:::
</dx-codeblock>

[](id:step8)
### 查询流程操作相关信息
请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/GetFlowInstanceOperations
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>是</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>ElementIds</td>
<td> list&lt;string&gt;</td>
<td>否</td>
<td>节点 ID 列表</td>
</tr>
<tr>
<td>OperatorUser</td>
<td>UserInfo</td>
<td>否</td>
<td>处理人</td>
</tr>
<tr>
<td>PageNumber</td>
<td>int</td>
<td>否</td>
<td>页码，默认1</td>
</tr>
<tr>
<td>PageSize</td>
<td>int</td>
<td>否</td>
<td>页面大小，默认10</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<td>TotalCount</td>
<td>int</td>
<td>总数</td>
</tr>
<tr>
<td>Result</td>
<td> list&lt;InstanceOperationData&gt;</td>
<td>操作信息列表</td>
</tr>
<tr>
</table>

**InstanceOperationData**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>ElementName</td>
<td>string</td>
<td>节点名称</td>
</tr>
<tr>
<td>CreateTime</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>OperatorUser</td>
<td>string</td>
<td>处理人 ID</td>
</tr>
<tr>
<td>Content</td>
<td>string</td>
<td>操作内容，ContentEntity 的 JSON 字符串</td>
</tr>
<tr>
<td>Result</td>
<td>UserInfo</td>
<td>操作结果</td>
</tr>
</table>

**ContentEntity**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>action</td>
<td>int</td>
<td>节点名称操作动作 1：提交，2：同意，3：拒绝，4：转办：5：撤销，6：回退，7：加签，8：终止，9：跳过，13：处理，15：节点抄送，16：废弃流程，17：保存草稿</td>
</tr>
<tr>
<td>operation</td>
<td>string</td>
<td>操作记录</td>
</tr>
<tr>
<td>operationComment</td>
<td>string</td>
<td>审批意见</td>
</tr>
<tr>
<td>ccUserIds</td>
<td> list&lt;string&gt;</td>
<td>抄送人员 ID 列表</td>
</tr>
</table>

**operation 值为 json 字符串**
<table>
<tr>
<th width="20%">动作编号</th>
<th width="15%">动作名称</th>
<th width="50%">描述</th>
<th width="50%">json 字符串示例</th>
</tr>
<tbody>
<tr>
<td rowspan='2'>5</td>
<td>撤销</td>
<td>撤销文案</td>
<td>"审批人撤销" 或 "发起人撤销"</td>
</tr>
<tr>
<td>会签</td>
<td> 会签人的 json 字符串，类型为 list&lt;Info&gt;</td>
<td>"[{\"id\":\"1526534489242292225\",\"name\":\"zhihhwang\"}]"</td>
</tr>

<tr>
<td>其它</td>
<td></td>
<td></td>
<td>空</td>
</tr>
</table>




**Body 参数示例：**
<dx-codeblock>
::: js
{
    "InstanceId": "1554430936495865858"
}

:::
</dx-codeblock>

**返回参数示例：**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "6b0ca9c32645b",
        "Data": {
            "Result": [
                {
                    "ElementName": "审批节点",
                    "CreateTime": "2022-08-02T19:37:30.000+0800",
                    "OperatorUser": "1519239780903088129",
                    "Content": "{\"action\":1}",
                    "Result": "null"
                },
                {
                    "ElementName": "处理节点",
                    "CreateTime": "2022-08-02T21:15:39.000+0800",
                    "OperatorUser": "1519239780903088129",
                    "Content": "{\"action\":7,\"operation\":\"[{\\\"id\\\":\\\"1526534489242292225\\\",\\\"name\\\":\\\"zhihhwang\\\"}]\"}",
                    "Result": ""
                },
                {
                    "ElementName": "处理节点",
                    "CreateTime": "2022-08-03T19:27:19.000+0800",
                    "OperatorUser": "1519239780903088129",
                    "Content": "{\"action\":13,\"attachmentInfo\":\"[]\",\"highlightPositionList\":\"{\\\"0\\\":8}\",\"operationComment\":\"@test444 \",\"opinionUserMap\":{1554724262350057473:\"@test444\"}}",
                    "Result": "true"
                },
                {
                    "ElementName": "处理节点2",
                    "CreateTime": "2022-08-04T11:21:05.000+0800",
                    "OperatorUser": "1519239780903088129",
                    "Content": "{\"action\":13,\"attachmentInfo\":\"[]\",\"highlightPositionList\":\"{}\",\"operationComment\":\"\",\"opinionUserMap\":{}}",
                    "Result": "true"
                },
                {
                    "ElementName": "抄送节点",
                    "CreateTime": "2022-08-04T11:21:06.000+0800",
                    "OperatorUser": "1519239780903088129",
                    "Content": "{\"action\":15,\"ccUserIds\":[\"1553998386666287107\",\"1553997249586278403\",\"1553992135223947266\",\"1552612219926151170\",\"1551541491038621698\",\"1547563442778505218\",\"1547563183042035714\",\"1547561921202454530\",\"1547124661749587970\",\"1546402094529970177\",\"1531462359262003201\",\"1527588973928275970\",\"1526747841874911233\",\"1526534489242292225\",\"1522849562653122561\",\"1519239780903088129\"]}",
                    "Result": ""
                }
            ],
            "TotalCount": 5
        }
    }
}

:::
</dx-codeblock>





[](id:step9)
### 查询流程实例详情
>?本接口对应企业工作台审批页面查询流程实例详情。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/DescribeProcessInstance
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>FlowTaskId</td>
<td>string</td>
<td>是</td>
<td>审批任务 ID</td>
</tr>
<tr>
<td>PageType</td>
<td>string</td>
<td>是</td>
<td>请求类型：TODO：待办，DONE：已办，CREATE：创建，CC：抄送</td>
</tr>
<tr>
<td>UserInfo</td>
<td>UserInfo</td>
<td>否</td>
<td>用户信息，请求类型为 CC 时需要</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<td>InstanceId</td>
<td>string</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>Name</td>
<td>string</td>
<td>流程名称</td>
</tr>
<tr>
<td>Description</td>
<td>string</td>
<td>流程描述</td>
</tr>
<tr>
<td>StartedBy</td>
<td>string</td>
<td>创建人</td>
</tr>
<tr>
<td>StartUserId</td>
<td>string</td>
<td>创建人 ID</td>
</tr>
<tr>
<td>CanRevoke</td>
<td>bool</td>
<td>是否允许撤回</td>
</tr>
<tr>
<td>CcTime</td>
<td>long</td>
<td>抄送时间</td>
</tr>
<tr>
<td>CcId</td>
<td>string</td>
<td>抄送 ID</td>
</tr>
<tr>
<td>CurrentApprove</td>
<td>string</td>
<td>当前审批人 ID</td>
</tr>
<tr>
<td>CurrentApproverName</td>
<td>string</td>
<td>当前审批人名称</td>
</tr>
<tr>
<td>StartTime</td>
<td>long</td>
<td>流程开始时间</td>
</tr>
<td>EndTime</td>
<td>long</td>
<td>流程结束时间</td>
</tr>
<tr>
<td>IsCompleted</td>
<td>bool</td>
<td>审批是否完成</td>
</tr>
<tr>
<td>CurrentNodeId</td>
<td>string</td>
<td>当前审批节点 ID</td>
</tr>
<tr>
<td>CurrentNodeName</td>
<td>string</td>
<td>当前审批节点名称</td>
</tr>
<tr>
<td>CurrentNodeType</td>
<td>int</td>
<td>当前审批节点类型</td>
</tr>
<tr>
<td>TaskId</td>
<td>string</td>
<td>当前审批节点的任务 ID</td>
</tr>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>流程定义的 FlowCode</td>
</tr>
<tr>
<td>FlowVersion</td>
<td>string</td>
<td>流程定义的版本</td>
</tr>
<tr>
<td>CanApprove</td>
<td>bool</td>
<td>是否具有审批权限</td>
</tr>
<tr>
<td>CanDelete</td>
<td>bool</td>
<td>是否能够删除流程实例</td>
</tr>
<tr>
<td>Status</td>
<td>int</td>
<td>流程结束状态，1：终止，2：驳回，3：同意</td>
</tr>
<tr>
<td>BeSubmitNode</td>
<td>bool</td>
<td>是否是提交节点</td>
</tr>
</table>



**Body 参数示例：**
<dx-codeblock>
:::  js
{
    "FlowTaskId": "1554350812862480385",
    "PageType": "CC",
    "UserInfo": {
        "UserId": "1519239780903088129",
        "Type": 4
    }
}



:::
</dx-codeblock>

**返回参数示例：**
<dx-codeblock>
::: js
{
    "Response": {
        "RequestId": "kongtest-456",
        "Data": {
            "InstanceId": "1592819459751174146",
            "Name": "kongtest提交的kongprod",
            "Description": "",
            "StartedBy": "kongtest",
            "StartUserId": 1558049980829474819,
            "CanRevoke": false,
            "CcTime": null,
            "CcId": null,
            "CurrentApprover": "1558049980829474819",
            "CurrentApproverName": "kongtest",
            "StartTime": 1668592727000,
            "EndTime": 1668592916200,
            "IsCompleted": true,
            "CurrentNodeId": "handleNode1664245555540",
            "CurrentNodeName": "处理节点",
            "CurrentNodeType": 23,
            "TaskId": "1592819864610562049",
            "FlowCode": "1581977369708285954",
            "FlowVersion": "16.0",         
            "CanApprove": true,
            "CanDelete": false,
            "UserTaskType": 2,
            "Status": 3,
            "BeSubmitNode": false
        }
    }
}


:::
</dx-codeblock>





[](id:step10)
### 查询审批页面详情
>?本接口对应企业工作台审批页面查询审批页面详情，需要先调用接口9查询当前流程实例是否结束，以及当前任务对应的节点 ID、FlowCode 等信息。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/GetApprovalPageDetail
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>

**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>是</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>是</td>
<td>流程内部编码</td>
</tr>
<tr>
<td>NodeId</td>
<td>string</td>
<td>是</td>
<td>节点 ID</td>
</tr>
<tr>
<td>IsCompleted</td>
<td>bool</td>
<td>否</td>
<td>流程是否完成，默认为 true，参考[接口9]出参</td>
</tr>
<tr>
<td>PageType</td>
<td>string</td>
<td>是</td>
<td>页面类型，TODO：待办，DONE：已办，CREATE：创建，CC：抄送，DRAFT：草稿</td>
</tr>
<tr>
<td>TaskId</td>
<td>string</td>
<td>是</td>
<td>任务 ID</td>
</tr>
<tr>
<td>Id</td>
<td>string</td>
<td>否</td>
<td>抄送 ID，PageType 为 CC 时需要,接口9出参的 CcId</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<td>VariableInfos</td>
<td>VariableInfo</td>
<td>业务数据结果（页面输入变量信息）</td>
</tr>
<tr>
<td>ShowSubmitApp</td>
<td>bool</td>
<td>是否展示提交审批按钮</td>
</tr>
<tr>
<td>ShowCarbonCopy</td>
<td>bool</td>
<td>是否展示抄送按钮</td>
</tr>
<tr>
<td>ShowTurnToPerson</td>
<td>bool</td>
<td>是否展示转办按钮</td>
</tr>
<tr>
<td>ShowAddAssignee</td>
<td>bool</td>
<td>是否展示加签按钮</td>
</tr>
<tr>
<td>ShowRollBack</td>
<td>bool</td>
<td>是否显示回退按钮</td>
</tr>
<tr>
<td>ShowRevoke</td>
<td>bool</td>
<td>是否显示撤销按钮</td>
</tr>
<tr>
<td>OutEntityCodes</td>
<td> list&lt;OutputParamSign&gt;</td>
<td>页面输出变量信息</td>
</tr>
</table>


**VariableInfo**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>ObejctListMap</td>
<td> list&lt;ObjectListResponse&gt;</td>
<td>对象列表集合</td>
</tr>
<tr>
<td>ObjectMap</td>
<td> list&lt;ObjectResponse&gt;</td>
<td>对象集合</td>
</tr>
</table>


**ObjectListResponse**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>EntityCode</td>
<td>string</td>
<td>数据源标识</td>
</tr>
<tr>
<td>OutputKey</td>
<td>string</td>
<td>变量 Key</td>
</tr>
<tr>
<td>FieldValueMapList</td>
<td> list&lt;map&lt;string，object&gt;&gt;</td>
<td>变量 kv 映射列表</td>
</tr>
</table>


**ObjectResponse**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>EntityCode</td>
<td>string</td>
<td>数据源标识</td>
</tr>
<tr>
<td>OutputKey</td>
<td>string</td>
<td>变量 Key</td>
</tr>
<tr>
<td>FieldValueMap</td>
<td> list&lt;string，object&gt;</td>
<td>变量 kv 映射列表</td>
</tr>
</table>


**OutputParamSign**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>EntityCode</td>
<td>string</td>
<td>数据源标识</td>
</tr>
<tr>
<td>Type</td>
<td>string</td>
<td>页面输出变量类型</td>
</tr>
<tr>
<td>VariableKey</td>
<td>string</td>
<td>变量 kv 映射列表</td>
</tr>
</table>






**Body 参数示例：**
<dx-codeblock>
:::  js
{
    "InstanceId": "1554350593668153346",
    "FlowCode": "1554326000705142787",
    "NodeId": "handleNode1658806779773",
    "IsCompleted": true,
    "PageType": "DONE",
    "TaskId": "1554350738698797074"
}



:::
</dx-codeblock>

**返回参数示例：**
<dx-codeblock>
:::  js
{
    "Response": {
        "Data": {
            "VariableInfos": {
                "ObjectListMap": [],
                "ObjectMap": [
                    {
                        "entityCode": "kongtest_92tbnf0",
                        "RecordId": "",
                        "OutputKey": "handleNode1658740983395outputKey#165874102370210647",
                        "FieldValueMap": {
                            "date": 1661875200000,
                            "test": "1",
                            "num": "1"
                        },
                    }
                ]
            },
            "ShowSubmitApp": false,
            "ShowCarbonCopy": false,
            "ShowTurnToPerson": false,
            "ShowAddAssignee": false,
            "ShowRollBack": false,
            "ShowRevoke": false,
            "OutEntityCodes": [
                {
                    "EntityCode": "kongtest_92tbnf0",
                    "Type": "object",
                    "VariableKey": "kt3"
                }
            ],
        }
    }
}

:::
</dx-codeblock>




[](id:step11)
### 查询流程画布详情
>?本接口对应企业工作台审批页面获取流程画布详情。

请求方式：POST
示例：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/GetProcessCanvasInfo
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应资源未发布），prod：正式环境（对应资源已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>是</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>是</td>
<td>流程内部编码</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Nodes</td>
<td>
 list&lt;CanvasNode&gt;</td>
<td>节点信息</td>
</tr>
<tr>
<td>Edges</td>
<td>list&lt;CanvasEdge&gt;</td>
<td>边信息</td>
</tr>
</table>

**CanvasNode**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Id</td>
<td>int</td>
<td>节点序号</td>
</tr>
<tr>
<td>ElementId</td>
<td>string</td>
<td>节点 ID</td>
</tr>
<tr>
<td>Name</td>
<td>string</td>
<td>节点名称</td>
</tr>
<tr>
<td>DataType</td>
<td>int</td>
<td>节点类型</td>
</tr>
<tr>
<td>Status</td>
<td>int</td>
<td>状态：1：已完成，2：未开始，3：正在处理</td>
</tr>
<tr>
<td>Conf</td>
<td> list&lt;Processor&gt;</td>
<td>配置信息</td>
</tr>
</table>


**CanvasEdge**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Label</td>
<td>string</td>
<td>分支、边名称</td>
</tr>
<tr>
<td>Type</td>
<td>int</td>
<td>类型</td>
</tr>
<tr>
<td>Source</td>
<td>string</td>
<td>边的起始节点</td>
</tr>
<tr>
<td>Target</td>
<td>string</td>
<td>边的目标节点</td>
</tr>
<tr>
<td>Status</td>
<td>int</td>
<td>边的状态：1：已完成，2：未开始，3：正在处理</td>
</tr>
</table>





**Processor**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Name</td>
<td>string</td>
<td>处理人名称</td>
</tr>
<tr>
<td>Status</td>
<td>int</td>
<td>处理状态：<br>0：待办 <br>1：提交<br> 2：同意 <br>3：拒绝<br> 4：转办 <br>5：撤销<br> 6：回退<br> 7：加签 <br>8：终止 <br>9：跳过</td>
</tr>
<tr>
<td>OpTime</td>
<td>long</td>
<td>操作时间</td>
</tr>
<tr>
<td>Comment</td>
<td>string</td>
<td>评论</td>
</tr>
<tr>
<td>NewProcessors</td>
<td>string</td>
<td>转交处理人</td>
</tr>
</table>


**Body 参数**
<dx-codeblock>
:::  js
 {
    "FlowCode": "1554326000705142787",
    "InstanceId": "1554350593668153346",
}
:::
</dx-codeblock>

_id 即为用户的唯一标识，对应来源标识 source=4

以下为流程 OpenAPI
返回参数基本格式为：


<dx-codeblock>
:::  js
{
    "Response": {
        "Data": {
            "Nodes": [
                {
                    "visited": true,
                    "Id": 2,
                    "ElementId": "approvalNode1658740549804",
                    "Name": "审批节点",
                    "DataType": 17,
                    "Status": 1,
                    "Conf": [
                        {
                            "Name": "administrator",
                            "Status": 1,
                            "OpTime": 1659421050000,
                            "Comment": null,
                            "NewProcessors": "true"
                        }
                    ]
                },
                {
                    "visited": true,
                    "Id": 3,
                    "ElementId": "handleNode1658740983395",
                    "Name": "处理节点",
                    "DataType": 23,
                    "Status": 1,
                    "Conf": [
                        {
                            "Name": "administrator",
                            "Status": 13,
                            "OpTime": 1659421069000,
                            "Comment": "",
                            "NewProcessors": ""
                        }
                    ]
                },
                {
                    "visited": true,
                    "Id": 4,
                    "ElementId": "handleNode1658806779773",
                    "Name": "处理节点2",
                    "DataType": 23,
                    "Status": 1,
                    "Conf": [
                        {
                            "Name": "administrator",
                            "Status": 13,
                            "OpTime": 1659421086000,
                            "Comment": "",
                            "NewProcessors": ""
                        }
                    ]
                },
                {
                    "visited": true,
                    "Id": 1,
                    "ElementId": "startNode",
                    "Name": "开始",
                    "DataType": 1,
                    "Status": 1,
                    "Conf": null
                },
                {
                    "visited": true,
                    "Id": 5,
                    "ElementId": "endNode",
                    "Name": "结束",
                    "DataType": 13,
                    "Status": 1,
                    "Conf": null
                }
            ],
            "Edges": [
                {
                    "Label": "",
                    "Type": 2,
                    "Source": "handleNode1658806779773",
                    "Target": "endNode",
                    "Status": 2
                },
                {
                    "Label": "",
                    "Type": 2,
                    "Source": "handleNode1658740983395",
                    "Target": "handleNode1658806779773",
                    "Status": 2
                },
                {
                    "Label": "提交申请",
                    "Type": 2,
                    "Source": "approvalNode1658740549804",
                    "Target": "handleNode1658740983395",
                    "Status": 2
                },
                {
                    "Label": "",
                    "Type": 2,
                    "Source": "startNode",
                    "Target": "approvalNode1658740549804",
                    "Status": 2
                }
            ]
        }
    }
}

:::
</dx-codeblock>

[](id:step12)
### 根据类型查询流程实例列表
>?本接口对应企业工作台拉取各类审批任务列表。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/ListProcessInstances
```



**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应资源未发布），prod：正式环境（对应资源已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>UserInfo</td>
<td>UserInfo</td>
<td>是</td>
<td>当前用户信息</td>
</tr>
<tr>
<td>PageType</td>
<td>string</td>
<td>是</td>
<td>页面类型：TODO：待办，DONE：已办，CREATE：创建，CC：抄送，DRAFT：草稿</td>
</tr>
<tr>
<td>PageNumber</td>
<td>int</td>
<td>否</td>
<td>页码，默认1</td>
</tr>
<tr>
<td>PageSize</td>
<td>int</td>
<td>否</td>
<td>页面大小，默认10</td>
</tr>
<tr>
<td>Sort</td>
<td>string</td>
<td>否</td>
<td>排序属性，默认 startTime 创建时间，updateTime 更新时间</td>
</tr>
<tr>
<td>Order</td>
<td>string</td>
<td>否</td>
<td>排序规则，默认 desc 倒序，asc 正序</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Records</td>
<td>
 list&lt;ProcessInstance&gt;</td>
<td>返回结果</td>
</tr>
<tr>
<td>TotalCount</td>
<td>int</td>
<td>总数</td>
</tr>
<tr>
<td>PageSize</td>
<td>int</td>
<td>页面大小</td>
</tr>
<tr>
<td>PageNumber</td>
<td>int</td>
<td>页号</td>
</tr>
<tr>
<td>Pages</td>
<td>int</td>
<td>总页数</td>
</tr>
<tr>
<td>FirstPage</td>
<td>bool</td>
<td>是否是第一页</td>
</tr>
<tr>
<td>LastPage</td>
<td>bool</td>
<td>是否是最后一页</td>
</tr>
</table>

**ProcessInstance**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>流程实例 ID</td>
</tr>
<tr>
<td>Name</td>
<td>string</td>
<td>流程名称</td>
</tr>
<tr>
<td>Description</td>
<td>string</td>
<td>流程描述</td>
</tr>
<tr>
<td>StartedBy</td>
<td>string</td>
<td>创建人</td>
</tr>
<tr>
<td>StartUserId</td>
<td>string</td>
<td>创建人 ID</td>
</tr>
<tr>
<td>CanRevoke</td>
<td>bool</td>
<td>是否允许撤回</td>
</tr>
<tr>
<td>CcTime</td>
<td>long</td>
<td>抄送时间</td>
</tr>
<tr>
<td>CcId</td>
<td>string</td>
<td>抄送 ID</td>
</tr>
<tr>
<td>CurrentApprover</td>
<td>string</td>
<td>当前审批人</td>
</tr>
<tr>
<td>StartTime</td>
<td>long</td>
<td>流程开始时间</td>
</tr>
<tr>
<td>EndTime</td>
<td>long</td>
<td>流程结束时间</td>
</tr>
<tr>
<td>IsCompleted</td>
<td>bool</td>
<td>审批是否完成</td>
</tr>
<tr>
<td>CurrentNodeId</td>
<td>string</td>
<td>当前审批节点 ID</td>
</tr>
<tr>
<td>CurrentNodeName</td>
<td>string</td>
<td>当前审批节点名称</td>
</tr>
<tr>
<td>CurrentNodeType</td>
<td>int</td>
<td>当前审批节点类型</td>
</tr>
<tr>
<td>TaskId</td>
<td>string</td>
<td>当前审批节点的任务 ID</td>
</tr>
<tr>
<td>FlowCode</td>
<td>string</td>
<td>流程定义的 FlowCode</td>
</tr>
<tr>
<td>FlowVersion</td>
<td>string</td>
<td>流程定义的版本</td>
</tr>
<tr>
<td>CanApprove</td>
<td>bool</td>
<td>是否具有审批权限</td>
</tr>
<tr>
<td>CanDelete</td>
<td>bool</td>
<td>是否能够删除流程实例</td>
</tr>
<tr>
<td>Status</td>
<td>int</td>
<td>流程结束状态，1：终止，2：驳回，3：同意</td>
</tr>
<tr>
<td>BeSubmitNode</td>
<td>bool</td>
<td>是否是提交节点</td>
</tr>
</table>




**Body 参数示例**
<dx-codeblock>
:::  js
 {
    "UserInfo": {
        "UserId": "1519239780903088129",
        "Type": 4
    },
    "PageNumber": 1,
    "PageSize": 10,
    "PageType": "TODO"
}

:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "Data": {
            "Records": [
                {
                    "InstanceId": "1554430936495865858",
                    "Name": "administrator提交的kong页面预发测试复用",
                    "Description": "kong页面预发测试复用",
                    "StartedBy": "administrator",
                    "CanRevoke": false,
                    "CcTime": null,
                    "CcId": null,
                    "CurrentApprover": "",
                    "StartTime": 1659440190000,
                    "EndTime": 0,
                    "IsCompleted": false,                    "CurrentNodeId": "handleNode1658740983395",
                    "CurrentNodeName": "处理节点",
                    "CurrentNodeType": null,
                    "TaskId": "1554431187151667201",
                    "FlowCode": "1554326000705142787",
                    "FlowVersion": "27.0",
                    "CanApprove": false,
                    "CanDelete": null,                   
                    "TaskStartTime": 1659440250000,
                    "TaskWaitTime": 60971032,
                    "TaskDealTime": null,
                    "TaskDealResult": 0,
                    "OperationName": "处理",
                    "UserTaskType": 2,
                    "Status": null,
                    "BeSubmitNode": false,
                    "Buttons": {
                        "2": "处理"
                    },
                    "BeRead": true, 
                    "IsSupportBatchHandle": true
                },
                {
                    "InstanceId": "1554411407090827265",
                    "Name": "administrator提交的kong页面预发测试复用",
                    "Description": "kong页面预发测试复用",
                    "StartedBy": "administrator",
                    "CanRevoke": false,
                    "CcTime": null,
                    "CcId": null,
                    "CurrentApprover": "",
                    "StartTime": 1659435534000,
                    "EndTime": 0,
                    "IsCompleted": false,
                    "CurrentNodeId": "handleNode1658740983395",
                    "CurrentNodeName": "处理节点",
                    "CurrentNodeType": null,
                    "TaskId": "1554411501026459650",
                    "FlowCode": "1554326000705142787",
                    "FlowVersion": "27.0",
                    "CanApprove": false,
                    "CanDelete": null,      
                    "TaskStartTime": 1659435556000,
                    "TaskWaitTime": 65665034,
                    "TaskDealTime": null,
                    "TaskDealResult": 0,
                    "OperationName": "处理",
                    "UserTaskType": 2,
                    "Status": null,
                    "BeSubmitNode": false,
                    "Buttons": {
                        "2": "处理"
                    },
                    "BeRead": true,
                    "IsSupportBatchHandle": true
                }          
            ],
            "TotalCount": 35,
            "PageSize": 10,
            "PageNumber": 1,
            "Pages": 4,
            "FirstPage": true,
            "LastPage": false
        }
    }
}

:::
</dx-codeblock>





[](id:step13)
### 根据类型查询流程实例总数
>?本接口对应企业工作台拉取各类审批任务个数。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/ListProcessInstancesCount
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应资源未发布），prod：正式环境（对应资源已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>UserInfo</td>
<td>UserInfo</td>
<td>是</td>
<td>当前用户信息</td>
</tr>
<tr>
<td>PageType</td>
<td>string</td>
<td>否</td>
<td>页面类型：TODO：待办，DONE：已办，CREATE：创建，CC：抄送，DRAFT：草稿</td>
</tr>

</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>TotalCounts</td>
<td>
 list&lt;TotalCountByType&gt;</td>
<td>流程实例总数列表</td>
</tr>
</table>

**TotalCountByType**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Total</td>
<td>int</td>
<td>流程实例总数</td>
</tr>
<tr>
<td>PageType</td>
<td>string</td>
<td>页面类型</td>
</tr>
</table>




**Body 参数示例**
<dx-codeblock>
:::  js
{
    "UserInfo": {
        "UserId": "1519239780903088129",
        "Type": 4
    },
    "PageType": "TODO"
:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "kongtest-777",
        "Data": {
            "TotalCounts": [
                {
                    "Total": 17,
                    "PageType": "DONE",
                },
                {
                    "Total": 35,
                    "PageType": "TODO",
                },
                {
                    "Total": 2,
                    "PageType": "DRAFT",
                },
                {
                    "Total": 10,
                    "PageType": "CC",
                },
                {
                    "Total": 51,
                    "PageType": "CREATE",
                }
            ]
        }
    }
}

:::
</dx-codeblock>




[](id:step14)
### 提交流程审批任务列表
>?本接口对应企业工作台审批时指定下一节点审批人，假设流程配置包含 审批节点A->审批节点B，审批节点B 配置了上一节点指定审批人，审批节点A调用接口4完成审批后，需要调用本接口指定审批节点B的审批人。


请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/SubmitFlowTaskList
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>FlowTaskIds</td>
<td> list&lt;string&gt;</td>
<td>是</td>
<td>待提交审批任务 ID 列表，值为[接口4]出参 WaitFlowTaskId</td>
</tr>

</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>bool</td>
<td>操作结果</td>
</tr>
</table>

**Body 参数示例**
<dx-codeblock>
:::  js
{
    "FlowTaskIds": [
        "1575337230827069442",
        "1575337230827069444"
    ]
}
:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "e9caa0f9bf0b9",
        "Data": {
            "Result": true
        }
    }
}

:::
</dx-codeblock>


[](id:step15)
### 催办
>?审批任务一天最多可催办3次，第二天次数重置。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/PressTask
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>是</td>
<td>流程实例 ID</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>bool</td>
<td>操作结果</td>
</tr>
</table>

**Body参数示例**
<dx-codeblock>
:::  js
{
  "InstanceId": "1580800040917700609"
}

:::
</dx-codeblock>

**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "e9caa0f9bf0b9",
        "Data": {
            "Result": true
        }
    }
}
:::
</dx-codeblock>




[](id:step16)
### 撤销
>?撤销功能需要在人工节点高级属性中开启，审批开始节点高级属性可配置发起人撤销，非审批开始节点、处理节点可配置审批人撤销。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/Revoke
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>TaskId</td>
<td>string</td>
<td>是</td>
<td>当前审批任务 ID</td>
</tr>
<tr>
<td>Revoker</td>
<td>UserInfo</td>
<td>是</td>
<td>撤销人信息</td>
</tr>
<tr>
<td>RevokerType</td>
<td>int</td>
<td>是</td>
<td>撤销类型，1：审批人撤销，2：发起人撤销</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>bool</td>
<td>操作结果</td>
</tr>
</table>

**Body 参数示例**
<dx-codeblock>
:::  js
{
  "Revoker": {
    "UserId": "1558049980829474819",
    "Type": 4
  },
  "TaskId": "1580772187253673985",
  "RevokeType": 1
}
:::
</dx-codeblock>

**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "e9caa0f9bf0b9",
        "Data": {
            "Result": true
        }
    }
}


:::
</dx-codeblock>



[](id:step17)
### 加签
>?加签功能一般用于会签场景，需要在人工节点高级属性中开启。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/AddCounterSignAssignee
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>TaskId</td>
<td>string</td>
<td>是</td>
<td>当前审批任务 ID</td>
</tr>
<tr>
<td>Approver</td>
<td>UserInfo</td>
<td>是</td>
<td>当前审批人信息</td>
</tr>
<tr>
<td>AssigneeIds</td>
<td>list&lt;string&gt;</td>
<td>是</td>
<td>加签人列表</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>bool</td>
<td>操作结果</td>
</tr>
</table>

**Body 参数示例**
<dx-codeblock>
:::  js
{
  "Approver": {
    "UserId": "1558049980829474819",
    "Type": 4
  },
  "TaskId": "1580756089389092866",
  "AssigneeIds": ["1559148626461061122"]
}

:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "e9caa0f9bf0b9",
        "Data": {
            "Result": true
        }
    }
}


:::
</dx-codeblock>




[](id:step18)
### 获取可回退的节点列表
请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/GetPreElementList
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>InstanceId</td>
<td>string</td>
<td>是</td>
<td>流程实例 ID</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>ElementInfoList</td>
<td>list&lt;ElementiInfo&gt;</td>
<td>可回退的节点列表信息</td>
</tr>
</table>



**ElementInfo**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>ElementId</td>
<td>string</td>
<td>是</td>
<td>节点 ID</td>
</tr>
<tr>
<td>ElementName</td>
<td>string</td>
<td>是</td>
<td>节点名称</td>
</tr>
<tr>
<td>ActTaskId</td>
<td>string</td>
<td>是</td>
<td>审批任务 ID</td>
</tr>
<tr>
<td>ApproveType</td>
<td>int</td>
<td>是</td>
<td>1：审批开始节点，2：非审批开始节点</td>
</tr>
<tr>
<td>LastNode</td>
<td>bool</td>
<td>是</td>
<td>是否为最后一个节点</td>
</tr>
</table>



**Body 参数示例**
<dx-codeblock>
:::  js
{
  "InstanceId": "1580763678206234626"
}

:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "108b2329b9521",
        "Data": {
            "ElementInfoList": [
                {
                    "ElementId": "approvalNode1661763351191",
                    "ElementName": "审批节点1",
                    "ActTaskId": "1582268451725860868",
                    "ApproveType": 2,
                    "LastNode": true
                },
                {
                    "ElementId": "approvalNode1660217576658",
                    "ElementName": "审批节点",
                    "ActTaskId": "1582268388094210050",
                    "ApproveType": 1,
                    "LastNode": false
                }
            ]
        }
    }
}

:::
</dx-codeblock> 


[](id:step19)
### 回退
>?回退功能需要在人工节点高级属性中开启，调用该接口前，需要先调用[接口18]获取可回退的节点列表。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/RollBack
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>UserInfo</td>
<td>UserInfo</td>
<td>是</td>
<td>当前审批人</td>
</tr>
<tr>
<td>TaskId</td>
<td>string</td>
<td>是</td>
<td>当前审批任务 ID</td>
</tr>
<tr>
<td>TargetNodeId</td>
<td>string</td>
<td>是</td>
<td>回退到之前节点的节点 ID</td>
</tr>
<tr>
<td>TargetActTaskId</td>
<td>string</td>
<td>是</td>
<td>回退到之前节点的任务 ID</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>bool</td>
<td>操作结果</td>
</tr>
</table>


**Body 参数示例**
<dx-codeblock>
:::  js
{
  "UserInfo": {
    "UserId": "1558049980829474819",
    "Type": 4
  },
  "TaskId": "1580763839900848130",
  "TargetNodeId": "approvalNode1660217576658",
  "TargetActTaskId": "1580763678239789057"
}


:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "e9caa0f9bf0b9",
        "Data": {
            "Result": true
        }
    }
}

:::
</dx-codeblock>





[](id:step20)
### 查询消息列表
>?该接口对应企业工作台消息中心列表。

请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/DescribeWorkflowMessages
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>UserInfo</td>
<td>UserInfo</td>
<td>是</td>
<td>当前登录用户信息</td>
</tr>
<tr>
<td>PageNo</td>
<td>int</td>
<td>是</td>
<td>页面编号，从1开始</td>
</tr>
<tr>
<td>PageSize</td>
<td>int</td>
<td>是</td>
<td>页面大小，最大200</td>
</tr>
<tr>
<td>SearchTitleName</td>
<td>string</td>
<td>否</td>
<td>消息标题搜索关键字</td>
</tr>
<tr>
<td>MessageType</td>
<td>int</td>
<td>否</td>
<td>消息类型：0：待办，2：站内信</td>
</tr>
<tr>
<td>Status</td>
<td>string</td>
<td>否</td>
<td>消息状态，READ_DONE：已读，READ_TODO：未读</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>TotalCount</td>
<td>int</td>
<td>消息总条数</td>
</tr>
<tr>
<td>ResponseList</td>
<td>list&lt;MessageContent&gt;</td>
<td>消息列表</td>
</tr>
</table>

**MessageContent**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>MessageType</td>
<td>int</td>
<td>消息类型：0：待办，2：站内信</td>
</tr>
<tr>
<td>MainTitle</td>
<td>string</td>
<td>主标题</td>
</tr>
<tr>
<td>SubTitle</td>
<td>string</td>
<td>子标题</td>
</tr>

<tr>
<td>MessageText</td>
<td>string</td>
<td>消息内容</td>
</tr>
<tr>
<td>MessagePageLink</td>
<td>string</td>
<td>消息页面地址</td>
</tr>
<tr>
<td>MessageId</td>
<td>string</td>
<td>消息 ID</td>
</tr>
<tr>
<td>CreateTime</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>UpdateTime</td>
<td>string</td>
<td>更新时间</td>
</tr>
</table>



**Body 参数示例**
<dx-codeblock>
:::  js
{
  "UserInfo": {
    "UserId": "1558049980829474819",
    "Type": 4
  },
  "PageNo": 1,
  "PageSize": 10,
  "SearchTitleName": "",
  "MessageType": 0,
  "Status": "READ_DONE"
}



:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
:::  js
{
    "Response": {
        "RequestId": "1bf0c8e1180d6",
        "Data": {
            "TotalCount": 188,
            "ResponseList": [
                {
                    "MessageType": 0,
                    "MainTitle": "处理提醒",
                    "SubTitle": "处理提醒",
                    "MessageText": "kongtest，请尽快处理流程kongprod，有人等急了哦！",
                    "MessagePageLink": "https://lowcode-1gk9y5ik310a94df-1307578329.tcloudbaseapp.com/adminportal/#/app/app-1bfche6y-preview/udud5ucot9?envType=preview&flowTaskId=1582268470990434306&pageType=TODO",
                    "MessageId": "1582268587512393730",
                    "Status": "READ_TODO",
                    "CreateTime": "2022-10-18T15:13:23.000+0800",
                    "UpdateTime": "2022-10-18T15:13:23.000+0800"
                }
            ]
        }
    }
}


:::
</dx-codeblock>



[](id:step21)
### 查询消息个数
请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/DescribeWorkflowMessageCount
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>UserInfo</td>
<td>UserInfo</td>
<td>是</td>
<td>当前登录用户信息</td>
</tr>
<tr>
<td>MessageType</td>
<td>int</td>
<td>是</td>
<td>消息类型：0：待办，2：站内信</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>list&lt;MessageCount&gt;</td>
<td>消息个数</td>
</tr>
</table>

**MessageCount**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>MessageType</td>
<td>int</td>
<td>消息类型</td>
</tr>
<tr>
<td>WaitingCount</td>
<td>int</td>
<td>待处理消息数</td>
</tr>
<tr>
<td>FinishCount</td>
<td>int</td>
<td>已处理消息数</td>
</tr>
</table>



**Body 参数示例**
<dx-codeblock>
::: js
{
  "UserInfo": {
    "UserId": "1558049980829474819",
    "Type": 4
  },
  "MessageType": 0
}




:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
::: js
{
    "Response": {
        "RequestId": "a9991b4c52b03",
        "Data": {
            "Result": [
                {
                    "MessageType": 0,
                    "WaitingCount": 175,
                    "FinishCount": 13
                }
            ]
        }
    }
}


:::
</dx-codeblock>




[](id:step22)
### 更新消息状态
请求方式：POST
请求地址：
```html
https://{envId}.{region}.tcb-api.tencentcloudapi.com/weda/workflow/v1/{envType}/UpdateWorkflowMessageStatus
```

**Query 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>envType</td>
<td>string</td>
<td>是</td>
<td>weda 环境类型，pre：预览环境（对应流程未发布），prod：正式环境（对应流程已发布）</td>
</tr>
</table>


**Body 参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="15%">是否必填</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>UserInfo</td>
<td>UserInfo</td>
<td>是</td>
<td>当前登录用户</td>
</tr>
<tr>
<td>MessageIdList</td>
<td>list&lt;string&gt;</td>
<td>是</td>
<td>消息 ID 列表</td>
</tr>
<tr>
<td>Status</td>
<td>string</td>
<td>是</td>
<td>更新消息状态，READ_DONE：已读，READ_TODO：未读</td>
</tr>
</table>


**返回参数**
<table>
<tr>
<th width="20%">字段</th>
<th width="15%">类型</th>
<th width="50%">描述</th>
</tr>
<tbody>
<tr>
<td>Result</td>
<td>bool</td>
<td>操作结果</td>
</tr>
</table>



**Body参数示例**
<dx-codeblock>
:::  js
{
  "UserInfo": {
    "UserId": "1558049980829474819",
    "Type": 4
  },
  "MessageIdList": ["1580041268610727937"],
  "Status": "READ_DONE"
}



:::
</dx-codeblock>


**返回参数示例**
<dx-codeblock>
::: js
{
    "Response": {
        "RequestId": "e9caa0f9bf0b9",
        "Data": {
            "Result": true
        }
    }
}

:::
</dx-codeblock>
