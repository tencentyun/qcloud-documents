## 上传人选

### 功能说明
- 上传人选：对于人选池中评估情况较好的人选，可补充相关内容并提交至管理员侧审核，审核通过后即可上传至人才库小程序上，以供面试官查看。
- 上传人选审核：管理员可对上传人选进行审核，并将审核状态返回给负责上传的 HR 。管理员系统可单独对接，也可从人员招聘管理系统修改而来。


### 单击提交审核后的逻辑设计

1. 人选信息列表的人选有4种状态，在数据源中由一个字段 resumeStatus 标识，该字段为 number 类型。
![](https://main.qcloudimg.com/raw/d656c08151185d921ae21e75a2557756.png)
状态与 resumeStatus 映射关系如下：
 - 未上传：0
 - 审核中：1
 - 审核通过：2
 - 审核拒绝：3
2. 单击**提交审核**，表单中的数据通过数据源云函数的调用更新到数据源中，同时改变数据源中该字段标识数值，更改人选信息状态。
3. 例如在 PC 端单击**上传人选**，实现将该人选状态从未上传转为审核中。
![](https://main.qcloudimg.com/raw/1e411e9742392c7af382139798b9be00.png)
4. 上述变化通过改变该字段标识数值实现，以1作为新的数值代替0，状态由未上传变为审核中，如下图所示。
![](https://main.qcloudimg.com/raw/67d5271788fc08dea87ffe6329989161.png)
5. 人选的四种状态之间关系如下：一开始人选信息通过录入人选功能按键录入后，人选信息状态为未上传，通过**上传人选**功能按键，人选状态可由未上传变为审核中，这是在 PC 端 HR 能实现的状态转变，而将人选状态从审核中变为审核通过或审核失败，是小程序端的面试官能实现的状态转变。 
![](https://main.qcloudimg.com/raw/b36513e9a6a10f409d9c26fb43b454c6.png)

### 对接开发者自有数据源

人选信息列表页面用到的数据源为专家管理，数据源标识为 POST，针对该数据源有多条方法，涵盖增删改查等操作：
- `getRecordsAll`：最开始获取页面数据用到的数据源方法。
- `groupFiled`：生成图表分析用到的数据源方法。
- `delete`：删除单条数据用到的数据源方法。
- `uploadOperation`：设置后续安排表头对应数据用到的数据源方法。

这些方法都可在数据源 POST 中进行相关查看。
![](https://main.qcloudimg.com/raw/ea320960d1d28278a2a618d2b3df53f4.png)
>?开发者可针对自己的审核系统，设计自己的数据源，或引入已有的外部数据源。但建议复用已写好的逻辑，充分利用模板的价值。

>!当遇到自有的审核系统数据库和模板的数据源字段不同的情况时，应先了解模板数据源的字段各自的含义以及数据源方法的实现，针对自有的数据库进行适用性调整。

## 图表分析

### 功能说明
图表分析：可根据人选的信息生成相关分析图（饼图或柱状图）。

### 图表分析对接数据源
1. 图表类型可以通过饼图和柱状图功能按键进行切换，切换效果基于分段选择组件实现。
![](https://main.qcloudimg.com/raw/f9cfa2f58eae48aa5d57710092e68cf8.png)
2. 通过一个状态变量控制，绑定的低代码方法中通过操作该状态变量为 bar 还是 pie 实现柱状图和饼状图的切换。
![](https://main.qcloudimg.com/raw/163e28e84be91dd21e5b3fa2aa08d70d.png)
3. 图表具体生成通过基本柱状图组件和基本饼图组件完成，按照一定的数据格式向该组件提供数据，即可生成相应的柱状图和饼状图。
![](https://main.qcloudimg.com/raw/12b3df9230f28cc472fc52cece8caae6.png)
4. 提供的数据通过 POST 数据源中的 `groupFiled` 方法获取：
	- `gender` ：性别，
	- `interviewStatus`： 当前面试流程，
	- `resumeStatus`：审核状态，

以上三个字段需要在获取数据后，对其进行一个映射关系处理，具体的映射处理在 `candidateManage` 页面的 `generateChart` 函数中可以看到。
![](https://main.qcloudimg.com/raw/d7b82bde320e3f613201e896c846f273.png)
5. 通过映射关系处理生成图如下图所示的字段，例如 `gender` 字段不做映射处理，男女比例仍然能在图表中正常显示，但是图标下方的男女字段不能正常显示，而是1和2，这是由于在数据源中这些字段是以数字标识的，如果不做映射处理，将会直接以数据源中存储的数字显示。
![](https://main.qcloudimg.com/raw/90622694be09ee6f519033cd2df6b902.png)
6. 数据进行映射处理后赋值给图表分析绑定的状态变量，图表即可正常生成。
![](https://main.qcloudimg.com/raw/175885342fe2b14bd19facce249714fc.png)
7. 批量导入数据需遵循以下数据格式，要求 `interviewStatus` 当前面试流程字段以数值形式填入表格中。
![](https://main.qcloudimg.com/raw/3badf297ad39c6ad5129bbcf25244359.png) 
`interviewStatus` 当前面试流程有5个状态：
	- 全新简历：1
	- 面试中：2
	- 面试失败：3
	- 入职中：4
	- 已入职：5
>!以这种形式在 Excel 表中填写 批量导入后在人选信息列表页面就会自动显示相应的面试流程，如果不按这种规格输入数据，则图表不能正常生成。
>
Excel 表格批量导入后，由 HR 输入的信息会存储在数据源中，并在人选信息列表页面展示出来。gender 性别字段应按实际情况填写男或女。其他字段也应该根据语义进行相应正确填写
![](https://main.qcloudimg.com/raw/6d6fe92e2503db05128cf3ccc52a4912.png)

### 对接开发者自有数据源

图表分析功能用到的生成图表的数据是从数据源 POST 中通过 groupFiled 方法获取，如您想在原数据源中添加字段，可基于原有 POST 数据源进行字段增加，如您已有自己的数据库，则可在了解原模板图表分析功能实现逻辑的基础上，进行修改。
![](https://main.qcloudimg.com/raw/bf362536e4fbae8e4ab378e1a74f7c57.png)

### 扩展为其他类型的图表

您可以通过更改图表组件，或添加数据展示组件，实现对数据的多种图表不同形式展现。 
