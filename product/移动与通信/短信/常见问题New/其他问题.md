### 用户没有收到短信怎么处理？
登录 [短信控制台](https://console.cloud.tencent.com/sms) ，单击目标应用名称进入应用详情页，选择【国内短信】（或【国际短信】）>【统计分析】>【短信记录】，查看对应号码的短信【发送状态】和【备注】。
- 如果【发送状态】为失败，可结合【备注】中的失败原因说明进一步排查，常见原因有请求命中了频率控制策略、短信内容格式不正确或手机号已因退订加入黑名单中等。
- 如果【发送状态】为成功，但【备注】中提示错误码，请根据具体 [错误码](https://cloud.tencent.com/document/product/382/3771) 信息进一步排查。
- 如果【发送状态】为成功且【备注】中提示“用户短信接收成功”，但是用户实际并未收到短信，可以从以下几个方面进行排查：
 - 手机关机、欠费或停机：检查手机状态，例如拨打手机确认。
 - 手机号处于黑名单状态：确认机主是否投诉过运营商或退订过业务。
 - 手机长时间未关机引起无法正常接收短信：可以尝试重启手机。
 - 手机信号异常引起无法正常接收短信：检查手机信号，必要时可尝试重启手机。
 - 手机收件箱满：可尝试删除多余短信。
 - 手机设置异常或硬件异常引起无法正常接收短信：可尝试修改相关设置或将 SIM 卡换到其他手机上进行测试（双卡手机可交换卡槽测试）。
 - 短信被用户手机中的系统/软件拦截屏蔽：检查屏蔽列表。

如仍然无法解决，请咨询 [ sms helper](/document/product/382/3773) 。

### <span id="jump">调用接口耗时比较长怎么办</span>？
如果发现访问腾讯云短信接口时请求耗时较长，可参考以下方法进行定位：
1. 执行`dig yun.tim.qq.com`命令，确认是否使用内网 DNS。若是使用内网 DNS，则选择一个就近的同运营商的腾讯云短信 IP 配置 host，排查问题是否解决。
  - 如果问题已解决，则说明可能是 DNS 解析卡住或者 DNS 解析跨地域运营商访问引起的时延，建议使用 DNS 代理或配置公网 DNS server。
  - 如果问题未解决，请执行 [步骤2](#Q2step2)。
<span id="Q2step2"></span>  
2. 检查业务使用哪种连接模式以及是否使用连接池。
 - 如果业务使用单条长连接，根据 HTTP 一应一答的模式，前面的请求卡住会影响该连接上的后续请求。建议优化成“长连接 + 连接池”模式。
 - 如果业务使用短连接，用 netstat 确认本机连接数是否已满。如果连接数已满，建议优化成“长连接 + 连接池”模式。
 - 用 netstat 确认或用 tcpdump 抓包确认连接的 Recv-Q 和 Send-Q 是否存在积压。如果存在积压，建议优化成“长连接 + 连接池”模式。
 - 如果某条连接长时间（90s）没有请求时，为了防止中间网络设备回收该连接，建议请求方先关闭该连接，等下次发起请求且连接池中连接不够用时再新建连接。

### 为什么用户很久才收到短信？

1. 查看本地记录的请求发送时间和控制台上记录的该短信发送时间，计算两者之间的时间差。
 - 如果时间差较大（例如接近甚至超过10分钟），则可能是因为调用接口有时延，请参考 [调用接口耗时比较长](#jump) 解决。
 - 如果时间差较小，请执行 [步骤2](#Q3step2)。
<span id="Q3step2"></span>  
2. 在控制台查询该短信【发送时间】与【状态上报时间】，计算两者之间的时间差。
 - 如果时间差较大（例如普通短信超过数10秒，营销短信超过5分钟），可能原因有短信内容有敏感词进入人工审核、手机信号不佳或手机处于异常状态（例如欠费或停机）等。
 - 如果时间差较小，可能原因有手机信号不佳或手机处于异常状态（例如关机）等。
3. 如果以上场景都不满足，请咨询 [sms helper](/document/product/382/3773) 。

### 手机黑名单是什么？

目前黑名单有以下类型：
- 退订用户名单，用户主动对短信内容进行退订回复，例如回复“T”、“N”、“TD”、“退订”、“T退订”、“QX”或“0000”等（不区分大小写），系统收到回复后会将其手机号加入黑名单中。再次下发短信时会返回发送失败并备注“1015手机号在黑名单库中”，且用户无法成功接收短信。
 您可以登录 [短信控制台](https://console.cloud.tencent.com/sms) ，单击目标应用名称进入应用详情页，选择【应用配置】>【退订用户管理】页面提交解除退订状态申请，审核通过后生效。
- 运营商黑名单，该类用户因不同原因被运营商定为黑名单。下发短信时会返回发送成功，但是可能会因为被运营商网关拦截或其他原因导致用户无法成功接收短信。

### 返回1004错误如何处理？
调用腾讯云短信接口发送短信时，如果应答包返回1004错误，可通过以下方式定位解决：
1. 检查发送的请求是否为标准的 JSON 格式，建议您到网上搜索 JSON 格式检查工具进行排查校验。例如，误将单引号当做双引号使用，而标准的 JSON 格式应该是使用双引号。
2. 检查参数名称是否正确。
3. 检查请求的字段类型是否与 [API 文档](https://cloud.tencent.com/document/product/382/3776) 中描述的字段类型一致。 例如，将 JSON 字符串和 JSON 整型混淆使用（`{"姓名":"小明", "年龄":23}`，"姓名"应为 JSON 字符串，"年龄"应为 JSON 整型）。
4. 检查请求的字段的取值是否在 API 文档中描述的取值范围内。 例如，international 字段只能取0或1。
5. 检查对 API 的调用是否与 API 文档描述的一致。 例如，调用群发短信的 API 时，包体的格式不能是单发短信的。
6. 如果仍旧无法解决，请咨询 [ sms helper](/document/product/382/3773) 。

### 返回1014错误如何处理？
调用腾讯云短信接口发送短信时，如果应答包返回1014错误，可通过以下方式定位解决：
1. 确认申请的内容模版格式是否正确。例如内容模版中的“{}”为英文的括号，括号中的数字需从1开始连续编号，即{1}，{2}等。
2. 确认请求内容对应的模版是否审批通过。
3. 确认请求包中 type 参数的值（0表示普通短信，1表示营销短信）与申请的内容模版类型是否一致。
4. 确认请求的内容与申请的内容模版格式是否一致，例如**因空格等不可见字符导致不匹配。**
5. 如果内容中含有中文，请确认中文需使用 utf-8 编码。
6. 国内文本短信模板只能发国内手机号，国际短信模板只能发海外手机号。
7. 如果仍旧无法解决，请咨询 [ sms helper](/document/product/382/3773) 。

### 返回1016错误如何处理？
调用腾讯云短信接口发送短信时，如果应答包返回1016错误，可通过以下方式定位解决：
1. 确认 AppID 和 AppKey 是否正确。
2. 确认手机号码格式是否正确。**手机号码正确格式为连续数字，无需输入空格。**
3. 确认字段名称是否正确。


### 返回60008错误如何处理？
调用腾讯云短信接口发送短信时，如果应答包返回60008错误，可通过以下方式定位解决：
1. 如果请求在1s内响应60008错误码，请确认请求格式是否是标准 HTTP 格式。
2. 确认请求的 URL 及 Body 格式是否与 API 相符。
3. 确认请求 Content-Type 是否与包体相符（短信服务应该是`Content-Type: application/json;charset=utf-8`）。
4. 确认 DNS 配置是否正常，确保使用的是公网 DNS server。
5. 推荐业务使用 HTTP 长连接并使用连接池，以提升网络质量。
6. 如果仍旧无法解决，请咨询 [sms helper](/document/product/382/3773)。

### 返回1001（sig 校验失败）错误如何处理？
调用腾讯云短信接口发送短信时，如果应答包返回1001错误，可通过以下方式定位解决：
1. 确认 sig 生成的随机数与 URL 中的随机数是否一致。
2. 确认代码中的 sdkappid/appkey（sdkappid:14000开头）是否有填写错误。
3. 确认使用的代码是否跟示例代码一致，检查带入参数生成的 sig 伪代码是否一致。

### 其他常见错误码详解？
详情请参见 [其他错误码](/document/product/382/3771#1-.E7.9F.AD.E4.BF.A1.E5.8F.91.E9.80.81.E9.94.99.E8.AF.AF.E7.A0.811)。


### 腾讯云短信发送后，对方收到信息是否可以回复，回复是否有时间限制？
对方需要在72小时内回复才有效，回复信息支持查看。

### 开通腾讯云短信后，发送消息的号码是什么？
发送消息的号码13 - 20位，1069开头，尾数是运营商的随机号码。

### 不同的手机在同一时间，是否可以发送不同的短信内容？
可以多进程调用单发接口，实现对不同手机号发送不同短信内容。
