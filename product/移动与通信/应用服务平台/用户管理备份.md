基于小程序云开发的用户登录注册 DEMO

![预览](https://ask.qcloudimg.com/draft/1011618/piih5pivk8.png)

## 预览 DEMO

### 下载或 clone 代码包
```javascript
git clone https://github.com/TencentCloudBase/tcb-demo-user.git
```

### 填入小程序 appid
用 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html)，打开上一步下载下来的代码仓库，填入小程序的 appid（使用云开发能力必须填写 appid）。

### 创建 Collection
在云开发控制台中，创建 `users` 和 `status` 两个 `collection`，用于存储登录态以及用户资料。

### 填入云开发环境 id

云函数的相关配置，请参考 `cloud/functions下/**/config` 目录下的 `example.js`，建立 `index.js` 文件写相关配置详见 `example`。

本demo中，自定义登录态的有效时间是在 `loginRegister` 函数中的配置中的有效时间结合微信的 `session_key` 有效时间的，数据库存放当前的 `session` 最长有效时间（相应的可在 `loginRegister` 相应的 `config.js` 中进行配置）、客户端也在`onLoad` 中检测 `session` 是否有效。[文档参考](https://developers.weixin.qq.com/miniprogram/dev/api/api-login.html)

### 安装依赖及上传云函数
使用 `npm i --production` 给 `loginRegister` 和 `verifyIdentity` 安装依赖，完成后在开发 `IDE` 里将两个云函数上传。

## 体验
单击小程序开发 IDE 中的“预览”，用微信扫一扫即可体验
