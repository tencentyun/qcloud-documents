云存储包括**文件管理**、**权限设置**和**缓存配置**三部分内容，您可以将文件上传到云存储空间，使用 SDK 调用存储功能，详情请参见 [云存储管理](https://cloud.tencent.com/document/product/876/19376)。





## 文件管理

1. 进入云开发控制台 [云存储](https://console.cloud.tencent.com/tcb/storage/index) 页面。
2. 单击**新建文件夹**或**上传文件夹**，在云存储内创建文件夹。
![](https://main.qcloudimg.com/raw/be32b99e2922ef1a0d6d672d77904504.jpg)
3. 创建完毕，单击文件夹名称可进入文件夹内部进行文件管理。
4. 文件管理基础操作如下：
 - **上传文件**：单击**上传文件**，可进行文件的上传。
 - **删除**：勾选需要删除的文件，单击列表上方**删除**，进行文件批量删除；或者单击文件右侧操作列的**删除**，删除当前文件。
 - **下载**：单击文件右侧操作列的**下载**，可下载当前文件。
![](https://main.qcloudimg.com/raw/09842848dddd6b20e43a7fa3b1da877a.jpg)
 - **查看详情**：单击文件右侧操作列的**详情**，系统将在页面右侧弹出文件信息框，可进行文件预览，并查看文件信息和存储位置。
![](https://main.qcloudimg.com/raw/f2259ad0a478b7276fccdb078592be4d.jpg)



## 权限设置

1. 进入云开发控制台 [云存储](https://console.cloud.tencent.com/tcb/storage/index) 页面。
2. 单击**权限设置**，进入权限设置页面。
![](https://main.qcloudimg.com/raw/4583b1f19aa4bf355bd378d9a9504ac9.jpg)
3. 单击权限，可设定云存储的文件读写权限，您可根据场景进行权限设定。
![](https://main.qcloudimg.com/raw/2b1670d8aec0498bc9a211d8934582f0.jpg)
4. 单击**自定义安全规则**，您还可以选择自定义安全规则，进行高级权限设置，如需了解更多安全规则内容，详情请参见 [安全规则](https://cloud.tencent.com/document/product/876/36414)。
![](https://main.qcloudimg.com/raw/6b760e50683b62a504ff09254e46f89c.jpg)



## 缓存设置

1. 登录 [腾讯云云开发控制台](https://console.cloud.tencent.com/tcb) ，依次单击**文件管理** > **缓存配置**，您即可查看**缓存配置**模块。
   ![](https://main.qcloudimg.com/raw/33d3b5a4d8d14ddafade1f5d4eb28cbe.png)
2. 单击**编辑**，您可以根据自身业务需求，在默认配置上添加缓存时间配置。
   ![](https://main.qcloudimg.com/raw/611206de4f90fa6359d19bff5d87582d.png)
   支持三种配置方式：
   - 按**文件类型**设置缓存过期时间
     - 配置缓存时间时可填入多项，每项用 `;` 隔开，内容区分大小写，必须是以 `.` 开头的文件后缀，例如 `.png`。
     - 刷新时间设置为 0 时，不缓存，所有请求转发至用户源站，缓存时间设置最大值不能超过 365 天。
     - 输入框默认提示：例如 `.png`，`.jpg`，`.php`。
   - 按**文件夹**设置缓存过期时间
     - 配置缓存时间时可填入多项，每项用 `;` 隔开，内容区分大小写，必须是以 `/` 开头的文件夹。
     - 刷新时间设置为 0 时，不缓存，所有请求转发至用户源站，缓存时间设置最大值不能超过 365 天。
   - 按**文件**设置缓存过期时间
     配置缓存时间时可填入多项，每项用 `;` 隔开，内容区分大小写，支持匹配某一类型文件，例如 `/test/abc/\*.jpg`。
3. 单击**保存**，将进行配置部署，您需等待 5 分钟左右。
>? 配置部署中，若您再次编辑缓存配置，会覆盖之前的配置。以最后一次部署结果为准。

### 什么是缓存配置

- 云存储内的文件默认 CDN 加速，开发者可以通过改变缓存配置来控制 CDN 遵循的过期规则。
- 合理地配置缓存时间，能够有效的提升命中率，降低回源率，节省您的带宽。
> ? 缓存配置分为浏览器缓存配置和节点缓存配置，用户访问资源会首先请求浏览器内的缓存，若无缓存就会去节点请求，若节点有缓存则返回资源，无缓存则回源获取。

### 缓存配置简介
通过合理配置缓存，可以提高用户访问资源的速度，并降低回源率。
- 浏览器缓存针对客户端浏览器缓存进行配置。
  - 若浏览器缓存时间未过期，用户请求发起后，返回浏览器缓存文件。
  - 若浏览器缓存时间已过期，用户请求发起后，访问 CDN 节点缓存文件。
- CDN 节点上缓存的用户资源也面临“过期”问题。 
  - 若资源处于未过期状态，用户请求到达节点后，节点会将此资源直接返回给用户，提升获取速度。 
  - 若资源处于过期状态（即超过了设置的有效时间），用户请求会由节点发送至源站，重新获取内容并缓存至节点，同时返回给用户。

### 设置方式

- 按**文件类型**设置缓存过期时间。
  - 配置缓存时间时可填入多项，每项用`;`隔开，内容区分大小写。
  - 输入框默认提示：请按以下格式输入：`.jpg;.png;.css`。
- 按**文件夹**设置缓存过期时间。
  - 配置缓存时间时可填入多项，每项用`;`隔开，内容区分大小写，必须是以/开头的文件夹。
  - 输入框默认提示：请按以下格式输入：`/test;/a/b/c` （不能以“`/`”结尾）。
- 按**文件**类型设置缓存过期时间。
  - 配置缓存时间时可填入多项，每项用`;`隔开，内容区分大小写，必须是以`.`开头的文件后缀，例如`.png`。
  - 输入框默认提示：请按以下格式输入：`/index.html;/test/*.jpg;`。

> ! 
> - 刷新时间设置为0时，不缓存，所有请求转发至用户源站；缓存时间设置最大值不能超过365天。
> - 在控制台中上传文件/文件夹，会自动刷新节点内的缓存文件。
> - 配置部署中，若您再次编辑缓存配置，会覆盖之前的配置。以最后一次部署结果为准。

### 策略优先级

配置项列表**底部**优先级高于**顶部**优先级。您可以拖动列表中的调整优先级的移动图标即可调整优先级。
>?当设置了多条缓存策略时，相互之间会有重复。

假如某域名已配置如下缓存配置：

| 目标            | 缓存时长 |
| --------------- | -------- |
| 所有文件        | 2分钟    |
| .php .jsp .aspx | 0秒      |
| .jpg .png .gif  | 300秒    |
| /test/*.jpg     | 400秒    |
| /test/abc.jpg   | 200秒    |

假设域名为`www.cloud.tencent.com`，资源为`www.cloud.tencent.com/test/abc.jpg`，其匹配方式如下：

- 匹配第五条，命中，此时缓存时间为200秒。
- 匹配第四条，命中，此时缓存时间为400秒。
- 匹配第三条，命中，此时缓存时间为300秒。
- 匹配第二条，未命中。
- 匹配第一条所有文件，命中，此时缓存时间为2分钟。        

因此最终缓存时间为2分钟，以最后一次匹配生效。
