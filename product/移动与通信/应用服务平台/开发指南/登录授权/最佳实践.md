## 避免重复登录

执行登录流程之前，我们非常建议您**先判断用户端是否已经登录 CloudBase**，如已经登录，那么不需要执行登录流程，以**避免无意义的重复登录**。
<dx-codeblock>
:::  js
const auth = app.auth();

// 应用初始化时
if (auth.hasLoginState()) {
  // 此时已经登录
} else {
  // 此时未登录，执行您的登录流程
}
:::
</dx-codeblock>

## 登录状态的持久保留

您可以指定登录状态如何持久保留。默认为 `local`，相关选项包括：

| 值        | 说明                                                       |
| --------- | ---------------------------------------------------------- |
| `session` | 在 SessionStorage 中保留登录状态，当前页面关闭后会被清除。 |
| `local`   | 在本地存储中长期地保留登录状态。                           |
| `none`    | 在内存中保留登录状态，当前页面刷新、重定向之后会被清除。   |

例如，对于网页应用，最佳选择是 `local`，即在用户关闭浏览器之后仍保留该用户的会话。这样，用户不需要每次访问该网页时重复登录，避免给用户带来诸多不便体验。
<dx-codeblock>
:::  js
const auth = app.auth({
  persistence: "local"
});
:::
</dx-codeblock>

