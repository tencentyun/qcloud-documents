
## 什么是小程序·云开发
小程序·云开发是基于腾讯云的 [云开发 TCB](https://cloud.tencent.com/product/tcb) 的一站式小程序后端云服务。

开发者可以使用云开发开发微信小程序、小游戏，无需搭建服务器，即可使用云端能力。

云开发为开发者提供完整的云端支持，弱化后端和运维概念，无需搭建服务器，使用平台提供的 API 进行核心业务开发，即可实现快速上线和迭代，同时这一能力，同开发者已经使用的云服务相互兼容，并不互斥。

目前提供三大基础能力支持：
- 云函数：在云端运行的代码，微信私有协议天然鉴权，开发者只需编写自身业务逻辑代码。
- 数据库：一个既可在小程序前端操作，也能在云函数中读写的 JSON 数据库。
- 存储：在小程序前端直接上传/下载云端文件，在云开发控制台可视化管理。

## 用小程序·云开发制作你的博客小程序

### 下载或 clone 代码仓库
```javascript
git clone https://github.com/TencentCloudBase/tcb-demo-blog.git
```

### 启动项目
用微信开发者工具，打开上一步下载下来的代码仓库，填入小程序的 AppID（使用云开发能力必须填写 AppID）。

>**注意**：
现在 2.2.3 或以上的基础库没有完全覆盖所有用户（目前约 90% ），如需使上传的代码能够覆盖全量用户，请做以下特殊处理：

1. 在 app.json / game.json 中增加字段 "cloud": true
2. 添加 `https://servicewechat.com` 为 request 可信域名，添加 `https://tcb-api.tencentcloudapi.com` 为 uploadFile 和 downloadFile 的可信域名

经过处理后会默认打入基础库 2.2.3 中附带的云能力，并且如果云能力有更新，并不会随着基础库升级而自动升级，需在后续版本发布后重新上传。如 2.2.4 发布后，需重新上传才能将云能力更新至 2.2.4 版本的云能力。


### 开通云开发
创建了第一个云开发小程序后，在使用云开发能力之前需要先开通云开发。在开发者工具工具栏左侧，单击 “云开发” 按钮即可开通云开发。云开发开通后自动获得一套云开发环境，各个环境相互隔离，每个环境都包含独立的数据库实例、文件存储空间、云函数配置等资源。每个环境都有唯一的环境 ID 标识，初始创建的环境自动成为默认环境。我们推荐，使用其中一个环境 `test` 作为测试环境，另一个环境 `release`，作为正式环境。

### 获取环境 id
在【云开发控制台】 -> 【概览】中，如下图，复制【环境 ID】。如果你想先换或者新增环境，可以在右上角的按钮上操作。
![](https://ask.qcloudimg.com/draft/1011618/qnjkz6o3n8.png)

### 小程序端配置环境 id
请到 `client/app.js` 文件中，填写上一步获取的【环境 ID】，如果不填，则表示使用默认环境。
```javascript
wx.cloud.init({
    env: '', // 前往云开发控制台获取环境id，如果使用默认环境则不需要填写
    traceUser: true
});
```

## 云函数配置环境 id
请到 `cloud/functions/addblog/index.js` 文件中，填写【环境 ID】，如果不填，则表示使用默认环境。
```javascript
cloud.init({
    env: '' // 前往云开发控制台获取环境id，如果使用默认环境则不需要填写
});
```

## 安装云函数依赖

```javascript
// 安装依赖
cd cloud/functions/addblog/
npm install --production
```

### 上传云函数
在 IDE 中，右键云函数对应的文件夹，点击“上传并部署”菜单。
![](https://ask.qcloudimg.com/draft/1011618/cfblkz69zz.png)

## 新建 collection
在小程序开发 IDE 中的，【云开发控制台】 > 【数据库】中，添加集合 `blog`。
![](https://user-images.githubusercontent.com/3348398/44449753-993f6380-a621-11e8-900e-34706eb7a39b.png)

## 体验
单击小程序开发 IDE 中的“预览”，用微信扫一扫即可体验。恭喜你，你的第一个博客小程序已经做好啦！
