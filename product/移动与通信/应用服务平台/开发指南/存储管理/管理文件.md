## 操作场景
本文档主要指导您如何进行文件管理、权限设置和缓存配置。

## 文件管理
### 腾讯云云开发控制台
1. 登录 [云开发控制台](https://console.cloud.tencent.com/tcb)，单击环境名称，单击【文件管理】。
2. 进入文件管理页面，您可以查看云存储空间中所有的文件。
  ![](https://main.qcloudimg.com/raw/9fe1a5b83dcb3422693fc0c763c9c6dd.png)
3. 单击文件对应的【详情】操作，即可查看关于此文件的所有信息，如文件名称、文件大小、存储位置等。

### 小程序云开发控制台
1. 启动微信开发者工具，打开小程序项目，选择【云开发】>【存储】
  ![](https://main.qcloudimg.com/raw/386c1ad4beecb2ac38d40f66a43333b4.png)
2. 单击文件名或【详情】，即可查看关于此文件的所有信息，如文件名称、文件大小、存储位置等。


## 权限设置
如需设置文件权限，选择【权限设置】，根据实际需求，勾选存储桶权限并保存。
- 腾讯云云开发控制台权限设置：
  ![](https://main.qcloudimg.com/raw/7ae8270ba923e833f1e2cd6877885377.png)
- 小程序云开发控制台权限设置：
  ![](https://main.qcloudimg.com/raw/537d78a373a8bee2d2d3c8d5a6427b5f.png)


## 缓存配置
#### 什么是缓存配置
- 云存储内的文件默认 CDN 加速，开发者可以通过改变缓存配置来控制 CDN 遵循的过期规则。
- 合理地配置缓存时间，能够有效的提升命中率，降低回源率，节省您的带宽。
- CDN 节点上缓存的用户资源都面临“过期”问题。
 - 若资源处于未过期状态，用户请求到达节点后，节点会将此资源直接返回给用户，提升获取速度。
 - 若资源处于过期状态（即超过了设置的有效时间），用户请求会由节点发送至源站，重新获取内容并缓存至节点，同时返回给用户。

#### 如何进行缓存配置
>! 目前仅支持腾讯云云开发控制台进行缓存配置。

1. 登录 [腾讯云云开发控制台](https://console.cloud.tencent.com/tcb) ，依次单击【文件管理】>【缓存配置】，即可查看**缓存配置**模块。
![](https://main.qcloudimg.com/raw/edaf100d6406e042d1ec20652bb6bf88.png)
2. 单击【编辑缓存配置】，您可以根据自身业务需求，在默认配置上添加缓存时间配置。	默认配置是对所有文件缓存2分钟。
![](https://main.qcloudimg.com/raw/36b0bc3e3ff5d6dbea59dbdd12409ebd.png)
3. 单击【保存】，将进行配置部署，您需等待5分钟左右。

支持三种配置方式：
   - 按**文件类型**设置缓存过期时间。
    - 配置缓存时间时可填入多项，每项用;隔开，内容区分大小写，必须是以.开头的文件后缀，例如 .png。
    - 刷新时间设置为0时，不缓存，所有请求转发至用户源站；缓存时间设置最大值不能超过365天。
    - 输入框默认提示：例如 .png，.jpg，.php。
   - 按**文件夹**设置缓存过期时间。
    - 配置缓存时间时可填入多项，每项用;隔开，内容区分大小写，必须是以/开头的文件夹。
    - 刷新时间设置为0时，不缓存，所有请求转发至用户源站；缓存时间设置最大值不能超过365天。
   - 按**全路径文件**设置缓存过期时间。
     配置缓存时间时可填入多项，每项用;隔开，内容区分大小写，支持匹配某一类型文件，例如 /test/abc/*.jpg。

>?配置部署中，若您再次编辑缓存配置，会覆盖之前的配置。以最后一次部署结果为准。

#### 策略优先级
配置项列表**顶部**优先级高于**底部**优先级。您可以拖动列表前面的移动图标即可调整优先级。
当设置了多条缓存策略时，相互之间会有重复。
假如某域名已配置如下缓存配置：

|目标  |缓存时长|
|-------|----------|
|所有文件|2分钟|
|.php .jsp .aspx| 0秒|
| .jpg .png .gif |300秒|
| /test/*.jpg |400秒|
| /test/abc.jpg |200秒	|

假设域名为`www.test.com`，资源为`www.test.com/test/abc.jpg`，其匹配方式如下：
- 匹配第五条，命中，此时缓存时间为200秒。
- 匹配第四条，命中，此时缓存时间为400秒。
- 匹配第三条，命中，此时缓存时间为300秒。
- 匹配第二条，未命中。
- 匹配第一条所有文件，命中，此时缓存时间为2分钟。        


 因此最终缓存时间为2分钟，以最后一次匹配生效。
