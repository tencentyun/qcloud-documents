云开发支持用户根据自身业务情况灵活调整套餐。

## 操作步骤

1. 登录 [云开发控制台](https://console.cloud.tencent.com/tcb)，选择需要调整的环境，单击左侧菜单【环境设置】。
2. 进入环境设置页面，单击【调整配置】。
3. 选择需要调整的套餐，如果费用较旧套餐费用高，会进入付费下单流程，反之会进入退费下单流程。
![](https://main.qcloudimg.com/raw/1b8f4fece4f9ca3a83d5fcb035b5ab02.jpg)

如果当前套餐资源使用量已超过目标配置的资源配额，则当前计费周期内不能变更为目标套餐，建议更换其他套餐或者下个计费周期再做套餐变更。具体详情请参考 [套餐变更限制](#套餐变更限制)。

## 套餐变更费用说明
>?满足套餐变更条件下，套餐变更需要付费记为升配操作，套餐变更需要退费记为降配操作。

### 包年包月资源升配
- 升配费用 = 按月升配差价 × 升配天数 / (365 / 12) × 适用折扣
  - 按月升配差价：新老配置原价按月的单价。
  - 升配的费用按天计算：升配天数 = 资源到期时间 - 当前时间。
  - 适用折扣：根据升配天数向下匹配适用折扣。
  - 折扣为现网生效的折扣。
- 升配不影响资源到期时间。
- 升配可以使用代金券和平台赠送余额（赠送金）抵扣费用。

#### 计费示例
>?以下价格仅作示例用，非官网实际价格，实例单价请参见 [云开发产品定价](https://cloud.tencent.com/document/product/876/39095)。

#### 背景
2019年11月1日，购买3个月专业版套餐，到期时间为2020年2月1日，包年包月单价为100元/月。

案例：
2019年12月15日，将该套餐升级为1000元/月的企业版套餐。
- 按月升配差价 = 1000 - 100 = 900元/月
- 升配天数 = 31 × 1 + 15 + 1 = 47天（1指1月份为31天，15指12月份剩余15天， 1指2月份1天）
- 适用折扣：暂无折扣
- 升配费用 = （1000 - 100） × 47 /（365 / 12） = 1390.53元

### 包年包月资源降配

- 降配费用 = 资源清退退款 - 资源新购费用
- 资源清退退款：按照非全额退款规则计算退款金额，
  
具体计算方法为：退款金额 = 当前有效订单金额 + 未开始订单金额 - 资源已消费金额
  其中：
   1. 当前有效订单金额/未开始订单金额：付费现金
   2. 资源已消费金额 =（已使用时长 / 总时长）× 订单金额
  - 资源新购费用：按新购的价格及对应折扣进行计算购买金额。
  - 若退费金额 > 0，实施配置降级，退还费用将以原路退还的方式退还到您到腾讯云账户。
  - 若退款金额 <= 0，实施配置降级但不退费。
  - 若购买时使用折扣或代金券，折扣和代金券不予退还。

#### 计费示例

>?以下价格仅作示例用，非官网实际价格，实例单价请参见 [云开发产品定价](https://cloud.tencent.com/document/product/876/39095)。

#### 背景
2019年11月1日，购买3个月企业版套餐，到期时间为2020年2月1日，包年包月单价为1000元/月。

#### 案例

2019年12月15日，将该套餐降配为100元/月的专业版套餐。
资源清退退款 = 1000 × 3 - [（30 × 1 + 15）/ (30 + 31 × 2 + 1)] × 1000 = 2516.13元（30指11月份30天，2指12、1两个月， 1指2月份1天）
- 资源新购费用 = [（31 × 1 + 15 + 1）/（365 / 12）] × 100 = 154.5元
- 降配费用 = 2516.13 - 154.5 = 2361.63 元


<span id="套餐变更限制"></span>
## 套餐变更限制
出现以下情形时，系统将限制用户变更套餐：
1. 存储容量、数据库容量以及数据库集合数量超过目标套餐上限将无法变更套餐。用户可以清理资源后再进行变更操作。
2. 存储下载次数、上传次数、CDN 回源流量、CDN 流量、云函数调用次数、云函数资源使用量、云函数外网出流量超过目标套餐上限将无法变更套餐。可在下一计费周期再进行变更操作。
3. 数据库读操作次数和数据库写操作次数超过目标套餐上限后，可选择下一自然日再进行配额调整或强制调整。强制调整将导致已超限资源本自然日内无法继续使用。

>?小程序云开发的配置调整请参见 [配额调整规则](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/billing/adjustment-rule.html)。


#### 示例
背景：小明在2019年11月1日购买2个月的企业版1资源套餐，到期时间为2020年1月1日。

案例一：
在2019年11月15日时 CDN 用量已达145G，此时小明想调整资源到专业版1，但因专业版1的 CDN 流量上限为50G，用户当前用量已经超过专业版上限，出于保证用户服务考虑，当前计费周期内不能调整为专业版1。用户可以在下个计费周期，各个资源都满足不超过目标套餐上限的条件下调整配置。

案例二：
在2019年11月15日时存储容量已达95G，此时小明想调整资源到专业版1，因专业版1的存储容量上限为50G，用户当前用量已经超过目标套餐的上限值，所以不能降配。此时，小明可通过清理部分存储文件降低当前用量到目标套餐上限值以下，再尝试变配操作。

案例三：
在2019年11月15日当天的数据库读操作数已达200万次，此时小明想调整资源到专业版1，因专业版1的数据库读操作上限为150万，用户当前用量已经超过目标套餐的上限值，所以不建议用户降配。但小明可选择强制降配或第二天降配，如果选择强制降配，则服务有关数据库读服务都将停止。

