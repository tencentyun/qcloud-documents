### 为什么会返回 30001 错误码？

30001 错误可能的原因有：
1. 请求参数非法；
2. 用户 A 发起加好友请求，请求添加用户 B 为好友，但 B 已经在 A 的好友表里。
3. 用户 A 发起删除好友请求，请求删除好友 B，但 B 不在 A 的好友表里。
4. 用户 A 发起更新好友请求，请求更新好友 B 的关系链数据，但 B 不在 A 的好友表里。
5. 用户 A 发起拉取指定好友请求，请求拉取好友 B 的资料关系链数据，但 B 不在 A 的好友表里。
6. 用户 A 发起加黑名单请求，请求将用户 B 加入黑名单，但 B 已经在 A 的黑名单里。
7. 用户 A 发起删除黑名单请求，请求将用户 B 移出黑名单，但 B 不在 A 的黑名单里。

即时通信 IM 后台在返回错误码的同时，还会返回详细错误信息，用户可以根据错误信息判断返错的原因。

### 调用资料/关系链系统的 REST API 返回 30004/40004 错误码怎么处理？

资料关系链系统的请求包中有一个 From_Account 字段，该字段用于标识请求的发起方，当请求包中的 From_Account 字段与请求的实际发起方不一致时，即时通信 IM 后台会认为这是 App 后台发起的请求，这时会检查当前请求是否有 App 管理员权限，如果请求的实际发起方不是管理员，则返回30004/40004错误。

### 非好友发送消息如何设置？

如果需要非好友可以发送消息，请在 [即时通信 IM 控制台](https://console.cloud.tencent.com/im) 关闭单聊消息检验关系链，如非好友不能发送消息则开启验证，配置生效时间为5分钟。
