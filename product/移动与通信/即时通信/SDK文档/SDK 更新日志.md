## 最新精简版 5.3.425 @2021.04.19

### SDK

- 支持设置会话置顶
- 支持设置单聊消息免打扰
- 支持发送不计入未读的消息
- 支持在没有网络登录失败的情况下获取本地会话和消息数据
- iOS 版本新增 xcframework ( 支持 Mac Catalyst)
- 新增获取会话未读总数的接口
- 个人资料补齐 birthday 字段
- 修复其他成员撤回群 @ 消息后，被 @ 成员对应会话仍然包含群 @ 提醒的问题
- 修复部分安卓手机长连接初始连网成功后会出现一次断网重连的问题
- 修复 iOS 版本创建群不支持设置自定义字段的问题
- 修复特殊帐号用户 findMessage 查询不到本地消息的问题

## 最新标准版 5.1.60 @2021.04.06

**iOS 平台**

- 优化 SDK 因使用 IDFA 相关关键字可能导致上架 App Store 被拒的问题


## 5.2.212 @2021.04.06 - 精简版

**iOS 平台**

- 优化 SDK 因使用 IDFA 相关关键字可能导致上架 App Store 被拒的问题

## 5.2.210 @2021.03.12 - 精简版

### SDK
**通用变更点**
- 支持消息合并转发的能力
- 长连接连网逻辑优化，重点提升海外连网质量
- 细化登录错误码，对登录时网络是否正常进行区分
- cos 上传逻辑优化，提升富媒体消息发送体验
- 增加获取历史消息的高级接口
- 增加批量获取会话的接口
- 增加批量检查好友关系的接口
- 修复发送失败的消息再次发送之后会在本地数据库生成两条消息的问题
- 修复群成员资料变更时回调的禁言时间不正确的问题
- 修复接收图片消息时回调的图片宽度不正确的问题
- 修复 logLevel 设置为 None 之后控制台仍然会打印日志的问题
- 修复添加好友的 add_source 字段不正确的问题
- 修复发送超过 24M 的视频文件时，发送进度回调偶现负数的问题


## 5.1.56 @2021.03.03 - 标准版

### SDK

**通用变更点**

- 优化网络长连接逻辑，重点提升海外连网质量
- 优化数据上报，细化网络超时相关的错误码
- 修复若干稳定性问题

**iOS 平台**

- 修复 iOS SDK 提取日志偶现失败的问题

**Android 平台**

- Android SDK 替换新的日志组件，提升稳定性

**Windows 平台**

- 修复 Windows SDK 抛新消息回调时，可能会出现客户线程阻塞 SDK 逻辑线程的问题

## 5.1.138 @2021.02.05 - 精简版
### SDK

**通用变更点**
- 优化日志
- 完善长连接连网策略，优化海外连网质量
- 修复同一秒内收发多条 C2C 消息，偶现会话的最后一条消息不准确的问题
- 修复查询会话列表偶现没有回调的问题
- 修复发送 C2C 消息偶现消息序号不准确的问题

**Android 平台**
- 修复 Android 平台下发送大于 24MB 视频时，上传进度偶现负数的问题
- 修复 Android 平台下发送消息偶现 crash 的问题

## 5.1.50 @2021.02.05 - 标准版

### SDK

- V2 消息对象补齐 random 字段
- 会话 lastMsg 支持撤回消息
- 优化 getMessage 获取的最后一条消息状态偶现异常的问题
- 优化收到消息后频繁拉取用户资料导致消息延迟的问题
- 优化删除账号可能导致拉取群成员列表失败的问题
- 优化 insertLocalMessage 之后调用 findMessage 可能查不到消息的问题
- 优化删除会话会回调会话更新的问题
- Android 优化群历史消息昵称更新不及时的问题
- iOS 优化数据库稳定性问题

### TUIKit & Demo
- Android 优化 TUIKit 查看未下载成功的原图会显示黑屏问题
- iOS  优化国际化相关问题
- iOS  优化同一个时间戳发送多张图片导致的覆盖问题
- iOS  优化 iOS 14系统群组详情页点击添加&删除按钮无响应的问题
- iOS  优化 iOS 14系统退出群聊回到消息列表 Tab 栏消失的问题

## 5.1.21 @2021.01.15 - 标准版

### SDK

**Android 平台**

- 修复 Android 平台带 extension 扩展字段的自定义消息发送失败的问题。

### TUIKit & Demo
**iOS/Android**

- 完善国际化支持，清理英文语言版本下部分字符串仍然显示为中文的问题。


## 5.1.137 @2021.01.29 - 精简版

### SDK

**通用变更点**
- 修复使用多台 iOS 设备或者使用多台 Android 设备，反复登录同一个账号后，偶现登录接口没有回调的问题

**Android 平台**
- 修复低配 Android 机型获取日志路径偶现 crash 的问题


## 5.1.136 @2021.01.27 - 精简版

### SDK

**通用变更点**
- V2 API 添加回调日志的接口
- 修复群 @ 消息中被 @ 用户 UserID 为空的问题
- 修复偶现收取不到直播群消息的问题
- 修复网络频繁重连偶现登录状态不对的问题
- 修复离线被踢后重新登录偶现失败的问题
- 修复 DNS 域名解析偶现 crash 的问题


## 5.1.132 @2021.01.22 - 精简版

### SDK

**通用变更点**
- 网络模块支持过载保护
- 修复标准版升级精简版，偶现部分会话丢失的问题
- 修复登录信息过期收不到 onUserSigExpired 回调的问题
- 修复群成员被踢出群后，接着重新进群，再次收到 onMemberKicked 回调


## 5.1.131 @2021.01.19 - 精简版

### SDK

**通用变更点**
- 增加单条消息转发的接口
- 优化直播群消息接收逻辑，直播群接收消息时不再查询消息发送者的昵称和头像
- 修复删除会话的最后一条消息时，没有抛会话更新的问题
- 修复登录完成之后，做 C2C 消息同步时，偶现 C2C 会话的未读数被清零的问题
- 修复离线再上线之后，做同步会话列表时，没有更新会话最后一条消息的问题

**Android 平台**
- 修复 Android 平台下设置自定义消息的 description 字段，设置个人资料的 level 和 role 字段不能生效的问题
- 修复 Android 平台下反初始化时偶现 crash 问题


## 5.1.129 @2021.01.13 - 精简版

### SDK

**通用变更点**
- 修复获取会话列表时，没有会话更新，也触发会话更新回调的问题
- 修复清空会话所有消息时，没有把对应会话的最后一条消息置空的问题

**iOS 平台**
- 修复 iOS 平台下 getSignallingInfo 方法传入非信令消息返回的不是 nil 的问题

**Android 平台**
- 修复 Android 平台下偶现 JNI 局部引用表超限导致的 crash 问题


## 5.1.20 @2021.01.08 - 标准版

### SDK

**通用变更点**

- V2 自定义消息补齐 desc 和 ext 字段
- V2 用户资料接口补齐 role 和 level 字段
- V2 接口优化无论登录成功与否，都可以获取本地会话列表数据以及本地历史消息数据
- V2 增加 getHistoryMessageList 接口，支持获取云端或本地消息以及向前向后拉取
- 优化 C2C 消息获取头像问题
- 优化富媒体消息文件上传的安全性问题及续期问题
- 修复发送的富媒体消息的本地路径为空的问题
- 修复向群内插入一条本地消息，退出重新登录后该会话的 lastMessage 显示为上一条消息问题
- 修复 Elem 乱序的问题
- 修复群@消息撤回，消息列表@提示仍存在问题
- 修复离线期间的群@消息，上线后拉取群历史消息会拉到该系统消息问题
- 修复发送一个语音通话的信令邀请，会接受到二条离线推送通知问题
- 修复聊天消息过多时，设置本地“消息自定义数据”失效问题
- 修复未读的群消息被撤回后，未读计数没有减少的问题
- 修复其他稳定性问题

**iOS & Mac**

- 修复自定义消息传 array json 接收端 crash 的问题
- 修复调用 deleteConversation 传错误的会话 id 直接闪退问题
- 修复草稿箱最后一条草稿删除不掉问题

### TUIKit & Demo

- iOS 修复删除好友/退群后未清除会话置顶信息
- iOS 修复控制台设置用户为管理员，界面仍显示为无管理员权限问题
- iOS 优化视频缩略图为空引起的 crash 问题
- iOS 修复撤回长文本消息后，撤回消息高度异常问题
- iOS 修复群禁言 tips 的不显示的问题
- iOS 优化国际化会话界面的时间显示
- Android 修复创建直播间进入倒计时过程，点击返回 crash 问题
- Android 修复群聊通话过程，成员拒接出现通话界面未消失问题
- Android 修复直播间观众小窗口模式被踢下线，小窗口未正常关闭问题
- Android 修复成员加群偶现 crash 问题


## 5.1.125 @2021.01.08 - 精简版

### SDK

**通用变更点**
- V2 API 消息对象增加 random 字段
- V2 API 自定义消息增加描述信息 description 和扩展信息 extension 字段
- V2 API 用户资料对象新增用户角色 role 和用户等级 level 字段
- 修复从 4.8.1 以下（不包含）版本升级到精简版时，遇到的数据库兼容性问题
- 修复自己主动发送的消息，偶现还能收到这条消息回调的问题
- 修复当自己没有加入任何群组时，获取加入的群列表没有回调的问题
- 修复设置群消息接收选项时，没有会话更新回调的问题
- 修复会话同步逻辑偶现没有结束回调的问题
- 修复会话同步逻辑偶现 crash 的问题


## 5.1.123 @2020.12.31 - 精简版

### SDK

**通用变更点**
- 修复 Android 版本收不到 RESTAPI 下发的群自定义系统消息的问题
- 优化消息 random 字段的生成方法
- 优化日志打印方便定位问题
- 修复网络模块偶现 crash 的问题

## 5.1.122 @2020.12.25 - 精简版

### SDK

**通用变更点**
- 修复设置会话草稿可能没有回调的问题
- 修复 findMessage 查找消息时，没有补全消息发送者信息的问题
- 修复插入本地消息后通过 findMessage 查找消息可能失败的问题
- 修复设置群消息接收选项时没有更新会话对象的问题
- 修复个人昵称头像或群昵称头像变更时，没有抛会话变更通知的问题
- 修复插入本地消息时，没有更新对应会话最后一条消息的问题
- 个人资料更新周期开启云端控制

**iOS 平台**
- 修复 iOS 平台下字典和数组操作不当引发的偶现 Crash

**Android 平台**
- 修复 Android 平台下删除消息偶现 Crash 的问题

## 5.1.121 @2020.12.18 - 精简版

### SDK

**通用变更点**
- 优化群资料拉取逻辑，直播群不用拉取自己的群成员信息
- 完善日志打印，补齐设备类型字段
- 解决 C2C 会话里收到消息撤回通知时，没有更新对应会话最后一条消息状态的问题
- 修复直播群长轮询消息延时过大的问题
- 修复相同账号重复登录后再加入同一个直播群，消息长轮询模块没有更新消息拉取 key 的问题

**iOS 平台**
- 修复 iOS 平台消息自定义字段传入 json 数组时，接收端信令模块解析出现 Crash 的问题

**Android 平台**
- 修复 Android 平台设置会话草稿偶现 Crash 的问题

## 5.1.118 @2020.12.11 - 精简版

### SDK

**通用变更点**
- 优化消息去重逻辑，修复同一条消息可能会回调多次的问题
- 增加向本地插入 C2C 消息的接口
- 修复删除和撤回群的未读消息时，群未读计数不会减小的问题
- 修复发送失败的消息不能删除的问题
- 修复删除群会话时，如果已经退群或者对应的群已经解散，会回调删除失败的问题
- 修复设置群消息已读上报时，如果已经退群或者对应的群已经解散，会回调设置失败的问题

**iOS 平台**
- 修复个人资料设置签名失败的问题

**Android 平台**
- 修复添加好友黑名单偶现崩溃的问题
- 修复发送消息没有同步返回消息 ID 的问题

## 5.1.10 @2020.12.04 - 标准版

### SDK

**通用变更点**

- V2 API 增加群自定义字段和消息多 Element 支持
- V2 API 增加向本地插入 C2C 消息的接口
- 优化普通群和直播群丢消息问题
- 修复发送失败的消息无法删除的问题
- 修复 C2C 会话里，发送的第一消息是在线消息的情况下，收不到已读回执的问题
- 修复已经撤回的消息，通过拉历史消息的接口返回后，消息状态不正确的问题
- 修复 iOS 平台获取好友分组的接口传入空分组名时，不能返回所有分组信息的问题
- 修复若干稳定性问题

## 5.1.115 @2020.12.04 - 精简版

### SDK

**通用变更点**
- 优化信令超时时间与服务器时间同步
- 修复弱网下建连偶现失败的问题

**iOS 平台**
- 完善 API 头文件

**Android 平台**
- JSON 替换 Gson 修复崩溃问题

## 5.1.111 @2020.12.01 - 精简版

### SDK

**通用变更点**

- 完善日志打印
- 修复若干稳定性问题

## 5.1.2 @2020.11.11 - 标准版

### SDK

**iOS/Mac平台**

- iOS 支持 iPhone 和 iPad 同时在线
- Mac 支持 arm64 架构

**Android平台**
- 修复 Android 版本稳定性问题
- 替换为标准 TRTC 依赖包

## 5.1.110 @2020.11.26 - 精简版

### SDK

**通用变更点**

- 补齐 V2 API 的所有接口
- 补齐会话功能
- 补齐关系链功能
- 增加群@功能
- iOS 支持 iPhone 和 iPad 同时在线
- 发送消息支持多 Element
- 群资料补齐自定义字段
- 修复若干稳定性问题

## 5.1.1 @2020.11.05 - 标准版

### SDK

**iOS/Android平台**

- 增加获取 AVChatRoom 直播群在线人数的接口
- 增加根据消息唯一 ID 查询消息的接口
- 增加获取服务器校准时间戳的接口
- 优化登录速度
- 优化群资料拉取逻辑
- 修复退出群组之后拉不到本地消息的问题
- 修复发送成功的消息被第三方回调修改之后，发送端消息没有及时更新的问题
- 修复 Metting 会议群在经过控制台配置后，对应的会话仍然不支持未读数的问题
- 修复 AVChatRoom 直播群偶现收不到消息的问题
- 修复其它一些偶现的稳定性问题

### TUIKit & Demo

**iOS/Android**
- 群成员@支持`@所有人`
- TUIKit 组件国际化支持
- Android 版本发送图片消息时支持选择视频
- 优化音视频通话请求超时逻辑
- Android 离线推送更新为依赖 TPNS 的包
- 群直播增加开播动画
- 群直播增加直播小窗的支持

## 5.0.108 @2020.11.02 - 精简版

### SDK

**通用变更点**

- 修复 iOS 版本稳定性问题
- 修复 Android 版本偶现消息不回调问题

## 5.0.10 @2020.10.15 - 标准版

### SDK

**iOS/Android平台**

- 优化信令接口，支持设置在线消息 onlineUserOnly 和离线推送信息 offlinePushInfo 参数
- 优化获取单个会话接口的异步回调
- 会话增加获取群类型接口，方便会话列表展示过滤

### TUIKit & Demo

**iOS/Android**
- 新增 [群直播](https://cloud.tencent.com/document/product/269/48909) 功能，连麦、送礼、美颜、变声等功能一应俱全
- 新增 [直播大厅](https://cloud.tencent.com/document/product/269/48959)，支持连麦、PK、点赞、送礼、美颜、弹幕、好友关注等
- 优化语音视频信令识别问题


## 5.0.106 @2020.09.21 - 精简版

### SDK

**通用变更点**

- 修复已知稳定性问题

## 5.0.6 @2020.09.18 - 标准版

### SDK

**通用变更点**

- 增加群@功能
- iOS 和 Android 新增接口 deleteMessages，会同时删除本地及漫游消息
- 接口 deleteConversation 在删除会话的同时会删除本地及漫游消息
- API2.0 接口补充了用户资料、好友资料、群成员资料的自定义字段的设置和获取接口
- 优化图片上传兼容性问题
- 修复设置群消息接收选项再立即获取该值，该值未改变的问题
- 修复 C2C 本地会话删除后，C2C 的系统通知会更新会话，但是消息 elem 为空的问题
- 修复含中文的 userID 导致图片上传不成功的问题
- 修复带有特殊字符的账号设置用户 nickname 成功后，进群发消息，群内其他成员接收到新消息回调中 nickname 为空的问题
- 修复已知崩溃问题

**iOS 平台**

- 修复移除消息监听 crash 的问题
- 优化会话对象账号删除导致会话获取异常的问题
- 优化初始化卡顿问题

**Android 平台**

- 优化信令发送超时失败时的处理
- 修复信令取消接口的自定义数据无效的问题
- 修复群属性删除接口 keys 传 null 无法删除所有属性的问题
- 修复信令群呼叫接受或者拒绝后还能继续接受或拒绝的问题
- 修复 API2.0 接口多 Element 解析问题

**Windows 平台**

- 修复已知内存泄漏问题
- 优化日志上传问题
- 修复 PC 上某些机型相同账号同时登录不会互踢的问题
- 修复 PC 收到消息乱序的问题

### TUIKit & Demo

**iOS**

- 增加群@的功能
- 增加新表情包
- 更新 SDWebImage 依赖库
- 优化有人申请加群 UI 展示的问题
- 优化音视频通话文本展示

**Android**

- 增加群@的功能
- 修复建群选择联系人时可能展示的与实际选择不一致的问题
- 修复自定义消息可能显示混乱的问题
- 修复 AVCallManager、TRTCAVCallImpl 偶现 Crash 的问题
- 增加新表情包

## 5.0.102 @2020.09.04 - 精简版

### SDK

**通用变更点**

- 发布 Android & iOS 精简版 SDK
- 精简版 SDK 在原有标准版的基础上裁剪了好友和会话两项能力，并对部分业务逻辑做了优化，以实现更高的执行效率，更小的安装包增量

## 4.9.1 @2020.07.24 - 标准版

### SDK

**通用变更点**

- 优化境外登录问题
- 修复部分境外地区文件上传失败问题
- 修复含@符号的帐号上传文件失败问题
- 修复 C2C 未读数偶现错误问题
- 修复会话 showName 偶现展示异常的问题
- 文件类型消息增加获取下载 url 的接口

**iOS 平台**

- 修复断网时获取 C2C 消息无回调问题

**Android 平台**

- 修复信令解析接口偶现崩溃问题
- 修复消息中获取离线推送信息偶现崩溃问题
- 修复 API2.0 getFriendApplicationList 接口无数据不回调问题以及 getGroupMembersInfo 接口传入非群成员不回调问题

**Windows 平台**

- 获取加入群组时增加群组的详细信息
- 修复小文件发不出去问题
- 修复日志上报的6002错误

### TUIKit & Demo

**iOS**

- 增加音视频离线通话的推送，并可以跳转到接听界面
- 优化自定义消息删除、撤回无效的问题
- 优化界面
- 音视频代码 swift -> oc，大幅减少第三方依赖库
- 支持 LiteAV_TRTC、LiteAV_Professional 两种音视频依赖库 TUIKit pod 集成。

**Android**

- 优化 Demo 的离线推送，升级各厂商的推送 SDK 版本
- 增加音视频离线通话的推送，并可以跳转到接听界面


## 4.8.50 @2020.06.22 - 标准版

### SDK

**通用变更点**

- 修复 API 2.0 接口有人进入直播群（AVChatRoom）后没有回调 onMemberEnter 问题
- API 2.0 接口的 onGroupInfoChanged 和 onMemberInfoChanged 回调增加 groupID 参数
- 修复 C2C 消息发送成功后没有回调会话更新的问题
- 修复切换帐号加入同一个直播群（AVChatRoom）后收不到消息的问题
- 修复偶现登录后同步未读消息回调顺序不对的问题
- 增加信令接口
- 直播群（AVChatRoom）增加群自定义属性接口
- 修复已知崩溃问题

**Android 平台**

为兼容 Android Q 版本，修改日志默认存储位置为 /sdcard/Android/data/包名/files/log/tencent/imsdk

**Windows 平台**

修复建群时群成员角色问题

### TUIKit & Demo

**iOS**

- TUIKit 替换 API 2.0接口
- 结合 TRTC 实现了音视频通话功能
- 增加了深色模式

**Android**
- TUIKit 替换 API 2.0接口
- 结合 TRTC 实现了音视频通话功能
- 支持 AndroidX


## 4.8.10 @2020.05.15

### SDK

**通用变更点**

- iOS 和 Android 支持 IPv6
- 直播群（AVChatRoom） 支持群成员列表动态更新
- 修复 xlog 日志崩溃问题

**iOS & Mac 平台**

- 修复 iOS 发送大文件必现失败问题
- 修复 V2TIMMessage 消息中拉取发送者好友备注 getFriendRemark 异常的问题

**Android 平台**

- IM SDK 支持 AndroidX
- 修复 Android 设备由于网络权限问题导致的崩溃

## 4.8.1 @2020.04.30

### SDK

**通用变更点**

- iOS & Android 发布全新的 API 2.0 接口
- 修复某些场景下登录不同账户的会话错乱问题

## 4.7.10 @2020.04.23

### SDK

**通用变更点**

- 修复某些网络环境下登录超时的问题
- 修复某些场景下未读数不准确的问题

## 4.7.2 @2020.04.03

### SDK

**通用变更点**

修正一处数据错误

## 4.7.1 @2020.03.23

### SDK

**通用变更点**

- 优化了本地日志大小
- 优化了登录耗时
- 修复了未读计数多端同步问题
- 增加获取单个好友接口 getFriendList
- iOS & Android SDK 可以分别设置两个平台的离线推送通知栏消息要显示的标题和内容

## 4.6.102 @2020.02.28

### SDK

**通用变更点**

- 修复某些场景下拉取消息慢的问题
- 修复3.x版本音频消息向新版本发送的兼容性问题
- 修复获取会话列表有的 conversation 的 identifier 可能为空的问题
- 修复已知崩溃问题
- 修复 socks5 代理用户密码验证问题
- 优化群未决的处理逻辑
- 提高文件上传上限为100M
- 优化 COS 上传
- 修复没有好友时，获取好友列表返回异常问题


## 4.6.56 @2020.01.08

### SDK

**通用变更点**

- 优化频繁拉取用户资料的内存增长问题
- 优化用户资料特殊字符兼容性问题
- 修复已知崩溃问题
- 修复频繁切换不同帐号登录偶现失败问题
- 修复压力测试下的重连问题


## 4.6.51 @2019.12.23

### SDK

**通用变更点**

- 优化网络的连接质量，更快感知网络质量变化
- 优化 AVChatRoom 消息的处理

**iOS & Mac 平台**

- IMSDK 监听都修改为弱引用，不再强持有外部对象
- 消息新增 getSenderNickname 同步返回昵称的接口

**Android 平台**

- 修复离线被踢问题
- 修复上传进度回调在较低版本手机的异常问题
- 修复登录时的内存泄漏
- 消息新增 getSenderNickname 同步返回昵称的接口

**Windows 平台**

- 修复添加好友后发送消息失败问题
- 完善群信息、群成员信息的自定义字段的修改和查询
- 完善所有接口的回调，确保回调一定被调用；确保只有当回调成功时，才将对象转成 JSON 字符串，回调失败时，返回空字符串。

### TUIKit & Demo

**Android 平台**

- 会话列表头像支持圆角设置
- 修复置顶会话切换帐号时异常的问题


## 4.6.1 @2019.11.13

### SDK

**通用变更点**

- 撤回消息支持漫游
- 修复 REST API 静默邀请进群引发未读数错误
- 修复弱网下偶现发消息异常
- 修复获取群成员时，角色过滤条件错误逻辑
- 修复通过 REST API 创建的群组，第一次进群发消息，获取群 name 失败的问题
- 修复关闭缓存后 getUsersProfile 获取用户信息失败的问题
- 修复语音消息文件在没有后缀的情况下，接收后无法下载问题

**iOS & Mac 平台**

- 增加 OPPOChannelID 的设置，解决 Android 8.0 系统以上的 OPPO 手机接收 iOS 消息推送失败的问题
- 优化 getGrouplist 返回对象的注释

**Android 平台**

- 8.0 系统以上的 OPPO 手机离线推送的 channleID 支持在控制台设置
- 废弃 TIMCustomElem 的 ext、sound、desc 字段

**Windows 平台**

- 修复群系统消息的类型字段异常
- 修复返回的群组信息中群组类型与头文件不一致问题
- 修复创建群组时指定群组自定义字段失败问题
- 消息新增发送者资料以及离线推送配置

### TUIKit & Demo

**iOS**

- 增加视频通话功能
- 增加群组头像九宫格合成展示
- 优化会话列表、通讯录以及聊天界面 UI

**Android**

- 增加方法来设置对方已读回执是否展示
- 增加群组头像九宫格合成展示
- 优化会话列表、通讯录以及聊天界面 UI
- 解决部分手机输入法、界面、文件选择等兼容性问题
- 解决自定义消息会显示错乱的问题
- 解决压力测试下通讯录加载缓慢的问题
- 解决与其他库资源冲突的问题
- 解决 cache 目录设置不生效的问题

## 4.5.111 @2019.10.16

### SDK

**通用变更点**

- 修复获取群指定类型的成员列表接口的分页问题
- 发送文件类型消息时生成的 URL 增加格式后缀
- 群自定义字段修改后增加通知回调
- 未登录调用 initStorage 方法后，可以获取本地用户和群组信息
- 修复内存泄露问题
- 修复发送消息后撤回，消息状态码不正确问题
- 修复 getMessage 回调错误码不对问题
- 修复强杀 App 重启后单聊未读数错误问题

**iOS & Mac 平台**

  修复 Mac 休眠偶现一直登录失败问题

**Android 平台**

- 修复某些场景下的稳定性问题
- 修复离线推送在 Android 8.0 系统以上的 OPPO 手机无法接收离线推送问题
- 优化 getElementCount 接口的返回类型

**Windows 平台**

- 跨平台库优化各个平台的网络重连速度
- 修复 Windows 公开群设置管理失败问题
- 跨平台库新增 JVM 配置，方便 Android 环境传入 jvm

### TUIKit & Demo

**iOS**

- 支持与 Web 端互发语音消息
- 修复 swift 加载 TUIKit 资源文件找不到的问题
- 修复好友备注修改后，聊天界面看不到备注名的问题
- 修复会话置顶后会话列表不能及时刷新的问题

**Android**

- 支持与 Web 端互发语音消息
- 支持设置输入框样式
- 支持语音消息未读红点
- 修复 x86 设备视频消息不能播放的问题
- 修复 FileProvider 与集成端冲突的问题
- 修复部分机型上语音权限识别不到的问题
- 修复特定条件下头像不能正常加载的问题
- 修复偶尔气泡显示不全的问题

## 4.5.55 @2019.10.10

### SDK

**通用变更点**

- 修复多次切换不同网络时的崩溃问题
- 优化网络连接质量
- 优化部分 API 接口的注释

**Android 平台**

优化 Android 9.0 及以上版本对 HTTP 请求的限制

**iOS & Mac 平台**

优化 pod 集成


## 4.5.45 @2019.09.18

### SDK

**通用变更点**

- 优化网络连接的质量
- 修复删除群会话后，再收到新消息，修复未读数异常的问题
- 修复删除会话后，还能在会话更新回调里面获取到已删除会话的问题 
- 优化群/群成员自定义段拉取逻辑

**Android 平台**

废弃 TIMManager 中的 setOfflinePushListener 接口以及 TIMOfflinePushNotification 类

### TUIKit & Demo

**iOS**

- 修复 NSSting + Common.h 类冲突的问题
- 修复群 tips 消息展示不全的问题

**Android**

- 增加已读回执
- 兼容老版本正在输入显示
- 修复重发消息不能立即显示在聊天窗口最下方的问题
- 修复群聊时特定条件下不能显示头像的问题
- 修复不能显示多 elements 群消息的问题
- 修复特定消息导致的崩溃
- 修复群管理员权限错误的问题
- 修复 Web 端发送文件不能正常接收的问题

## 4.5.15 @2019.08.30

### SDK

**通用变更点**

- 优化境外用户发送文件消息的速度
- 修复消息撤回后通过 getLastMessage 获取该消息状态不对的问题；修复撤回监听多次回调的问题
- 后台修复群成员被禁言后，退群再进群获取禁言时间异常问题
- 修复 msg 时间主动修改后，savemsg 的时候时间不生效的问题
- 修复偶现登录无回调的问题
- 修复被撤回群消息的 rand 和 timestamp 为空的问题
- 修复登出状态下回调 UserSig 过期的问题；修复登出状态下仍然断网重连的问题

**Android 平台**

- 后台支持 Android 端的 FCM 推送
- 修复获取指定的好友分组，传入 null 时报错问题
- 修复特定场景下 checkEquals 接口崩溃问题

**Windows平台**

- MessageLocator 新增 unique_id 字段
- Windows 版本支持64位
- 跨平台库新增用户资料接口以及关系链接口

### TUIKit & Demo

**iOS**

- 新增自定义消息发送
- 新增 C2C 已读回执
- 新增语音未播放红点显示

**Android**

- 修改部分场景下 Demo 内存泄漏的问题
- 修改某些场景下的崩溃问题
- 修改定制消息颜色不对的问题
- 修改气泡显示不全或不对的问题
- 修改会话列表不能展示头像的问题
- 修改 ConversationLayout 不能修改标题栏颜色的问题
- 支持64位 ijkplayer
- 支持多元素消息

## 4.4.900 @2019.08.07

### SDK
**通用变更点**

 - 修复某些场景下的稳定性问题
 - 优化未读消息计数
 - 优化登录后加载最近会话列表速度
 - 增加日志清理的功能
 - 修复同步大量未读 C2C 消息引起丢消息的问题
 - AVChatroom 退群后不再 push 退群系统消息到本设备上
 - 修复群系统消息偶现收不到的问题
 - onRefresh/onRefreshConversations 回调增加限频逻辑
 - 优化 saveMessge 排序异常问题

**iOS & Mac 平台**

  - 修改 getGroupInfo 回调参数为 TIMGroupInfoResult，增加获取每个群组对应的错误码
  - 优化 4.x 版本推送展示样式，保持和 2.x，3.x 版本一致
  - 优化登录帐号含有中文字符发送图片/文件/视频失败的问题

**Android 平台**

  - 修复4.2.2系统版本的手机加载 so 失败问题
  - 修复 getGroupInfo 接口返回的数据数量不正确问题
  - 修改 getGroupInfo 回调参数为 TIMGroupDetailInfoResult，增加获取每个群组对应的错误码
  - 统一使用 com.tencent.imsdk.TIMGroupReceiveMessageOpt 类

**Windows平台**

  修复 Windows 配置文件路径为乱码的问题


###  TUIKit & Demo

**iOS**
  - 更改了 iOS Demo 的 UI，包括默认头像以及输入界面的四个功能图标（拍摄、录像、图片、文件）
  - “我”新加资料卡，将个人信息放入资料卡中
  - 加入了单击头像查看大图的功能
  - Demo 中的群聊小灰条样式改变，用户昵称会变为蓝色，单击昵称可以跳转到用户的信息界面
  - 优化了 Demo 中群组内昵称的显示逻辑
  - 优化了聊天界面中头像显示的逻辑
  - 在各个界面中添加了触摸反馈，在用户使用 TUIKit 时可对反馈进行自主设置和定制

**Android**

  - 新增聊天消息语音，MotionEvent.ACTION_CANCEL 事件处理
  - 新增会话列表，聊天界面，详情资料，通讯录，增加头像显示功能
  - 新增个人资料修改头像
  - 新增离线推送功能 Intent 跳转
  - 新增单聊，群聊会话，随机头像
  - 新增群成员被设置成管理员和取消管理员消息提示
  - 新增群成员被禁言和取消禁言消息提示
  - 修复撤回消息后，tips 不显示"您撤回了一条消息"文案
  - 修复撤回消息后，会话列表最后一条消息一直显示撤回消息内容的问题
  - 修复魅族上收到离线消息，进入聊天界面，白屏问题
  - 修复处于置顶会话的聊天会话，收到新消息时，会话不更新最后一条消息问题
  - 修复用户名或密码为空时，Toast 提示
  - 修复群主转让的 GroupTips 消息在 TUIKit 显示异常问题
  - 修复部分手机上报错 Didn't find class "android.support.v4.content.FileProvider"
  - 优化置顶聊天逻辑，按照最近时间排序展示
  - 修复聊天中软键盘和更多布局同时出现问题
  - 修复新注册用户，没有一个好友时，通讯录界面不显示3个 Item（群聊，黑名单，新的联系人）问题
  - 修复播放视频时单击手机返回按钮，视频声音依然在播放问题
  - 修复录制语音消息时，正在播放的语音消息不会停止，会被录制进去问题
  - 修复部分手机播放 iOS 发过来视频播放异常问题


## 4.4.716 @2019.07.16


**iOS & Mac 平台**

- API 整理合并
- 文件、视频、语音消息增加获取下载 URL 的接口
- 新增 disableStorage 接口，禁用所有本地存储
- 修复发送在线消息后，发送端 conversation 获取 lastMsg 还能获取到的问题
- getSenderProfile 接口去掉返回值，统一通过回调返回
- 群组的函数 modifyReciveMessageOpt 修改为 modifyReceiveMessageOpt
- 修复 2.X/3.X 版本给 iOS 4.X 版本发视频消息，视频截图无法获取的问题
- 修复退出时数据上报偶现崩溃问题
- 优化登录模块（重复登录/频繁登录/频繁切换账号/自动上线/离线被踢）
- 修复退群/群解散后无法清除未读数问题
- 修复偶现收不到群解散通知问题
- 优化长时间切到后台后再切回前台，发消息耗时长的问题
- 优化单聊未读计数问题
- autoLogin 传参 TIMLoginParam 修改为 userID
- initStorage 传参  TIMLoginParam 修改为 userID
- 去掉多账号同时登录接口（newManager，getManager，deleteManager）
- 修复 respondsToLocator 偶现崩溃的问题 
- 修复 TIMGroupInfo > lastMsg 调用相关函数偶现 crash 的问题
- TUIKit
  - 优化最近联系人列表更新算法，减少刷新频率
  - 解决黑名单内存泄漏
  - 新增消息气泡和头像点击事件回调
  - 解决最近联系人与聊天窗口没有显示最新头像问题
  - 优化文档注释

**Android 平台**

- 整理与合并 API 接口
  - TIMManager 增加 TIMManagerExt 中的所有接口
  - TIMConversation 增加 TIMConversationExt 中的所有接口
  - TIMGroupManager 增加 TIMGroupManagerExt 中的所有接口
  - TIMMessage 增加 TIMMessageExt 中的所有接口
  - TIMUserConfig 增加 TIMUserConfigMsgExt 中的所有接口
  - 当前保留 TIMManagerExt、TIMMessageExt、TIMConversationExt、TIMGroupManagerExt 和 TIMUserConfigMsgExt 类原有接口以做兼容，后续这些类将废弃
- 加好友增加单向和双向的选项 
- 新增 disableStorage 接口，禁用所有本地存储
- 文件、视频、语音消息增加获取下载 URL 的接口
- 修复部分 Android 手机，queryUserProfile 为 null 的问题
- 修复发送在线消息后，发送端 conversation 获取 lastMsg 还能获取到的问题
- getSenderProfile 接口去掉返回值，统一通过回调返回
- 修复退出时数据上报偶现崩溃问题
- 优化登录模块（重复登录/频繁登录/频繁切换账号/自动上线/离线被踢）
- 修复退群/群解散后无法清除未读数问题
- 修复偶现收不到群解散通知问题
- 优化长时间切到后台后再切回前台，发消息耗时长的问题
- 优化单聊未读计数问题
- TUIKit
  - 支持聊天短视频消息，播放时横竖屏旋转
  - 支持 Javadoc 文档
  - 修复发送视频时，正在发送中，下载视频会导致下载失败问题
  - 修复 GroupChatManagerKit.getInstance().sendMessage 方法的 onSuccess 回调会触发两次的问题
  - 优化聊天界面说话太短问题，现在修改为至少为1秒钟，1s以下提示说话太短
  - 修复私有群-邀请成员入群时可以重复邀请同一个成员的问题
  - 处理备注不能设置为空的问题
  - 修复本机系统时间错误后，聊天界面的时间展示异常问题
  - 修复本地发送的语音消息，换一台手机后通过漫游的方式无法下载成功问题
  - 修复群主设置群名称为空时提示修改成功，实际上是修改失败的问题

**Windows 平台**

- 修复发送图片、文件、音频、视频等消息包含中文路径，不同终端发送中文问题
- 修复 TIMMsgReportReaded 已读上报无效问题
- 修复收到的消息和消息撤回的 rand 和 seq 不一致问题
- 修复退出时数据上报偶现崩溃问题
- 优化登录模块（重复登录/频繁登录/频繁切换账号/自动上线/离线被踢）
- 修复退群/群解散后无法清除未读数问题
- 修复偶现收不到群解散通知问题
- 优化长时间切到后台后再切回前台，发消息耗时长的问题



## 补丁包 4.4.631 @2019.07.03

**Android 平台**

 修复离线推送问题及崩溃问题


## 4.4.627 @2019.06.27

**iOS & Mac 平台**

- 修复无网络时发消息超时长的问题
- 修复消息发送后 ID 值变化的问题
- 修复消息乱序的问题
- 修复拉取聊天室历史消息丢失的问题
- 修复系统消息类型错误的问题
- 修复获取图片消息的原图片 size 大小为0的问题
- 修复手机修改系统时间后发消息失败问题
- 修复某些情况下上报会话已读失败，获取未读数目异常的问题 
- 修复发送在线消息后，可通过会话 getLastMessage 获取到的问题
- 修复撤回最后一条消息，通过会话获取 lastMsg 状态异常的问题
- 修复消息撤回后，对方的会话列表依然存在消息内容的问题
- 修复断网重连的情况下，图片/语音/文件消息发送状态异常的问题
- 修复登录帐号含有特殊字符，无法发送语音图片的问题
- 修复 V2 版本向 V4 版本发图片，V4 版本无法获取微缩图宽高的问题
- 修复创建一个会话 saveMessage 后，最近会话拉取不到的问题
- 修复 getMessage 获取不到群 Tips 消息的 MemberChangeList 内容的问题
- 修复 getLoginStatus 获取登录状态异常的问题
- 修复拒绝加群请求，对方却进了群的问题
- 修复设置日志路径后，盘符的根目录下也有会一个 log 文件问题
- 修复互踢收不到回调的问题 -Mac
- TUIKit
  - 优化群组管理页面逻辑
  - 解决 iOS 13 兼容性问题
  - 已知问题修复

**Android 平台**

- 修复无网络时发消息超时长的问题
- 修复消息发送后 ID 值变化的问题
- 修复消息乱序的问题
- 修复拉取聊天室历史消息丢失的问题
- 修复系统消息类型错误的问题
- 修复下载文件的进度值异常问题
- 修复手机修改系统时间后发消息失败问题
- 修复断网重连的情况下，图片/语音/文件消息发送状态异常的问题
- 修复群组被解散或则用户被禁言后发消息排序异常的问题
- 修复某些情况下上报会话已读失败，获取未读数目异常的问题 
- 修复消息撤回后，对方的会话列表依然存在消息内容的问题
- 修复撤回最后一条消息，通过会话 getLastMessage 状态异常的问题
- 修复发送在线消息后，通过会话 getLastMessage 获取到的问题
- 修复获取图片消息的原图片 size 大小为0的问题
- 修复 V2 版本向 V4 版本发图片，V4 版本拿不到微缩图宽高的问题
- 修复被挤下线后 getLoginUser() 仍可获取登录的用户问题
- 修复 getSenderProfile 获取个人信息为空的问题
- 修复群系统消息 TIMGroupSystemElem 中的 getOpUser 为空的问题
- 修复 getMessage 获取不到群Tips消息的 MemberChangeList 内容的问题
- 修复创建一个会话 saveMessage 后，最近会话拉取不到的问题
- 修复设置日志路径后，盘符的根目录下也有会一个 log 文件问题
- 修复 TUIKit 已知问题

**Windows 平台**

- 修复无网络时发消息超时长的问题
- 修复消息发送后 ID 值变化的问题
- 修复消息乱序的问题
- 修复拉取聊天室历史消息丢失的问题
- 修复系统消息类型错误的问题
- 修复跨平台库 iOS 的 IM SDK 模块中不包含 Armv7a 架构的问题
- 修复跨平台库 TIMMsgReportReaded 接口不支持 Message 为空的问题
- 修复跨平台库同一设备下运行IM多个实例登录同一个帐号不互踢问题
- 跨平台库消息增加获取消息唯一 ID 的 JSON key
- 修复设置日志路径后，盘符的根目录下也有会一个 log 文件问题
- 修复 getMessage 获取不到群 Tips 消息的 MemberChangeList 内容的问题
- 修复撤回最后一条消息，通过会话获取 lastMsg 状态异常的问题
- 修复某些情况下上报会话已读失败，获取未读数目异常的问题

## 4.4.479 @2019.06.12

**iOS 平台**

- 修复拉取离线消息出现丢消息的问题
- 修复更换不同 SDKAppID 引起登录失败的问题
- 修复语音消息播放失败的问题
- 修复群消息撤回的崩溃
- 修复获取好友列表和创建群组的6002错误
- 优化发送消息的效率
- 缓存优化，降低 UI 卡顿
- TUIKit
  - 全新的 UI 设计
  - 全新的架构设计
  - 完善通讯录、群组管理、关系链等功能
  - 修复 bug

**Android 平台**

- 修复拉取离线消息出现丢消息的问题
- 修复更换不同 SDKAppID 引起登录失败的问题
- 修复语音消息播放失败的问题
- 修复群消息撤回的崩溃
- 修复获取好友列表和创建群组的6002错误
- 修复 Android 创建群人数过多导致崩溃问题
- 优化发送消息的效率
- 缓存优化，降低 UI 卡顿
- TUIKit
  - 全新的 UI 设计
  - 全新的架构设计
  - 完善通讯录、群组管理、关系链等功能
  - 修复 bug

**Windows 平台**

- 修复拉取离线消息出现丢消息的问题
- 修复更换不同 SDKAppID 引起登录失败的问题
- 修复语音消息播放失败的问题
- 修复群消息撤回的崩溃
- 修复获取好友列表和创建群组的6002错误
- 缓存优化，降低 UI 卡顿
- 优化发送消息的效率

## 4.3.145 @2019.05.31
**iOS 平台**
- 修复切换账号后再次收到同样的消息问题
- 修复票据过期后获取 C2C 漫游消息崩溃问题
- 修复 ChatRoom 群新用户加入后获取不到历史消息问题
- 修复 FindMsg 崩溃问题
- 优化群消息同步问题
- 修复 getReciveMessageOpt 偶现异常

**Android 平台**
- 修复切换账号后再次收到同样的消息问题
- 修复票据过期后获取 C2C 漫游消息崩溃问题
- 修复 ChatRoom 群新用户加入后获取不到历史消息问题
- 避免重复添加相同的消息监听器
- 修复 FindMsg 崩溃问题
- 优化群消息同步问题


**Windows 平台**
- 修复切换账号后再次收到同样的消息问题
- 修复票据过期后获取 C2C 漫游消息崩溃问题
- 修复 ChatRoom 群新用户加入后获取不到历史消息问题
- 优化群消息同步问题

## 4.3.135 @2019.05.24

**iOS 平台**

- 增加校验好友接口 checkFriends
- 增加 queryGroupInfo 接口获取本地数据
- 废弃 getGroupPublicInfo 接口，统一用 getGroupInfo 接口
- 修复消息列表包含已删除消息的问题
- 修复未登录获取不了本地消息问题
- 修复最近联系人拉取数量及排序问题
- 修复群消息断网重连后的消息同步问题
- 修复短时间内接收大量消息时判重失效问题
- 修复重启程序后有概率再次收到同一条消息的问题
- 修复初始化和同步消息偶现异常问题
- 修复会话的 lastMsg 被删除引发的偶现异常问题
- 修复登录后 onRefreshConversation 回调两次且数据相同问题
- 修复 chatroom 获取不了入群前的历史消息问题
- 修复 TIMMessage 的 copyFrom 接口不生效的问题
- 修复 TIMGroupEventListener 监听收不到回调的问题
- 修复线上反馈的 Crash 问题
- 优化重连时连接请求
- 优化在不同网络下首次连接和境外接入点的质量
- 优化iOS切换WIFI时网络重连慢的问题


**Android 平台**

- 增加校验好友接口 checkFriends
- 增加 queryGroupInfo 接口获取本地数据
- 废弃 getGroupDetailInfo 和 getGroupPublicInfo 接口，统一用 getGroupInfo 接口
- 修复消息列表包含已删除消息的问题
- 优化 modifyGroupOwner 和 getGroupMembersByFilter 回调问题
- 修复未登录获取不了本地消息问题
- 修复最近联系人拉取数量及排序问题
- 修复群消息断网重连后的消息同步问题
- 修复短时间内接收大量消息时判重失效问题
- 修复重启程序后有概率再次收到同一条消息的问题
- 修复初始化和同步消息偶现异常问题
- 修复会话的 lastMsg 被删除引发的偶现异常问题
- 修复登录后 onRefreshConversation 回调两次且数据相同问题
- 修复 chatroom 获取不了入群前的历史消息问题
- 修复线上反馈的 Crash 问题
- 优化重连时连接请求
- 优化在不同网络下首次连接和境外接入点的质量



**Windows 平台**

- 新增自定义字段数据上报
- 新增阅后即焚消息
- 新增消息撤回使用用例
- 修复设置上传文件偶现失败问题
- 修复消息列表包含已删除消息的问题
- 修复最近联系人拉取数量及排序问题
- 修复群消息断网重连后的消息同步问题
- 修复短时间内接收大量消息时判重失效问题
- 修复重启程序后有概率再次收到同一条消息的问题
- 修复会话的 lastMsg 被删除引发的偶现异常问题
- 修复初始化和同步消息偶现异常问题
- 发送消息，在发送成功的回调里面返回消息的 JSON 字符串
- TIMSetRecvNewMsgCallback 接口改为 TIMAddRecvNewMsgCallback 和 TIMRemoveRecvNewMsgCallback 接口
- 新增socks5代理服务器配置
- 优化重连时连接请求
- 优化在不同网络下首次连接和境外接入点的质量



## 4.3.118 @2019.05.10

**iOS**

- 增加 TIMFriendshipManager 类中的 querySelfProfile 和 queryUserProfile 接口（读取本地数据）
- 修复获取登录 getLoginUser 返回登录用户异常的问题
- 修复线上反馈的用户资料获取失败问题
- 修复重启 App 后部分本地字段失效问题
- 修复消息删除后调用已读上报偶现异常的问题
- 修复线上反馈的即时通信 IM 群组问题
- 修复会话未读数问题
- 修复在线消息问题
- 修复消息重发偶现失效问题
- 修复本地票据过期导致持续重连问题
- 修复线上反馈的 Crash 问题
- 优化服务器连接策略
- 优化断网重连策略
- 优化服务器过载策略
- 优化心跳，减少不必要发包
- TUIKit 新增支持 CocoaPods 导入
- TUIKit 新增联系人界面
- TUIKit 新增好友添加界面
- TUIKit 新增黑名单界面
- TUIKit 新增好友搜索界面
- TUIKit 新增新朋友界面
- TUIKit 优化好友资料页：增加备注、黑名单、删除好友功能
- TUIKit 优化个人资料页：增加昵称、个人签名、生日、性别、所在地修改功能
- TUIKit 优化群列表置顶功能

**Android**
- 增加 TIMFriendshipManager 类中的 querySelfProfile 和 queryUserProfile 接口（读取本地数据）
- 增加获取好友信息中 addTime 字段
- 增加 x86 及 x86_64 架构支持
- 修复获取登录 getLoginUser 返回登录用户异常的问题
- 修复线上反馈的用户资料获取失败问题
- 修复重启 App 后部分本地字段失效问题
- 修复消息删除后调用已读上报偶现异常的问题
- 修复线上反馈的即时通信 IM 群组问题
- 修复会话未读数问题
- 修复在线消息问题
- 修复消息重发偶现失效问题
- 修复本地票据过期导致持续重连问题
- 修复线上反馈的 Crash 问题
- 优化服务器连接策略
- 优化断网重连策略
- 优化服务器过载策略
- 优化心跳，减少不必要发包
- TUIKit 加入聊天置顶功能
- TUIKit 修改昵称和个性签名，资料页面显示昵称
- TUIKit 修复 Android 端接收到 iOS 端发送的表情包后无法显示出来问题
- TUIKit 修复未读消息红点数问题
- TUIKit 修复美图 M8 设备单击加号后显示操作界面有 UI 问题
- TUIKit 修复设置头像后，头像会被缩小，不能铺满 UI 问题
- TUIKit 修复登录，自动登录逻辑
- TUIKit 修复超过输入内容最大限制后导致的 ANR 问题 
- TUIKit 修复发送图片, 当在相册选择图片并预览模式的时候，单击【确定】，发送会没有反应问题
- TUIKit 修复聊天界面长按图片消息没有弹出删除和撤销的操作按钮
- TUIKit 优化和修复线上反馈的 crash 问题

**Windows**
- 修复获取登录 getLoginUser 返回登录用户异常的问题
- 修复线上反馈的用户资料获取失败问题
- 修复重启 App 后部分本地字段失效问题
- 修复消息删除后调用已读上报偶现异常的问题
- 修复线上反馈的即时通信 IM 群组问题
- 修复会话未读数问题
- 修复在线消息问题
- 修复消息重发偶现失效问题
- 修复本地票据过期导致持续重连问题
- 修复线上反馈的 Crash 问题
- 优化服务器连接策略
- 优化断网重连策略
- 优化服务器过载策略
- 优化心跳，减少不必要发包



## 4.3.81 @2019.04.24

**iOS**
- 修复草稿箱添加消息元素 Crash 的问题
- 修复某些账户在 App 卸载重装后拉取不到会话列表的问题
- 修复在登录的状态下 usersig 过期，不重启 App 的情况下会一直登录失败的问题
- 修复在登录的状态下 usersig 过期，发消息失败，收不到 usersig 过期回调的问题
- 修复修复群成员获取数量问题
- 优化请求超时（错误码6012）问题

**Android**
- 新增功能：
 补齐老版本 SDK 的好友黑名单功能，好友分组功能，以及加好友请求处理等关系链功能
- 修复问题： 
 - 修复一处 App 主进程被杀后的报错问题
 - 修复群成员获取数量问题
 - 修复群自定义字段和群成员自定义字段的设置和获取问题
 - 修复获取群信息超时后，没有 onError 回调出去的问题
 - 修复某些账户在 App 卸载重装后拉取不到会话列表的问题
 - 修复在登录的状态下 usersig 过期，不重启 App 的情况下会一直登录失败的问题
 - 修复在登录的状态下 usersig 过期，发消息失败，收不到 usersig 过期回调的问题
 - 修复消息乱序问题
 - 优化请求超时（错误码6012）问题
 - 更新关系链错误码
 - TUIKit 修复日期工具类出错的严重 bug(github issue#75)
 - TUIKit 修改一处崩溃(github issue#86)
 - TUIKit 修复无权限时，使用SDK的一些问题
 - TUIKit 修复删除会话，删除消息，然后长按后的一些崩溃问题
 - TUIKit 修复 popupwindow 长驻不消失问题
 - TUIKit 修复消息重复问题
 - TUIKit 拦截发送空格空消息问题
 - TUIKit 修复删除会话后，未读消息未更新问题
 - TUIKit 修复发送消息最大字符限制问题
 - TUIKit 体验优化和修复若干数组越界问题

**Windows**
- 修复部分崩溃问题
- 优化请求超时（错误码6012）问题
- 修复某些账户在 App 卸载重装后拉取不到会话列表的问题
- 修复在登录的状态下 usersig 过期，不重启 App 的情况下会一直登录失败的问题
- 修复在登录的状态下 usersig 过期，发消息失败，收不到 usersig 过期回调的问题



## 4.2.52 @2019.04.17

**iOS**
- 新增功能：
 补齐老版本 SDK 的好友黑名单功能，好友分组功能，以及加好友请求处理等关系链功能
- 修复问题：
 - 优化 API 接口注释
 - 修复群自定义字段和群成员自定义字段不生效的问题
 - 优化 TIMMessage 获取 senderProfile 拿不到用户资料信息的问题
 - 修复已读回执回调及状态问题
 - 修复同步未读消息最新一条消息不回调问题
 - 修复群消息偶尔收不到问题
 - 修复 login 回包无法解密问题
 - 增加 IP 连接和 login 信息统计上报
 - 修复消息 seq 错误

**Android**
- 新增功能：
 补齐老版本 SDK 的好友黑名单功能，好友分组功能，以及加好友请求处理等关系链功能
- 修复问题：
 - 修复 Android 的 jni 泄漏
 - 修复群组成员角色错误问题
 - 修复退群在加群后，群组消息撤回崩溃问题
 - 修复 TUIKit Demo 表情不显示问题
 - 修复群聊会话获取消息，第二页大概率获取重复消息问题
 - 修复TUIKit Demo 中的部分 Crash 问题
 - 优化 TIMMessage 获取 senderProfile 拿不到用户资料信息的问题
 - 修复已读回执回调及状态问题
 - 修复同步未读消息最新一条消息不回调问题
 - 修复群消息偶尔收不到问题
 - 修复 login 回包无法解密问题
 - 增加 IP 连接和 login 信息统计上报
 - 修复消息 seq 错误

**Windows**
- 新增功能：
 补齐老版本 SDK 的好友黑名单功能，好友分组功能，以及加好友请求处理等关系链功能
- 修复问题：
 - 优化 TIMMessage 获取 senderProfile 拿不到用户资料信息的问题
 - 修复已读回执回调及状态问题
 - 修复同步未读消息最新一条消息不回调问题
 - 修复群消息偶尔收不到问题
 - 修复 login 回包无法解密问题
 - 增加 IP 连接和 login 信息统计上报
 - 修复消息 seq 错误



## 4.2.28 @2019.04.08

**iOS**
- 优化未读计数相关的问题
- 优化消息已读状态的问题
- 优化 REST API 发的 C2C 消息排序异常的问题
- 优化获取漫游消息偶现重复的问题
- 优化 uniqueId 空实现的问题

**Android**

- 新增功能：
 新增好友增/删/查逻辑
- 修复问题：
 - 优化未读计数相关的问题
 - 优化消息已读状态的问题
 - 优化 REST API 发的 C2C 消息排序异常的问题
 - 优化获取漫游消息偶现重复的问题
 - 优化 uniqueId 空实现的问题

**Windows**
- 优化未读计数相关的问题
- 优化消息已读状态的问题
- 优化 RESTAPI 发的 C2C 消息排序异常的问题
- 优化获取漫游消息偶现重复的问题

## 4.2.10 @2019.03.29

**iOS**
- 新增功能
 新增好友增/删/查逻辑
- 修复问题：
  - 优化超时问题
  - 优化自动登录逻辑
  - 优化 Crash 问题
  - 优化偶现网络连接异常 bug

**Android**
- 优化超时问题
- 优化自动登录逻辑
- 优化 JNI 泄漏问题
- 优化 Crash 问题
- 优化偶现网络连接异常 bug

**Windows**
- 优化超时问题
- 优化 Crash 问题
- 优化偶现网络连接异常 bug

## 4.2.9 @2019.03.27

**iOS & Mac** 
- 修复 IPv6 环境下 Crash 的问题
- 修复资料设置整数失败的问题

**Android**
修复资料设置整数失败的问题

## 4.2.1 @2019.03.15
**iOS**
- 优化后台解散群组, 客户端收不到相应指令的问题
- 调用 deleteConversationAndMessage() 无效
- 优化网络重新连接后收不到消息的问题 (现在网络重新连接后可以在会话界面主动请求拉取消息了)

**Android**
- 修复群组获取未决和已决信息返回不正确问题
- 修复客户端进入后台 Crash 问题
- 修复优化网络重新连接后收不到消息的问题
- 修复偶现消息排序错误的问题
- 修复偶现消息发送失败的问题


**Web**
新增项 WEBIM 现已支持播放 .amr 的录音格式

**Windows**

- 新增 /source-charset:.65001 编译选项
- 修复在文件系统直接运行 IMAPP.exe Crash 问题
- 修复部分编译出错，以及 Crash 问题
- 移除 X64 编译 (暂不支持)

## 4.0.13 @2019.03.13

**Android**
修复从 3.x 升级到 4.x 版本后登录引起 Crash 的问题

**iOS**

- 新增支持 pod 直接集成 TUIKit.framework
- 修复从 3.x 升级到 4.x 版本后登录引起 Crash 的问题

**Windows**

- 新增以 duilib 库为 UI 组件的 IM Demo
- 新增使用说明及相关集成指引文档


## IM SDK 4.0.12  2019-3-11
**iOS**
- 新增 TUIKit.framework 支持 bitcode 2
- 修复群组禁言无效问题
- 修复修改用户群内身份功能

**Android**
- 修复群组禁言无效问题
- 修复修改用户群内身份功能
- 修复修改群消息接收选项
- 修复离线推送开关无效问题


## IM SDK 4.0.10  2019-3-7
修复 AVChatRoom 进入房间超过100人之后收消息异常的问题

## IM SDK 4.0.8  2019-3-6
TUIkit 音频播放逻辑优化

## IM SDK 4.0.7  2019-3-1
- 修复新老版本语音，文件，视频消息互通的问题
- 解决-5 tls exchange failed 卸载应用重新安装才能登录成功 

## IM SDK 4.0.4  2019-2-28
- 解决 userSig 过期后再次登录返回错误码不正确问题，应该返回6206
- 优化互踢逻辑


## IM SDK 4.0.3  2019-2-25
修复第三方离线推送问题

## IM SDK 4.0.2  2019-2-20
修复开启 bitcode 打包失败的问题

## IM SDK 4.0.1  2019-2-20
修复登录返回-5的问题

## iOS--IM SDK 4.0.0.1  2019-1-21
新增 TUIKIt

## IM SDK 3.3.2 2018-7-5
- 默认禁用自动已读上报 
- 资料关系链的自定义信息类型新增整型支持
- 修复通过本地存储获取到的群成员个数不准确的问题
- 修复用户在收到单聊消息中携带的昵称没有实时更新的问题

## IM SDK 2.7.2 2018-7-5
- 默认禁用自动已读上报
- 资料关系链的自定义信息类型新增整型支持
- 增加消息撤回功能
- 修复用户在收到单聊消息中携带的昵称没有实时更新的问题

## Windows--IM SDK 2.5.8 2018-7-5
- 修复了某些情况下无法登录的问题
- 资料关系链的自定义信息类型新增整型支持

## IM SDK 3.3.0 2018-4-4
**iOS**
TIMUserProfile 新增 level 和 role 两个字段

**Android**
- 增加魅族离线推送支持
- 用户资料标准属性新增 level、role
- 修复登出后再重新登录导致 ugc 小视频发送失败的问题

## IM SDK 2.7.0 2018-4-4
**iOS**
- 邀请成员入群接口添加自定义数据参数

**Android**
- 增加魅族离线推送支持
- 邀请加入群组接口允许指定自定义数据

## Windows--IM SDK 2.5.7 2018-3-13
- 修改了登录模块，提高了通讯的安全性
- 优化了弱网络下发消息的能力
- 修复了打印日志过程中可能出现的 crash 问题

## iOS--IM SDK 2.6.0 2018-3-13
- 提供删除漫游消息的接口
- 提供序列化、反序列化消息对象的接口
- 修复部分历史问题

## iOS--IM SDK 3.2.0 2018-3-13
- 修复 getUserProfile 包含好友自定义字段时报错的问题
- 优化群组未读计数跟新策略
- 优化消息本地存储逻辑策略
- 修复部分 Crash 问题

## Android--IM SDK 3.2.0 2018-3-13
- 修复发送 ugc 小视频可能失败的问题
- 修复在断网情况下发送消息没有回调的问题
- 修复全员禁言不生效问题
- 优化消息本地存储逻辑策略
- 修复部分 Crash 问题

## Android--IM SDK 2.6.0 2018-3-13
- 提供删除漫游消息的接口
- 提供序列化、反序列化消息对象的接口
- 修复部分历史问题

## IM SDK 3.1.2 2017-12-12
- Android 端网络超时问题优化
- Android 端语音下载异常问题修复
- Android 端若干 crash 问题修复

## IM SDK 2.5.7 2017-11-08
- 修复了 SDK 在 App 进程被杀时出现 Crash 的问题
- 修复重复推送离线消息的问题
- 修复同时调用 initStorage 和 login 接口，可能出现内部帐号为空的问题
- 优化网络探测策略
- 修复获取好友列表异常问题
- 修复其他一些 Crash 问题

## IM SDK 3.1.1 2017-8-16
- 完善 LOG 定时清除机制
- 修复 iOS QALSDK 在初始化时卡死的问题
- 添加群组全员禁言功能
- 修复 iOS 多用户登录失败的问题 
- 修复 Android 没有登录的时候获取群组列表导致 crash 的问题

## IM SDK 2.5.6 2017-7-14
- 修复登录登出期间可能的 crash 问题
- 修复推流录制中可能的 crash 问题

## IM SDK 3.1.0 2017-7-3
- 新增 IMUGCExt.framework 和 TXRTMPSDK.framework，提供小视频录制和上传功能
- 新增消息撤回功能


## IM SDK 2.5.5 2017-6-6
- 优化内部回包逻辑，减少耗时
- LOG 时间精度精确到毫秒
- 修复了部分 Crash 和消息同步的问题

## IM SDKV3 3.0.2 2017-5-22
- 修复 AVChatRoom 可能无法接收到群消息的问题
- 接口调整
    i. 废弃 TIMFileElem，TIMSoundElem 中的 setData 接口
    ii. 修正 TIMManagerExt 中的接口拼写： getConversionList => getConversationList

## IM SDKV3 3.0.1 2017-5-15
- 修复部分 so 库无法兼容 Android 5.0 以下机器的问题

## IM SDKV3 3.0 2017-5-8
- 将 IM SDK 和 IMCore 重新组合为 IM SDK、IMMessageExt、IMGroupExt 和 IMFriendExt
- 优化 IM SDK 初始化方法为 initSdk： 和 setUserConfig
- 整理 IM SDK 中接口命名和 Protocol 回调方法命名，统一小写字母开头
- IM SDK 功能：基本的登录、收发消息、资料和群组功能
- IMMessageExt 功能：全量消息功能，包括拉取消息、本地存储、未读计数等
- IMGroupExt 功能：全量群组功能，包括所有群组类型管理、群成员管理等
- IMFriendExt 功能：全量资料关系链功能，包括好友列表、黑名单等

## IM SDK 2.5.4 2017-4-28
- 修复 IM SDK 中定时器机制的 BUG

## IM SDK 2.5.3 2017-4-17
**iOS**
- sendOnlineMessage 接口支持群组类型消息，消息不存本地、不存离线、不计入未读
- 提供 findMessages 方法，提供按消息 ID 获取本地消息
- TIMIOSOfflinePushConfig 提供设置 APNs 推送静音选项
- 修复高频接收消息时，内存上涨问题

**Android**
- 增加查找消息接口（详情请查看 TIMConversation 下的 findMessages）
- sendOnlineMessage 接口支持群组类型消息，消息不存本地、不存离线、不计入未读
- APNS 推送新增接收端不播放提示音且不振动的配置选项（参见 TIMMessageOfflinePushSettings.IOSSettings.NO_SOUND_NO_VIBRATION）
- 网络优化，增强 SDK 对弱网络场景的抗性

**Windows**
- 修复了可能导致 Crash 的问题

**接口变更：**
- TIMMessageOfflinePushSettings.AndroidSettings 及 TIMMessageOfflinePushSettings.IOSSettings 构造方式变更。
详情请参见官网文档 [离线推送](https://cloud.tencent.com/document/product/269/9234) 文档。

## IM Android SDK 2.5.2 2017-3-1
- 修复偶现发包返回超时的问题（返回码6205）

## IM SDK 2.5.1 2017-2-16
- 限制 LOG 文件大小为 50M 以内
- 修复登出后切后台，用户状态返回在线的 BUG
- iOS 更新下载语音、文件的策略，同时支持 HTTP 和 HTTPS 下载
- 修复未登录用户时，发送消息失败后状态不匹配的 BUG

## IM Web SDK 1.7 2016-12-20
- 支持多实例互踢
- 同时支持多实例同时在线
- 支持群已读消息同步
- 支持 C2C 已读消息同步
- 优化 Demo 目录结构和代码
- 新增最近联系人列表

## IM SDK 2.5 2016-12-16
- 优化了 TIMOfflinePushInfo 对象结构
- 修复 iOS9.1 下载语音、文件失败的问题
- 优化了网络操作
- 修复了部分 bug

## IM SDK 2.4.1 2016-11-24

- 修复 TIMGroupAssistant 在进入 AVChatRoom 后异常拉取群组资料的 bug
- 修复禁用控制台打印失效的 bug
- Android 端修复初始化后登录前登出导致各种监听器失效问题

## IM SDK 2.4 2016-11-09
- 全面兼容 ATS 模式
- 消息转发功能：提供 copyFrom 接口，可以跳过下载步骤，直接拷贝图片、文件等消息后直接转发
- 支持 AVChatRoom 群组动态更新群成员数：TIMGroupEventListener 接口返回当前群成员数目
- AVChatRoom 支持消息过滤自定义
- TIMOfflinePushInfo 属性支持小米华为推送相关设置
- 优化拉取群组漫游消息流程
- 优化语音、文件、微视频上传下载流程
- 支持设置拉取最近联系人列表时禁止抛出 onNewMessage

## IM SDK 2.3 2016-9-13
- 支持同一 appid 多应用消息推送
- Android 版本增加带回调的 setOfflinePushToken 接口
- 消息删除逻辑优化，拉取消息时，自动过滤状态为DELETED的消息
- iOS 版本将数据库文件从 Library/Caches/ 子目录搬迁到 Document/ 子目录，避免被系统清除
- iOS 版本可以添加和删除多个 TIMMessageListener
- iOS 版本对常驻线程进行统一命名
- 获取会话列表接口，自动过滤消息数为0的会话

## IM Web SDK 1.6 2016-8-15
- Web 广播消息需求
- 新增好友系统通知
- 新增资料系统通知

## IM SDK 2.2 2016-8-10
- 支持会话草稿功能
- 支持会话标记是否存储消息，提升消息处理灵活性
- 漫游消息支持从旧到新遍历消息，适用消息记录场景
- 消息增加推送的 ext 和声音，可对某些消息设置推送信息
- Android 增加 stopQALService 接口，可以在退出应用的时候关掉 QALService
- 支持网络状态监控，增加网络问题错误码

## IM SDK 2.1 2016-7-15
- 支持小米、华为手机消息推送功能
- 支持已读回执功能，客户可根据产品需求决定是否需要已读回执
- 支持正在输入状态提醒，客户可根据产品需求决定是否需要提醒正在输入
- 资料关系链增加性别、生日、地址、语言等标准字段
- 进出群通知带群内人数，提供接口易用性
- 修复 SDK 和 Demo 的部分 bug

## IM Web SDK 1.5 2016-7-13
- 合并直播聊天室 SDK 能力
- 修复了 IE8 、9 上传图片问题
- 进群和退群提示消息新增群成员数字段
- 修复 SDK 和 Demo 的部分 bug

## IM SDK 2.0 2016-6-16
- 多终端已读同步，可以做到多终端在线时未读计数的同步
- App 迁移时支持历史消息导入，保证平滑迁移
- 群消息属性增加消息提醒状态，以提升易用性
- 支持消息优先级灵活设置
- 推送通过属性和标签过滤

## IM Web SDK 1.4 2016-6-7
- 支持拉取好友历史消息
- 支持发送红包、点赞消息
- 创建群接口支持自定义群 ID 和直播聊天室
- 优化 SDK API 接口，合并登录和初始化接口
- 优化 Demo 目录结构和代码

## IM SDK 1.9.3 2016-5-31
- 修正 winsdk 进程退出的资源析构死锁问题

## IM SDK 1.9.2 2016-5-27
- 增加票据过期回调
- 支持 IPv6（IOS）

## IM SDK 1.9 2016-5-4
- 支持超过 1 万人大群（不限制群内人数，适用直播场景）
- 重构即时通信 IM Demo，体验优化，易用性更佳
- 分优先级发送消息
- 增加群资料与关系链的存储和缓存
- 增加群资料与关系链的同步获取接口和变更回调
- 支持获取好友资料（包括备注、分组）
- 支持设置群资料与关系链默认拉取字段
- 支持禁用拉取最近联系人
- 会话列表增加同步获取最后一条消息
- 指定拉取某些群成员的群资料（如群名片等）
- 语音消息和文件消息支持传入文件路径（可支持消息重发）
- 适配6.0动态权限问题

## IM SDK 1.8.1 2016-4-13
- Android 优化自启动流程（需要修改配置，请参考 ReadMe.txt 进行配置）
- 增加单聊发在线消息接口（只有对方在线能收到，离线情况下不存储消息）
- 增加多发消息接口
- Android 性能优化

## IM SDK 1.8 2016-3-23
- Android 离线推送
- 增加检测是否好友接口
- 增加关系链自定义字段接口
- 增加消息自定义本地存储（可以标识语音是否已读等状态）
- 图片压缩接口，满足了脱离通信场景下的图片压缩需求
- 自定义消息 sound 字段，指定 apns 声音
- 在线状态变更等回调接口完善


## IM SDK 1.7 2016-1-25
- 支持群内发言频率限制
- 支持群转让
- 支持群消息通知强度可定制
- CS 通道建设，可帮助客户省去 App 与后台服务器长连接，达到省电功效
- 消息和最近联系人漫游开关/存储时长/多终端同时在线开关等配置项添加，提高运营效率
- 下行消息带群成员昵称、名片，帮助客户完善用户体验，优化易用性
- SDK 精简，有效帮助客户控制安装包大小


## IM SDK 1.6 2015-12-25
- 支持微视频消息类型，满足更多视频消息和社交需求
- 支持群成员列表规则排序，满足群排序需求
- 支持关系链好友分组能力，满足用户分组需求
- 群名称/公告/简介敏感词过滤，资料更安全
- 支持群成员名片，帮助用户识别群成员
- 支持消息提醒开关，用户可自由选择开关单聊群聊消息提醒

## IM SDK 1.5  2015-11-16

- 支持消息记录异步下载
- 支持 Server 端删除群消息
- 支持通过用户昵称检索用户
- 支持通过群名称检索群
- 支持事件回调控制台自助配置
- 支持管理员帐号对应用户凭证下载
- 部分 demo 和技术逻辑优化


## IM SDK 1.4  2015-10-16
- 多终端同时登录
- 不可接收拉黑用户消息
- 好友推荐删除
- APNS 推送昵称
- 群名称敏感词过滤
- 群公告敏感词过滤
- Demo 支持游客模式和第三方帐号登录

## IM SDK 1.3  2015-09-10
- 支持游客登录模式，无需用户名密码即可登录
- 支持消息漫游（默认保存7天消息）
- 支持最近联系人漫游和删除
- 支持通过回调做消息实时同步
- 支持好友推荐，客户定义推荐逻辑后即可实现好友推荐
- 支持选择原图或缩略图发送消息，帮助提升用户体验
- 支持 PUSH 通知消息（Android 仅在线用户可触达）
- 支持平滑迁移方案，客户迁移，来去自如
- 支持本地消息删除，帮助用户保护隐私

## IM SDK 1.2  2015-08-18
- 支持 Web 平台的 C2C 单聊
- 群成员上限扩大到1万
- 消息广告和敏感词过滤
- 提供消息 ID 的 API，可精确定位到消息
- 用户资料增加好友备注
- 支持离线状态查看本地消息

## IM SDK 1.1 2015-07-13
- 支持 Windows C++ 平台
- 支持公有群/聊天室群类型
- 支持增加群简介和群公告，增加禁言、消息屏蔽、群身份设置
- 用户资料和关系链操作接口（昵称/加好友/黑名单设置等）
- 支持文件类型消息
- 图片类型消息优化：图片质量分为原图/缩略图/大图，上传下载接口变更，传递图片路径
- 日志回调接口增加日志级别
- 增加同一帐号重复登录，另一方强制下线逻辑
- 增加 crash 自动上报功能
- 新增支持托管模式下的自有帐号和第三方帐号集成
- 新增短信验证注册登录模式
- 新增支持下载腾讯生成的公私钥做票据验证
- 新增用户和群组管理

## IM SDK 1.0  2015-05-11
- 支持 Android/iOS 平台
- 支持自有/第三张帐号登录集成
- 支持单聊、群聊（讨论组）的会话类型
- 支持文本、表情、图片、语音、地理位置、自定义消息的消息类型
- APNs 离线推送（上报 Token，前台后切换事件上报）
- 消息本地存储

