## 功能描述
群组管理功能指的是创建群组、加入群组、获取已加入的群组、退出群组和解散群组等，相关方法在核心类 `V2TIMGroupManager(Android)` / `V2TIMManager(Group)(iOS & Mac)` 中。

[](id:listener)
## 群事件监听
下文描述的群组管理功能中，有些会触发群事件通知回调，例如有人进群、有人退群等，这些事件都是由 IM 服务器自动触发的。

您可以调用 `addGroupListener` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMManager.html#a8dde0362f00a454945e7811c8a726a38) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/interfaceV2TIMManager.html#af583b113cdec570b08ae80d682fba52c) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#a05af3d083cef4d667cf972e0cf340289)) 添加群事件监听器。

群事件定义在 `V2TIMGroupListener`([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html)) 中，包含群成员相关通知、群生命周期相关通知、加群申请相关通知、话题事件监听回调等。

不想再接收群事件时，可调用 `removeGroupListener` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMManager.html#ab4d57bd5fd4b2d71c29daaeee8b9b760) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/interfaceV2TIMManager.html#a2b2093489bf869f70c03be39f4ed08a1) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#a60fe2aac014661aeaf3cbbafaea830e3)) 移除群事件监听器。

如果您设置了群事件监听器，但是并没有接收到预期的事件，可以登录 [即时通信 IM 控制台](https://console.cloud.tencent.com/im) 检查或设置群系统通知，配置页面如下所示：
<img src="https://qcloudimg.tencent-cloud.cn/raw/adc53a9af97423d9c24eff0249117198.jpeg" alt="群系统通知配置" style="zoom:30%;" />

> ! 直播群（AVChatRoom）不支持配置群成员变更通知、群资料变更通知。

示例代码如下：
<dx-tabs>
::: Android
```java
V2TIMGroupListener groupListener = new V2TIMGroupListener() {
  // 群成员相关通知、群生命周期相关通知、加群申请相关通知、话题事件监听回调等，不一一列举
  @Override
  public void onMemberEnter(String groupID, List<V2TIMGroupMemberInfo> memberList) {
    // 有新成员加入群，该群所有的成员都能收到
  }
  @Override
  void onMemberLeave(String groupID, V2TIMGroupMemberInfo member)	{
    // 有成员离开群，该群所有的成员都能收到
  }

  @Override
  public void onReceiveRESTCustomData(String groupID, byte[] customData) {
    // 服务器发送的自定义系统通知
  }
};

V2TIMManager.getInstance().addGroupListener(groupListener);
```
:::
::: iOS & Mac
```objectivec
[[V2TIMManager sharedInstance] addGroupListener:self];

// 群成员相关通知、群生命周期相关通知、加群申请相关通知、话题事件监听回调等，不一一列举
- (void)onMemberEnter:(NSString *)groupID memberList:(NSArray<V2TIMGroupMemberInfo *>*)memberList {
    // 有新成员加入群，该群所有的成员都能收到
}

- (void)onMemberLeave:(NSString *)groupID member:(V2TIMGroupMemberInfo *)member {
    // 有成员离开群，该群所有的成员都能收到
}

- (void)onReceiveRESTCustomData:(NSString *)groupID data:(NSData *)data {
    // 服务器发送的自定义系统通知
}
```
:::
::: Windows
```cpp
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    // 群成员相关通知、群生命周期相关通知、加群申请相关通知、话题事件监听回调等，不一一列举

    void OnMemberEnter(const V2TIMString& groupID, const V2TIMGroupMemberInfoVector& memberList) override {
        // 有新成员加入群，该群所有的成员都能收到
    }

    void OnMemberLeave(const V2TIMString& groupID, const V2TIMGroupMemberInfo& member) override {
        // 有成员离开群，该群所有的成员都能收到
    }

    void OnReceiveRESTCustomData(const V2TIMString& groupID, const V2TIMBuffer& customData) override {
        // 服务器发送的自定义系统通知
    }
};

// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);
```
:::
</dx-tabs>

[](id:createGroup)
## 创建群组
### 普通接口
您可以调用普通接口 `createGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMManager.html#af836e4912f668dddf6cc679233cfb0bb) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/interfaceV2TIMManager.html#a3bbcf819c1ec70e520b7f9a42cfbb989) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#a0325514b94a734186be684eb9bb5cc80)) 接口，并指定参数，即可创建一个群组。

`createGroup` 参数说明如下表所示：

| 参数 | 含义 | 是否必填 | 说明 |
| --- | --- | --- | --- |
| groupType | 群类型 | YES | 参考 [群类型介绍](https://cloud.tencent.com/document/product/269/1502#.E7.BE.A4.E7.BB.84.E7.B1.BB.E5.9E.8B.E4.BB.8B.E7.BB.8D)。 |
| groupID | 群 ID | NO | 如果传空，群创建成功后会自动分配。<br>支持自定义群 ID，参考 [自定义群组 ID](https://cloud.tencent.com/document/product/269/1502#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.BE.A4.E7.BB.84-id) 规则。|
| groupName | 群名称 | YES | 最长 30 字节。 |

如果您按照上文 [群事件监听](#advance_page) 中所述调用 `addGroupListener` 添加了群组事件监听器，群创建成功后会回调 `onGroupCreated` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a93504c985480a2bb87ca716809e3dd00) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#aa5c08185c8c9ddaace6421e1e153711d) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#af7cf426687a86f033051ad6bed8fc087)) 接口。


示例代码如下：

<dx-tabs>
::: Android
```java
V2TIMManager.getInstance().createGroup(V2TIMManager.GROUP_TYPE_WORK, null, "groupA", new V2TIMValueCallback<String>() {
  @Override
  public void onSuccess(String s) {
  	// 创建群组成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 创建群组失败
  }
});
// 监听群组创建通知
V2TIMManager.getInstance().addGroupListener(new V2TIMGroupListener() {
  @Override
  public void onGroupCreated(String groupID) {
  	// 群创建回调，groupID 为新创建群组的 ID
  }
});
```
:::
::: iOS & Mac
```objectivec
// 创建群组
[[V2TIMManager sharedInstance] createGroup:GroupType_Work groupID:nil groupName:@"groupA" succ:^(NSString *groupID) {
    // 创建群组成功
} fail:^(int code, NSString *desc) {
    // 创建群组失败
}];

// 监听群组创建通知
[[V2TIMManager sharedInstance] addGroupListener:self];
- (void)onGroupCreated:(NSString *)groupID {
    // 群创建回调，groupID 为新创建群组的 ID
}
```
:::
::: Windows
```cpp
template <class T>
class ValueCallback final : public V2TIMValueCallback<T> {
public:
    using SuccessCallback = std::function<void(const T&)>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    ValueCallback() = default;
    ~ValueCallback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess(const T& value) override {
        if (success_callback_) {
            success_callback_(value);
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

auto callback = new ValueCallback<V2TIMString>{};
callback->SetCallback(
    [=](const V2TIMString& string) {
        // 创建群组成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 创建群组失败
        delete callback;
    });

V2TIMManager::GetInstance()->CreateGroup("Work", {}, "groupA", callback);

// 监听群组创建通知
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    void OnGroupCreated(const V2TIMString& groupID) override {
        // 群创建回调，groupID 为新创建群组的 ID
    }
    // 其他成员 ...
};
// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);
```
:::
</dx-tabs>

### 高级接口
如果您想在创建群组的同时初始化群的信息，例如群简介、群头像、以及最初的几个群成员等，可以调用高级接口 `createGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupManager.html#a121d53137a38d0fc0bc8a8e0a9c55647) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/categoryV2TIMManager_07Group_08.html#a59824434b6096180b94d8152183dcd2c) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#a0325514b94a734186be684eb9bb5cc80)) 实现。创建成功的回调中会抛出 `groupID`。

示例代码如下：

<dx-tabs>
::: Android
```java
// 使用高级版 createGroup 创建一个工作群 
V2TIMGroupInfo v2TIMGroupInfo = new V2TIMGroupInfo();
v2TIMGroupInfo.setGroupName("testWork");
v2TIMGroupInfo.setGroupType("Work");
v2TIMGroupInfo.setIntroduction("this is a test Work group");

List<V2TIMCreateGroupMemberInfo> memberInfoList = new ArrayList<>();
V2TIMCreateGroupMemberInfo memberA = new V2TIMCreateGroupMemberInfo();
memberA.setUserID("vinson");
V2TIMCreateGroupMemberInfo memberB = new V2TIMCreateGroupMemberInfo();
memberB.setUserID("park");
memberInfoList.add(memberA);
memberInfoList.add(memberB);

V2TIMManager.getGroupManager().createGroup(
    v2TIMGroupInfo, memberInfoList, new V2TIMValueCallback<String>() {
	@Override
	public void onError(int code, String desc) {
		// 创建失败
	}
	@Override
	public void onSuccess(String groupID) {
		// 创建成功
	}
});
```
:::
::: iOS & Mac
```objectivec
// 使用高级版 createGroup 创建一个工作群 
V2TIMGroupInfo *info = [[V2TIMGroupInfo alloc] init];
info.groupName = @"testWork";
info.groupType = @"Work";
NSMutableArray *memberList = [NSMutableArray array];
V2TIMCreateGroupMemberInfo *memberInfo = [[V2TIMCreateGroupMemberInfo alloc] init];
memberInfo.userID = @"vinson";
[memberList addObject:memberInfo];
[[V2TIMManager sharedInstance] createGroup:info memberList:memberList succ:^(NSString *groupID) {
    // 创建群组成功
} fail:^(int code, NSString *msg) {
    // 创建群组失败
}];
```
:::
::: Windows
```cpp
template <class T>
class ValueCallback final : public V2TIMValueCallback<T> {
public:
    using SuccessCallback = std::function<void(const T&)>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    ValueCallback() = default;
    ~ValueCallback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess(const T& value) override {
        if (success_callback_) {
            success_callback_(value);
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

// 使用高级版 createGroup 创建一个工作群
V2TIMGroupInfo info;
info.groupType = "Work";
info.groupName = "testWork";
info.introduction = "this is a test Work group";

V2TIMCreateGroupMemberInfoVector memberInfoList;
V2TIMCreateGroupMemberInfo memberInfo1;
memberInfo1.userID = "vinson";
memberInfoList.PushBack(memberInfo1);
V2TIMCreateGroupMemberInfo memberInfo2;
memberInfo2.userID = "park";
memberInfoList.PushBack(memberInfo2);

auto callback = new ValueCallback<V2TIMString>{};
callback->SetCallback(
    [=](const V2TIMString& string) {
        // 创建成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 创建失败
        delete callback;
    });

V2TIMManager::GetInstance()->GetGroupManager()->CreateGroup(info, memberInfoList, callback);
```
:::
</dx-tabs>

[](id:joinGroup)
## 加入群组
不同类型的群组，加群的方法不同：

| 类型 | 加群方法 |
| --- | --- |
| 好友工作群（Work）| 必须由其他群成员邀请 |
| 陌生人社交群（Public）| 用户申请，群主或管理员审批 |
| 临时会议群（Meeting）| 用户可随意加入 |
| 社群（Community）| 用户可随意加入 |
| 直播群（AVChatRoom）| 用户可随意加入 |

下面将根据加群流程从简单到复杂进行逐一介绍。

> ! 接收以下群事件需要您按照上文 [群事件监听](#advance_page) 中所述，提前调用 `addGroupListener` 添加群事件监听器。

#### 自由加群
临时会议群（Meeting）、直播群（AVChatRoom）和社群（Community）主要用于满足成员随意进出的交互场景，例如在线会议，秀场直播等，因此这几种类型群的入群流程最为简单:
1. 加群者调用 `joinGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMManager.html#ad64a09bea508672d6d5a402b3455b564) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/interfaceV2TIMManager.html#a4762156b7a98489eb4715de53028e12a) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#adf3dc4604f30fde1d34dceb1990b38fe)) 加入群组。
2. 加群者加群成功后，全体群成员（包括加群者本人）都会收到 `onMemberEnter` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a85cbb33a40aaa41781e4835bf802db6d) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#aed6a96e6b304863586a107c45ba33f11) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#a420505f6b58f887dfc95aaa8526913d4)) 回调。

示例代码如下：
<dx-tabs>
::: Android
```java
// 加入群组
V2TIMManager.getInstance().joinGroup("groupA", "it's me!", new V2TIMCallback() {
  @Override
  public void onSuccess() {
  	// 加入群组成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 加入群组失败
  }
});

// 监听加入群组事件
V2TIMManager.getInstance().addGroupListener(new V2TIMGroupListener() {
  @Override
  public void onMemberEnter(String groupID, List<V2TIMGroupMemberInfo> memberList) {
  	// 有人加入群组
  }
});

```
:::
::: iOS & Mac
```objectivec
// 加入群组
[[V2TIMManager sharedInstance] joinGroup:@"groupA" msg:@"it's me!" succ:^{
    // 加入群组成功
} fail:^(int code, NSString *desc) {
    // 加入群组失败
}];

// 监听加入群组事件
[[V2TIMManager sharedInstance] addGroupListener:self];
- (void)onMemberEnter:(NSString *)groupID memberList:(NSArray<V2TIMGroupMemberInfo *>*)memberList {
    // 有人加入群组
}
```
:::
::: Windows
```cpp
class Callback final : public V2TIMCallback {
public:
    using SuccessCallback = std::function<void()>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    Callback() = default;
    ~Callback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess() override {
        if (success_callback_) {
            success_callback_();
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

auto callback = new Callback{};
callback->SetCallback(
    [=]() {
        // 加入群组成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 加入群组失败
        delete callback;
    });

V2TIMManager::GetInstance()->JoinGroup("groupA", "it's me!", callback);

// 监听加入群组事件
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    void OnMemberEnter(const V2TIMString& groupID, const V2TIMGroupMemberInfoVector& memberList) override {
        // 有人加入群组
    }
    // 其他成员 ...
};
// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);
```
:::
</dx-tabs> 

#### 邀请加群
好友工作群（Work）类似微信群和企业微信群，适用于工作交流，在交互设计上限制用户主动加入，只能由现有的群成员邀请才能加群。
加群步骤为：
1. 现有的群成员调用 `inviteUserToGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupManager.html#afd219107653b877e446c149531d65e92) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/categoryV2TIMManager_07Group_08.html#a942d75fdea66e22cdbd8c131cf18e1ea) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupManager.html#a46fecb95bf66ccc3023201fb3737c423)) 邀请另一个用户入群。
2. 全体群成员（包括邀请者自己）会收到 `onMemberInvited` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#af6119ca3c6eabcc63acbf012f508b1b1) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a6bff27f9f6859caefcaaf361b9c6fe68) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#a94cc6a91243cb46877909da96601135b)) 回调。您可以在这个回调中做一些 UI 上的提示。


示例代码如下：
<dx-tabs>
::: Android
```java
// 邀请 userA 用户进入群组 groupA 中
List<String> userIDList = new ArrayList<>();
userIDList.add("userA");
V2TIMManager.getGroupManager().inviteUserToGroup("groupA", userIDList, new V2TIMValueCallback<List<V2TIMGroupMemberOperationResult>>() {
  @Override
  public void onSuccess(List<V2TIMGroupMemberOperationResult> v2TIMGroupMemberOperationResults) {
  	// 邀请进群成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 邀请进群失败
  }
});

// 监听群组邀请事件
V2TIMManager.getInstance().addGroupListener(new V2TIMGroupListener() {
  @Override
  public void onMemberInvited(String groupID, V2TIMGroupMemberInfo opUser, List<V2TIMGroupMemberInfo> memberList) {
  	// 邀请进群事件。可以在这个回调中做一些 UI 上的提示
  }
});
```
:::
::: iOS & Mac
```objectivec
// 邀请 userA 用户进入群组 groupA 中
[[V2TIMManager sharedInstance] inviteUserToGroup:@"groupA" userList:@[@"userA"] succ:^(NSArray<V2TIMGroupMemberOperationResult *> *resultList) {
    // 邀请进群成功
} fail:^(int code, NSString *desc) {
    // 邀请进群失败
}];

// 监听群组邀请事件
[[V2TIMManager sharedInstance] addGroupListener:self];
- (void)onMemberInvited:(NSString *)groupID opUser:(V2TIMGroupMemberInfo *)opUser memberList:(NSArray<V2TIMGroupMemberInfo *>*)memberList {
    // 可以在这个回调中做一些 UI 上的提示
}
```
:::
::: Windows
```cpp
template <class T>
class ValueCallback final : public V2TIMValueCallback<T> {
public:
    using SuccessCallback = std::function<void(const T&)>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    ValueCallback() = default;
    ~ValueCallback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess(const T& value) override {
        if (success_callback_) {
            success_callback_(value);
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

// 邀请 userA 用户进入群组 groupA 中
V2TIMStringVector userList;
userList.PushBack("userA");

auto callback = new ValueCallback<V2TIMGroupMemberOperationResultVector>{};
callback->SetCallback(
    [=](const V2TIMGroupMemberOperationResultVector& groupMemberOperationResultList) {
        // 邀请进群成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 邀请进群失败
        delete callback;
    });

V2TIMManager::GetInstance()->GetGroupManager()->InviteUserToGroup("groupA", userList, callback);

// 监听群组邀请事件
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    void OnMemberInvited(const V2TIMString& groupID, const V2TIMGroupMemberInfo& opUser,
                         const V2TIMGroupMemberInfoVector& memberList) override {
        // 邀请进群事件。可以在这个回调中做一些 UI 上的提示
    }
    // 其他成员 ...
};
// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);
```
:::
</dx-tabs>

#### 邀请且审批加群
陌生人社交群（Public）类似 QQ 中的各种兴趣群和部落群，任何人都可以申请入群，但需要经过群主或管理员审批才能真正入群。

邀请且审批加群的流程如下：
![](https://main.qcloudimg.com/raw/8b0de43bea607a6a75571c1885ca75aa.svg)

流程说明：
1. 申请者调用 `joinGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMManager.html#ad64a09bea508672d6d5a402b3455b564) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/interfaceV2TIMManager.html#a4762156b7a98489eb4715de53028e12a) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#adf3dc4604f30fde1d34dceb1990b38fe)) 申请加群。

2. 群主或管理员收到加群申请通知 `onReceiveJoinApplication` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#adf0b34684efd46d6e31d31e7bc3643f9) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a481ab06916795cc9445fa3fc465c69ab) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#a9eca8f723ebd3e76d5b29ae7d73597b9)) ，在其中调用 `getGroupApplicationList` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupManager.html#a240db7bdc023ad6fc63e9ee9b72714c4) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/categoryV2TIMManager_07Group_08.html#a29c36ad685159850a30d61a6b9c637e8) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupManager.html#a4609879f4c67fde60a6fa4f707987143)) 获取加群申请列表。

3. 群主或管理员遍历加群申请列表，逐一调用 `acceptGroupApplication` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupManager.html#ad743008d30c909ef0be0f8aa91102e07) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/categoryV2TIMManager_07Group_08.html#a51bb9b4f965cb3d01546fef348ac75e4) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupManager.html#ae829188e149f59bb5b086825f6c94ab5)) 同意加群，或调用 `refuseGroupApplication` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupManager.html#aa518c54e77f7c0f6e7dd129d6c433acd) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/categoryV2TIMManager_07Group_08.html#a46aa78c54986b2c0b7cc0012a3dc94ef) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupManager.html#a7cf4cdc85fab3794399137726736571b)) 拒绝加群请求。

4. 请求加群被同意或者拒绝后，申请者会收到 `onApplicationProcessed` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#ac833c624e33036ec0454fe5444b8f00a) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a850a50e7ea6b86a2d28afa1a569245ca) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#af277d0953a62d07dd98f591613187ad4)) 回调。其中 `isAgreeJoin` 为 `true`/`YES` 表示同意加群，反之被拒绝。
   
5. 同意加群后，全员（包括请求者）收到 `onMemberEnter` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a85cbb33a40aaa41781e4835bf802db6d) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#aed6a96e6b304863586a107c45ba33f11) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#a420505f6b58f887dfc95aaa8526913d4)) 回调，通知群组成员有人进群。

示例代码如下：

<dx-tabs>
::: Android
```java
// ******群主端******//
// 1、群主端修改加群选项为需要审核
V2TIMGroupInfo groupInfo = new V2TIMGroupInfo();
groupInfo.setGroupID("groupB");
groupInfo.setGroupAddOpt(V2TIMGroupInfo.V2TIM_GROUP_ADD_AUTH);
V2TIMManager.getGroupManager().setGroupInfo(groupInfo, new V2TIMCallback() {
  @Override
  public void onSuccess() {
  	// 修改加群选项成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 修改加群选项失败
  }
});

// 2、群主端监听加群请求并处理
V2TIMManager.getInstance().addGroupListener(new V2TIMGroupListener() {
  @Override
  public void onReceiveJoinApplication(String groupID, V2TIMGroupMemberInfo member, String opReason) {
    V2TIMManager.getGroupManager().getGroupApplicationList(new V2TIMValueCallback<V2TIMGroupApplicationResult>() {
      @Override
      public void onSuccess(V2TIMGroupApplicationResult v2TIMGroupApplicationResult) {
        List<V2TIMGroupApplication> groupApplicationList = v2TIMGroupApplicationResult.getGroupApplicationList();
        for (V2TIMGroupApplication application : groupApplicationList) {
          if (application.getGroupID().equals(groupID) && application.getFromUser().equals(member.getUserID())) {
            // 同意进群
            if (agree) {
              // 同意入群申请
              V2TIMManager.getGroupManager().acceptGroupApplication(application, "agree", new V2TIMCallback() {
                @Override
                public void onSuccess() {
                	// 同意入群申请成功
                }

                @Override
                public void onError(int code, String desc) {
                	// 同意入群申请失败
                }
              });
            } else {
              // 拒绝入群申请
              V2TIMManager.getGroupManager().refuseGroupApplication(application, "not agree", new V2TIMCallback() {
                @Override
                public void onSuccess() {
                	// 拒绝入群申请成功
                }

                @Override
                public void onError(int code, String desc) {
                	// 拒绝入群申请失败
                }
              });
            }
            return;
          }
        }
        
        V2TIMManager.getGroupManager().setGroupApplicationRead(new V2TIMCallback() {
          @Override
          public void onSuccess() {
            // 标记加群申请列表为已读成功
          }

          @Override
          public void onError(int code, String desc) {
            // 标记加群申请列表为已读失败
          }
        });
      }

      @Override
      public void onError(int code, String desc) {
      // 获取群申请列表失败
      }
    });
  }
});

// ******用户端******//
// 1、用户端申请加群
V2TIMManager.getInstance().joinGroup("groupB", "it's me!", new V2TIMCallback() {
  @Override
  public void onSuccess() {
  	// 加入群组成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 加入群组失败
  }
});
// 2、用户端监听加群审批结果
V2TIMManager.getInstance().addGroupListener(new V2TIMGroupListener() {
  @Override
  public void onApplicationProcessed(String groupID, V2TIMGroupMemberInfo opUser, boolean isAgreeJoin,
  String opReason) {
  	// 请求加群申请被处理
  }

  @Override
  public void onMemberEnter(String groupID, List<V2TIMGroupMemberInfo> memberList) {
  	// 如果加群申请通过，收到该回调
  }
});
```
:::
::: iOS & Mac
```objectivec
// ******群主端******//
// 1、群主端修改加群选项为需要审核
V2TIMGroupInfo *info = [[V2TIMGroupInfo alloc] init];
info.groupID = @"groupA";
info.groupAddOpt = V2TIM_GROUP_ADD_AUTH;
[[V2TIMManager sharedInstance] setGroupInfo:info succ:^{
    // 修改加群选项成功
} fail:^(int code, NSString *desc) {
    // 修改加群选项成功
}];

// 2、群主端监听加群请求并处理
[[V2TIMManager sharedInstance] addGroupListener:self];
- (void)onReceiveJoinApplication:(NSString *)groupID member:(V2TIMGroupMemberInfo *)member opReason:(NSString *)opReason {
    [[V2TIMManager sharedInstance] getGroupApplicationList:^(V2TIMGroupApplicationResult *result) {
        for (V2TIMGroupApplication *application in result.applicationList) {
            if ([application.groupID isEqualToString:groupID] && [application.fromUser isEqualToString:member.userID]) {
                // 同意进群
                [[V2TIMManager sharedInstance] acceptGroupApplication:application reason:@"agree" succ:^{
                    // 同意入群申请成功
                } fail:^(int code, NSString *desc) {
                    // 同意入群申请失败
                }];
                
                // 拒绝进群
                [[V2TIMManager sharedInstance] refuseGroupApplication:application reason:@"refuse" succ:^{
                    // 拒绝入群申请成功
                } fail:^(int code, NSString *desc) {
                    // 拒绝入群申请失败
                }];
                
                // 标记申请已读
                [[V2TIMManager sharedInstance] setGroupApplicationRead:^{
                    // 标记加群申请列表为已读成功
                } fail:^(int code, NSString *desc) {
                    // 标记加群申请列表为已读失败
                }];
            }
        }
    } fail:^(int code, NSString *desc) {
        // 获取群申请列表失败
    }];
}

// ******申请端******//
// 1、用户端申请加群
[[V2TIMManager sharedInstance] joinGroup:@"groupA" msg:@"it's me!" succ:^{
    // 加入群组成功
} fail:^(int code, NSString *desc) {
    // 加入群组失败
}];

// 2、用户端监听加群审批结果
[[V2TIMManager sharedInstance] addGroupListener:self];
- (void)onApplicationProcessed:(NSString *)groupID opUser:(V2TIMGroupMemberInfo *)opUser opResult:(BOOL)isAgreeJoin opReason:(NSString *)opReason {
    // 请求加群申请被处理
}
- (void)onMemberEnter:(NSString *)groupID memberList:(NSArray<V2TIMGroupMemberInfo *>*)memberList; {
    // 如果加群申请通过，收到该回调
}
```
:::
::: Windows
```cpp
class Callback final : public V2TIMCallback {
public:
    using SuccessCallback = std::function<void()>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    Callback() = default;
    ~Callback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess() override {
        if (success_callback_) {
            success_callback_();
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

template <class T>
class ValueCallback final : public V2TIMValueCallback<T> {
public:
    using SuccessCallback = std::function<void(const T&)>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    ValueCallback() = default;
    ~ValueCallback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess(const T& value) override {
        if (success_callback_) {
            success_callback_(value);
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

////////////////////////////////////////////////// 群主端 //////////////////////////////////////////////////

// 1、群主端修改加群选项为需要审核
V2TIMGroupInfo info;
info.groupID = "groupB";
info.groupAddOpt = V2TIMGroupAddOpt::V2TIM_GROUP_ADD_AUTH;
info.modifyFlag = V2TIMGroupInfoModifyFlag::V2TIM_GROUP_INFO_MODIFY_FLAG_GROUP_ADD_OPTION;
auto callback = new Callback;
callback->SetCallback(
    [=]() {
        // 修改加群选项成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 修改加群选项失败
        delete callback;
    });
V2TIMManager::GetInstance()->GetGroupManager()->SetGroupInfo(info, callback);

// 2、群主端监听加群请求并处理
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    void OnReceiveJoinApplication(const V2TIMString& groupID, const V2TIMGroupMemberInfo& member,
                                  const V2TIMString& opReason) override {
        auto callback = new ValueCallback<V2TIMGroupApplicationResult>{};
        callback->SetCallback(
            [=](const V2TIMGroupApplicationResult& groupApplicationResult) {
                const V2TIMGroupApplicationVector& groupApplicationList =
                    groupApplicationResult.applicationList;
                for (size_t i = 0; i < groupApplicationList.Size(); ++i) {
                    const V2TIMGroupApplication& application = groupApplicationList[i];
                    if (application.groupID == groupID && application.fromUser == member.userID) {
                        if (...) {  // 同意入群
                            auto callback = new Callback;
                            callback->SetCallback(
                                [=]() {
                                    // 同意入群申请成功
                                    delete callback;
                                },
                                [=](int error_code, const V2TIMString& error_message) {
                                    // 同意入群申请失败
                                    delete callback;
                                });
                            V2TIMManager::GetInstance()->GetGroupManager()->AcceptGroupApplication(
                                application, "agree", callback);
                        } else {  // 拒绝入群
                            auto callback = new Callback;
                            callback->SetCallback(
                                [=]() {
                                    // 拒绝入群申请成功
                                    delete callback;
                                },
                                [=](int error_code, const V2TIMString& error_message) {
                                    // 拒绝入群申请失败
                                    delete callback;
                                });
                            V2TIMManager::GetInstance()->GetGroupManager()->RefuseGroupApplication(
                                application, "refuse", callback);
                        }
                        break;
                    }
                }

                auto callback = new Callback;
                callback->SetCallback(
                    [=]() {
                        // 标记加群申请列表为已读成功
                        delete callback;
                    },
                    [=](int error_code, const V2TIMString& error_message) {
                        // 标记加群申请列表为已读失败
                        delete callback;
                    });
                V2TIMManager::GetInstance()->GetGroupManager()->SetGroupApplicationRead(callback);

                delete callback;
            },
            [=](int error_code, const V2TIMString& error_message) {
                // 获取群申请列表失败
                delete callback;
            });

        V2TIMManager::GetInstance()->GetGroupManager()->GetGroupApplicationList(callback);
    }
    // 其他成员 ...
};
// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);

////////////////////////////////////////////////// 用户端 //////////////////////////////////////////////////

// 1、用户端申请加群
auto callback = new Callback{};
callback->SetCallback(
    [=]() {
        // 加入群组成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 加入群组失败
        delete callback;
    });
V2TIMManager::GetInstance()->JoinGroup("groupB", "it's me!", callback);

// 2、用户端监听加群审批结果
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    void OnApplicationProcessed(const V2TIMString& groupID, const V2TIMGroupMemberInfo& opUser,
                                bool isAgreeJoin, const V2TIMString& opReason) override {
        // 请求加群申请被处理
    }
    void OnMemberEnter(const V2TIMString& groupID, const V2TIMGroupMemberInfoVector& memberList) override {
        // 如果加群申请通过，收到该回调
    }
    // 其他成员 ...
};
// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);
```
:::
</dx-tabs>

群主或管理员也可以通过 `setGroupInfo` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupManager.html#ad4ceef92975fa00c4a5dddc8f7e1edcf) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/categoryV2TIMManager_07Group_08.html#aa9519a479493e56d7920e40aba796144) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupManager.html#a10785c46e166879250c2c2ba2001b354)) 接口调整加群选项（`V2TIMGroupAddOpt`），可以设置为更严格的 “禁止任何人加群”，也可以设置为更宽松的 “放开审批流程”。

`V2TIMGroupAddOpt` 的可选项有：

| 加群选项 | 含义 |
| --- | --- |
| V2TIM_GROUP_ADD_FORBID | 禁止任何人加群。 |
| V2TIM_GROUP_ADD_AUTH | 需要群主或管理员审批才能加入（默认值）。|
| V2TIM_GROUP_ADD_ANY | 取消审批流程，任何用户都可以加入。 |

[](id:getJoinedGroup)
## 获取已加入的群组
您可以调用 `getJoinedGroupList` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupManager.html#a0199b7cacc6919938d8342474bd252da) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/categoryV2TIMManager_07Group_08.html#a4599e99791c150cc9f3e2492e8b4ce04) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupManager.html#a3b740704edfeab9602867e284c2c7ba8)) 获取已加入的好友工作群（Work）、陌生人社交群（Public）、临时会议群（Meeting）、社群（Community，**不支持**话题功能）列表。但直播群（AVChatRoom）和 社群（Community，**支持**话题的社群）不包含在此列表中。

代码示例如下：

<dx-tabs>
::: Android
```java
V2TIMManager.getGroupManager().getJoinedGroupList(new V2TIMValueCallback<List<V2TIMGroupInfo>>() {
  @Override
  public void onSuccess(List<V2TIMGroupInfo> v2TIMGroupInfos) {
  	// 获取已加入的群组列表成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 获取已加入的群组列表失败
  }
});
```
:::
::: iOS & Mac
```objectivec
[[V2TIMManager sharedInstance] getJoinedGroupList:^(NSArray<V2TIMGroupInfo *> *groupList) {
    // 获取已加入的群组列表成功
} fail:^(int code, NSString *desc) {
    // 获取已加入的群组列表失败
}];
```
:::
::: Windows
```cpp
template <class T>
class ValueCallback final : public V2TIMValueCallback<T> {
public:
    using SuccessCallback = std::function<void(const T&)>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    ValueCallback() = default;
    ~ValueCallback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess(const T& value) override {
        if (success_callback_) {
            success_callback_(value);
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

auto callback = new ValueCallback<V2TIMGroupInfoVector>{};
callback->SetCallback(
    [=](const V2TIMGroupInfoVector& groupInfoList) {
        // 获取已加入的群组列表成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 获取已加入的群组列表失败
        delete callback;
    });

V2TIMManager::GetInstance()->GetGroupManager()->GetJoinedGroupList(callback);
```
:::
</dx-tabs>

[](id:quitGroup)
## 退出群组

您可以调用 `quitGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMManager.html#a6d140dbeb44906de9cb69f69c2ce5919) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/interfaceV2TIMManager.html#ac2a43b3ada447131df0c5f19e8079be5) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#a43ef277f0eb49d6087d140a09152eced)) 退出群组。
退群者会收到 `onQuitFromGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a489004526f1bd8daba7ac63fb0ad965f) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a9d4a0c42366ea13f688a3c369f91e80f) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#ad930fbe3e0167f6697f894c609fc510f)) 回调。
群组内其他成员会收到 `onMemberLeave` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a2169676423875e4c9c376796245ca8d5) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a27ca737d915d21810b7f54e8677922e0) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#ace37ae003f37fa8ae1aa3035b6c668c6)) 回调。

> ! 对于陌生人社交群（Public）、临时会议群（Meeting）、社群（Community）和直播群（AVChatRoom），群主**不可以**退群，只能 [解散群组](#dismiss)。

示例代码如下：

<dx-tabs>
::: Android
```java
V2TIMManager.getInstance().quitGroup("groupA", new V2TIMCallback() {
  @Override
  public void onSuccess() {
  	// 退出群组成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 退出群组失败
  }
});

V2TIMManager.getInstance().addGroupListener(new V2TIMGroupListener() {
  @Override
  public void onMemberLeave(String groupID, V2TIMGroupMemberInfo member) {
		// 群成员离开回调
  }
});
```
:::
::: iOS & Mac
```objectivec
[[V2TIMManager sharedInstance] quitGroup:@"groupA" succ:^{
    // 退出群组成功
} fail:^(int code, NSString *desc) {
    // 退出群组失败
}];

[[V2TIMManager sharedInstance] addGroupListener:self];
- (void)onMemberLeave:(NSString *)groupID member:(V2TIMGroupMemberInfo *)member {
    // 群成员离开回调
}
```
:::
::: Windows
```cpp
class Callback final : public V2TIMCallback {
public:
    using SuccessCallback = std::function<void()>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    Callback() = default;
    ~Callback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess() override {
        if (success_callback_) {
            success_callback_();
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

auto callback = new Callback{};
callback->SetCallback(
    [=]() {
        // 退出群组成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 退出群组失败
        delete callback;
    });
V2TIMManager::GetInstance()->QuitGroup("groupA", callback);

// 监听群成员离开通知
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    void OnMemberLeave(const V2TIMString& groupID, const V2TIMGroupMemberInfo& member) override {
        // 群成员离开回调
    }
    // 其他成员 ...
};
// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);
```
:::
</dx-tabs>


[](id:dismiss)
## 解散群组

您可以调用 `dismissGroup` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMManager.html#afd0221c0c842a6dcfa0acc657e50caeb) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/interfaceV2TIMManager.html#a5bd55cb04867985253949d8cc78f860e) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMManager.html#abfa30c09968c3b6d07c31d8d5a741502)) 解散群组，全员会收到 `onGroupDismissed` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a6e89728e160e126460a6b8eeddf00ad5) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a9063ce1847731024581f2b1ad6b9ed0a) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#a5f27455e6b0a90e9d34f716cd0fffaeb)) 回调。

如果您在服务器端设置了允许自动解散不活跃的群，当群被服务器端自动解散后，SDK 会收到 `onGroupRecycled` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a49de77b919f679f1631981ba2b186a55) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a5388d6acb25b007be79ed5ea49f756fb) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#a2f7f54eb026f3001d75d38d8e8b784d3)) 回调。

示例代码如下：

<dx-tabs>
::: Android
```java
V2TIMManager.getInstance().dismissGroup("groupA", new V2TIMCallback() {
  @Override
  public void onSuccess() {
  	// 解散群组成功
  }

  @Override
  public void onError(int code, String desc) {
  	// 解散群组失败
  }
});

V2TIMManager.getInstance().addGroupListener(new V2TIMGroupListener() {
  @Override
  public void onGroupDismissed(String groupID, V2TIMGroupMemberInfo opUser) {
  	// 群被解散回调
  }
  
  @Override
  public void onGroupRecycled(String groupID, V2TIMGroupMemberInfo opUser) {
  	// 群被回收回调
  }
});
```
:::
::: iOS & Mac
```objectivec
[[V2TIMManager sharedInstance] dismissGroup:@"groupA" succ:^{
    // 解散群组成功
} fail:^(int code, NSString *desc) {
    // 解散群组失败
}];

[[V2TIMManager sharedInstance] addGroupListener:self];
- (void)onGroupDismissed:(NSString *)groupID opUser:(V2TIMGroupMemberInfo *)opUser {
    // 群被解散回调
}

- (void)onGroupRecycled:(NSString *)groupID opUser:(V2TIMGroupMemberInfo *)opUser {
    // 群被回收回调
}
```
:::
::: Windows
```cpp
class Callback final : public V2TIMCallback {
public:
    using SuccessCallback = std::function<void()>;
    using ErrorCallback = std::function<void(int, const V2TIMString&)>;

    Callback() = default;
    ~Callback() override = default;

    void SetCallback(SuccessCallback success_callback, ErrorCallback error_callback) {
        success_callback_ = std::move(success_callback);
        error_callback_ = std::move(error_callback);
    }

    void OnSuccess() override {
        if (success_callback_) {
            success_callback_();
        }
    }
    void OnError(int error_code, const V2TIMString& error_message) override {
        if (error_callback_) {
            error_callback_(error_code, error_message);
        }
    }

private:
    SuccessCallback success_callback_;
    ErrorCallback error_callback_;
};

auto callback = new Callback{};
callback->SetCallback(
    [=]() {
        // 解散群组成功
        delete callback;
    },
    [=](int error_code, const V2TIMString& error_message) {
        // 解散群组失败
        delete callback;
    });
V2TIMManager::GetInstance()->DismissGroup("groupA", callback);

// 监听群解散/回收通知
class GroupListener final : public V2TIMGroupListener {
public:
    GroupListener() = default;
    ~GroupListener() override = default;

    void OnGroupDismissed(const V2TIMString& groupID, const V2TIMGroupMemberInfo& opUser) override {
        // 群被解散回调
    }
    void OnGroupRecycled(const V2TIMString& groupID, const V2TIMGroupMemberInfo& opUser) override {
        // 群被回收回调
    }
    // 其他成员 ...
};
// 添加群事件监听器，注意在移除监听器之前需要保持 groupListener 的生命期，以免接收不到事件回调
GroupListener groupListener;
V2TIMManager::GetInstance()->AddGroupListener(&groupListener);
```
:::
</dx-tabs>

## 接收群组自定义系统通知
如果您在自己的服务器端调用 REST API [向群组中发送自定义系统通知](https://cloud.tencent.com/document/product/269/1630)，那么 SDK 会回调 `onReceiveRESTCustomData` ([Android](https://im.sdk.qcloud.com/doc/zh-cn/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMGroupListener.html#a0775a137d293473aaed4cf9fc4c18795) / [iOS & Mac](https://im.sdk.qcloud.com/doc/zh-cn/protocolV2TIMGroupListener-p.html#a989347c455869dc0aa44572f4f2b7041) / [Windows](https://im.sdk.qcloud.com/doc/zh-cn/classV2TIMGroupListener.html#aa41c066e713dac9e71b31d77f2f65a7c)) ，在其中抛出您发送的自定义数据。


## 交流与反馈
欢迎加入 QQ 群进行技术交流和反馈问题*。
<img src="https://qcloudimg.tencent-cloud.cn/raw/e2050d5b5c894c7da725f8e25c5bfe82.jpg" style="zoom:20%;"/>
