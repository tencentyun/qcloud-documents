## 操作场景
云呼叫中心支持接入微信公众号、电话、微信小程序以及桌面网站，除了电话客服外，使用其他客服前您需要先接入相关渠道，并绑定相关会话服务流。

## 接入微信公众号
>?因微信功能限制，在微信公众号中不支持使用全媒体客服。

### 绑定公众号
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【微信公众号】。
4. 单击【+绑定公众号】。
5. 使用公众平台绑定的管理员微信扫描二维码。
6. 在微信平台上，选择需要授权的账号，单击【授权】。
 成功授权后可在微信公众号接入列表中查看已授权公众号。
 
### 删除公众号绑定关系
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【微信公众号】。
4. 在目标公众号所在行，单击【删除】。
5. 在弹出的提示框中，单击【确定】。
6. 登录 [微信公众平台](https://mp.weixin.qq.com/)。
7. 选择【公众号设置】>【授权管理】。
8. 在目标平台的平台详情页单击【取消授权】。

### 绑定会话服务流
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【微信公众号】。
4. 在目标公众号所在行，单击【关联会话服务流】。
5. 选择您需要与该公众号关联的会话服务流，单击【关联】后立即生效。

### 修改会话服务流
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【微信公众号】。
4. 在目标公众号所在行，单击【修改会话服务流】
5. 选择您需要与该公众号关联的会话服务流，单击【关联】后立即生效。

## 接入自定义微信小程序
为自定义微信小程序配置客服的操作，主要集中在微信开发者工具、[小程序管理后台](https://mp.weixin.qq.com/) 、小程序装载工具等平台，具体的操作流程请参见 [微信小程序全媒体客服](https://cloud.tencent.com/document/product/679/41406)。

### 绑定小程序
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【微信小程序-自定义】。
4. 单击【绑定微信小程序】。
5. 填写小程序名称、真实的 AppID 和真实的小程序密钥。
6. 单击【确认】。

### 删除小程序绑定关系
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【微信小程序-自定义】。
4. 在目标小程序所在行，单击【删除】。
5. 单击【确定】。

### 在小程序中装载呼叫中心
1. 下载并解压小程序装载工具 [ccc-store.zip](https://share.weiyun.com/5D5MI6k)。
2. 在解压文件的根目录下，执行以下目录，安装小程序装载工具。
```
npm install && sudo npm link
```
3. 在项目根目录下，执行以下命令，运行装载工具。
```
ccc-store install
```
4. 根据提示，输入以下参数：
 - sdkAppId：请输入当前呼叫中心实例的 SDKAppID。
 - ivrId：请输入会话服务流 ID。
 ![](https://main.qcloudimg.com/raw/696480fe7e9ed973d359d6270429116a.png)
>?在`ccc-config.js`文件中可以更改`sdkAppId`和`ivrId`参数。
>
5. 按`Enter`，完成装载任务。

>!首次使用 requestLogin（utils/login.js），必须使用 UserInfo 的 encryptedData、iv 和 wx.login 返回的 code 登录。
```
wx.login({
    success: res => {
        requestLogin({
            jsCode: res.code,
            encryptedData: UserInfo.encryptedData,
            iv: UserInfo.iv
        }).then(() => {
            // do something
        })
    }
})
```
如果使用 openid 登录，在调用 requestLogin 前，把 openid 存进 Storage 中。
```
wx.setStorageSync('openid', openid)
```
 

## 接入桌面网站
### 绑定网站
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【桌面网站】。
4. 单击【绑定桌面网站】。
5. 填写桌面网站名称和真实的桌面网站域名。
6. 单击【确认】。

### 删除网站绑定关系
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【桌面网站】。
4. 在目标网站所在行，单击【删除】。
5. 单击【确定】。

### 绑定会话服务流
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【桌面网站】。
4. 在目标网站所在行，单击【关联会话服务流】。
5. 选择您需要与该网站关联的会话服务流，单击【关联】后立即生效。

### 修改会话服务流
1. 以管理员身份登录呼叫中心 Demo。
2. 单击【管理工作台】，进入呼叫中心 Demo 数据概览页面。
3. 在左侧导航栏选择【渠道接入】>【桌面网站】。
4. 在目标网站所在行，单击【修改会话服务流】
5. 选择您需要与该公众号关联的会话服务流，单击【关联】后立即生效。
