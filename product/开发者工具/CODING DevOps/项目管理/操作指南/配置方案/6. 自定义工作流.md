本文为您详细介绍如何自定义配置方案中的工作流。

## 进入项目
1. 登录 [CODING 控制台](https://console.cloud.tencent.com/coding)，单击**立即使用**进入 CODING 使用页面。
2. 单击页面右上角的 <img src ="https://main.qcloudimg.com/raw/d94a8e60dd3a41d0af07d72ae0e9d70e.png" style ="margin:0">，进入项目列表页面，单击项目图标进入目标项目。
3. 单击进入左侧菜单栏中的**项目协同**功能。

[](id:intro)
## 功能介绍
企业团队在飞速发展的过程中，由于业务扩张，项目众多，不同项目间的研发模式往往存在巨大的差异，同时一个项目内也存在着来自不同需求方的多样化需求，难以进行统一的研发管理。
借助自定义工作流功能，可以自定义所有事项（史诗、用户故事、需求、任务、缺陷、子工作项）的工作流状态与步骤，例如，将**未开始 > 处理中 > 已完成**修改为**需求调研 > 需求评审 > 产品设计 > 产品开发 > 功能验收**工作流。能够在满足不同类型团队的个性化需求的同时，还能够配置统一的事项流转规则与流转方式。

[](id:example)
## 示例配置
本文将通过**团队级工作流配置**与**项目内工作流配置**两个模块，结合具体项目，介绍如何自定义团队专属的工作流。操作顺序为：
1. 先创建团队级状态，再从已有的团队级状态中，为不同的事项类型设置所需工作流状态。
2. 团队级工作流配置完成后，可在不同项目内，根据实际情况，调整各事项（史诗、用户故事、需求、任务、缺陷）中工作流流转规则。

[](id:global)
## 团队级工作流配置
[](id:permission)
### 确认权限
团队级状态设置影响整个团队的事项状态，因此仅有开启**管理权限**的用户组成员才能修改或添加自定义状态，可单击左下角的**团队设置中心**，在**组织与成员** > **权限配置** > **权限组**中查看详情。
![](https://qcloudimg.tencent-cloud.cn/raw/89365eb4dc6232266326e8bf924e0e88.png)
以游戏行业内美术开发项目为例，工作流状态一般涵盖 **文案确认** > **UI 设计** > **原画设计** > **模型设计** > **动画特效设计** > **确认交付**，项目类型在团队内属于刚需且工作流存在特殊性，因此可以在 [自定义事项类型](https://coding.net/help/docs/collaboration/configuration/type.html#global) 中创建自定义**美术需求**后，对该事项类型设置个性化工作流。
![](https://qcloudimg.tencent-cloud.cn/raw/3f1b130daa30ed80d56aa12168cfce94.png)

[](id:create)
### 设置状态
1. 单击左下角的**团队设置中心**，选择 **功能设置** > **项目协同** > **事项属性**即可进入状态设置页。通过右上方**创建状态**，填写状态名称、设定状态类型、添加状态描述（选填）后，即可创建自定义状态。  
将美术开发项目工作流中涉及到的状态添加进事项状态内，名称不可重复。
![](https://qcloudimg.tencent-cloud.cn/raw/e907de9611a880ce73044f23ccada1e8.png)
2. 前往**事项类型**，在**美术需求**的**操作**中选择**工作流**。
![](https://qcloudimg.tencent-cloud.cn/raw/6d365d02f78bbfbbf96d5bbdcce574df.png)
3. 进入工作流详情页后，选择**添加状态**，将涉及到的状态添加至工作流中，若打开**任何状态可转换到该状态**选项，则表示项目内的所有状态都可以切换至该目标状态。可在工作流左侧纵轴中设置初始状态，或将状态移除工作流。
![](https://qcloudimg.tencent-cloud.cn/raw/7638826566a5af7b728327372ead7e69.png)
<img style="width:600px; max-width: inherit;" src="https://qcloudimg.tencent-cloud.cn/raw/1d394624d078fe3f5a758a09ec22f8d9.png" />

[](id:edit)
### 修改/删除状态
在事项状态设置页内任一状态末端的**操作**菜单中，可编辑或删除状态。
![](https://qcloudimg.tencent-cloud.cn/raw/ef2acd41c6cfe238a89821ca21e25e35.png)

[](id:process)
### 设置步骤
步骤是指各状态间的流转，用于定义初始状态至目标状态时的流转过程。
1. 在美术需求工作流详情页中选择**创建步骤**。
![](https://qcloudimg.tencent-cloud.cn/raw/1a70f80c3a492460a1fc5a17f632e49b.png)
2. 可以指定该步骤的**开始状态**和**目标状态**，步骤名称默认为目标状态，也可进行修改。确认后即可**创建**。
例如确认文案后仅需制作原画，则可设定开始与目标状态为**文案确认** > **原画设计**，名称设置为**仅制作原画**，完成创建。
![](https://qcloudimg.tencent-cloud.cn/raw/a8e52e2648701600126776e7bb3222e3.png)
3. 也可以直接在**任何状态**栏中创建流转步骤，此时**开始状态**和**目标状态**由表格横列与纵列对应状态固定，仅能修改**步骤名称**。
<img style="width:700px; max-width: inherit;" src="https://qcloudimg.tencent-cloud.cn/raw/3abb40db8884a09a1572568eb094943d.png" />
>!在设置步骤时需要注意冲突。如图所示，由于设置了**任何状态**都可以切换至**文案确认**状态，因此覆盖了其他状态单独切换至**文案确认**状态的步骤，仅生效**任何状态** > **文案确认**步骤。
>![](https://qcloudimg.tencent-cloud.cn/raw/56580e87383679d767c99fdffabfd554.png)
>
4. 选择任一步骤，在右侧**步骤设置**中，可以修改步骤名称，或通过下方选项删除该步骤。
![](https://qcloudimg.tencent-cloud.cn/raw/f7d5c936d6ea3abfb183a5b27c2512d5.png)

[](id:rules)
### 配置规则
为工作流配置规则可以帮助团队在执行状态转换前检测限制条件，或者转换后自动执行多个自定义操作。
通过工作流详情页的**配置规则**，或选择某一指定状态，即可在右侧**步骤设置** > **规则** > **+** 进行步骤的规则配置。共有四种类型：限制步骤权限、附加属性、更改处理人、更改属性值，可根据团队需求进行配置。
![](https://qcloudimg.tencent-cloud.cn/raw/57ebc8f3f42a9efb466a1c7351aff201.png)

[](id:rules-1)
#### 限制步骤权限
默认情况下所有步骤都不会限制成员执行。通过设置限制步骤权限，可以仅放行项目中特定的用户组执行此流转步骤。例如需要项目管理员和产品经理确认后并变更至**已完成**步骤，那么可以在规则中添加相应的用户组成员，以防其他成员误操作。
![](https://qcloudimg.tencent-cloud.cn/raw/e060ac291bd166b019fe5cd98ffdb4f4.png)

[](id:rules-2)
#### 附加属性
该规则可配置多个属性组成表单，当状态变更时，成员需要录入配置的内容，状态才会进行变更。
例如在进行设计时发现文案设定错误，需记录错误并将状态转为**文案确认**，则可增加附加属性**评论**，并设定该属性必填，则处理人必须在评论内填写文案错误后才能变更状态。
![](https://qcloudimg.tencent-cloud.cn/raw/43898f6147e694f3de7c0a3d03278dee.png)

[](id:rules-3)
#### 更改处理人
若配置该规则，当状态变更后，将自动修改事项处理人。处理人支持选择默认属性、自定义成员属性和团队成员。
例如当动画特效设计完成，状态变更为**确认交付**后需要自动交由**需求结果评估员**汇总处理，需要进行以下设置：
1. 具备**项目协同设置**团队权限的用户组成员在**事项类型**中新建自定义成员属性。
![](https://qcloudimg.tencent-cloud.cn/raw/72aa2f7132e734ce66c3736a55a4fa60.png)
2. 指定能够成为评估员的团队成员。
![](https://qcloudimg.tencent-cloud.cn/raw/d847bc4c4a6e47168a798ba9ef186cf6.png)
3. 当步骤切换为**确认交付**时，选择处理人。
![](https://qcloudimg.tencent-cloud.cn/raw/733213d4258fb85b83b8662ff2bd3798.png)

[](id:rules-4)
#### 更改属性值
若配置该规则，当事项状态变更后，将自动修改已配置的属性值为指定的值。
例如需要实现如下工作流，当步骤调整为**确认交付**后，事项优先级调整为**低**。
则可进行以下操作：选择**配置规则**中的**更改属性值**，将**当前步骤**设置为**任何状态** > **确认交付**，选择**优先级**属性，将属性值更改为**低**，即可实现上述工作流。
![](https://qcloudimg.tencent-cloud.cn/raw/645a6a691d3dde4f515120f7aac8dc41.png)


### 工作流视图
工作流配置页包含两种视图：表格视图和列表视图。
- 在**表格视图**下，首列与首行分别表示开始状态与结束状态，表格内的方块表示状态变更时所提示的**步骤**。
![](https://qcloudimg.tencent-cloud.cn/raw/8f91a1469013a9d73ef2d983dc37a59f.png)
- 在**列表视图**下，每个状态配有一个表格，表格内展示了由当前状态作为开始状态时，涉及的多个步骤与用户权限。
![](https://qcloudimg.tencent-cloud.cn/raw/e3f0a5421db1a3fb90508e80b32a741a.png)

设置确认无误后，选择**应用配置**，该工作流将对所有项目生效。
![](https://qcloudimg.tencent-cloud.cn/raw/0d3e2984b6ae1933f918f9b608db47f8.png)

[](id:project)
## 项目内工作流配置
进入任一项目后，在左侧菜单中进入**项目设置** > **项目协同** > **事项类型**，通过右侧**添加事项类型**，即可新增在团队级工作流中配置完成的**美术需求**事项，并根据项目的实际开发工作流，在**操作**中对**工作流**进行修改，**可配置选项、操作与团队级工作流配置一致，可参考上文进行配置。**
**应用配置**后对该工作流的修改将仅在本项目内生效。
![](https://qcloudimg.tencent-cloud.cn/raw/58ffcc83553be36affda8c1a053be4ae.png)
在**经典项目管理**和 **Scrum 敏捷项目管理**下，规则内可更改的属性值有所不同。
例如：在经典项目管理下，需要实现**美术需求**中的事项流转至**确认交付**时，进度自动更新为 100%。
则可进行以下操作：在**美术需求**工作流中选择**更改属性值**，将当前步骤设置为**任何状态** > **确认交付**，将更改的属性选择为**进度**，填写进度为 100，即可实现上述工作流。
>!**由于存在子需求/子任务，因此在需求/任务工作流中均需进行配置。**
![](https://qcloudimg.tencent-cloud.cn/raw/c510f698b6fed1d8d908311f49f25afd.png)

[](id:applicate)
## 应用其他项目配置方案
单击配置页右上角的**应用其他配置方案**即可一键应用其他项目中已配置好的属性与工作流配置，提升工作效率。
![](https://qcloudimg.tencent-cloud.cn/raw/6e393c8cbe1bb22cf45ffbc279fcc67f.png)
