本文为您介绍如何使用 Service Hook 中的过滤器。

过滤器是过滤条件的组合。当用户选择某一个事件后，系统会根据该事件支持的过滤条件，拉取过滤条件表单。填写完成表单后，系统在发送事件时将按照过滤条件进行发送。因每个事件支持的过滤条件都不一样，故不支持多事件过滤条件。

[](id:example)
## 示例
以下图为例，选择事件**合并请求合并**时，系统会加载如下过滤条件：
- 仓库列表
- 目标分支
- 评审者
- 发起人

以图例选择的过滤条件为：
-   仓库：micro-management
-   目标分支：master
-   评审者：廖凯
-   发起人：全部

该**合并请求合并**事件只会在代码仓库 `micro-management` 下创建的合并请求，并且目标分支为 `master`，添加了评审者**廖凯**的合并请求才会触发该事件。
![](https://qcloudimg.tencent-cloud.cn/raw/52bc5cb524a43641f917024e4e067d66.png)

[](id:collaboration)
## 项目协同
[](id:iteration-event)
### 迭代事件
#### 创建迭代
无过滤条件。

#### 删除迭代、更新迭代、规划迭代
| 过滤条件 | 属性值 | 说明                                          |
| -------: | :----: | :-------------------------------------------- |
|     状态 | status | 取值范围：WAIT_PROCESS、PROCESSING、COMPLETED |

[](id:item-event)
### 事项事件
>? 任务、需求、缺陷都可以被抽象统称为**事项**。

事件：创建事项、删除事项、状态变更、增加评论、分配处理人、规划迭代、关联关系变更、更新事项信息、更新工时信息。

| 过滤条件 |  属性值  | 说明                                                                                                           |
| -------: | :------: | :------------------------------------------------------------------------------------------------------------- |
|     类型 |   type   | 取值范围：需求（REQUIREMENT）、任务（MISSION）、缺陷（DEFECT）、子工作项（SUB_TASK）、自定义事项类型编号（ID） |
|     状态 |  status  | 状态编号（ID）                                                                                                 |
|   处理人 | assignee | 处理人编号（ID）                                                                                               |
|     标签 |  label   | 标签（ID）                                                                                                     |
|   优先级 | priority | 低（0）、中（1）、高（2）、紧急（3）                                                                           |
|   关注者 | watcher  | 关注者编号（ID）                                                                                               |

[](id:repository)
## 代码托管
[](id:merge-request-event)
### 合并请求事件
事件：合并请求创建、合并请求更新、合并请求合并、合并请求关闭、合并请求评论。

| 过滤条件 |       属性值       | 说明                                                                                                                             |
| -------: | :----------------: | :------------------------------------------------------------------------------------------------------------------------------- |
| 仓库列表 |     depot_list     | 代码仓库编号（ID）                                                                                                               |
| 目标分支 |   target_branch    | 目标分支名                                                                                                                       |
|   评审者 |      reviewer      | 评审者编号（ID）                                                                                                                 |
|   发起人 |      creator       | 发起人编号（ID）                                                                                                                 |
| 变更内容 | change_the_content | 取值范围：原分支变更（original_branch_update）、目标分支变更（target_branch_update）、合并授权变更（merge_authorization_change） |

[](id:push-event)
### 代码推送事件
事件：代码推送。

| 过滤条件 |   属性值    | 说明               |
| -------: | :---------: | :----------------- |
| 仓库列表 | depot_list  | 代码仓库编号（ID） |
| 分支列表 | branch_list | 分支名             |
|   推送者 |   pusher    | 推送者编号（ID）   |

[](id:ci)
## 持续集成
[](id:ci-event)
### 构建计划事件
**事件：**创建构建计划、修改构建计划、删除构建计划。

| 过滤条件 |  属性值   | 说明               |
| -------: | :-------: | :----------------- |
| 代码仓库 | GIT_DEPOT | 代码仓库编号（ID） |

**事件：**启动构建计划、构建计划执行结束。

| 过滤条件 |    属性值    | 说明                                                                                                                |
| -------: | :----------: | :------------------------------------------------------------------------------------------------------------------ |
| 构建计划 |    CI_JOB    | 构建计划编号（ID）                                                                                                  |
| 触发方式 | TRIGGER_TYPE | 取值范围：代码更新触发（REF_CHANGE）、定时触发（CRON）、MR 触发（MR_CHANGE）、API 触发（API）、手动触发（MANUAL）   |
|   触发人 | TRIGGER_USER | 触发人编号（ID）                                                                                                    |
| 执行结果 | BUILD_RESULT | 取值范围：构建成功（SUCCEED）、构建失败（FAILED）、终止构建（ABORTED）、构建超时（TIMEOUT）、构建不稳定（UNSTABLE） |

[](id:artifact)
## 制品库
[](id:repository-event)
### 制品仓库事件
**事件：**推送制品、创建制品仓库、更新制品仓库配置、删除制品仓库。

| 过滤条件 | 属性值 | 说明               |
| -------: | :----: | :----------------- |
| 仓库名称 | repoId | 制品仓库编号（ID） |

**事件：**推送制品、更新制品、下载制品、删除制品、发布制品、禁止下载制品、恢复下载制品、下载制品阻断。

| 过滤条件 | 属性值 | 说明               |
| -------: | :----: | :----------------- |
| 仓库名称 | repoId | 制品仓库编号（ID） |
| 制品名称 | pkgId  | 制品编号（ID）     |

[](id:wiki)
## Wiki 文档
事件：文档新建、更新、移动、更改分享状态、更改访问设置、文档或文档树复制、文档移动到回收站、文档从回收站恢复、文档彻底删除。

| 过滤条件 | 属性值 | 说明            |
| -------: | :----: | :-------------- |
|     Wiki | wikis  | Wiki 编号（ID） |

[](id:file-disk)
## 文件网盘
[](id:single-file-event)
### 单文件操作事件
事件：文件新建、更新、重命名、更改分享状态、文件或文件夹移动、文件或文件夹复制、文件或文件夹移动到回收站、文件或文件夹从回收站恢复、文件或文件夹彻底删除。

| 过滤条件 | 属性值 | 说明           |
| -------: | :----: | :------------- |
|     文件 | files  | 文件编号（ID） |

[](id:project-member)
## 项目成员
[](id:member-event)
### 项目成员事件
事件：添加项目成员、移除项目成员、更新项目成员用户组。

| 过滤条件 |    属性值    | 说明             |
| -------: | :----------: | :--------------- |
|   用户组 | memberRoleId | 用户组编号（ID） |
