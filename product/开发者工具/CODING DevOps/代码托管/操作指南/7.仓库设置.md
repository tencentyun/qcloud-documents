本文为您详细介绍代码仓库的设置。

## 进入项目

1. 登录 [CODING 控制台](https://console.cloud.tencent.com/coding)，单击团队域名进入 CODING 使用页面。
2. 单击页面右上角的 <img src ="https://main.qcloudimg.com/raw/d94a8e60dd3a41d0af07d72ae0e9d70e.png" style ="margin:0">，进入项目列表页面，单击项目图标进入目标项目。
3. 选择左侧菜单【代码仓库】>【仓库设置】，进入仓库设置页面。

## 设置

您可以在设置页面查看代码仓库用量，进行部署公钥、文件锁定、分支设置等操作。

### 部署公钥

部署公钥用以部署公钥，只针对本项目，可设置拥有只读或者读写权限（默认为只读），不能跟个人公钥通用。

1. 选择【代码仓库】>【设置】>【部署公钥】>【新建部署公钥】。
![](https://main.qcloudimg.com/raw/17157e10c15b67cb2abd08cce5c7c9f6.png)
2. 填写公钥名称、公钥内容、公钥有效期、勾选是否授予推送权限，点击【新建】即可。
![](https://main.qcloudimg.com/raw/006c7cb9c66336f4c534aebe334ed8cd.png)

### 文件锁定

COING 支持针对 Git 仓库中的文件或路径进行锁定，目前只适用于默认分支。锁定后的文件，只有锁定者才能进行修改（包含编辑、删除等操作）。
![](https://main.qcloudimg.com/raw/0ff6a27ae1002511b2781b0ddf355f6a.png)

### 分支设置

您可以在此页面设置默认分支及保护分支。保护分支就是将特定的分支保护起来，防止被意外更改，破坏了整体。

开启保护分支后，该分支在分支列表中将以绿色盾牌为标志。成员修改保护分支时需先新建一个分支进行修改，然后创建合并请求并邀请其他成员评审代码。其他成员【允许合并】后可自行合并分支。

### 访问设置

该设置项控制代码仓库允许的访问方式。前两个选项默认都是勾选状态。如果取消这两个选项，那么将会导致 Git 客户端无法 clone / push 代码。并且所有从网页端下载代码的行为都会被禁止。【公开源代码】设置控制该代码仓库为私有仓库还是公开仓库，默认是关闭状态，即私有仓库状态。公开后代码仓库将允许任何人访问，请慎重考虑。
![](https://main.qcloudimg.com/raw/cd42c77d1eedae9e5966f9fc9e6ce9bf.png)

### 合并请求

**1. 合并请求时是否默认删除源分支**

如果是打开状态，那么当合并请求被正常合并入目标分支之后，源分支会被自动删除。

**2. 合并请求时默认以 Fast-Forward 模式合并**

如果是打开状态，那么当源分支是目标分支的直接上游时，合并会以 Fast-Forward 的模式进行，即源分支会直接指向目标分支，而不会产生一个合并提交。

**3. 合并请求源分支有新提交时自动取消合并授权**

开启后，当合并请求的源分支有新的代码推送后，原合并授权会自动取消。

当源分支有多个提交的时候，我们会提供三种合并模式：

- 默认直接合并：会产生一个合并提交
- 默认 Squash 合并：会把源分支的多个提交合并成一个提交，用户可以取消这个行为
- 只能 Squash 合并：强制把源分支的多个提交合并成一个提交，用户不能取消

### 重置代码仓库

这是一个危险的操作，重置之后，代码仓库将会变成一个空仓库，与代码相关的分支、代码标签、代码版本和合并请求都会丢失，并且不可恢复。代码仓库在被重置之前需要您再次确认要删除的代码仓库名称和用户密码。

### 删除代码仓库

这同样是一个危险的操作。这会删除整个代码仓库，并且不可恢复。同样在代码仓库被删除之前需要您再次确认要删除的代码仓库名称和用户密码。

> ? 您无法删除在创建项目时同时创建的默认代码仓库，其余后续新建的仓库都支持删除。


