本文为您详细介绍合并请求的管理与使用。

## 进入项目

1. 登录 [CODING 控制台](https://console.cloud.tencent.com/coding)，单击团队域名进入 CODING 使用页面。
2. 单击页面右上角的 <img src ="https://main.qcloudimg.com/raw/d94a8e60dd3a41d0af07d72ae0e9d70e.png" style ="margin:0">，进入项目列表页面，单击项目图标进入目标项目。
3. 选择左侧菜单【代码仓库】>【合并请求】，进入合并请求页面。



## 查看分支间差异

进入项目后，选择【代码仓库】>【代码对比】，进入代码对比页面。代码对比可对代码进行审查，系统会检测比较版本能否自动合并。具体功能演示可以参考 [提交详情](https://cloud.tencent.com/document/product/1112/43073#.E6.8F.90.E4.BA.A4.E8.AF.A6.E6.83.85) 。

可选择不同的分支、标签进行对比，单文件改动 TAB，即可查看所有代码行级改动。
![](https://main.qcloudimg.com/raw/6440c1416cb57f228838b6689254e4ac.png)

## 新建合并请求

创建合并请求，只支持分支与分支之间创建，请在左边填写目标分支，右边填写源分支。合并请求的目标分支默认为默认分支。当目标分支或源分支选择了 tag 或 sha1 时，或者源分支的提交不领先于目标分支时，不可创建合并请求。当系统显示为可合并时，才能创建合并请求。

开发者填写完合并请求的标题、描述（支持 Markdown 语法），添加该合并请求新增功能或 BUG 修复对应的任务或者相关的文件、合并请求、Wiki 等项目内资源，并选择分支管理员或任务相关的项目成员作为评审者，完成后即可创建合并请求。

代码评审者将会收到该合并请求创建的通知后，进行 [代码评审](https://cloud.tencent.com/document/product/1112/43073#.E4.BB.A3.E7.A0.81.E8.AF.84.E5.AE.A1)，评审通过后单击【允许合并】。当合并请求发起者收到分支管理员的合并允许通知后，即可合并该合并请求。
![](https://main.qcloudimg.com/raw/3a01afa17e3b0933eef5f599f5a1a9c0.png)

### 合并状态提示
#### 可自动合并
当源分支与目标分支对比后没有发现冲突，代码对比将展示它们之间的差异，并提示该分支可自动合并，可以创建合并请求并在线合并分支。
![](https://main.qcloudimg.com/raw/eb26ee292e855c96f8e916524684f774.png)

#### 不可自动合并
当源分支与目标分支对比后发现存在冲突，代码对比将展示它们之间的差异，并提示该分支不可自动合并，可以创建合并请求，但需解决冲突后才能继续合并分支。
![](https://main.qcloudimg.com/raw/00f526f21cce9147e1e1c831d389aa20.png)

#### 不可合并
当目标分支或源分支选择了 tag 或 sha1 时，代码对比将展示它们之间的差异，并提示该分支不可合并，不可创建合并请求。

#### 无法进行对比
当源分支的提交不领先于目标分支时，代码对比不会展示它们之间的差异，也不可创建合并请求。

### 代码评审
详情见 [代码评审](https://cloud.tencent.com/document/product/1112/43073#.E4.BB.A3.E7.A0.81.E8.AF.84.E5.AE.A1)。

#### 允许合并 / 取消允许合并
当前合并请求通过评审后，评审者单击【允许合并】，表明对发起者的代码质量认可。在合并请求合并前，评审者还可以取消某合并请求的允许合并操作。创建合并请求后可以在页面按照不同的条件进行过滤，并且还能够查看所有的请求与对应的评审进度。
![](https://main.qcloudimg.com/raw/cef041177815b9de5044fbcb9b65603e.png)

### 合并权限控制
当目标分支是保护分支时，合并请求发起者是保护分支管理员，他可以在无评审者允许的情况下自行合并合并请求。当合并请求发起者不是目标分支管理员时，他需要邀请分支管理员为评审者，并得到管理员允许合并后，才可合并合并请求。保护分支管理员可以合并当前该分支的所有合并请求。

当目标分支不是保护分支时，发起者不需得到任何项目成员的允许合并即可合并该合并请求。

分支权限控制详情见 [分支设置](https://cloud.tencent.com/document/product/1112/43074?!preview&!editLang=zh#.E5.88.86.E6.94.AF.E8.AE.BE.E7.BD.AE) 。

#### 删除源分支
合并分支时，勾选删除源分支，可在合并分支时删除源分支。
![](https://main.qcloudimg.com/raw/3340f01cfc9efbfb95df10d99d18a629.png)

#### Fast-Forward 模式合并
MR 和 PR 在合并的时候默认会产生一个合并提交，但是如果在合并的时候勾选了【 Fast-Forward 模式合并】，服务器会在合并的时候判断该 MR 或者 PR 是否符合“快进模式”合并，如果符合则会按照“快进模式”合并，不产生合并提交，如果是不符合“快进模式”合并的情况，则忽略该选项，依然以产生合并提交的方式合并。这个选项相当于 git merge 的 --ff 参数。
![](https://main.qcloudimg.com/raw/1ce0e13a632bb42b767da1cde74ab1ad.png)

### 取消合并请求
合并请求发起者和保护分支管理员，单击合并请求详情页的【取消】，即可取消合并请求。取消合并请求对源分支和目标分支无任何影响。
