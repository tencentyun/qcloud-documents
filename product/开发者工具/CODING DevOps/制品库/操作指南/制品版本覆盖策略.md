本文为您介绍制品库中的版本覆盖策略。

## 进入制品库功能页

1. 登录 [CODING 控制台](https://console.cloud.tencent.com/coding)，单击【立即使用】进入 CODING 使用页面。
2. 单击页面右上角的 <img src ="https://main.qcloudimg.com/raw/d94a8e60dd3a41d0af07d72ae0e9d70e.png" style ="margin:0">，进入项目列表页面，单击项目图标进入目标项目。
3. 单击左侧菜单栏的【制品管理】，进入制品库功能页面。

## 功能介绍

在软件开发过程的最后阶段，我们通常会将代码打包成相应制品，并赋予其相对应的版本号，最终发布到生产环境提供服务。**让制品拥有唯一的版本号，可以保障同一个版本的制品永远保持相同的行为，这对于部署及应用生命周期管理而言都非常有意义。**

在开发阶段，每次重新修改代码都有可能会产生新的制品，您可能需要依赖方频繁修改版本号来使用最新的版本。这将会非常不利于开发调试，因为如果在生产阶段随意覆盖同一个制品的版本，可能会带来管理上的混乱。

CODING 制品库提供了灵活的版本覆盖策略，可以保障 Docker 镜像版本的唯一，也可以重复发布同一个 npm 包的版本。您可以根据需要，针对制品的生命周期，设置合适的版本覆盖策略。

在 CODING 制品库中，您可以设置**仓库** / **包** / **版本** 的策略。其中，**版本覆盖策略生效的优先级： 版本 > 包 > 仓库**。接下来本文按照这三个层级来介绍如何设置制品版本覆盖策略、以及制品库提供的默认版本覆盖策略。

## 仓库的版本覆盖策略

单击【制品库】>【设置仓库】。
![](https://main.qcloudimg.com/raw/964cdbf9bad2980d70d061d7b863a40d.png)
单击【版本策略】，此处可设置该仓库下所有制品的版本是否允许覆盖。
![](https://main.qcloudimg.com/raw/05a21f60ef0a7a6c1fd049b1a6b93cf8.png)

>!目前 Maven 制品库较为特殊，多了一项：使用 [Maven SNAPSHOT](https://maven.apache.org/guides/getting-started/index.html)(快照)。

## 包的版本覆盖策略

单击具体包名可看到右侧的包详情页面。
![](https://main.qcloudimg.com/raw/3ad8fdb132e8e02b7557b92f7e404a1f.png)
单击【设置】即可对包的版本策略进行选择，默认情况下包使用本仓库的版本覆盖策略。
![](https://main.qcloudimg.com/raw/d8e5742ec2afda4edb7f5770535a9648.png)

## 版本的发布策略

用户可以将某个版本设置为**已发布**，标记为发布可以保障制品版本的唯一性，防止重复写入同一版本。
>!发布操作是不可逆的，当一个版本被设置为发布后，将无法取消发布状态。
>
将鼠标停放在某个版本上，会显示【标记为发布】按钮。
![](https://main.qcloudimg.com/raw/03513d80a14236fc6e83821c645b670c.png)
单击【标记为发布】按钮后，出现发布版本弹窗，单击【确认】即可。
![](https://main.qcloudimg.com/raw/e8e390f167925ba4cb1b898318425353.png)
发布成功后，该版本会显示一个**已发布**标签。
![](https://main.qcloudimg.com/raw/b7af842d9d3662b9ae3c7dace3b291bb.png)

## 默认的版本覆盖策略

制品库按照该制品类型的原生逻辑，提供了默认的版本覆盖策略，详情如下：

| 制品类型 | 仓库               | 包           | 版本   |
| :------- | ------------------ | ------------ | ------ |
| Docker   | 允许发布相同版本   | 继承仓库规则 | 未发布 |
| Maven    | Maven SNAPSHOT     | 继承仓库规则 | 未发布 |
| npm      | 不允许发布相同版本 | 继承仓库规则 | 未发布 |
| PyPI     | 不允许发布相同版本 | 继承仓库规则 | 未发布 |
| Generic  | 允许发布相同版本   | 继承仓库规则 | 未发布 |
| Helm     | 允许发布相同版本   | 继承仓库规则 | 未发布 |
| Composer | 不允许发布相同版本 | 继承仓库规则 | 未发布 |
| NuGet    | 不允许发布相同版本 | 继承仓库规则 | 未发布 |
| Conan    | 允许发布相同版本   | 继承仓库规则 | 未发布 |


