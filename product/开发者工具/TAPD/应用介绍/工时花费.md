TAPD 提供了一套完整的工时系统，帮助项目团队收集、统计、审核和分析各成员在各项工作项上所花费的工时，用来核算实时的项目人工成本投入，进而达到项目研发成本控制和管理，同时提高员工和项目执行效率。

本文档介绍如何在 TAPD 项目的各应用中进行工时管理与统计。

 

## 启用工时

**企业版** 的用户在 **设置 >其他设置 > 可选功能** 中可启用工时花费。花费度量单位可为“人时”或“人日”。
![图片描述](https://main.qcloudimg.com/raw/58844d117500dfed49cb77ceae582816.png)

启用工时系统后，需求与任务应用中将新增以下字段：

- **预估工时**：预估完成工作所需的时间，通常由处理人或开发人员在工作开始前填写。
- **花费**：负责人进行阶段性工作后，手动填写的耗费工时。
- **完成工时**：已经花费的总工时，系统自动计算。
- **剩余工时** 与 **超出工时**：系统根据公式自动计算。
  > 预估工时 + 超出工时 ＝ 完成工时 ＋ 剩余工时
- **进度跟踪**：当前工作的完成进度。
> 进度 = (完成工时) / (预估工时+超出工时) * 100%

  

 

## 设置预估工时

在创建或编辑需求、任务时，可以在右侧基本信息栏中，填写 **预估工时**。

>!若当前需求或任务已经填写了花费，则无法再次编辑预估工时。

![图片描述](https://main.qcloudimg.com/raw/af1950439c5890b8b328b2437556dff6.png)

 

## 填写花费

在需求与任务的详情页面，进入 **花费** 标签页，单击【填写花费】，即可进入填写。或单击右上方【更多】下拉，进入填写花费。
![图片描述](https://main.qcloudimg.com/raw/8138c5c6950f6abc6931a8cf9d03009a.png)
在花费填写窗口中，日期默认为当前；也可以更改日期，对填写历史花费。输入花费工时后，系统会按照公式自动计算剩余工时；也会提示超出工时（如有）。
在开发过程中，如果判断该需求超出预估工时，可以在填写花费窗口编辑剩余工时以修改总工作量。
![图片描述](https://main.qcloudimg.com/raw/75f3a2e829ed6a624c3832bc83869b5b.png)
填写花费后，花费标签页即会展示花费填写记录。对于同一条需求或任务，每个成员对每个日期仅可填写一条花费。如需调整当天花费，可以通过编辑或删除花费记录实现。
![图片描述](https://main.qcloudimg.com/raw/b9afdf316aecbe577d6484cefe703712.png)

 

## 工时相关逻辑

### 工时继承关系

因为业务对象存在父子关系，例如：父需求、子需求、子任务，所以工时也有对应的继承关系：
- 需求下有工时时，拆分子需求或任务后只有第一条会继承父需求的预估工时。
- 需求下有子需求或任务时，父需求的预估工时等于子需求或任务预估工时之和，而无法额外填写。

  

### 工时对进度的影响

- **任务**：当任务下剩余工时为0时，任务会自动跳转为“已完成”状态，任务的进度为100%。
- **需求**：因为需求的状态是由特定的生命周期流程控制的，当需求的剩余工时为0（进度为100%）时，需求的状态不会自动变更，需要等待当前状态下的处理人进行流转。

  如果流转至结束状态时，需求下有未结束的子需求或任务时，用户可以勾选是否关闭子需求或任务，并补足未完成的工时；否则剩余工时将自动清零。
